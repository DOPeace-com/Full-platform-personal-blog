{"ast":null,"code":"import bus from \"@/util/Bus\";\nexport default {\n  name: \"MySlid\",\n\n  data() {\n    return {\n      ok: false,\n      flag: false,\n      oldX: 0,\n      moveX: 0\n    };\n  },\n\n  mounted() {\n    this.binding();\n  },\n\n  methods: {\n    down(event) {\n      this.ok = false;\n      bus.emit(\"security\", this.ok);\n      this.flag = true;\n      var touch = event;\n\n      if (event.touches) {\n        touch = event.touches[0];\n      }\n\n      this.oldX = touch.clientX;\n    },\n\n    up() {\n      this.flag = false;\n    },\n\n    movement(event) {\n      /**\r\n       * 如果鼠标没有按下直接停止\r\n       */\n      if (!this.flag) {\n        return;\n      }\n\n      var touch = event;\n\n      if (event.touches) {\n        touch = event.touches[0];\n      }\n\n      var checkmove = touch.clientX - this.oldX;\n\n      if (checkmove <= 0) {\n        this.moveX = 40;\n        this.up();\n      }\n\n      if (this.moveX > this.$refs.box.clientWidth - 40) {\n        this.ok = true;\n        bus.emit(\"security\", this.ok);\n        this.up();\n      }\n\n      this.moveX = checkmove;\n    },\n\n    /*\r\n    * 绑定事件\r\n    * */\n    binding() {\n      /*\r\n      * 触摸事件\r\n      * */\n      this.$refs.btn.addEventListener('touchstart', this.down, false);\n      this.$refs.btn.addEventListener('touchend', this.up, false);\n      this.$refs.btn.addEventListener('touchmove', this.movement, false);\n      /*\r\n      * 鼠标事件\r\n      * */\n\n      this.$refs.btn.addEventListener('mousedown', this.down, false);\n      document.body.addEventListener('mouseup', this.up, false);\n      this.$refs.box.addEventListener('mousemove', this.movement, false);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAYA,OAAOA,GAAP,MAAgB,YAAhB;AACA,eAAe;EACbC,IAAI,EAAE,QADO;;EAEbC,IAAI,GAAE;IACJ,OAAM;MACJC,EAAE,EAAC,KADC;MAEJC,IAAI,EAAC,KAFD;MAGJC,IAAI,EAAC,CAHD;MAIJC,KAAK,EAAC;IAJF,CAAN;EAMD,CATY;;EAUbC,OAAO,GAAG;IACR,KAAKC,OAAL;EACD,CAZY;;EAabC,OAAO,EAAC;IACNC,IAAI,CAACC,KAAD,EAAO;MACT,KAAKR,EAAL,GAAQ,KAAR;MACAH,GAAG,CAACY,IAAJ,CAAS,UAAT,EAAoB,KAAKT,EAAzB;MACA,KAAKC,IAAL,GAAY,IAAZ;MACA,IAAIS,KAAI,GAAIF,KAAZ;;MACA,IAAIA,KAAK,CAACG,OAAV,EAAkB;QAChBD,KAAI,GAAIF,KAAK,CAACG,OAAN,CAAc,CAAd,CAAR;MACF;;MACA,KAAKT,IAAL,GAAYQ,KAAK,CAACE,OAAlB;IACD,CAVK;;IAWNC,EAAE,GAAE;MACF,KAAKZ,IAAL,GAAY,KAAZ;IACD,CAbK;;IAcNa,QAAQ,CAACN,KAAD,EAAO;MACb;;;MAGA,IAAG,CAAC,KAAKP,IAAT,EAAc;QACZ;MACF;;MACA,IAAIS,KAAI,GAAIF,KAAZ;;MACA,IAAIA,KAAK,CAACG,OAAV,EAAkB;QAChBD,KAAI,GAAIF,KAAK,CAACG,OAAN,CAAc,CAAd,CAAR;MACF;;MACA,IAAII,SAAQ,GAAIL,KAAK,CAACE,OAAN,GAAc,KAAKV,IAAnC;;MACA,IAAIa,SAAS,IAAE,CAAf,EAAiB;QACf,KAAKZ,KAAL,GAAY,EAAZ;QACA,KAAKU,EAAL;MACF;;MACA,IAAI,KAAKV,KAAL,GAAW,KAAKa,KAAL,CAAWC,GAAX,CAAeC,WAAf,GAA2B,EAA1C,EAA6C;QAC3C,KAAKlB,EAAL,GAAQ,IAAR;QACAH,GAAG,CAACY,IAAJ,CAAS,UAAT,EAAoB,KAAKT,EAAzB;QACA,KAAKa,EAAL;MACF;;MACA,KAAKV,KAAL,GAAaY,SAAb;IACD,CApCK;;IAqCN;;;IAGAV,OAAO,GAAE;MACL;;;MAGA,KAAKW,KAAL,CAAWG,GAAX,CAAeC,gBAAf,CAAgC,YAAhC,EAA6C,KAAKb,IAAlD,EAAuD,KAAvD;MACA,KAAKS,KAAL,CAAWG,GAAX,CAAeC,gBAAf,CAAgC,UAAhC,EAA2C,KAAKP,EAAhD,EAAmD,KAAnD;MACA,KAAKG,KAAL,CAAWG,GAAX,CAAeC,gBAAf,CAAgC,WAAhC,EAA4C,KAAKN,QAAjD,EAA0D,KAA1D;MACA;;;;MAGA,KAAKE,KAAL,CAAWG,GAAX,CAAeC,gBAAf,CAAgC,WAAhC,EAA4C,KAAKb,IAAjD,EAAsD,KAAtD;MACAc,QAAQ,CAACC,IAAT,CAAcF,gBAAd,CAA+B,SAA/B,EAAyC,KAAKP,EAA9C,EAAiD,KAAjD;MACA,KAAKG,KAAL,CAAWC,GAAX,CAAeG,gBAAf,CAAgC,WAAhC,EAA4C,KAAKN,QAAjD,EAA0D,KAA1D;IACJ;;EArDM;AAbK,CAAf","names":["bus","name","data","ok","flag","oldX","moveX","mounted","binding","methods","down","event","emit","touch","touches","clientX","up","movement","checkmove","$refs","box","clientWidth","btn","addEventListener","document","body"],"sourceRoot":"","sources":["C:\\Users\\章和平\\Documents\\DOP\\myWeb\\eqmonntion\\src\\components\\mysliding\\MySlid.vue"],"sourcesContent":["<template>\r\n  <div ref=\"box\" class=\"box\">\r\n    <!--滑块-->\r\n    <div ref=\"btn\" class=\"btn\" :style=\"'left:'+moveX+'px'\">&gt;&gt;</div>\r\n    <!--文字-->\r\n    <span class=\"text\">请向右滑动滑块</span>\r\n    <!--背景-->\r\n    <div ref=\"bg\" class=\"bg\" :style=\"'width:' +moveX+'px'\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport bus from \"@/util/Bus\";\r\nexport default {\r\n  name: \"MySlid\",\r\n  data(){\r\n    return{\r\n      ok:false,\r\n      flag:false,\r\n      oldX:0,\r\n      moveX:0,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.binding()\r\n  },\r\n  methods:{\r\n    down(event){\r\n      this.ok=false\r\n      bus.emit(\"security\",this.ok)\r\n      this.flag = true\r\n      var touch = event\r\n      if (event.touches){\r\n        touch = event.touches[0]\r\n      }\r\n      this.oldX = touch.clientX\r\n    },\r\n    up(){\r\n      this.flag = false\r\n    },\r\n    movement(event){\r\n      /**\r\n       * 如果鼠标没有按下直接停止\r\n       */\r\n      if(!this.flag){\r\n        return\r\n      }\r\n      var touch = event\r\n      if (event.touches){\r\n        touch = event.touches[0]\r\n      }\r\n      var checkmove = touch.clientX-this.oldX\r\n      if (checkmove<=0){\r\n        this.moveX =40\r\n        this.up()\r\n      }\r\n      if (this.moveX>this.$refs.box.clientWidth-40){\r\n        this.ok=true\r\n        bus.emit(\"security\",this.ok)\r\n        this.up()\r\n      }\r\n      this.moveX = checkmove\r\n    },\r\n    /*\r\n    * 绑定事件\r\n    * */\r\n    binding(){\r\n        /*\r\n        * 触摸事件\r\n        * */\r\n        this.$refs.btn.addEventListener('touchstart',this.down,false)\r\n        this.$refs.btn.addEventListener('touchend',this.up,false)\r\n        this.$refs.btn.addEventListener('touchmove',this.movement,false)\r\n        /*\r\n        * 鼠标事件\r\n        * */\r\n        this.$refs.btn.addEventListener('mousedown',this.down,false)\r\n        document.body.addEventListener('mouseup',this.up,false)\r\n        this.$refs.box.addEventListener('mousemove',this.movement,false)\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import \"src/less/main\";\r\n.okcl{\r\n  position: absolute;\r\n  width: 40px;\r\n  height: 32px;\r\n  z-index: 3;\r\n  color: @white;\r\n  border: 1px #2ac845 solid;\r\n  background-color: #2ac845;\r\n}\r\n.box{\r\n  position: relative;\r\n  height: 34px;\r\n  text-align: center;\r\n  background-color: #eeeeee;\r\n}\r\n.btn{\r\n  position: absolute;\r\n  width: 40px;\r\n  height: 32px;\r\n  z-index: 3;\r\n  background-color:@white;\r\n  border: 1px @shadow solid;\r\n}\r\n.text{\r\n  position: relative;\r\n  z-index: 2;\r\n}\r\n.bg{\r\n  position: absolute;\r\n  top: 0;\r\n  z-index: 1;\r\n  width: 0px;\r\n  height: 34px;\r\n  background-color: @bgColor_main;\r\n}\r\n@media (max-width: 768px) {\r\n  .box{\r\n    border-radius: 5px;\r\n    background-color: #eeeeee77;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}