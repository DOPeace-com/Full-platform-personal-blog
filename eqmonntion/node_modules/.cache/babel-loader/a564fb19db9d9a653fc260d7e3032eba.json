{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nconst app = createApp(App); //导入路由\n\nimport router from \"@/router\";\napp.use(router);\n/*\n* 配置动画的网页标题\n* */\n\nrouter.beforeEach((to, from, next) => {\n  document.title = to.meta.title + \" - Do Of Peace\";\n  iView.LoadingBar.start(); //console.log(\"store\",store);\n  //处理刷新界面动态路由丢失问题\n\n  let userToken = store.state.users.currentUser.UserToken;\n\n  if (userToken) {\n    //动态数组丢失说明用户刷新了页面\n    if (store.state.users.routers.length == 0) {\n      //从localStorage中获取菜单树。然后重新加载路由\n      let menuRoutes = [];\n      menuRoutes = util.initMenu(menuRoutes, JSON.parse(localStorage.getItem(\"menuData\")));\n      store.commit('users/updateRouter', menuRoutes); //确保addRoutes()时动态添加的路由已经被完全加载上去。\n\n      next({ ...to,\n        replace: true\n      });\n    } else {\n      next();\n    }\n  } else {\n    next();\n  }\n});\napp.mount('#app');","map":{"version":3,"names":["createApp","App","app","router","use","beforeEach","to","from","next","document","title","meta","iView","LoadingBar","start","userToken","store","state","users","currentUser","UserToken","routers","length","menuRoutes","util","initMenu","JSON","parse","localStorage","getItem","commit","replace","mount"],"sources":["C:/Users/章和平/Documents/DOP/eqmonntion/src/main.js"],"sourcesContent":["import { createApp } from 'vue'\nimport App from './App.vue'\nconst app = createApp(App);\n//导入路由\nimport router from \"@/router\";\n\n\napp.use(router)\n\n/*\n* 配置动画的网页标题\n* */\nrouter.beforeEach((to,from,next)=>{\n    document.title = to.meta.title + \" - Do Of Peace\"\n\n    iView.LoadingBar.start();\n    //console.log(\"store\",store);\n    //处理刷新界面动态路由丢失问题\n    let userToken = store.state.users.currentUser.UserToken;\n    if(userToken){\n        //动态数组丢失说明用户刷新了页面\n        if(store.state.users.routers.length == 0){\n            //从localStorage中获取菜单树。然后重新加载路由\n            let menuRoutes = [];\n            menuRoutes = util.initMenu(menuRoutes,JSON.parse(localStorage.getItem(\"menuData\")));\n            store.commit('users/updateRouter',menuRoutes);\n            //确保addRoutes()时动态添加的路由已经被完全加载上去。\n            next({ ...to, replace: true })\n        }else{\n            next();\n        }\n    }else{\n        next();\n    }\n})\n\napp.mount('#app')\n"],"mappings":"AAAA,SAASA,SAAT,QAA0B,KAA1B;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,MAAMC,GAAG,GAAGF,SAAS,CAACC,GAAD,CAArB,C,CACA;;AACA,OAAOE,MAAP,MAAmB,UAAnB;AAGAD,GAAG,CAACE,GAAJ,CAAQD,MAAR;AAEA;AACA;AACA;;AACAA,MAAM,CAACE,UAAP,CAAkB,CAACC,EAAD,EAAIC,IAAJ,EAASC,IAAT,KAAgB;EAC9BC,QAAQ,CAACC,KAAT,GAAiBJ,EAAE,CAACK,IAAH,CAAQD,KAAR,GAAgB,gBAAjC;EAEAE,KAAK,CAACC,UAAN,CAAiBC,KAAjB,GAH8B,CAI9B;EACA;;EACA,IAAIC,SAAS,GAAGC,KAAK,CAACC,KAAN,CAAYC,KAAZ,CAAkBC,WAAlB,CAA8BC,SAA9C;;EACA,IAAGL,SAAH,EAAa;IACT;IACA,IAAGC,KAAK,CAACC,KAAN,CAAYC,KAAZ,CAAkBG,OAAlB,CAA0BC,MAA1B,IAAoC,CAAvC,EAAyC;MACrC;MACA,IAAIC,UAAU,GAAG,EAAjB;MACAA,UAAU,GAAGC,IAAI,CAACC,QAAL,CAAcF,UAAd,EAAyBG,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAzB,CAAb;MACAb,KAAK,CAACc,MAAN,CAAa,oBAAb,EAAkCP,UAAlC,EAJqC,CAKrC;;MACAf,IAAI,CAAC,EAAE,GAAGF,EAAL;QAASyB,OAAO,EAAE;MAAlB,CAAD,CAAJ;IACH,CAPD,MAOK;MACDvB,IAAI;IACP;EACJ,CAZD,MAYK;IACDA,IAAI;EACP;AACJ,CAtBD;AAwBAN,GAAG,CAAC8B,KAAJ,CAAU,MAAV"},"metadata":{},"sourceType":"module"}