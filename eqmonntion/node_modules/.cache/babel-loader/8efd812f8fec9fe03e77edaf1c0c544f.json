{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/*!\n * =====================================================\n * Mui v3.7.0 (http://dev.dcloud.net.cn/mui)\n * =====================================================\n */\n\n/**\n * MUI核心JS\n * @type _L4.$|Function\n */\nvar mui = function (document, undefined) {\n  var readyRE = /complete|loaded|interactive/;\n  var idSelectorRE = /^#([\\w-]+)$/;\n  var classSelectorRE = /^\\.([\\w-]+)$/;\n  var tagSelectorRE = /^[\\w-]+$/;\n  var translateRE = /translate(?:3d)?\\((.+?)\\)/;\n  var translateMatrixRE = /matrix(3d)?\\((.+?)\\)/;\n\n  var $ = function (selector, context) {\n    context = context || document;\n    if (!selector) return wrap();\n    if (typeof selector === 'object') if ($.isArrayLike(selector)) {\n      return wrap($.slice.call(selector), null);\n    } else {\n      return wrap([selector], null);\n    }\n    if (typeof selector === 'function') return $.ready(selector);\n\n    if (typeof selector === 'string') {\n      try {\n        selector = selector.trim();\n\n        if (idSelectorRE.test(selector)) {\n          var found = document.getElementById(RegExp.$1);\n          return wrap(found ? [found] : []);\n        }\n\n        return wrap($.qsa(selector, context), selector);\n      } catch (e) {}\n    }\n\n    return wrap();\n  };\n\n  var wrap = function (dom, selector) {\n    dom = dom || [];\n    Object.setPrototypeOf(dom, $.fn);\n    dom.selector = selector || '';\n    return dom;\n  };\n\n  $.uuid = 0;\n  $.data = {};\n  /**\n   * extend(simple)\n   * @param {type} target\n   * @param {type} source\n   * @param {type} deep\n   * @returns {unresolved}\n   */\n\n  $.extend = function () {\n    //from jquery2\n    var options,\n        name,\n        src,\n        copy,\n        copyIsArray,\n        clone,\n        target = arguments[0] || {},\n        i = 1,\n        length = arguments.length,\n        deep = false;\n\n    if (typeof target === \"boolean\") {\n      deep = target;\n      target = arguments[i] || {};\n      i++;\n    }\n\n    if (typeof target !== \"object\" && !$.isFunction(target)) {\n      target = {};\n    }\n\n    if (i === length) {\n      target = this;\n      i--;\n    }\n\n    for (; i < length; i++) {\n      if ((options = arguments[i]) != null) {\n        for (name in options) {\n          src = target[name];\n          copy = options[name];\n\n          if (target === copy) {\n            continue;\n          }\n\n          if (deep && copy && ($.isPlainObject(copy) || (copyIsArray = $.isArray(copy)))) {\n            if (copyIsArray) {\n              copyIsArray = false;\n              clone = src && $.isArray(src) ? src : [];\n            } else {\n              clone = src && $.isPlainObject(src) ? src : {};\n            }\n\n            target[name] = $.extend(deep, clone, copy);\n          } else if (copy !== undefined) {\n            target[name] = copy;\n          }\n        }\n      }\n    }\n\n    return target;\n  };\n  /**\n   * mui noop(function)\n   */\n\n\n  $.noop = function () {};\n  /**\n   * mui slice(array)\n   */\n\n\n  $.slice = [].slice;\n  /**\n   * mui filter(array)\n   */\n\n  $.filter = [].filter;\n\n  $.type = function (obj) {\n    return obj == null ? String(obj) : class2type[{}.toString.call(obj)] || \"object\";\n  };\n  /**\n   * mui isArray\n   */\n\n\n  $.isArray = Array.isArray || function (object) {\n    return object instanceof Array;\n  };\n  /**\n   * mui isArrayLike \n   * @param {Object} obj\n   */\n\n\n  $.isArrayLike = function (obj) {\n    var length = !!obj && \"length\" in obj && obj.length;\n    var type = $.type(obj);\n\n    if (type === \"function\" || $.isWindow(obj)) {\n      return false;\n    }\n\n    return type === \"array\" || length === 0 || typeof length === \"number\" && length > 0 && length - 1 in obj;\n  };\n  /**\n   * mui isWindow(需考虑obj为undefined的情况)\n   */\n\n\n  $.isWindow = function (obj) {\n    return obj != null && obj === obj.window;\n  };\n  /**\n   * mui isObject\n   */\n\n\n  $.isObject = function (obj) {\n    return $.type(obj) === \"object\";\n  };\n  /**\n   * mui isPlainObject\n   */\n\n\n  $.isPlainObject = function (obj) {\n    return $.isObject(obj) && !$.isWindow(obj) && Object.getPrototypeOf(obj) === Object.prototype;\n  };\n  /**\n   * mui isEmptyObject\n   * @param {Object} o\n   */\n\n\n  $.isEmptyObject = function (o) {\n    for (var p in o) {\n      if (p !== undefined) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n  /**\n   * mui isFunction\n   */\n\n\n  $.isFunction = function (value) {\n    return $.type(value) === \"function\";\n  };\n  /**\n   * mui querySelectorAll\n   * @param {type} selector\n   * @param {type} context\n   * @returns {Array}\n   */\n\n\n  $.qsa = function (selector, context) {\n    context = context || document;\n    return $.slice.call(classSelectorRE.test(selector) ? context.getElementsByClassName(RegExp.$1) : tagSelectorRE.test(selector) ? context.getElementsByTagName(selector) : context.querySelectorAll(selector));\n  };\n  /**\n   * ready(DOMContentLoaded)\n   * @param {type} callback\n   * @returns {_L6.$}\n   */\n\n\n  $.ready = function (callback) {\n    if (readyRE.test(document.readyState)) {\n      callback($);\n    } else {\n      document.addEventListener('DOMContentLoaded', function () {\n        callback($);\n      }, false);\n    }\n\n    return this;\n  };\n  /**\n   * 将 fn 缓存一段时间后, 再被调用执行\n   * 此方法为了避免在 ms 段时间内, 执行 fn 多次. 常用于 resize , scroll , mousemove 等连续性事件中;\n   * 当 ms 设置为 -1, 表示立即执行 fn, 即和直接调用 fn 一样;\n   * 调用返回函数的 stop 停止最后一次的 buffer 效果\n   * @param {Object} fn\n   * @param {Object} ms\n   * @param {Object} context\n   */\n\n\n  $.buffer = function (fn, ms, context) {\n    var timer;\n    var lastStart = 0;\n    var lastEnd = 0;\n    var ms = ms || 150;\n\n    function run() {\n      if (timer) {\n        timer.cancel();\n        timer = 0;\n      }\n\n      lastStart = $.now();\n      fn.apply(context || this, arguments);\n      lastEnd = $.now();\n    }\n\n    return $.extend(function () {\n      if (!lastStart || // 从未运行过\n      lastEnd >= lastStart && $.now() - lastEnd > ms || // 上次运行成功后已经超过ms毫秒\n      lastEnd < lastStart && $.now() - lastStart > ms * 8 // 上次运行或未完成，后8*ms毫秒\n      ) {\n        run.apply(this, arguments);\n      } else {\n        if (timer) {\n          timer.cancel();\n        }\n\n        timer = $.later(run, ms, null, $.slice.call(arguments));\n      }\n    }, {\n      stop: function () {\n        if (timer) {\n          timer.cancel();\n          timer = 0;\n        }\n      }\n    });\n  };\n  /**\n   * each\n   * @param {type} elements\n   * @param {type} callback\n   * @returns {_L8.$}\n   */\n\n\n  $.each = function (elements, callback, hasOwnProperty) {\n    if (!elements) {\n      return this;\n    }\n\n    if (typeof elements.length === 'number') {\n      [].every.call(elements, function (el, idx) {\n        return callback.call(el, idx, el) !== false;\n      });\n    } else {\n      for (var key in elements) {\n        if (hasOwnProperty) {\n          if (elements.hasOwnProperty(key)) {\n            if (callback.call(elements[key], key, elements[key]) === false) return elements;\n          }\n        } else {\n          if (callback.call(elements[key], key, elements[key]) === false) return elements;\n        }\n      }\n    }\n\n    return this;\n  };\n\n  $.focus = function (element) {\n    if ($.os.ios) {\n      setTimeout(function () {\n        element.focus();\n      }, 10);\n    } else {\n      element.focus();\n    }\n  };\n  /**\n   * trigger event\n   * @param {type} element\n   * @param {type} eventType\n   * @param {type} eventData\n   * @returns {_L8.$}\n   */\n\n\n  $.trigger = function (element, eventType, eventData) {\n    element.dispatchEvent(new CustomEvent(eventType, {\n      detail: eventData,\n      bubbles: true,\n      cancelable: true\n    }));\n    return this;\n  };\n  /**\n   * getStyles\n   * @param {type} element\n   * @param {type} property\n   * @returns {styles}\n   */\n\n\n  $.getStyles = function (element, property) {\n    var styles = element.ownerDocument.defaultView.getComputedStyle(element, null);\n\n    if (property) {\n      return styles.getPropertyValue(property) || styles[property];\n    }\n\n    return styles;\n  };\n  /**\n   * parseTranslate\n   * @param {type} translateString\n   * @param {type} position\n   * @returns {Object}\n   */\n\n\n  $.parseTranslate = function (translateString, position) {\n    var result = translateString.match(translateRE || '');\n\n    if (!result || !result[1]) {\n      result = ['', '0,0,0'];\n    }\n\n    result = result[1].split(\",\");\n    result = {\n      x: parseFloat(result[0]),\n      y: parseFloat(result[1]),\n      z: parseFloat(result[2])\n    };\n\n    if (position && result.hasOwnProperty(position)) {\n      return result[position];\n    }\n\n    return result;\n  };\n  /**\n   * parseTranslateMatrix\n   * @param {type} translateString\n   * @param {type} position\n   * @returns {Object}\n   */\n\n\n  $.parseTranslateMatrix = function (translateString, position) {\n    var matrix = translateString.match(translateMatrixRE);\n    var is3D = matrix && matrix[1];\n\n    if (matrix) {\n      matrix = matrix[2].split(\",\");\n      if (is3D === \"3d\") matrix = matrix.slice(12, 15);else {\n        matrix.push(0);\n        matrix = matrix.slice(4, 7);\n      }\n    } else {\n      matrix = [0, 0, 0];\n    }\n\n    var result = {\n      x: parseFloat(matrix[0]),\n      y: parseFloat(matrix[1]),\n      z: parseFloat(matrix[2])\n    };\n\n    if (position && result.hasOwnProperty(position)) {\n      return result[position];\n    }\n\n    return result;\n  };\n\n  $.hooks = {};\n\n  $.addAction = function (type, hook) {\n    var hooks = $.hooks[type];\n\n    if (!hooks) {\n      hooks = [];\n    }\n\n    hook.index = hook.index || 1000;\n    hooks.push(hook);\n    hooks.sort(function (a, b) {\n      return a.index - b.index;\n    });\n    $.hooks[type] = hooks;\n    return $.hooks[type];\n  };\n\n  $.doAction = function (type, callback) {\n    if ($.isFunction(callback)) {\n      //指定了callback\n      $.each($.hooks[type], callback);\n    } else {\n      //未指定callback，直接执行\n      $.each($.hooks[type], function (index, hook) {\n        return !hook.handle();\n      });\n    }\n  };\n  /**\n   * setTimeout封装\n   * @param {Object} fn\n   * @param {Object} when\n   * @param {Object} context\n   * @param {Object} data\n   */\n\n\n  $.later = function (fn, when, context, data) {\n    when = when || 0;\n    var m = fn;\n    var d = data;\n    var f;\n    var r;\n\n    if (typeof fn === 'string') {\n      m = context[fn];\n    }\n\n    f = function () {\n      m.apply(context, $.isArray(d) ? d : [d]);\n    };\n\n    r = setTimeout(f, when);\n    return {\n      id: r,\n      cancel: function () {\n        clearTimeout(r);\n      }\n    };\n  };\n\n  $.now = Date.now || function () {\n    return +new Date();\n  };\n\n  var class2type = {};\n  $.each(['Boolean', 'Number', 'String', 'Function', 'Array', 'Date', 'RegExp', 'Object', 'Error'], function (i, name) {\n    class2type[\"[object \" + name + \"]\"] = name.toLowerCase();\n  });\n\n  if (window.JSON) {\n    $.parseJSON = JSON.parse;\n  }\n  /**\n   * $.fn\n   */\n\n\n  $.fn = {\n    each: function (callback) {\n      [].every.call(this, function (el, idx) {\n        return callback.call(el, idx, el) !== false;\n      });\n      return this;\n    }\n  };\n  /**\n   * 兼容 AMD 模块\n   **/\n\n  if (typeof define === 'function' && define.amd) {\n    define('mui', [], function () {\n      return $;\n    });\n  }\n\n  return $;\n}(document);\n\nmodule.exports = {\n  install: function (Vue) {\n    window.mui = mui;\n    Vue.prototype.$mui = mui;\n  }\n}; //window.mui = mui;\n//'$' in window || (window.$ = mui);\n\n/**\n * $.os\n * @param {type} $\n * @returns {undefined}\n */\n\n(function ($, window) {\n  function detect(ua) {\n    this.os = {};\n    var funcs = [function () {\n      //wechat\n      var wechat = ua.match(/(MicroMessenger)\\/([\\d\\.]+)/i);\n\n      if (wechat) {\n        //wechat\n        this.os.wechat = {\n          version: wechat[2].replace(/_/g, '.')\n        };\n      }\n\n      return false;\n    }, function () {\n      //android\n      var android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n\n      if (android) {\n        this.os.android = true;\n        this.os.version = android[2];\n        this.os.isBadAndroid = !/Chrome\\/\\d/.test(window.navigator.appVersion);\n      }\n\n      return this.os.android === true;\n    }, function () {\n      //ios\n      var iphone = ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n\n      if (iphone) {\n        //iphone\n        this.os.ios = this.os.iphone = true;\n        this.os.version = iphone[2].replace(/_/g, '.');\n      } else {\n        var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n\n        if (ipad) {\n          //ipad\n          this.os.ios = this.os.ipad = true;\n          this.os.version = ipad[2].replace(/_/g, '.');\n        }\n      }\n\n      return this.os.ios === true;\n    }];\n    [].every.call(funcs, function (func) {\n      return !func.call($);\n    });\n  }\n\n  detect.call($, navigator.userAgent);\n})(mui, window);\n/**\n * $.os.plus\n * @param {type} $\n * @returns {undefined}\n */\n\n\n(function ($, document) {\n  function detect(ua) {\n    this.os = this.os || {};\n    var plus = ua.match(/Html5Plus/i); //TODO 5\\+Browser?\n\n    if (plus) {\n      this.os.plus = true;\n      $(function () {\n        document.body.classList.add('mui-plus');\n      });\n\n      if (ua.match(/StreamApp/i)) {\n        //TODO 最好有流应用自己的标识\n        this.os.stream = true;\n        $(function () {\n          document.body.classList.add('mui-plus-stream');\n        });\n      }\n    }\n  }\n\n  detect.call($, navigator.userAgent);\n})(mui, document);\n/**\n * 仅提供简单的on，off(仅支持事件委托，不支持当前元素绑定，当前元素绑定请直接使用addEventListener,removeEventListener)\n * @param {Object} $\n */\n\n\n(function ($) {\n  if ('ontouchstart' in window) {\n    $.isTouchable = true;\n    $.EVENT_START = 'touchstart';\n    $.EVENT_MOVE = 'touchmove';\n    $.EVENT_END = 'touchend';\n  } else {\n    $.isTouchable = false;\n    $.EVENT_START = 'mousedown';\n    $.EVENT_MOVE = 'mousemove';\n    $.EVENT_END = 'mouseup';\n  }\n\n  $.EVENT_CANCEL = 'touchcancel';\n  $.EVENT_CLICK = 'click';\n  var _mid = 1;\n  var delegates = {}; //需要wrap的函数\n\n  var eventMethods = {\n    preventDefault: 'isDefaultPrevented',\n    stopImmediatePropagation: 'isImmediatePropagationStopped',\n    stopPropagation: 'isPropagationStopped'\n  }; //默认true返回函数\n\n  var returnTrue = function () {\n    return true;\n  }; //默认false返回函数\n\n\n  var returnFalse = function () {\n    return false;\n  }; //wrap浏览器事件\n\n\n  var compatible = function (event, target) {\n    if (!event.detail) {\n      event.detail = {\n        currentTarget: target\n      };\n    } else {\n      event.detail.currentTarget = target;\n    }\n\n    $.each(eventMethods, function (name, predicate) {\n      var sourceMethod = event[name];\n\n      event[name] = function () {\n        this[predicate] = returnTrue;\n        return sourceMethod && sourceMethod.apply(event, arguments);\n      };\n\n      event[predicate] = returnFalse;\n    }, true);\n    return event;\n  }; //简单的wrap对象_mid\n\n\n  var mid = function (obj) {\n    return obj && (obj._mid || (obj._mid = _mid++));\n  }; //事件委托对象绑定的事件回调列表\n\n\n  var delegateFns = {}; //返回事件委托的wrap事件回调\n\n  var delegateFn = function (element, event, selector, callback) {\n    return function (e) {\n      //same event\n      var callbackObjs = delegates[element._mid][event];\n      var handlerQueue = [];\n      var target = e.target;\n      var selectorAlls = {};\n\n      for (; target && target !== document; target = target.parentNode) {\n        if (target === element) {\n          break;\n        }\n\n        if (~['click', 'tap', 'doubletap', 'longtap', 'hold'].indexOf(event) && (target.disabled || target.classList.contains('mui-disabled'))) {\n          break;\n        }\n\n        var matches = {};\n        $.each(callbackObjs, function (selector, callbacks) {\n          //same selector\n          selectorAlls[selector] || (selectorAlls[selector] = $.qsa(selector, element));\n\n          if (selectorAlls[selector] && ~selectorAlls[selector].indexOf(target)) {\n            if (!matches[selector]) {\n              matches[selector] = callbacks;\n            }\n          }\n        }, true);\n\n        if (!$.isEmptyObject(matches)) {\n          handlerQueue.push({\n            element: target,\n            handlers: matches\n          });\n        }\n      }\n\n      selectorAlls = null;\n      e = compatible(e); //compatible event\n\n      $.each(handlerQueue, function (index, handler) {\n        target = handler.element;\n        var tagName = target.tagName;\n\n        if (event === 'tap' && tagName !== 'INPUT' && tagName !== 'TEXTAREA' && tagName !== 'SELECT') {\n          e.preventDefault();\n          e.detail && e.detail.gesture && e.detail.gesture.preventDefault();\n        }\n\n        $.each(handler.handlers, function (index, handler) {\n          $.each(handler, function (index, callback) {\n            if (callback.call(target, e) === false) {\n              e.preventDefault();\n              e.stopPropagation();\n            }\n          }, true);\n        }, true);\n\n        if (e.isPropagationStopped()) {\n          return false;\n        }\n      }, true);\n    };\n  };\n\n  var findDelegateFn = function (element, event) {\n    var delegateCallbacks = delegateFns[mid(element)];\n    var result = [];\n\n    if (delegateCallbacks) {\n      result = [];\n\n      if (event) {\n        var filterFn = function (fn) {\n          return fn.type === event;\n        };\n\n        return delegateCallbacks.filter(filterFn);\n      } else {\n        result = delegateCallbacks;\n      }\n    }\n\n    return result;\n  };\n\n  var preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\n  /**\n   * mui delegate events\n   * @param {type} event\n   * @param {type} selector\n   * @param {type} callback\n   * @returns {undefined}\n   */\n\n  $.fn.on = function (event, selector, callback) {\n    //仅支持简单的事件委托,主要是tap事件使用，类似mouse,focus之类暂不封装支持\n    return this.each(function () {\n      var element = this;\n      mid(element);\n      mid(callback);\n      var isAddEventListener = false;\n      var delegateEvents = delegates[element._mid] || (delegates[element._mid] = {});\n      var delegateCallbackObjs = delegateEvents[event] || (delegateEvents[event] = {});\n\n      if ($.isEmptyObject(delegateCallbackObjs)) {\n        isAddEventListener = true;\n      }\n\n      var delegateCallbacks = delegateCallbackObjs[selector] || (delegateCallbackObjs[selector] = []);\n      delegateCallbacks.push(callback);\n\n      if (isAddEventListener) {\n        var delegateFnArray = delegateFns[mid(element)];\n\n        if (!delegateFnArray) {\n          delegateFnArray = [];\n        }\n\n        var delegateCallback = delegateFn(element, event, selector, callback);\n        delegateFnArray.push(delegateCallback);\n        delegateCallback.i = delegateFnArray.length - 1;\n        delegateCallback.type = event;\n        delegateFns[mid(element)] = delegateFnArray;\n        element.addEventListener(event, delegateCallback);\n\n        if (event === 'tap') {\n          //TODO 需要找个更好的解决方案\n          element.addEventListener('click', function (e) {\n            if (e.target) {\n              var tagName = e.target.tagName;\n\n              if (!preventDefaultException.test(tagName)) {\n                if (tagName === 'A') {\n                  var href = e.target.href;\n\n                  if (!(href && ~href.indexOf('tel:'))) {\n                    e.preventDefault();\n                  }\n                } else {\n                  e.preventDefault();\n                }\n              }\n            }\n          });\n        }\n      }\n    });\n  };\n\n  $.fn.off = function (event, selector, callback) {\n    return this.each(function () {\n      var _mid = mid(this);\n\n      if (!event) {\n        //mui(selector).off();\n        delegates[_mid] && delete delegates[_mid];\n      } else if (!selector) {\n        //mui(selector).off(event);\n        delegates[_mid] && delete delegates[_mid][event];\n      } else if (!callback) {\n        //mui(selector).off(event,selector);\n        delegates[_mid] && delegates[_mid][event] && delete delegates[_mid][event][selector];\n      } else {\n        //mui(selector).off(event,selector,callback);\n        var delegateCallbacks = delegates[_mid] && delegates[_mid][event] && delegates[_mid][event][selector];\n        $.each(delegateCallbacks, function (index, delegateCallback) {\n          if (mid(delegateCallback) === mid(callback)) {\n            delegateCallbacks.splice(index, 1);\n            return false;\n          }\n        }, true);\n      }\n\n      if (delegates[_mid]) {\n        //如果off掉了所有当前element的指定的event事件，则remove掉当前element的delegate回调\n        if (!delegates[_mid][event] || $.isEmptyObject(delegates[_mid][event])) {\n          findDelegateFn(this, event).forEach(function (fn) {\n            this.removeEventListener(fn.type, fn);\n            delete delegateFns[_mid][fn.i];\n          }.bind(this));\n        }\n      } else {\n        //如果delegates[_mid]已不存在，删除所有\n        findDelegateFn(this).forEach(function (fn) {\n          this.removeEventListener(fn.type, fn);\n          delete delegateFns[_mid][fn.i];\n        }.bind(this));\n      }\n    });\n  };\n})(mui);\n/**\n * mui target(action>popover>modal>tab>toggle)\n */\n\n\n(function ($, window, document) {\n  /**\n   * targets\n   */\n  $.targets = {};\n  /**\n   * target handles\n   */\n\n  $.targetHandles = [];\n  /**\n   * register target\n   * @param {type} target\n   * @returns {$.targets}\n   */\n\n  $.registerTarget = function (target) {\n    target.index = target.index || 1000;\n    $.targetHandles.push(target);\n    $.targetHandles.sort(function (a, b) {\n      return a.index - b.index;\n    });\n    return $.targetHandles;\n  };\n\n  window.addEventListener($.EVENT_START, function (event) {\n    var target = event.target;\n    var founds = {};\n\n    for (; target && target !== document; target = target.parentNode) {\n      var isFound = false;\n      $.each($.targetHandles, function (index, targetHandle) {\n        var name = targetHandle.name;\n\n        if (!isFound && !founds[name] && targetHandle.hasOwnProperty('handle')) {\n          $.targets[name] = targetHandle.handle(event, target);\n\n          if ($.targets[name]) {\n            founds[name] = true;\n\n            if (targetHandle.isContinue !== true) {\n              isFound = true;\n            }\n          }\n        } else {\n          if (!founds[name]) {\n            if (targetHandle.isReset !== false) $.targets[name] = false;\n          }\n        }\n      });\n\n      if (isFound) {\n        break;\n      }\n    }\n  });\n  window.addEventListener('click', function (event) {\n    //解决touch与click的target不一致的问题(比如链接边缘点击时，touch的target为html，而click的target为A)\n    var target = event.target;\n    var isFound = false;\n\n    for (; target && target !== document; target = target.parentNode) {\n      if (target.tagName === 'A') {\n        $.each($.targetHandles, function (index, targetHandle) {\n          var name = targetHandle.name;\n\n          if (targetHandle.hasOwnProperty('handle')) {\n            if (targetHandle.handle(event, target)) {\n              isFound = true;\n              event.preventDefault();\n              return false;\n            }\n          }\n        });\n\n        if (isFound) {\n          break;\n        }\n      }\n    }\n  });\n})(mui, window, document);\n/**\n * fixed trim\n * @param {type} undefined\n * @returns {undefined}\n */\n\n\n(function (undefined) {\n  if (String.prototype.trim === undefined) {\n    // fix for iOS 3.2\n    String.prototype.trim = function () {\n      return this.replace(/^\\s+|\\s+$/g, '');\n    };\n  }\n\n  Object.setPrototypeOf = Object.setPrototypeOf || function (obj, proto) {\n    obj['__proto__'] = proto;\n    return obj;\n  };\n})();\n/**\n * fixed CustomEvent\n */\n\n\n(function () {\n  if (typeof window.CustomEvent === 'undefined') {\n    function CustomEvent(event, params) {\n      params = params || {\n        bubbles: false,\n        cancelable: false,\n        detail: undefined\n      };\n      var evt = document.createEvent('Events');\n      var bubbles = true;\n\n      for (var name in params) {\n        name === 'bubbles' ? bubbles = !!params[name] : evt[name] = params[name];\n      }\n\n      evt.initEvent(event, bubbles, true);\n      return evt;\n    }\n\n    ;\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent;\n  }\n})();\n/*\n\tA shim for non ES5 supporting browsers.\n\tAdds function bind to Function prototype, so that you can do partial application.\n\tWorks even with the nasty thing, where the first word is the opposite of extranet, the second one is the profession of Columbus, and the version number is 9, flipped 180 degrees.\n*/\n\n\nFunction.prototype.bind = Function.prototype.bind || function (to) {\n  // Make an array of our arguments, starting from second argument\n  var partial = Array.prototype.splice.call(arguments, 1),\n      // We'll need the original function.\n  fn = this;\n\n  var bound = function () {\n    // Join the already applied arguments to the now called ones (after converting to an array again).\n    var args = partial.concat(Array.prototype.splice.call(arguments, 0)); // If not being called as a constructor\n\n    if (!(this instanceof bound)) {\n      // return the result of the function called bound to target and partially applied.\n      return fn.apply(to, args);\n    } // If being called as a constructor, apply the function bound to self.\n\n\n    fn.apply(this, args);\n  }; // Attach the prototype of the function to our newly created function.\n\n\n  bound.prototype = fn.prototype;\n  return bound;\n};\n/**\n * mui fixed classList\n * @param {type} document\n * @returns {undefined}\n */\n\n\n(function (document) {\n  if (!(\"classList\" in document.documentElement) && Object.defineProperty && typeof HTMLElement !== 'undefined') {\n    Object.defineProperty(HTMLElement.prototype, 'classList', {\n      get: function () {\n        var self = this;\n\n        function update(fn) {\n          return function (value) {\n            var classes = self.className.split(/\\s+/),\n                index = classes.indexOf(value);\n            fn(classes, index, value);\n            self.className = classes.join(\" \");\n          };\n        }\n\n        var ret = {\n          add: update(function (classes, index, value) {\n            ~index || classes.push(value);\n          }),\n          remove: update(function (classes, index) {\n            ~index && classes.splice(index, 1);\n          }),\n          toggle: update(function (classes, index, value) {\n            ~index ? classes.splice(index, 1) : classes.push(value);\n          }),\n          contains: function (value) {\n            return !!~self.className.split(/\\s+/).indexOf(value);\n          },\n          item: function (i) {\n            return self.className.split(/\\s+/)[i] || null;\n          }\n        };\n        Object.defineProperty(ret, 'length', {\n          get: function () {\n            return self.className.split(/\\s+/).length;\n          }\n        });\n        return ret;\n      }\n    });\n  }\n})(document);\n/**\n * mui fixed requestAnimationFrame\n * @param {type} window\n * @returns {undefined}\n */\n\n\n(function (window) {\n  if (!window.requestAnimationFrame) {\n    var lastTime = 0;\n\n    window.requestAnimationFrame = window.webkitRequestAnimationFrame || function (callback, element) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\n      var id = window.setTimeout(function () {\n        callback(currTime + timeToCall);\n      }, timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n\n    window.cancelAnimationFrame = window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || function (id) {\n      clearTimeout(id);\n    };\n  }\n\n  ;\n})(window);\n/**\n * fastclick(only for radio,checkbox)\n */\n\n\n(function ($, window, name) {\n  if (!$.os.android && !$.os.ios) {\n    //目前仅识别android和ios\n    return;\n  }\n\n  if (window.FastClick) {\n    return;\n  }\n\n  var handle = function (event, target) {\n    if (target.tagName === 'LABEL') {\n      if (target.parentNode) {\n        target = target.parentNode.querySelector('input');\n      }\n    }\n\n    if (target && (target.type === 'radio' || target.type === 'checkbox')) {\n      if (!target.disabled) {\n        //disabled\n        return target;\n      }\n    }\n\n    return false;\n  };\n\n  $.registerTarget({\n    name: name,\n    index: 40,\n    handle: handle,\n    target: false\n  });\n\n  var dispatchEvent = function (event) {\n    var targetElement = $.targets.click;\n\n    if (targetElement) {\n      var clickEvent, touch; // On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect\n\n      if (document.activeElement && document.activeElement !== targetElement) {\n        document.activeElement.blur();\n      }\n\n      touch = event.detail.gesture.changedTouches[0]; // Synthesise a click event, with an extra attribute so it can be tracked\n\n      clickEvent = document.createEvent('MouseEvents');\n      clickEvent.initMouseEvent('click', true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n      clickEvent.forwardedTouchEvent = true;\n      targetElement.dispatchEvent(clickEvent);\n      event.detail && event.detail.gesture.preventDefault();\n    }\n  };\n\n  window.addEventListener('tap', dispatchEvent);\n  window.addEventListener('doubletap', dispatchEvent); //捕获\n\n  window.addEventListener('click', function (event) {\n    if ($.targets.click) {\n      if (!event.forwardedTouchEvent) {\n        //stop click\n        if (event.stopImmediatePropagation) {\n          event.stopImmediatePropagation();\n        } else {\n          // Part of the hack for browsers that don't support Event#stopImmediatePropagation\n          event.propagationStopped = true;\n        }\n\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n      }\n    }\n  }, true);\n})(mui, window, 'click');\n\n(function ($, document) {\n  $(function () {\n    if (!$.os.ios) {\n      return;\n    }\n\n    var CLASS_FOCUSIN = 'mui-focusin';\n    var CLASS_BAR_TAB = 'mui-bar-tab';\n    var CLASS_BAR_FOOTER = 'mui-bar-footer';\n    var CLASS_BAR_FOOTER_SECONDARY = 'mui-bar-footer-secondary';\n    var CLASS_BAR_FOOTER_SECONDARY_TAB = 'mui-bar-footer-secondary-tab'; // var content = document.querySelector('.' + CLASS_CONTENT);\n    // if (content) {\n    // \tdocument.body.insertBefore(content, document.body.firstElementChild);\n    // }\n\n    document.addEventListener('focusin', function (e) {\n      if ($.os.plus) {\n        //在父webview里边不fix\n        if (window.plus) {\n          if (plus.webview.currentWebview().children().length > 0) {\n            return;\n          }\n        }\n      }\n\n      var target = e.target; //TODO 需考虑所有键盘弹起的情况\n\n      if (target.tagName && (target.tagName === 'TEXTAREA' || target.tagName === 'INPUT' && (target.type === 'text' || target.type === 'search' || target.type === 'number'))) {\n        if (target.disabled || target.readOnly) {\n          return;\n        }\n\n        document.body.classList.add(CLASS_FOCUSIN);\n        var isFooter = false;\n\n        for (; target && target !== document; target = target.parentNode) {\n          var classList = target.classList;\n\n          if (classList && classList.contains(CLASS_BAR_TAB) || classList.contains(CLASS_BAR_FOOTER) || classList.contains(CLASS_BAR_FOOTER_SECONDARY) || classList.contains(CLASS_BAR_FOOTER_SECONDARY_TAB)) {\n            isFooter = true;\n            break;\n          }\n        }\n\n        if (isFooter) {\n          var scrollTop = document.body.scrollHeight;\n          var scrollLeft = document.body.scrollLeft;\n          setTimeout(function () {\n            window.scrollTo(scrollLeft, scrollTop);\n          }, 20);\n        }\n      }\n    });\n    document.addEventListener('focusout', function (e) {\n      var classList = document.body.classList;\n\n      if (classList.contains(CLASS_FOCUSIN)) {\n        classList.remove(CLASS_FOCUSIN);\n        setTimeout(function () {\n          window.scrollTo(document.body.scrollLeft, document.body.scrollTop);\n        }, 20);\n      }\n    });\n  });\n})(mui, document);\n/**\n * mui namespace(optimization)\n * @param {type} $\n * @returns {undefined}\n */\n\n\n(function ($) {\n  $.namespace = 'mui';\n  $.classNamePrefix = $.namespace + '-';\n  $.classSelectorPrefix = '.' + $.classNamePrefix;\n  /**\n   * 返回正确的className\n   * @param {type} className\n   * @returns {String}\n   */\n\n  $.className = function (className) {\n    return $.classNamePrefix + className;\n  };\n  /**\n   * 返回正确的classSelector\n   * @param {type} classSelector\n   * @returns {String}\n   */\n\n\n  $.classSelector = function (classSelector) {\n    return classSelector.replace(/\\./g, $.classSelectorPrefix);\n  };\n  /**\n   * 返回正确的eventName\n   * @param {type} event\n   * @param {type} module\n   * @returns {String}\n   */\n\n\n  $.eventName = function (event, module) {\n    return event + ($.namespace ? '.' + $.namespace : '') + (module ? '.' + module : '');\n  };\n})(mui);\n/**\n * mui gestures\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n\n\n(function ($, window) {\n  $.gestures = {\n    session: {}\n  };\n  /**\n   * Gesture preventDefault\n   * @param {type} e\n   * @returns {undefined}\n   */\n\n  $.preventDefault = function (e) {\n    e.preventDefault();\n  };\n  /**\n   * Gesture stopPropagation\n   * @param {type} e\n   * @returns {undefined}\n   */\n\n\n  $.stopPropagation = function (e) {\n    e.stopPropagation();\n  };\n  /**\n   * register gesture\n   * @param {type} gesture\n   * @returns {$.gestures}\n   */\n\n\n  $.addGesture = function (gesture) {\n    return $.addAction('gestures', gesture);\n  };\n\n  var round = Math.round;\n  var abs = Math.abs;\n  var sqrt = Math.sqrt;\n  var atan = Math.atan;\n  var atan2 = Math.atan2;\n  /**\n   * distance\n   * @param {type} p1\n   * @param {type} p2\n   * @returns {Number}\n   */\n\n  var getDistance = function (p1, p2, props) {\n    if (!props) {\n      props = ['x', 'y'];\n    }\n\n    var x = p2[props[0]] - p1[props[0]];\n    var y = p2[props[1]] - p1[props[1]];\n    return sqrt(x * x + y * y);\n  };\n  /**\n   * scale\n   * @param {Object} starts\n   * @param {Object} moves\n   */\n\n\n  var getScale = function (starts, moves) {\n    if (starts.length >= 2 && moves.length >= 2) {\n      var props = ['pageX', 'pageY'];\n      return getDistance(moves[1], moves[0], props) / getDistance(starts[1], starts[0], props);\n    }\n\n    return 1;\n  };\n  /**\n   * angle\n   * @param {type} p1\n   * @param {type} p2\n   * @returns {Number}\n   */\n\n\n  var getAngle = function (p1, p2, props) {\n    if (!props) {\n      props = ['x', 'y'];\n    }\n\n    var x = p2[props[0]] - p1[props[0]];\n    var y = p2[props[1]] - p1[props[1]];\n    return atan2(y, x) * 180 / Math.PI;\n  };\n  /**\n   * direction\n   * @param {Object} x\n   * @param {Object} y\n   */\n\n\n  var getDirection = function (x, y) {\n    if (x === y) {\n      return '';\n    }\n\n    if (abs(x) >= abs(y)) {\n      return x > 0 ? 'left' : 'right';\n    }\n\n    return y > 0 ? 'up' : 'down';\n  };\n  /**\n   * rotation\n   * @param {Object} start\n   * @param {Object} end\n   */\n\n\n  var getRotation = function (start, end) {\n    var props = ['pageX', 'pageY'];\n    return getAngle(end[1], end[0], props) - getAngle(start[1], start[0], props);\n  };\n  /**\n   * px per ms\n   * @param {Object} deltaTime\n   * @param {Object} x\n   * @param {Object} y\n   */\n\n\n  var getVelocity = function (deltaTime, x, y) {\n    return {\n      x: x / deltaTime || 0,\n      y: y / deltaTime || 0\n    };\n  };\n  /**\n   * detect gestures\n   * @param {type} event\n   * @param {type} touch\n   * @returns {undefined}\n   */\n\n\n  var detect = function (event, touch) {\n    if ($.gestures.stoped) {\n      return;\n    }\n\n    $.doAction('gestures', function (index, gesture) {\n      if (!$.gestures.stoped) {\n        if ($.options.gestureConfig[gesture.name] !== false) {\n          gesture.handle(event, touch);\n        }\n      }\n    });\n  };\n  /**\n   * 暂时无用\n   * @param {Object} node\n   * @param {Object} parent\n   */\n\n\n  var hasParent = function (node, parent) {\n    while (node) {\n      if (node == parent) {\n        return true;\n      }\n\n      node = node.parentNode;\n    }\n\n    return false;\n  };\n\n  var uniqueArray = function (src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n      var val = key ? src[i][key] : src[i];\n\n      if (values.indexOf(val) < 0) {\n        results.push(src[i]);\n      }\n\n      values[i] = val;\n      i++;\n    }\n\n    if (sort) {\n      if (!key) {\n        results = results.sort();\n      } else {\n        results = results.sort(function sortUniqueArray(a, b) {\n          return a[key] > b[key];\n        });\n      }\n    }\n\n    return results;\n  };\n\n  var getMultiCenter = function (touches) {\n    var touchesLength = touches.length;\n\n    if (touchesLength === 1) {\n      return {\n        x: round(touches[0].pageX),\n        y: round(touches[0].pageY)\n      };\n    }\n\n    var x = 0;\n    var y = 0;\n    var i = 0;\n\n    while (i < touchesLength) {\n      x += touches[i].pageX;\n      y += touches[i].pageY;\n      i++;\n    }\n\n    return {\n      x: round(x / touchesLength),\n      y: round(y / touchesLength)\n    };\n  };\n\n  var multiTouch = function () {\n    return $.options.gestureConfig.pinch;\n  };\n\n  var copySimpleTouchData = function (touch) {\n    var touches = [];\n    var i = 0;\n\n    while (i < touch.touches.length) {\n      touches[i] = {\n        pageX: round(touch.touches[i].pageX),\n        pageY: round(touch.touches[i].pageY)\n      };\n      i++;\n    }\n\n    return {\n      timestamp: $.now(),\n      gesture: touch.gesture,\n      touches: touches,\n      center: getMultiCenter(touch.touches),\n      deltaX: touch.deltaX,\n      deltaY: touch.deltaY\n    };\n  };\n\n  var calDelta = function (touch) {\n    var session = $.gestures.session;\n    var center = touch.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevTouch = session.prevTouch || {};\n\n    if (touch.gesture.type === $.EVENT_START || touch.gesture.type === $.EVENT_END) {\n      prevDelta = session.prevDelta = {\n        x: prevTouch.deltaX || 0,\n        y: prevTouch.deltaY || 0\n      };\n      offset = session.offsetDelta = {\n        x: center.x,\n        y: center.y\n      };\n    }\n\n    touch.deltaX = prevDelta.x + (center.x - offset.x);\n    touch.deltaY = prevDelta.y + (center.y - offset.y);\n  };\n\n  var calTouchData = function (touch) {\n    var session = $.gestures.session;\n    var touches = touch.touches;\n    var touchesLength = touches.length;\n\n    if (!session.firstTouch) {\n      session.firstTouch = copySimpleTouchData(touch);\n    }\n\n    if (multiTouch() && touchesLength > 1 && !session.firstMultiTouch) {\n      session.firstMultiTouch = copySimpleTouchData(touch);\n    } else if (touchesLength === 1) {\n      session.firstMultiTouch = false;\n    }\n\n    var firstTouch = session.firstTouch;\n    var firstMultiTouch = session.firstMultiTouch;\n    var offsetCenter = firstMultiTouch ? firstMultiTouch.center : firstTouch.center;\n    var center = touch.center = getMultiCenter(touches);\n    touch.timestamp = $.now();\n    touch.deltaTime = touch.timestamp - firstTouch.timestamp;\n    touch.angle = getAngle(offsetCenter, center);\n    touch.distance = getDistance(offsetCenter, center);\n    calDelta(touch);\n    touch.offsetDirection = getDirection(touch.deltaX, touch.deltaY);\n    touch.scale = firstMultiTouch ? getScale(firstMultiTouch.touches, touches) : 1;\n    touch.rotation = firstMultiTouch ? getRotation(firstMultiTouch.touches, touches) : 0;\n    calIntervalTouchData(touch);\n  };\n\n  var CAL_INTERVAL = 25;\n\n  var calIntervalTouchData = function (touch) {\n    var session = $.gestures.session;\n    var last = session.lastInterval || touch;\n    var deltaTime = touch.timestamp - last.timestamp;\n    var velocity;\n    var velocityX;\n    var velocityY;\n    var direction;\n\n    if (touch.gesture.type != $.EVENT_CANCEL && (deltaTime > CAL_INTERVAL || last.velocity === undefined)) {\n      var deltaX = last.deltaX - touch.deltaX;\n      var deltaY = last.deltaY - touch.deltaY;\n      var v = getVelocity(deltaTime, deltaX, deltaY);\n      velocityX = v.x;\n      velocityY = v.y;\n      velocity = abs(v.x) > abs(v.y) ? v.x : v.y;\n      direction = getDirection(deltaX, deltaY) || last.direction;\n      session.lastInterval = touch;\n    } else {\n      velocity = last.velocity;\n      velocityX = last.velocityX;\n      velocityY = last.velocityY;\n      direction = last.direction;\n    }\n\n    touch.velocity = velocity;\n    touch.velocityX = velocityX;\n    touch.velocityY = velocityY;\n    touch.direction = direction;\n  };\n\n  var targetIds = {};\n\n  var convertTouches = function (touches) {\n    for (var i = 0; i < touches.length; i++) {\n      !touches['identifier'] && (touches['identifier'] = 0);\n    }\n\n    return touches;\n  };\n\n  var getTouches = function (event, touch) {\n    var allTouches = convertTouches($.slice.call(event.touches || [event]));\n    var type = event.type;\n    var targetTouches = [];\n    var changedTargetTouches = []; //当touchstart或touchmove且touches长度为1，直接获得all和changed\n\n    if ((type === $.EVENT_START || type === $.EVENT_MOVE) && allTouches.length === 1) {\n      targetIds[allTouches[0].identifier] = true;\n      targetTouches = allTouches;\n      changedTargetTouches = allTouches;\n      touch.target = event.target;\n    } else {\n      var i = 0;\n      var targetTouches = [];\n      var changedTargetTouches = [];\n      var changedTouches = convertTouches($.slice.call(event.changedTouches || [event]));\n      touch.target = event.target;\n      var sessionTarget = $.gestures.session.target || event.target;\n      targetTouches = allTouches.filter(function (touch) {\n        return hasParent(touch.target, sessionTarget);\n      });\n\n      if (type === $.EVENT_START) {\n        i = 0;\n\n        while (i < targetTouches.length) {\n          targetIds[targetTouches[i].identifier] = true;\n          i++;\n        }\n      }\n\n      i = 0;\n\n      while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n          changedTargetTouches.push(changedTouches[i]);\n        }\n\n        if (type === $.EVENT_END || type === $.EVENT_CANCEL) {\n          delete targetIds[changedTouches[i].identifier];\n        }\n\n        i++;\n      }\n\n      if (!changedTargetTouches.length) {\n        return false;\n      }\n    }\n\n    targetTouches = uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true);\n    var touchesLength = targetTouches.length;\n    var changedTouchesLength = changedTargetTouches.length;\n\n    if (type === $.EVENT_START && touchesLength - changedTouchesLength === 0) {\n      //first\n      touch.isFirst = true;\n      $.gestures.touch = $.gestures.session = {\n        target: event.target\n      };\n    }\n\n    touch.isFinal = (type === $.EVENT_END || type === $.EVENT_CANCEL) && touchesLength - changedTouchesLength === 0;\n    touch.touches = targetTouches;\n    touch.changedTouches = changedTargetTouches;\n    return true;\n  };\n\n  var handleTouchEvent = function (event) {\n    var touch = {\n      gesture: event\n    };\n    var touches = getTouches(event, touch);\n\n    if (!touches) {\n      return;\n    }\n\n    calTouchData(touch);\n    detect(event, touch);\n    $.gestures.session.prevTouch = touch;\n\n    if (event.type === $.EVENT_END && !$.isTouchable) {\n      $.gestures.touch = $.gestures.session = {};\n    }\n  };\n\n  window.addEventListener($.EVENT_START, handleTouchEvent);\n  window.addEventListener($.EVENT_MOVE, handleTouchEvent);\n  window.addEventListener($.EVENT_END, handleTouchEvent);\n  window.addEventListener($.EVENT_CANCEL, handleTouchEvent); //fixed hashchange(android)\n\n  window.addEventListener($.EVENT_CLICK, function (e) {\n    //TODO 应该判断当前target是不是在targets.popover内部，而不是非要相等\n    if (($.os.android || $.os.ios) && ($.targets.popover && e.target === $.targets.popover || $.targets.tab || $.targets.offcanvas || $.targets.modal)) {\n      e.preventDefault();\n    }\n  }, true); //增加原生滚动识别\n\n  $.isScrolling = false;\n  var scrollingTimeout = null;\n  window.addEventListener('scroll', function () {\n    $.isScrolling = true;\n    scrollingTimeout && clearTimeout(scrollingTimeout);\n    scrollingTimeout = setTimeout(function () {\n      $.isScrolling = false;\n    }, 250);\n  });\n})(mui, window);\n/**\n * mui gesture flick[left|right|up|down]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n\n\n(function ($, name) {\n  var flickStartTime = 0;\n\n  var handle = function (event, touch) {\n    var session = $.gestures.session;\n    var options = this.options;\n    var now = $.now();\n\n    switch (event.type) {\n      case $.EVENT_MOVE:\n        if (now - flickStartTime > 300) {\n          flickStartTime = now;\n          session.flickStart = touch.center;\n        }\n\n        break;\n\n      case $.EVENT_END:\n      case $.EVENT_CANCEL:\n        touch.flick = false;\n\n        if (session.flickStart && options.flickMaxTime > now - flickStartTime && touch.distance > options.flickMinDistince) {\n          touch.flick = true;\n          touch.flickTime = now - flickStartTime;\n          touch.flickDistanceX = touch.center.x - session.flickStart.x;\n          touch.flickDistanceY = touch.center.y - session.flickStart.y;\n          $.trigger(session.target, name, touch);\n          $.trigger(session.target, name + touch.direction, touch);\n        }\n\n        break;\n    }\n  };\n  /**\n   * mui gesture flick\n   */\n\n\n  $.addGesture({\n    name: name,\n    index: 5,\n    handle: handle,\n    options: {\n      flickMaxTime: 200,\n      flickMinDistince: 10\n    }\n  });\n})(mui, 'flick');\n/**\n * mui gesture swipe[left|right|up|down]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n\n\n(function ($, name) {\n  var handle = function (event, touch) {\n    var session = $.gestures.session;\n\n    if (event.type === $.EVENT_END || event.type === $.EVENT_CANCEL) {\n      var options = this.options;\n      touch.swipe = false; //TODO 后续根据velocity计算\n\n      if (touch.direction && options.swipeMaxTime > touch.deltaTime && touch.distance > options.swipeMinDistince) {\n        touch.swipe = true;\n        $.trigger(session.target, name, touch);\n        $.trigger(session.target, name + touch.direction, touch);\n      }\n    }\n  };\n  /**\n   * mui gesture swipe\n   */\n\n\n  $.addGesture({\n    name: name,\n    index: 10,\n    handle: handle,\n    options: {\n      swipeMaxTime: 300,\n      swipeMinDistince: 18\n    }\n  });\n})(mui, 'swipe');\n/**\n * mui gesture drag[start|left|right|up|down|end]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n\n\n(function ($, name) {\n  var handle = function (event, touch) {\n    var session = $.gestures.session;\n\n    switch (event.type) {\n      case $.EVENT_START:\n        break;\n\n      case $.EVENT_MOVE:\n        if (!touch.direction || !session.target) {\n          return;\n        } //修正direction,可在session期间自行锁定拖拽方向，方便开发scroll类不同方向拖拽插件嵌套\n\n\n        if (session.lockDirection && session.startDirection) {\n          if (session.startDirection && session.startDirection !== touch.direction) {\n            if (session.startDirection === 'up' || session.startDirection === 'down') {\n              touch.direction = touch.deltaY < 0 ? 'up' : 'down';\n            } else {\n              touch.direction = touch.deltaX < 0 ? 'left' : 'right';\n            }\n          }\n        }\n\n        if (!session.drag) {\n          session.drag = true;\n          $.trigger(session.target, name + 'start', touch);\n        }\n\n        $.trigger(session.target, name, touch);\n        $.trigger(session.target, name + touch.direction, touch);\n        break;\n\n      case $.EVENT_END:\n      case $.EVENT_CANCEL:\n        if (session.drag && touch.isFinal) {\n          $.trigger(session.target, name + 'end', touch);\n        }\n\n        break;\n    }\n  };\n  /**\n   * mui gesture drag\n   */\n\n\n  $.addGesture({\n    name: name,\n    index: 20,\n    handle: handle,\n    options: {\n      fingers: 1\n    }\n  });\n})(mui, 'drag');\n/**\n * mui gesture tap and doubleTap\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n\n\n(function ($, name) {\n  var lastTarget;\n  var lastTapTime;\n\n  var handle = function (event, touch) {\n    var session = $.gestures.session;\n    var options = this.options;\n\n    switch (event.type) {\n      case $.EVENT_END:\n        if (!touch.isFinal) {\n          return;\n        }\n\n        var target = session.target;\n\n        if (!target || target.disabled || target.classList && target.classList.contains('mui-disabled')) {\n          return;\n        }\n\n        if (touch.distance < options.tapMaxDistance && touch.deltaTime < options.tapMaxTime) {\n          if ($.options.gestureConfig.doubletap && lastTarget && lastTarget === target) {\n            //same target\n            if (lastTapTime && touch.timestamp - lastTapTime < options.tapMaxInterval) {\n              $.trigger(target, 'doubletap', touch);\n              lastTapTime = $.now();\n              lastTarget = target;\n              return;\n            }\n          }\n\n          $.trigger(target, name, touch);\n          lastTapTime = $.now();\n          lastTarget = target;\n        }\n\n        break;\n    }\n  };\n  /**\n   * mui gesture tap\n   */\n\n\n  $.addGesture({\n    name: name,\n    index: 30,\n    handle: handle,\n    options: {\n      fingers: 1,\n      tapMaxInterval: 300,\n      tapMaxDistance: 5,\n      tapMaxTime: 250\n    }\n  });\n})(mui, 'tap');\n/**\n * mui gesture longtap\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n\n\n(function ($, name) {\n  var timer;\n\n  var handle = function (event, touch) {\n    var session = $.gestures.session;\n    var options = this.options;\n\n    switch (event.type) {\n      case $.EVENT_START:\n        clearTimeout(timer);\n        timer = setTimeout(function () {\n          $.trigger(session.target, name, touch);\n        }, options.holdTimeout);\n        break;\n\n      case $.EVENT_MOVE:\n        if (touch.distance > options.holdThreshold) {\n          clearTimeout(timer);\n        }\n\n        break;\n\n      case $.EVENT_END:\n      case $.EVENT_CANCEL:\n        clearTimeout(timer);\n        break;\n    }\n  };\n  /**\n   * mui gesture longtap\n   */\n\n\n  $.addGesture({\n    name: name,\n    index: 10,\n    handle: handle,\n    options: {\n      fingers: 1,\n      holdTimeout: 500,\n      holdThreshold: 2\n    }\n  });\n})(mui, 'longtap');\n/**\n * mui gesture hold\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n\n\n(function ($, name) {\n  var timer;\n\n  var handle = function (event, touch) {\n    var session = $.gestures.session;\n    var options = this.options;\n\n    switch (event.type) {\n      case $.EVENT_START:\n        if ($.options.gestureConfig.hold) {\n          timer && clearTimeout(timer);\n          timer = setTimeout(function () {\n            touch.hold = true;\n            $.trigger(session.target, name, touch);\n          }, options.holdTimeout);\n        }\n\n        break;\n\n      case $.EVENT_MOVE:\n        break;\n\n      case $.EVENT_END:\n      case $.EVENT_CANCEL:\n        if (timer) {\n          clearTimeout(timer) && (timer = null);\n          $.trigger(session.target, 'release', touch);\n        }\n\n        break;\n    }\n  };\n  /**\n   * mui gesture hold\n   */\n\n\n  $.addGesture({\n    name: name,\n    index: 10,\n    handle: handle,\n    options: {\n      fingers: 1,\n      holdTimeout: 0\n    }\n  });\n})(mui, 'hold');\n/**\n * mui gesture pinch\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n\n\n(function ($, name) {\n  var handle = function (event, touch) {\n    var options = this.options;\n    var session = $.gestures.session;\n\n    switch (event.type) {\n      case $.EVENT_START:\n        break;\n\n      case $.EVENT_MOVE:\n        if ($.options.gestureConfig.pinch) {\n          if (touch.touches.length < 2) {\n            return;\n          }\n\n          if (!session.pinch) {\n            //start\n            session.pinch = true;\n            $.trigger(session.target, name + 'start', touch);\n          }\n\n          $.trigger(session.target, name, touch);\n          var scale = touch.scale;\n          var rotation = touch.rotation;\n          var lastScale = typeof touch.lastScale === 'undefined' ? 1 : touch.lastScale;\n          var scaleDiff = 0.000000000001; //防止scale与lastScale相等，不触发事件的情况。\n\n          if (scale > lastScale) {\n            //out\n            lastScale = scale - scaleDiff;\n            $.trigger(session.target, name + 'out', touch);\n          } //in\n          else if (scale < lastScale) {\n            lastScale = scale + scaleDiff;\n            $.trigger(session.target, name + 'in', touch);\n          }\n\n          if (Math.abs(rotation) > options.minRotationAngle) {\n            $.trigger(session.target, 'rotate', touch);\n          }\n        }\n\n        break;\n\n      case $.EVENT_END:\n      case $.EVENT_CANCEL:\n        if ($.options.gestureConfig.pinch && session.pinch && touch.touches.length === 2) {\n          session.pinch = false;\n          $.trigger(session.target, name + 'end', touch);\n        }\n\n        break;\n    }\n  };\n  /**\n   * mui gesture pinch\n   */\n\n\n  $.addGesture({\n    name: name,\n    index: 10,\n    handle: handle,\n    options: {\n      minRotationAngle: 0\n    }\n  });\n})(mui, 'pinch');\n/**\n * mui.init\n * @param {type} $\n * @returns {undefined}\n */\n\n\n(function ($) {\n  $.global = $.options = {\n    gestureConfig: {\n      tap: true,\n      doubletap: false,\n      longtap: false,\n      hold: false,\n      flick: true,\n      swipe: true,\n      drag: true,\n      pinch: false\n    }\n  };\n  /**\n   *\n   * @param {type} options\n   * @returns {undefined}\n   */\n\n  $.initGlobal = function (options) {\n    $.options = $.extend(true, $.global, options);\n    return this;\n  };\n\n  var inits = {};\n  /**\n   * 单页配置 初始化\n   * @param {object} options\n   */\n\n  $.init = function (options) {\n    $.options = $.extend(true, $.global, options || {});\n    $.ready(function () {\n      $.doAction('inits', function (index, init) {\n        var isInit = !!(!inits[init.name] || init.repeat);\n\n        if (isInit) {\n          init.handle.call($);\n          inits[init.name] = true;\n        }\n      });\n    });\n    return this;\n  };\n  /**\n   * 增加初始化执行流程\n   * @param {function} init\n   */\n\n\n  $.addInit = function (init) {\n    return $.addAction('inits', init);\n  };\n  /**\n   * 处理html5版本subpages \n   */\n\n\n  $.addInit({\n    name: 'iframe',\n    index: 100,\n    handle: function () {\n      var options = $.options;\n      var subpages = options.subpages || [];\n\n      if (!$.os.plus && subpages.length) {\n        //暂时只处理单个subpage。后续可以考虑支持多个subpage\n        createIframe(subpages[0]);\n      }\n    }\n  });\n\n  var createIframe = function (options) {\n    var wrapper = document.createElement('div');\n    wrapper.className = 'mui-iframe-wrapper';\n    var styles = options.styles || {};\n\n    if (typeof styles.top !== 'string') {\n      styles.top = '0px';\n    }\n\n    if (typeof styles.bottom !== 'string') {\n      styles.bottom = '0px';\n    }\n\n    wrapper.style.top = styles.top;\n    wrapper.style.bottom = styles.bottom;\n    var iframe = document.createElement('iframe');\n    iframe.src = options.url;\n    iframe.id = options.id || options.url;\n    iframe.name = iframe.id;\n    wrapper.appendChild(iframe);\n    document.body.appendChild(wrapper); //目前仅处理微信\n\n    $.os.wechat && handleScroll(wrapper, iframe);\n  };\n\n  function handleScroll(wrapper, iframe) {\n    var key = 'MUI_SCROLL_POSITION_' + document.location.href + '_' + iframe.src;\n    var scrollTop = parseFloat(localStorage.getItem(key)) || 0;\n\n    if (scrollTop) {\n      (function (y) {\n        iframe.onload = function () {\n          window.scrollTo(0, y);\n        };\n      })(scrollTop);\n    }\n\n    setInterval(function () {\n      var _scrollTop = window.scrollY;\n\n      if (scrollTop !== _scrollTop) {\n        localStorage.setItem(key, _scrollTop + '');\n        scrollTop = _scrollTop;\n      }\n    }, 100);\n  }\n\n  ;\n  $(function () {\n    var classList = document.body.classList;\n    var os = [];\n\n    if ($.os.ios) {\n      os.push({\n        os: 'ios',\n        version: $.os.version\n      });\n      classList.add('mui-ios');\n    } else if ($.os.android) {\n      os.push({\n        os: 'android',\n        version: $.os.version\n      });\n      classList.add('mui-android');\n    }\n\n    if ($.os.wechat) {\n      os.push({\n        os: 'wechat',\n        version: $.os.wechat.version\n      });\n      classList.add('mui-wechat');\n    }\n\n    if (os.length) {\n      $.each(os, function (index, osObj) {\n        var version = '';\n        var classArray = [];\n\n        if (osObj.version) {\n          $.each(osObj.version.split('.'), function (i, v) {\n            version = version + (version ? '-' : '') + v;\n            classList.add($.className(osObj.os + '-' + version));\n          });\n        }\n      });\n    }\n  });\n})(mui);\n/**\n * mui.init 5+\n * @param {type} $\n * @returns {undefined}\n */\n\n\n(function ($) {\n  var defaultOptions = {\n    swipeBack: false,\n    preloadPages: [],\n    //5+ lazyLoad webview\n    preloadLimit: 10,\n    //预加载窗口的数量限制(一旦超出，先进先出)\n    keyEventBind: {\n      backbutton: true,\n      menubutton: true\n    },\n    titleConfig: {\n      height: \"44px\",\n      backgroundColor: \"#f7f7f7\",\n      //导航栏背景色\n      bottomBorderColor: \"#cccccc\",\n      //底部边线颜色\n      title: {\n        //标题配置\n        text: \"\",\n        //标题文字\n        position: {\n          top: 0,\n          left: 0,\n          width: \"100%\",\n          height: \"100%\"\n        },\n        styles: {\n          color: \"#000000\",\n          align: \"center\",\n          family: \"'Helvetica Neue',Helvetica,sans-serif\",\n          size: \"17px\",\n          style: \"normal\",\n          weight: \"normal\",\n          fontSrc: \"\"\n        }\n      },\n      back: {\n        image: {\n          base64Data: '',\n          imgSrc: '',\n          sprite: {\n            top: '0px',\n            left: '0px',\n            width: '100%',\n            height: '100%'\n          },\n          position: {\n            top: \"10px\",\n            left: \"10px\",\n            width: \"24px\",\n            height: \"24px\"\n          }\n        }\n      }\n    }\n  }; //默认页面动画\n\n  var defaultShow = {\n    event: \"titleUpdate\",\n    autoShow: true,\n    duration: 300,\n    aniShow: 'slide-in-right',\n    extras: {}\n  }; //若执行了显示动画初始化操作，则要覆盖默认配置\n\n  if ($.options.show) {\n    defaultShow = $.extend(true, defaultShow, $.options.show);\n  }\n\n  $.currentWebview = null;\n  $.extend(true, $.global, defaultOptions);\n  $.extend(true, $.options, defaultOptions);\n  /**\n   * 等待动画配置\n   * @param {type} options\n   * @returns {Object}\n   */\n\n  $.waitingOptions = function (options) {\n    return $.extend(true, {}, {\n      autoShow: true,\n      title: '',\n      modal: false\n    }, options);\n  };\n  /**\n   * 窗口显示配置\n   * @param {type} options\n   * @returns {Object}\n   */\n\n\n  $.showOptions = function (options) {\n    return $.extend(true, {}, defaultShow, options);\n  };\n  /**\n   * 窗口默认配置\n   * @param {type} options\n   * @returns {Object}\n   */\n\n\n  $.windowOptions = function (options) {\n    return $.extend({\n      scalable: false,\n      bounce: \"\" //vertical\n\n    }, options);\n  };\n  /**\n   * plusReady\n   * @param {type} callback\n   * @returns {_L6.$}\n   */\n\n\n  $.plusReady = function (callback) {\n    if (window.plus) {\n      setTimeout(function () {\n        //解决callback与plusready事件的执行时机问题(典型案例:showWaiting,closeWaiting)\n        callback();\n      }, 0);\n    } else {\n      document.addEventListener(\"plusready\", function () {\n        callback();\n      }, false);\n    }\n\n    return this;\n  };\n  /**\n   * 5+ event(5+没提供之前我自己实现)\n   * @param {type} webview\n   * @param {type} eventType\n   * @param {type} data\n   * @returns {undefined}\n   */\n\n\n  $.fire = function (webview, eventType, data) {\n    if (webview) {\n      if (typeof data === 'undefined') {\n        data = '';\n      } else if (typeof data === 'boolean' || typeof data === 'number') {\n        webview.evalJS(\"typeof mui!=='undefined'&&mui.receive('\" + eventType + \"',\" + data + \")\");\n        return;\n      } else if ($.isPlainObject(data) || $.isArray(data)) {\n        data = JSON.stringify(data || {}).replace(/\\'/g, \"\\\\u0027\").replace(/\\\\/g, \"\\\\u005c\");\n      }\n\n      webview.evalJS(\"typeof mui!=='undefined'&&mui.receive('\" + eventType + \"','\" + data + \"')\");\n    }\n  };\n  /**\n   * 5+ event(5+没提供之前我自己实现)\n   * @param {type} eventType\n   * @param {type} data\n   * @returns {undefined}\n   */\n\n\n  $.receive = function (eventType, data) {\n    if (eventType) {\n      try {\n        if (data && typeof data === 'string') {\n          data = JSON.parse(data);\n        }\n      } catch (e) {}\n\n      $.trigger(document, eventType, data);\n    }\n  };\n\n  var triggerPreload = function (webview) {\n    if (!webview.preloaded) {\n      //保证仅触发一次\n      $.fire(webview, 'preload');\n      var list = webview.children();\n\n      for (var i = 0; i < list.length; i++) {\n        $.fire(list[i], 'preload');\n      }\n\n      webview.preloaded = true;\n    }\n  };\n\n  var trigger = function (webview, eventType, timeChecked) {\n    if (timeChecked) {\n      if (!webview[eventType + 'ed']) {\n        $.fire(webview, eventType);\n        var list = webview.children();\n\n        for (var i = 0; i < list.length; i++) {\n          $.fire(list[i], eventType);\n        }\n\n        webview[eventType + 'ed'] = true;\n      }\n    } else {\n      $.fire(webview, eventType);\n      var list = webview.children();\n\n      for (var i = 0; i < list.length; i++) {\n        $.fire(list[i], eventType);\n      }\n    }\n  };\n  /**\n   * 打开新窗口\n   * @param {string} url 要打开的页面地址\n   * @param {string} id 指定页面ID\n   * @param {object} options 可选:参数,等待,窗口,显示配置{params:{},waiting:{},styles:{},show:{}}\n   */\n\n\n  $.openWindow = function (url, id, options) {\n    if (typeof url === 'object') {\n      options = url;\n      url = options.url;\n      id = options.id || url;\n    } else {\n      if (typeof id === 'object') {\n        options = id;\n        id = options.id || url;\n      } else {\n        id = id || url;\n      }\n    }\n\n    if (!$.os.plus) {\n      //TODO 先临时这么处理：手机上顶层跳，PC上parent跳\n      if ($.os.ios || $.os.android) {\n        window.top.location.href = url;\n      } else {\n        window.parent.location.href = url;\n      }\n\n      return;\n    }\n\n    if (!window.plus) {\n      return;\n    }\n\n    options = options || {};\n    var params = options.params || {};\n    var webview = null,\n        webviewCache = null,\n        nShow,\n        nWaiting;\n\n    if ($.webviews[id]) {\n      webviewCache = $.webviews[id]; //webview真实存在，才能获取\n\n      if (plus.webview.getWebviewById(id)) {\n        webview = webviewCache.webview;\n      }\n    } else if (options.createNew !== true) {\n      webview = plus.webview.getWebviewById(id);\n    }\n\n    if (webview) {\n      //已缓存\n      //每次show都需要传递动画参数；\n      //预加载的动画参数优先级：openWindow配置>preloadPages配置>mui默认配置；\n      nShow = webviewCache ? webviewCache.show : defaultShow;\n      nShow = options.show ? $.extend(nShow, options.show) : nShow;\n      nShow.autoShow && webview.show(nShow.aniShow, nShow.duration, function () {\n        triggerPreload(webview);\n        trigger(webview, 'pagebeforeshow', false);\n      });\n\n      if (webviewCache) {\n        webviewCache.afterShowMethodName && webview.evalJS(webviewCache.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n      }\n\n      return webview;\n    } else {\n      //新窗口\n      if (!url) {\n        throw new Error('webview[' + id + '] does not exist');\n      } //显示waiting\n\n\n      var waitingConfig = $.waitingOptions(options.waiting);\n\n      if (waitingConfig.autoShow) {\n        nWaiting = plus.nativeUI.showWaiting(waitingConfig.title, waitingConfig.options);\n      } //创建页面\n\n\n      options = $.extend(options, {\n        id: id,\n        url: url\n      });\n      webview = $.createWindow(options); //显示\n\n      nShow = $.showOptions(options.show);\n\n      if (nShow.autoShow) {\n        var showWebview = function () {\n          //关闭等待框\n          if (nWaiting) {\n            nWaiting.close();\n          } //显示页面\n\n\n          webview.show(nShow.aniShow, nShow.duration, function () {}, nShow.extras);\n          options.afterShowMethodName && webview.evalJS(options.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n        }; //titleUpdate触发时机早于loaded，更换为titleUpdate后，可以更早的显示webview\n\n\n        webview.addEventListener(nShow.event, showWebview, false); //loaded事件发生后，触发预加载和pagebeforeshow事件\n\n        webview.addEventListener(\"loaded\", function () {\n          triggerPreload(webview);\n          trigger(webview, 'pagebeforeshow', false);\n        }, false);\n      }\n    }\n\n    return webview;\n  };\n\n  $.openWindowWithTitle = function (options, titleConfig) {\n    options = options || {};\n    var url = options.url;\n    var id = options.id || url;\n\n    if (!$.os.plus) {\n      //TODO 先临时这么处理：手机上顶层跳，PC上parent跳\n      if ($.os.ios || $.os.android) {\n        window.top.location.href = url;\n      } else {\n        window.parent.location.href = url;\n      }\n\n      return;\n    }\n\n    if (!window.plus) {\n      return;\n    }\n\n    var params = options.params || {};\n    var webview = null,\n        webviewCache = null,\n        nShow,\n        nWaiting;\n\n    if ($.webviews[id]) {\n      webviewCache = $.webviews[id]; //webview真实存在，才能获取\n\n      if (plus.webview.getWebviewById(id)) {\n        webview = webviewCache.webview;\n      }\n    } else if (options.createNew !== true) {\n      webview = plus.webview.getWebviewById(id);\n    }\n\n    if (webview) {\n      //已缓存\n      //每次show都需要传递动画参数；\n      //预加载的动画参数优先级：openWindow配置>preloadPages配置>mui默认配置；\n      nShow = webviewCache ? webviewCache.show : defaultShow;\n      nShow = options.show ? $.extend(nShow, options.show) : nShow;\n      nShow.autoShow && webview.show(nShow.aniShow, nShow.duration, function () {\n        triggerPreload(webview);\n        trigger(webview, 'pagebeforeshow', false);\n      });\n\n      if (webviewCache) {\n        webviewCache.afterShowMethodName && webview.evalJS(webviewCache.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n      }\n\n      return webview;\n    } else {\n      //新窗口\n      if (!url) {\n        throw new Error('webview[' + id + '] does not exist');\n      } //显示waiting\n\n\n      var waitingConfig = $.waitingOptions(options.waiting);\n\n      if (waitingConfig.autoShow) {\n        nWaiting = plus.nativeUI.showWaiting(waitingConfig.title, waitingConfig.options);\n      } //创建页面\n\n\n      options = $.extend(options, {\n        id: id,\n        url: url\n      });\n      webview = $.createWindow(options);\n\n      if (titleConfig) {\n        //处理原生头\n        $.extend(true, $.options.titleConfig, titleConfig);\n        var tid = $.options.titleConfig.id ? $.options.titleConfig.id : id + \"_title\";\n        var view = new plus.nativeObj.View(tid, {\n          top: 0,\n          height: $.options.titleConfig.height,\n          width: \"100%\",\n          dock: \"top\",\n          position: \"dock\"\n        });\n        view.drawRect($.options.titleConfig.backgroundColor); //绘制背景色\n\n        var _b = parseInt($.options.titleConfig.height) - 1;\n\n        view.drawRect($.options.titleConfig.bottomBorderColor, {\n          top: _b + \"px\",\n          left: \"0px\"\n        }); //绘制底部边线\n        //绘制文字\n\n        if ($.options.titleConfig.title.text) {\n          var _title = $.options.titleConfig.title;\n          view.drawText(_title.text, _title.position, _title.styles);\n        } //返回图标绘制\n\n\n        var _back = $.options.titleConfig.back;\n        var backClick = null; //优先字体\n        //其次是图片\n\n        var _backImage = _back.image;\n\n        if (_backImage.base64Data || _backImage.imgSrc) {\n          //TODO 此处需要处理百分比的情况\n          backClick = {\n            left: parseInt(_backImage.position.left),\n            right: parseInt(_backImage.position.left) + parseInt(_backImage.position.width)\n          };\n          var bitmap = new plus.nativeObj.Bitmap(id + \"_back\");\n\n          if (_backImage.base64Data) {\n            //优先base64编码字符串\n            bitmap.loadBase64Data(_backImage.base64Data);\n          } else {\n            //其次加载图片文件\n            bitmap.load(_backImage.imgSrc);\n          }\n\n          view.drawBitmap(bitmap, _backImage.sprite, _backImage.position);\n        } //处理点击事件\n\n\n        view.setTouchEventRect({\n          top: \"0px\",\n          left: \"0px\",\n          width: \"100%\",\n          height: \"100%\"\n        });\n        view.interceptTouchEvent(true);\n        view.addEventListener(\"click\", function (e) {\n          var x = e.clientX; //返回按钮点击\n\n          if (backClick && x > backClick.left && x < backClick.right) {\n            if (_back.click && $.isFunction(_back.click)) {\n              _back.click();\n            } else {\n              webview.evalJS(\"window.mui&&mui.back();\");\n            }\n          }\n        }, false);\n        webview.append(view);\n      } //显示\n\n\n      nShow = $.showOptions(options.show);\n\n      if (nShow.autoShow) {\n        //titleUpdate触发时机早于loaded，更换为titleUpdate后，可以更早的显示webview\n        webview.addEventListener(nShow.event, function () {\n          //关闭等待框\n          if (nWaiting) {\n            nWaiting.close();\n          } //显示页面\n\n\n          webview.show(nShow.aniShow, nShow.duration, function () {}, nShow.extras);\n        }, false);\n      }\n    }\n\n    return webview;\n  };\n  /**\n   * 根据配置信息创建一个webview\n   * @param {type} options\n   * @param {type} isCreate\n   * @returns {webview}\n   */\n\n\n  $.createWindow = function (options, isCreate) {\n    if (!window.plus) {\n      return;\n    }\n\n    var id = options.id || options.url;\n    var webview;\n\n    if (options.preload) {\n      if ($.webviews[id] && $.webviews[id].webview.getURL()) {\n        //已经cache\n        webview = $.webviews[id].webview;\n      } else {\n        //新增预加载窗口\n        //判断是否携带createNew参数，默认为false\n        if (options.createNew !== true) {\n          webview = plus.webview.getWebviewById(id);\n        } //之前没有，那就新创建\t\n\n\n        if (!webview) {\n          webview = plus.webview.create(options.url, id, $.windowOptions(options.styles), $.extend({\n            preload: true\n          }, options.extras));\n\n          if (options.subpages) {\n            $.each(options.subpages, function (index, subpage) {\n              var subpageId = subpage.id || subpage.url;\n\n              if (subpageId) {\n                //过滤空对象\n                var subWebview = plus.webview.getWebviewById(subpageId);\n\n                if (!subWebview) {\n                  //如果该webview不存在，则创建\n                  subWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), $.extend({\n                    preload: true\n                  }, subpage.extras));\n                }\n\n                webview.append(subWebview);\n              }\n            });\n          }\n        }\n      } //TODO 理论上，子webview也应该计算到预加载队列中，但这样就麻烦了，要退必须退整体，否则可能出现问题；\n\n\n      $.webviews[id] = {\n        webview: webview,\n        //目前仅preload的缓存webview\n        preload: true,\n        show: $.showOptions(options.show),\n        afterShowMethodName: options.afterShowMethodName //就不应该用evalJS。应该是通过事件消息通讯\n\n      }; //索引该预加载窗口\n\n      var preloads = $.data.preloads;\n      var index = preloads.indexOf(id);\n\n      if (~index) {\n        //删除已存在的(变相调整插入位置)\n        preloads.splice(index, 1);\n      }\n\n      preloads.push(id);\n\n      if (preloads.length > $.options.preloadLimit) {\n        //先进先出\n        var first = $.data.preloads.shift();\n        var webviewCache = $.webviews[first];\n\n        if (webviewCache && webviewCache.webview) {\n          //需要将自己打开的所有页面，全部close；\n          //关闭该预加载webview\t\n          $.closeAll(webviewCache.webview);\n        } //删除缓存\n\n\n        delete $.webviews[first];\n      }\n    } else {\n      if (isCreate !== false) {\n        //直接创建非预加载窗口\n        webview = plus.webview.create(options.url, id, $.windowOptions(options.styles), options.extras);\n\n        if (options.subpages) {\n          $.each(options.subpages, function (index, subpage) {\n            var subpageId = subpage.id || subpage.url;\n            var subWebview = plus.webview.getWebviewById(subpageId);\n\n            if (!subWebview) {\n              subWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), subpage.extras);\n            }\n\n            webview.append(subWebview);\n          });\n        }\n      }\n    }\n\n    return webview;\n  };\n  /**\n   * 预加载\n   */\n\n\n  $.preload = function (options) {\n    //调用预加载函数，不管是否传递preload参数，强制变为true\n    if (!options.preload) {\n      options.preload = true;\n    }\n\n    return $.createWindow(options);\n  };\n  /**\n   *关闭当前webview打开的所有webview；\n   */\n\n\n  $.closeOpened = function (webview) {\n    var opened = webview.opened();\n\n    if (opened) {\n      for (var i = 0, len = opened.length; i < len; i++) {\n        var openedWebview = opened[i];\n        var open_open = openedWebview.opened();\n\n        if (open_open && open_open.length > 0) {\n          //关闭打开的webview\n          $.closeOpened(openedWebview); //关闭自己\n\n          openedWebview.close(\"none\");\n        } else {\n          //如果直接孩子节点，就不用关闭了，因为父关闭的时候，会自动关闭子；\n          if (openedWebview.parent() !== webview) {\n            openedWebview.close('none');\n          }\n        }\n      }\n    }\n  };\n\n  $.closeAll = function (webview, aniShow) {\n    $.closeOpened(webview);\n\n    if (aniShow) {\n      webview.close(aniShow);\n    } else {\n      webview.close();\n    }\n  };\n  /**\n   * 批量创建webview\n   * @param {type} options\n   * @returns {undefined}\n   */\n\n\n  $.createWindows = function (options) {\n    $.each(options, function (index, option) {\n      //初始化预加载窗口(创建)和非预加载窗口(仅配置，不创建)\n      $.createWindow(option, false);\n    });\n  };\n  /**\n   * 创建当前页面的子webview\n   * @param {type} options\n   * @returns {webview}\n   */\n\n\n  $.appendWebview = function (options) {\n    if (!window.plus) {\n      return;\n    }\n\n    var id = options.id || options.url;\n    var webview;\n\n    if (!$.webviews[id]) {\n      //保证执行一遍\n      //TODO 这里也有隐患，比如某个webview不是作为subpage创建的，而是作为target webview的话；\n      if (!plus.webview.getWebviewById(id)) {\n        webview = plus.webview.create(options.url, id, options.styles, options.extras);\n      } //之前的实现方案：子窗口loaded之后再append到父窗口中；\n      //问题：部分子窗口loaded事件发生较晚，此时执行父窗口的children方法会返回空，导致父子通讯失败；\n      //     比如父页面执行完preload事件后，需触发子页面的preload事件，此时未append的话，就无法触发；\n      //修改方式：不再监控loaded事件，直接append\n      //by chb@20150521\n      // webview.addEventListener('loaded', function() {\n\n\n      plus.webview.currentWebview().append(webview); // });\n\n      $.webviews[id] = options;\n    }\n\n    return webview;\n  }; //全局webviews\n\n\n  $.webviews = {}; //预加载窗口索引\n\n  $.data.preloads = []; //$.currentWebview\n\n  $.plusReady(function () {\n    $.currentWebview = plus.webview.currentWebview();\n  });\n  $.addInit({\n    name: '5+',\n    index: 100,\n    handle: function () {\n      var options = $.options;\n      var subpages = options.subpages || [];\n\n      if ($.os.plus) {\n        $.plusReady(function () {\n          //TODO  这里需要判断一下，最好等子窗口加载完毕后，再调用主窗口的show方法；\n          //或者：在openwindow方法中，监听实现；\n          $.each(subpages, function (index, subpage) {\n            $.appendWebview(subpage);\n          }); //判断是否首页\n\n          if (plus.webview.currentWebview() === plus.webview.getWebviewById(plus.runtime.appid)) {\n            //首页需要自己激活预加载；\n            //timeout因为子页面loaded之后才append的，防止子页面尚未append、从而导致其preload未触发的问题；\n            setTimeout(function () {\n              triggerPreload(plus.webview.currentWebview());\n            }, 300);\n          } //设置ios顶部状态栏颜色；\n\n\n          if ($.os.ios && $.options.statusBarBackground) {\n            plus.navigator.setStatusBarBackground($.options.statusBarBackground);\n          }\n\n          if ($.os.android && parseFloat($.os.version) < 4.4) {\n            //解决Android平台4.4版本以下，resume后，父窗体标题延迟渲染的问题；\n            if (plus.webview.currentWebview().parent() == null) {\n              document.addEventListener(\"resume\", function () {\n                var body = document.body;\n                body.style.display = 'none';\n                setTimeout(function () {\n                  body.style.display = '';\n                }, 10);\n              });\n            }\n          }\n        });\n      } else {//已支持iframe嵌入\n        //\t\t\t\tif (subpages.length > 0) {\n        //\t\t\t\t\tvar err = document.createElement('div');\n        //\t\t\t\t\terr.className = 'mui-error';\n        //\t\t\t\t\t//文字描述\n        //\t\t\t\t\tvar span = document.createElement('span');\n        //\t\t\t\t\tspan.innerHTML = '在该浏览器下，不支持创建子页面，具体参考';\n        //\t\t\t\t\terr.appendChild(span);\n        //\t\t\t\t\tvar a = document.createElement('a');\n        //\t\t\t\t\ta.innerHTML = '\"mui框架适用场景\"';\n        //\t\t\t\t\ta.href = 'http://ask.dcloud.net.cn/article/113';\n        //\t\t\t\t\terr.appendChild(a);\n        //\t\t\t\t\tdocument.body.appendChild(err);\n        //\t\t\t\t\tconsole.log('在该浏览器下，不支持创建子页面');\n        //\t\t\t\t}\n      }\n    }\n  });\n  window.addEventListener('preload', function () {\n    //处理预加载部分\n    var webviews = $.options.preloadPages || [];\n    $.plusReady(function () {\n      $.each(webviews, function (index, webview) {\n        $.createWindow($.extend(webview, {\n          preload: true\n        }));\n      });\n    });\n  });\n\n  $.supportStatusbarOffset = function () {\n    return $.os.plus && $.os.ios && parseFloat($.os.version) >= 7;\n  };\n\n  $.ready(function () {\n    //标识当前环境支持statusbar\n    if ($.supportStatusbarOffset()) {\n      document.body.classList.add('mui-statusbar');\n    }\n  });\n})(mui);\n/**\n * mui back\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n\n\n(function ($, window) {\n  /**\n   * register back\n   * @param {type} back\n   * @returns {$.gestures}\n   */\n  $.addBack = function (back) {\n    return $.addAction('backs', back);\n  };\n  /**\n   * default\n   */\n\n\n  $.addBack({\n    name: 'browser',\n    index: 100,\n    handle: function () {\n      if (window.history.length > 1) {\n        window.history.back();\n        return true;\n      }\n\n      return false;\n    }\n  });\n  /**\n   * 后退\n   */\n\n  $.back = function () {\n    if (typeof $.options.beforeback === 'function') {\n      if ($.options.beforeback() === false) {\n        return;\n      }\n    }\n\n    $.doAction('backs');\n  };\n\n  window.addEventListener('tap', function (e) {\n    var action = $.targets.action;\n\n    if (action && action.classList.contains('mui-action-back')) {\n      $.back();\n      $.targets.action = false;\n    }\n  });\n  window.addEventListener('swiperight', function (e) {\n    var detail = e.detail;\n\n    if ($.options.swipeBack === true && Math.abs(detail.angle) < 3) {\n      $.back();\n    }\n  });\n})(mui, window);\n/**\n * mui back 5+\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n\n\n(function ($, window) {\n  if ($.os.plus && $.os.android) {\n    $.addBack({\n      name: 'mui',\n      index: 5,\n      handle: function () {\n        //后续重新设计此处，将back放到各个空间内部实现\n        //popover\n        if ($.targets._popover && $.targets._popover.classList.contains('mui-active')) {\n          $($.targets._popover).popover('hide');\n          return true;\n        } //offcanvas\n\n\n        var offCanvas = document.querySelector('.mui-off-canvas-wrap.mui-active');\n\n        if (offCanvas) {\n          $(offCanvas).offCanvas('close');\n          return true;\n        }\n\n        var previewImage = $.isFunction($.getPreviewImage) && $.getPreviewImage();\n\n        if (previewImage && previewImage.isShown()) {\n          previewImage.close();\n          return true;\n        } //popup\n\n\n        return $.closePopup();\n      }\n    });\n  } //首次按下back按键的时间\n\n\n  $.__back__first = null;\n  /**\n   * 5+ back\n   */\n\n  $.addBack({\n    name: '5+',\n    index: 10,\n    handle: function () {\n      if (!window.plus) {\n        return false;\n      }\n\n      var wobj = plus.webview.currentWebview();\n      var parent = wobj.parent();\n\n      if (parent) {\n        parent.evalJS('mui&&mui.back();');\n      } else {\n        wobj.canBack(function (e) {\n          //by chb 暂时注释，在碰到类似popover之类的锚点的时候，需多次点击才能返回；\n          if (e.canBack) {\n            //webview history back\n            window.history.back();\n          } else {\n            //webview close or hide\n            //fixed by fxy 此处不应该用opener判断，因为用户有可能自己close掉当前窗口的opener。这样的话。opener就为空了，导致不能执行close\n            if (wobj.id === plus.runtime.appid) {\n              //首页\n              //首页不存在opener的情况下，后退实际上应该是退出应用；\n              //首次按键，提示‘再按一次退出应用’\n              if (!$.__back__first) {\n                $.__back__first = new Date().getTime();\n                mui.toast('再按一次退出应用');\n                setTimeout(function () {\n                  $.__back__first = null;\n                }, 2000);\n              } else {\n                if (new Date().getTime() - $.__back__first < 2000) {\n                  plus.runtime.quit();\n                }\n              }\n            } else {\n              //其他页面，\n              if (wobj.preload) {\n                wobj.hide(\"auto\");\n              } else {\n                //关闭页面时，需要将其打开的所有子页面全部关闭；\n                $.closeAll(wobj);\n              }\n            }\n          }\n        });\n      }\n\n      return true;\n    }\n  });\n\n  $.menu = function () {\n    var menu = document.querySelector('.mui-action-menu');\n\n    if (menu) {\n      $.trigger(menu, $.EVENT_START); //临时处理menu无touchstart的话，找不到当前targets的问题\n\n      $.trigger(menu, 'tap');\n    } else {\n      //执行父窗口的menu\n      if (window.plus) {\n        var wobj = $.currentWebview;\n        var parent = wobj.parent();\n\n        if (parent) {\n          //又得evalJS\n          parent.evalJS('mui&&mui.menu();');\n        }\n      }\n    }\n  };\n\n  var __back = function () {\n    $.back();\n  };\n\n  var __menu = function () {\n    $.menu();\n  }; //默认监听\n\n\n  $.plusReady(function () {\n    if ($.options.keyEventBind.backbutton) {\n      plus.key.addEventListener('backbutton', __back, false);\n    }\n\n    if ($.options.keyEventBind.menubutton) {\n      plus.key.addEventListener('menubutton', __menu, false);\n    }\n  }); //处理按键监听事件\n\n  $.addInit({\n    name: 'keyEventBind',\n    index: 1000,\n    handle: function () {\n      $.plusReady(function () {\n        //如果不为true，则移除默认监听\n        if (!$.options.keyEventBind.backbutton) {\n          plus.key.removeEventListener('backbutton', __back);\n        }\n\n        if (!$.options.keyEventBind.menubutton) {\n          plus.key.removeEventListener('menubutton', __menu);\n        }\n      });\n    }\n  });\n})(mui, window);\n/**\n * mui.init pulldownRefresh\n * @param {type} $\n * @returns {undefined}\n */\n\n\n(function ($) {\n  $.addInit({\n    name: 'pullrefresh',\n    index: 1000,\n    handle: function () {\n      var options = $.options;\n      var pullRefreshOptions = options.pullRefresh || {};\n      var hasPulldown = pullRefreshOptions.down && pullRefreshOptions.down.hasOwnProperty('callback');\n      var hasPullup = pullRefreshOptions.up && pullRefreshOptions.up.hasOwnProperty('callback');\n\n      if (hasPulldown || hasPullup) {\n        var container = pullRefreshOptions.container;\n\n        if (container) {\n          var $container = $(container);\n\n          if ($container.length === 1) {\n            if ($.os.plus) {\n              //5+环境\n              if (hasPulldown && pullRefreshOptions.down.style == \"circle\") {\n                //原生转圈\n                $.plusReady(function () {\n                  //这里改写$.fn.pullRefresh\n                  $.fn.pullRefresh = $.fn.pullRefresh_native;\n                  $container.pullRefresh(pullRefreshOptions);\n                });\n              } else if ($.os.android) {\n                //非原生转圈，但是Android环境\n                $.plusReady(function () {\n                  //这里改写$.fn.pullRefresh\n                  $.fn.pullRefresh = $.fn.pullRefresh_native;\n                  var webview = plus.webview.currentWebview();\n\n                  if (window.__NWin_Enable__ === false) {\n                    //不支持多webview\n                    $container.pullRefresh(pullRefreshOptions);\n                  } else {\n                    if (hasPullup) {\n                      //当前页面初始化pullup\n                      var upOptions = {};\n                      upOptions.up = pullRefreshOptions.up;\n                      upOptions.webviewId = webview.id || webview.getURL();\n                      $container.pullRefresh(upOptions);\n                    }\n\n                    if (hasPulldown) {\n                      var parent = webview.parent();\n                      var id = webview.id || webview.getURL();\n\n                      if (parent) {\n                        if (!hasPullup) {\n                          //如果没有上拉加载，需要手动初始化一个默认的pullRefresh，以便当前页面容器可以调用endPulldownToRefresh等方法\n                          $container.pullRefresh({\n                            webviewId: id\n                          });\n                        }\n\n                        var downOptions = {\n                          webviewId: id //子页面id\n\n                        };\n                        downOptions.down = $.extend({}, pullRefreshOptions.down);\n                        downOptions.down.callback = '_CALLBACK'; //改写父页面的$.fn.pullRefresh\n\n                        parent.evalJS(\"mui.fn.pullRefresh=mui.fn.pullRefresh_native\"); //父页面初始化pulldown\n\n                        parent.evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify(downOptions) + \"')\");\n                      }\n                    }\n                  }\n                });\n              } else {\n                //非原生转圈，iOS环境\n                $container.pullRefresh(pullRefreshOptions);\n              }\n            } else {\n              $container.pullRefresh(pullRefreshOptions);\n            }\n          }\n        }\n      }\n    }\n  });\n})(mui);\n/**\n * mui ajax\n * @param {type} $\n * @returns {undefined}\n */\n\n\n(function ($, window, undefined) {\n  var jsonType = 'application/json';\n  var htmlType = 'text/html';\n  var rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi;\n  var scriptTypeRE = /^(?:text|application)\\/javascript/i;\n  var xmlTypeRE = /^(?:text|application)\\/xml/i;\n  var blankRE = /^\\s*$/;\n  $.ajaxSettings = {\n    type: 'GET',\n    beforeSend: $.noop,\n    success: $.noop,\n    error: $.noop,\n    complete: $.noop,\n    context: null,\n    xhr: function (protocol) {\n      return new window.XMLHttpRequest();\n    },\n    accepts: {\n      script: 'text/javascript, application/javascript, application/x-javascript',\n      json: jsonType,\n      xml: 'application/xml, text/xml',\n      html: htmlType,\n      text: 'text/plain'\n    },\n    timeout: 0,\n    processData: true,\n    cache: true\n  };\n\n  var ajaxBeforeSend = function (xhr, settings) {\n    var context = settings.context;\n\n    if (settings.beforeSend.call(context, xhr, settings) === false) {\n      return false;\n    }\n  };\n\n  var ajaxSuccess = function (data, xhr, settings) {\n    settings.success.call(settings.context, data, 'success', xhr);\n    ajaxComplete('success', xhr, settings);\n  }; // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n\n\n  var ajaxError = function (error, type, xhr, settings) {\n    settings.error.call(settings.context, xhr, type, error);\n    ajaxComplete(type, xhr, settings);\n  }; // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n\n\n  var ajaxComplete = function (status, xhr, settings) {\n    settings.complete.call(settings.context, xhr, status);\n  };\n\n  var serialize = function (params, obj, traditional, scope) {\n    var type,\n        array = $.isArray(obj),\n        hash = $.isPlainObject(obj);\n    $.each(obj, function (key, value) {\n      type = $.type(value);\n\n      if (scope) {\n        key = traditional ? scope : scope + '[' + (hash || type === 'object' || type === 'array' ? key : '') + ']';\n      } // handle data in serializeArray() format\n\n\n      if (!scope && array) {\n        params.add(value.name, value.value);\n      } // recurse into nested objects\n      else if (type === \"array\" || !traditional && type === \"object\") {\n        serialize(params, value, traditional, key);\n      } else {\n        params.add(key, value);\n      }\n    });\n  };\n\n  var serializeData = function (options) {\n    if (options.processData && options.data && typeof options.data !== \"string\") {\n      var contentType = options.contentType;\n\n      if (!contentType && options.headers) {\n        contentType = options.headers['Content-Type'];\n      }\n\n      if (contentType && ~contentType.indexOf(jsonType)) {\n        //application/json\n        options.data = JSON.stringify(options.data);\n      } else {\n        options.data = $.param(options.data, options.traditional);\n      }\n    }\n\n    if (options.data && (!options.type || options.type.toUpperCase() === 'GET')) {\n      options.url = appendQuery(options.url, options.data);\n      options.data = undefined;\n    }\n  };\n\n  var appendQuery = function (url, query) {\n    if (query === '') {\n      return url;\n    }\n\n    return (url + '&' + query).replace(/[&?]{1,2}/, '?');\n  };\n\n  var mimeToDataType = function (mime) {\n    if (mime) {\n      mime = mime.split(';', 2)[0];\n    }\n\n    return mime && (mime === htmlType ? 'html' : mime === jsonType ? 'json' : scriptTypeRE.test(mime) ? 'script' : xmlTypeRE.test(mime) && 'xml') || 'text';\n  };\n\n  var parseArguments = function (url, data, success, dataType) {\n    if ($.isFunction(data)) {\n      dataType = success, success = data, data = undefined;\n    }\n\n    if (!$.isFunction(success)) {\n      dataType = success, success = undefined;\n    }\n\n    return {\n      url: url,\n      data: data,\n      success: success,\n      dataType: dataType\n    };\n  };\n\n  $.ajax = function (url, options) {\n    if (typeof url === \"object\") {\n      options = url;\n      url = undefined;\n    }\n\n    var settings = options || {};\n    settings.url = url || settings.url;\n\n    for (var key in $.ajaxSettings) {\n      if (settings[key] === undefined) {\n        settings[key] = $.ajaxSettings[key];\n      }\n    }\n\n    serializeData(settings);\n    var dataType = settings.dataType;\n\n    if (settings.cache === false || (!options || options.cache !== true) && 'script' === dataType) {\n      settings.url = appendQuery(settings.url, '_=' + $.now());\n    }\n\n    var mime = settings.accepts[dataType && dataType.toLowerCase()];\n    var headers = {};\n\n    var setHeader = function (name, value) {\n      headers[name.toLowerCase()] = [name, value];\n    };\n\n    var protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol;\n    var xhr = settings.xhr(settings);\n    var nativeSetHeader = xhr.setRequestHeader;\n    var abortTimeout;\n    setHeader('X-Requested-With', 'XMLHttpRequest');\n    setHeader('Accept', mime || '*/*');\n\n    if (!!(mime = settings.mimeType || mime)) {\n      if (mime.indexOf(',') > -1) {\n        mime = mime.split(',', 2)[0];\n      }\n\n      xhr.overrideMimeType && xhr.overrideMimeType(mime);\n    }\n\n    if (settings.contentType || settings.contentType !== false && settings.data && settings.type.toUpperCase() !== 'GET') {\n      setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded');\n    }\n\n    if (settings.headers) {\n      for (var name in settings.headers) setHeader(name, settings.headers[name]);\n    }\n\n    xhr.setRequestHeader = setHeader;\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        xhr.onreadystatechange = $.noop;\n        clearTimeout(abortTimeout);\n        var result,\n            error = false;\n        var isLocal = protocol === 'file:';\n\n        if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304 || xhr.status === 0 && isLocal && xhr.responseText) {\n          dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));\n          result = xhr.responseText;\n\n          try {\n            // http://perfectionkills.com/global-eval-what-are-the-options/\n            if (dataType === 'script') {\n              (1, eval)(result);\n            } else if (dataType === 'xml') {\n              result = xhr.responseXML;\n            } else if (dataType === 'json') {\n              result = blankRE.test(result) ? null : $.parseJSON(result);\n            }\n          } catch (e) {\n            error = e;\n          }\n\n          if (error) {\n            ajaxError(error, 'parsererror', xhr, settings);\n          } else {\n            ajaxSuccess(result, xhr, settings);\n          }\n        } else {\n          var status = xhr.status ? 'error' : 'abort';\n          var statusText = xhr.statusText || null;\n\n          if (isLocal) {\n            status = 'error';\n            statusText = '404';\n          }\n\n          ajaxError(statusText, status, xhr, settings);\n        }\n      }\n    };\n\n    if (ajaxBeforeSend(xhr, settings) === false) {\n      xhr.abort();\n      ajaxError(null, 'abort', xhr, settings);\n      return xhr;\n    }\n\n    if (settings.xhrFields) {\n      for (var name in settings.xhrFields) {\n        xhr[name] = settings.xhrFields[name];\n      }\n    }\n\n    var async = 'async' in settings ? settings.async : true;\n    xhr.open(settings.type.toUpperCase(), settings.url, async, settings.username, settings.password);\n\n    for (var name in headers) {\n      if (headers.hasOwnProperty(name)) {\n        nativeSetHeader.apply(xhr, headers[name]);\n      }\n    }\n\n    if (settings.timeout > 0) {\n      abortTimeout = setTimeout(function () {\n        xhr.onreadystatechange = $.noop;\n        xhr.abort();\n        ajaxError(null, 'timeout', xhr, settings);\n      }, settings.timeout);\n    }\n\n    xhr.send(settings.data ? settings.data : null);\n    return xhr;\n  };\n\n  $.param = function (obj, traditional) {\n    var params = [];\n\n    params.add = function (k, v) {\n      this.push(encodeURIComponent(k) + '=' + encodeURIComponent(v));\n    };\n\n    serialize(params, obj, traditional);\n    return params.join('&').replace(/%20/g, '+');\n  };\n\n  $.get = function\n    /* url, data, success, dataType */\n  () {\n    return $.ajax(parseArguments.apply(null, arguments));\n  };\n\n  $.post = function\n    /* url, data, success, dataType */\n  () {\n    var options = parseArguments.apply(null, arguments);\n    options.type = 'POST';\n    return $.ajax(options);\n  };\n\n  $.getJSON = function\n    /* url, data, success */\n  () {\n    var options = parseArguments.apply(null, arguments);\n    options.dataType = 'json';\n    return $.ajax(options);\n  };\n\n  $.fn.load = function (url, data, success) {\n    if (!this.length) return this;\n    var self = this,\n        parts = url.split(/\\s/),\n        selector,\n        options = parseArguments(url, data, success),\n        callback = options.success;\n    if (parts.length > 1) options.url = parts[0], selector = parts[1];\n\n    options.success = function (response) {\n      if (selector) {\n        var div = document.createElement('div');\n        div.innerHTML = response.replace(rscript, \"\");\n        var selectorDiv = document.createElement('div');\n        var childs = div.querySelectorAll(selector);\n\n        if (childs && childs.length > 0) {\n          for (var i = 0, len = childs.length; i < len; i++) {\n            selectorDiv.appendChild(childs[i]);\n          }\n        }\n\n        self[0].innerHTML = selectorDiv.innerHTML;\n      } else {\n        self[0].innerHTML = response;\n      }\n\n      callback && callback.apply(self, arguments);\n    };\n\n    $.ajax(options);\n    return this;\n  };\n})(mui, window);\n/**\n * 5+ ajax\n */\n\n\n(function ($) {\n  var originAnchor = document.createElement('a');\n  originAnchor.href = window.location.href;\n  $.plusReady(function () {\n    $.ajaxSettings = $.extend($.ajaxSettings, {\n      xhr: function (settings) {\n        if (settings.crossDomain) {\n          //强制使用plus跨域\n          return new plus.net.XMLHttpRequest();\n        } //仅在webview的url为远程文件，且ajax请求的资源不同源下使用plus.net.XMLHttpRequest\n\n\n        if (originAnchor.protocol !== 'file:') {\n          var urlAnchor = document.createElement('a');\n          urlAnchor.href = settings.url;\n          urlAnchor.href = urlAnchor.href;\n          settings.crossDomain = originAnchor.protocol + '//' + originAnchor.host !== urlAnchor.protocol + '//' + urlAnchor.host;\n\n          if (settings.crossDomain) {\n            return new plus.net.XMLHttpRequest();\n          }\n        }\n\n        if ($.os.ios && window.webkit && window.webkit.messageHandlers) {\n          //wkwebview下同样使用5+ xhr\n          return new plus.net.XMLHttpRequest();\n        }\n\n        return new window.XMLHttpRequest();\n      }\n    });\n  });\n})(mui);\n/**\n * mui layout(offset[,position,width,height...])\n * @param {type} $\n * @param {type} window\n * @param {type} undefined\n * @returns {undefined}\n */\n\n\n(function ($, window, undefined) {\n  $.offset = function (element) {\n    var box = {\n      top: 0,\n      left: 0\n    };\n\n    if (typeof element.getBoundingClientRect !== undefined) {\n      box = element.getBoundingClientRect();\n    }\n\n    return {\n      top: box.top + window.pageYOffset - element.clientTop,\n      left: box.left + window.pageXOffset - element.clientLeft\n    };\n  };\n})(mui, window);\n/**\n * mui animation\n */\n\n\n(function ($, window) {\n  /**\n   * scrollTo\n   */\n  $.scrollTo = function (scrollTop, duration, callback) {\n    duration = duration || 1000;\n\n    var scroll = function (duration) {\n      if (duration <= 0) {\n        window.scrollTo(0, scrollTop);\n        callback && callback();\n        return;\n      }\n\n      var distaince = scrollTop - window.scrollY;\n      setTimeout(function () {\n        window.scrollTo(0, window.scrollY + distaince / duration * 10);\n        scroll(duration - 10);\n      }, 16.7);\n    };\n\n    scroll(duration);\n  };\n\n  $.animationFrame = function (cb) {\n    var args, isQueued, context;\n    return function () {\n      args = arguments;\n      context = this;\n\n      if (!isQueued) {\n        isQueued = true;\n        requestAnimationFrame(function () {\n          cb.apply(context, args);\n          isQueued = false;\n        });\n      }\n    };\n  };\n})(mui, window);\n\n(function ($) {\n  var initializing = false,\n      fnTest = /xyz/.test(function () {\n    xyz;\n  }) ? /\\b_super\\b/ : /.*/;\n\n  var Class = function () {};\n\n  Class.extend = function Fn(prop) {\n    var _super = this.prototype;\n    initializing = true;\n    var prototype = new this();\n    initializing = false;\n\n    for (var name in prop) {\n      prototype[name] = typeof prop[name] == \"function\" && typeof _super[name] == \"function\" && fnTest.test(prop[name]) ? function (name, fn) {\n        return function () {\n          var tmp = this._super;\n          this._super = _super[name];\n          var ret = fn.apply(this, arguments);\n          this._super = tmp;\n          return ret;\n        };\n      }(name, prop[name]) : prop[name];\n    }\n\n    function Class() {\n      if (!initializing && this.init) this.init.apply(this, arguments);\n    }\n\n    Class.prototype = prototype;\n    Class.prototype.constructor = Class; //Class.extend = arguments.callee;\n\n    Class.extend = Fn;\n    return Class;\n  };\n\n  $.Class = Class;\n})(mui);\n\n(function ($, document, undefined) {\n  var CLASS_PULL_TOP_POCKET = 'mui-pull-top-pocket';\n  var CLASS_PULL_BOTTOM_POCKET = 'mui-pull-bottom-pocket';\n  var CLASS_PULL = 'mui-pull';\n  var CLASS_PULL_LOADING = 'mui-pull-loading';\n  var CLASS_PULL_CAPTION = 'mui-pull-caption';\n  var CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\n  var CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\n  var CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\n  var CLASS_ICON = 'mui-icon';\n  var CLASS_SPINNER = 'mui-spinner';\n  var CLASS_ICON_PULLDOWN = 'mui-icon-pulldown';\n  var CLASS_BLOCK = 'mui-block';\n  var CLASS_HIDDEN = 'mui-hidden';\n  var CLASS_VISIBILITY = 'mui-visibility';\n  var CLASS_LOADING_UP = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\n  var CLASS_LOADING_DOWN = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\n  var CLASS_LOADING = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_SPINNER;\n  var pocketHtml = ['<div class=\"' + CLASS_PULL + '\">', '<div class=\"{icon}\"></div>', '<div class=\"' + CLASS_PULL_CAPTION + '\">{contentrefresh}</div>', '</div>'].join('');\n  var PullRefresh = {\n    init: function (element, options) {\n      this._super(element, $.extend(true, {\n        scrollY: true,\n        scrollX: false,\n        indicators: true,\n        deceleration: 0.003,\n        down: {\n          height: 50,\n          contentinit: '下拉可以刷新',\n          contentdown: '下拉可以刷新',\n          contentover: '释放立即刷新',\n          contentrefresh: '正在刷新...'\n        },\n        up: {\n          height: 50,\n          auto: false,\n          contentinit: '上拉显示更多',\n          contentdown: '上拉显示更多',\n          contentrefresh: '正在加载...',\n          contentnomore: '没有更多数据了',\n          duration: 300\n        }\n      }, options));\n    },\n    _init: function () {\n      this._super();\n\n      this._initPocket();\n    },\n    _initPulldownRefresh: function () {\n      this.pulldown = true;\n\n      if (this.topPocket) {\n        this.pullPocket = this.topPocket;\n        this.pullPocket.classList.add(CLASS_BLOCK);\n        this.pullPocket.classList.add(CLASS_VISIBILITY);\n        this.pullCaption = this.topCaption;\n        this.pullLoading = this.topLoading;\n      }\n    },\n    _initPullupRefresh: function () {\n      this.pulldown = false;\n\n      if (this.bottomPocket) {\n        this.pullPocket = this.bottomPocket;\n        this.pullPocket.classList.add(CLASS_BLOCK);\n        this.pullPocket.classList.add(CLASS_VISIBILITY);\n        this.pullCaption = this.bottomCaption;\n        this.pullLoading = this.bottomLoading;\n      }\n    },\n    _initPocket: function () {\n      var options = this.options;\n\n      if (options.down && options.down.hasOwnProperty('callback')) {\n        this.topPocket = this.scroller.querySelector('.' + CLASS_PULL_TOP_POCKET);\n\n        if (!this.topPocket) {\n          this.topPocket = this._createPocket(CLASS_PULL_TOP_POCKET, options.down, CLASS_LOADING_DOWN);\n          this.wrapper.insertBefore(this.topPocket, this.wrapper.firstChild);\n        }\n\n        this.topLoading = this.topPocket.querySelector('.' + CLASS_PULL_LOADING);\n        this.topCaption = this.topPocket.querySelector('.' + CLASS_PULL_CAPTION);\n      }\n\n      if (options.up && options.up.hasOwnProperty('callback')) {\n        this.bottomPocket = this.scroller.querySelector('.' + CLASS_PULL_BOTTOM_POCKET);\n\n        if (!this.bottomPocket) {\n          this.bottomPocket = this._createPocket(CLASS_PULL_BOTTOM_POCKET, options.up, CLASS_LOADING);\n          this.scroller.appendChild(this.bottomPocket);\n        }\n\n        this.bottomLoading = this.bottomPocket.querySelector('.' + CLASS_PULL_LOADING);\n        this.bottomCaption = this.bottomPocket.querySelector('.' + CLASS_PULL_CAPTION); //TODO only for h5\n\n        this.wrapper.addEventListener('scrollbottom', this);\n      }\n    },\n    _createPocket: function (clazz, options, iconClass) {\n      var pocket = document.createElement('div');\n      pocket.className = clazz;\n      pocket.innerHTML = pocketHtml.replace('{contentrefresh}', options.contentinit).replace('{icon}', iconClass);\n      return pocket;\n    },\n    _resetPullDownLoading: function () {\n      var loading = this.pullLoading;\n\n      if (loading) {\n        this.pullCaption.innerHTML = this.options.down.contentdown;\n        loading.style.webkitTransition = \"\";\n        loading.style.webkitTransform = \"\";\n        loading.style.webkitAnimation = \"\";\n        loading.className = CLASS_LOADING_DOWN;\n      }\n    },\n    _setCaptionClass: function (isPulldown, caption, title) {\n      if (!isPulldown) {\n        switch (title) {\n          case this.options.up.contentdown:\n            caption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n            break;\n\n          case this.options.up.contentrefresh:\n            caption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH;\n            break;\n\n          case this.options.up.contentnomore:\n            caption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\n            break;\n        }\n      }\n    },\n    _setCaption: function (title, reset) {\n      if (this.loading) {\n        return;\n      }\n\n      var options = this.options;\n      var pocket = this.pullPocket;\n      var caption = this.pullCaption;\n      var loading = this.pullLoading;\n      var isPulldown = this.pulldown;\n      var self = this;\n\n      if (pocket) {\n        if (reset) {\n          setTimeout(function () {\n            caption.innerHTML = self.lastTitle = title;\n\n            if (isPulldown) {\n              loading.className = CLASS_LOADING_DOWN;\n            } else {\n              self._setCaptionClass(false, caption, title);\n\n              loading.className = CLASS_LOADING;\n            }\n\n            loading.style.webkitAnimation = \"\";\n            loading.style.webkitTransition = \"\";\n            loading.style.webkitTransform = \"\";\n          }, 100);\n        } else {\n          if (title !== this.lastTitle) {\n            caption.innerHTML = title;\n\n            if (isPulldown) {\n              if (title === options.down.contentrefresh) {\n                loading.className = CLASS_LOADING;\n                loading.style.webkitAnimation = \"spinner-spin 1s step-end infinite\";\n              } else if (title === options.down.contentover) {\n                loading.className = CLASS_LOADING_UP;\n                loading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\n                loading.style.webkitTransform = \"rotate(180deg)\";\n              } else if (title === options.down.contentdown) {\n                loading.className = CLASS_LOADING_DOWN;\n                loading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\n                loading.style.webkitTransform = \"rotate(0deg)\";\n              }\n            } else {\n              if (title === options.up.contentrefresh) {\n                loading.className = CLASS_LOADING + ' ' + CLASS_VISIBILITY;\n              } else {\n                loading.className = CLASS_LOADING + ' ' + CLASS_HIDDEN;\n              }\n\n              self._setCaptionClass(false, caption, title);\n            }\n\n            this.lastTitle = title;\n          }\n        }\n      }\n    }\n  };\n  $.PullRefresh = PullRefresh;\n})(mui, document);\n\n(function ($, window, document, undefined) {\n  var CLASS_SCROLL = 'mui-scroll';\n  var CLASS_SCROLLBAR = 'mui-scrollbar';\n  var CLASS_INDICATOR = 'mui-scrollbar-indicator';\n  var CLASS_SCROLLBAR_VERTICAL = CLASS_SCROLLBAR + '-vertical';\n  var CLASS_SCROLLBAR_HORIZONTAL = CLASS_SCROLLBAR + '-horizontal';\n  var CLASS_ACTIVE = 'mui-active';\n  var ease = {\n    quadratic: {\n      style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n      fn: function (k) {\n        return k * (2 - k);\n      }\n    },\n    circular: {\n      style: 'cubic-bezier(0.1, 0.57, 0.1, 1)',\n      fn: function (k) {\n        return Math.sqrt(1 - --k * k);\n      }\n    },\n    outCirc: {\n      style: 'cubic-bezier(0.075, 0.82, 0.165, 1)'\n    },\n    outCubic: {\n      style: 'cubic-bezier(0.165, 0.84, 0.44, 1)'\n    }\n  };\n  var Scroll = $.Class.extend({\n    init: function (element, options) {\n      this.wrapper = this.element = element;\n      this.scroller = this.wrapper.children[0];\n      this.scrollerStyle = this.scroller && this.scroller.style;\n      this.stopped = false;\n      this.options = $.extend(true, {\n        scrollY: true,\n        //是否竖向滚动\n        scrollX: false,\n        //是否横向滚动\n        startX: 0,\n        //初始化时滚动至x\n        startY: 0,\n        //初始化时滚动至y\n        indicators: true,\n        //是否显示滚动条\n        stopPropagation: false,\n        hardwareAccelerated: true,\n        fixedBadAndorid: false,\n        preventDefaultException: {\n          tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\n        },\n        momentum: true,\n        snapX: 0.5,\n        //横向切换距离(以当前容器宽度为基准)\n        snap: false,\n        //图片轮播，拖拽式选项卡\n        bounce: true,\n        //是否启用回弹\n        bounceTime: 500,\n        //回弹动画时间\n        bounceEasing: ease.outCirc,\n        //回弹动画曲线\n        scrollTime: 500,\n        scrollEasing: ease.outCubic,\n        //轮播动画曲线\n        directionLockThreshold: 5,\n        parallaxElement: false,\n        //视差元素\n        parallaxRatio: 0.5\n      }, options);\n      this.x = 0;\n      this.y = 0;\n      this.translateZ = this.options.hardwareAccelerated ? ' translateZ(0)' : '';\n\n      this._init();\n\n      if (this.scroller) {\n        this.refresh(); //\t\t\t\tif (this.options.startX !== 0 || this.options.startY !== 0) { //需要判断吗？后续根据实际情况再看看\n\n        this.scrollTo(this.options.startX, this.options.startY); //\t\t\t\t}\n      }\n    },\n    _init: function () {\n      this._initParallax();\n\n      this._initIndicators();\n\n      this._initEvent();\n    },\n    _initParallax: function () {\n      if (this.options.parallaxElement) {\n        this.parallaxElement = document.querySelector(this.options.parallaxElement);\n        this.parallaxStyle = this.parallaxElement.style;\n        this.parallaxHeight = this.parallaxElement.offsetHeight;\n        this.parallaxImgStyle = this.parallaxElement.querySelector('img').style;\n      }\n    },\n    _initIndicators: function () {\n      var self = this;\n      self.indicators = [];\n\n      if (!this.options.indicators) {\n        return;\n      }\n\n      var indicators = [],\n          indicator; // Vertical scrollbar\n\n      if (self.options.scrollY) {\n        indicator = {\n          el: this._createScrollBar(CLASS_SCROLLBAR_VERTICAL),\n          listenX: false\n        };\n        this.wrapper.appendChild(indicator.el);\n        indicators.push(indicator);\n      } // Horizontal scrollbar\n\n\n      if (this.options.scrollX) {\n        indicator = {\n          el: this._createScrollBar(CLASS_SCROLLBAR_HORIZONTAL),\n          listenY: false\n        };\n        this.wrapper.appendChild(indicator.el);\n        indicators.push(indicator);\n      }\n\n      for (var i = indicators.length; i--;) {\n        this.indicators.push(new Indicator(this, indicators[i]));\n      }\n    },\n    _initSnap: function () {\n      this.currentPage = {};\n      this.pages = [];\n      var snaps = this.snaps;\n      var length = snaps.length;\n      var m = 0;\n      var n = -1;\n      var x = 0;\n      var leftX = 0;\n      var rightX = 0;\n      var snapX = 0;\n\n      for (var i = 0; i < length; i++) {\n        var snap = snaps[i];\n        var offsetLeft = snap.offsetLeft;\n        var offsetWidth = snap.offsetWidth;\n\n        if (i === 0 || offsetLeft <= snaps[i - 1].offsetLeft) {\n          m = 0;\n          n++;\n        }\n\n        if (!this.pages[m]) {\n          this.pages[m] = [];\n        }\n\n        x = this._getSnapX(offsetLeft);\n        snapX = Math.round(offsetWidth * this.options.snapX);\n        leftX = x - snapX;\n        rightX = x - offsetWidth + snapX;\n        this.pages[m][n] = {\n          x: x,\n          leftX: leftX,\n          rightX: rightX,\n          pageX: m,\n          element: snap\n        };\n\n        if (snap.classList.contains(CLASS_ACTIVE)) {\n          this.currentPage = this.pages[m][0];\n        }\n\n        if (x >= this.maxScrollX) {\n          m++;\n        }\n      }\n\n      this.options.startX = this.currentPage.x || 0;\n    },\n    _getSnapX: function (offsetLeft) {\n      return Math.max(Math.min(0, -offsetLeft + this.wrapperWidth / 2), this.maxScrollX);\n    },\n    _gotoPage: function (index) {\n      this.currentPage = this.pages[Math.min(index, this.pages.length - 1)][0];\n\n      for (var i = 0, len = this.snaps.length; i < len; i++) {\n        if (i === index) {\n          this.snaps[i].classList.add(CLASS_ACTIVE);\n        } else {\n          this.snaps[i].classList.remove(CLASS_ACTIVE);\n        }\n      }\n\n      this.scrollTo(this.currentPage.x, 0, this.options.scrollTime);\n    },\n    _nearestSnap: function (x) {\n      if (!this.pages.length) {\n        return {\n          x: 0,\n          pageX: 0\n        };\n      }\n\n      var i = 0;\n      var length = this.pages.length;\n\n      if (x > 0) {\n        x = 0;\n      } else if (x < this.maxScrollX) {\n        x = this.maxScrollX;\n      }\n\n      for (; i < length; i++) {\n        var nearestX = this.direction === 'left' ? this.pages[i][0].leftX : this.pages[i][0].rightX;\n\n        if (x >= nearestX) {\n          return this.pages[i][0];\n        }\n      }\n\n      return {\n        x: 0,\n        pageX: 0\n      };\n    },\n    _initEvent: function (detach) {\n      var action = detach ? 'removeEventListener' : 'addEventListener';\n      window[action]('orientationchange', this);\n      window[action]('resize', this);\n      this.scroller[action]('webkitTransitionEnd', this);\n      this.wrapper[action]($.EVENT_START, this);\n      this.wrapper[action]($.EVENT_CANCEL, this);\n      this.wrapper[action]($.EVENT_END, this);\n      this.wrapper[action]('drag', this);\n      this.wrapper[action]('dragend', this);\n      this.wrapper[action]('flick', this);\n      this.wrapper[action]('scrollend', this);\n\n      if (this.options.scrollX) {\n        this.wrapper[action]('swiperight', this);\n      }\n\n      var segmentedControl = this.wrapper.querySelector('.mui-segmented-control');\n\n      if (segmentedControl) {\n        //靠，这个bug排查了一下午，阻止hash跳转，一旦hash跳转会导致可拖拽选项卡的tab不见\n        mui(segmentedControl)[detach ? 'off' : 'on']('click', 'a', $.preventDefault);\n      }\n\n      this.wrapper[action]('scrollstart', this);\n      this.wrapper[action]('refresh', this);\n    },\n    _handleIndicatorScrollend: function () {\n      this.indicators.map(function (indicator) {\n        indicator.fade();\n      });\n    },\n    _handleIndicatorScrollstart: function () {\n      this.indicators.map(function (indicator) {\n        indicator.fade(1);\n      });\n    },\n    _handleIndicatorRefresh: function () {\n      this.indicators.map(function (indicator) {\n        indicator.refresh();\n      });\n    },\n    handleEvent: function (e) {\n      if (this.stopped) {\n        this.resetPosition();\n        return;\n      }\n\n      switch (e.type) {\n        case $.EVENT_START:\n          this._start(e);\n\n          break;\n\n        case 'drag':\n          this.options.stopPropagation && e.stopPropagation();\n\n          this._drag(e);\n\n          break;\n\n        case 'dragend':\n        case 'flick':\n          this.options.stopPropagation && e.stopPropagation();\n\n          this._flick(e);\n\n          break;\n\n        case $.EVENT_CANCEL:\n        case $.EVENT_END:\n          this._end(e);\n\n          break;\n\n        case 'webkitTransitionEnd':\n          this.transitionTimer && this.transitionTimer.cancel();\n\n          this._transitionEnd(e);\n\n          break;\n\n        case 'scrollstart':\n          this._handleIndicatorScrollstart(e);\n\n          break;\n\n        case 'scrollend':\n          this._handleIndicatorScrollend(e);\n\n          this._scrollend(e);\n\n          e.stopPropagation();\n          break;\n\n        case 'orientationchange':\n        case 'resize':\n          this._resize();\n\n          break;\n\n        case 'swiperight':\n          e.stopPropagation();\n          break;\n\n        case 'refresh':\n          this._handleIndicatorRefresh(e);\n\n          break;\n      }\n    },\n    _start: function (e) {\n      this.moved = this.needReset = false;\n\n      this._transitionTime();\n\n      if (this.isInTransition) {\n        this.needReset = true;\n        this.isInTransition = false;\n        var pos = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\n        this.setTranslate(Math.round(pos.x), Math.round(pos.y)); //\t\t\t\tthis.resetPosition(); //reset\n\n        $.trigger(this.scroller, 'scrollend', this); //\t\t\t\te.stopPropagation();\n\n        e.preventDefault();\n      }\n\n      this.reLayout();\n      $.trigger(this.scroller, 'beforescrollstart', this);\n    },\n    _getDirectionByAngle: function (angle) {\n      if (angle < -80 && angle > -100) {\n        return 'up';\n      } else if (angle >= 80 && angle < 100) {\n        return 'down';\n      } else if (angle >= 170 || angle <= -170) {\n        return 'left';\n      } else if (angle >= -35 && angle <= 10) {\n        return 'right';\n      }\n\n      return null;\n    },\n    _drag: function (e) {\n      //\t\t\tif (this.needReset) {\n      //\t\t\t\te.stopPropagation(); //disable parent drag(nested scroller)\n      //\t\t\t\treturn;\n      //\t\t\t}\n      var detail = e.detail;\n\n      if (this.options.scrollY || detail.direction === 'up' || detail.direction === 'down') {\n        //如果是竖向滚动或手势方向是上或下\n        //ios8 hack\n        if ($.os.ios && parseFloat($.os.version) >= 8) {\n          //多webview时，离开当前webview会导致后续touch事件不触发\n          var clientY = detail.gesture.touches[0].clientY; //下拉刷新 or 上拉加载\n\n          if (clientY + 10 > window.innerHeight || clientY < 10) {\n            this.resetPosition(this.options.bounceTime);\n            return;\n          }\n        }\n      }\n\n      var isPreventDefault = isReturn = false;\n\n      var direction = this._getDirectionByAngle(detail.angle);\n\n      if (detail.direction === 'left' || detail.direction === 'right') {\n        if (this.options.scrollX) {\n          isPreventDefault = true;\n\n          if (!this.moved) {\n            //识别角度(该角度导致轮播不灵敏)\n            //\t\t\t\t\t\tif (direction !== 'left' && direction !== 'right') {\n            //\t\t\t\t\t\t\tisReturn = true;\n            //\t\t\t\t\t\t} else {\n            $.gestures.session.lockDirection = true; //锁定方向\n\n            $.gestures.session.startDirection = detail.direction; //\t\t\t\t\t\t}\n          }\n        } else if (this.options.scrollY && !this.moved) {\n          isReturn = true;\n        }\n      } else if (detail.direction === 'up' || detail.direction === 'down') {\n        if (this.options.scrollY) {\n          isPreventDefault = true; //\t\t\t\t\tif (!this.moved) { //识别角度,竖向滚动似乎没必要进行小角度验证\n          //\t\t\t\t\t\tif (direction !== 'up' && direction !== 'down') {\n          //\t\t\t\t\t\t\tisReturn = true;\n          //\t\t\t\t\t\t}\n          //\t\t\t\t\t}\n\n          if (!this.moved) {\n            $.gestures.session.lockDirection = true; //锁定方向\n\n            $.gestures.session.startDirection = detail.direction;\n          }\n        } else if (this.options.scrollX && !this.moved) {\n          isReturn = true;\n        }\n      } else {\n        isReturn = true;\n      }\n\n      if (this.moved || isPreventDefault) {\n        e.stopPropagation(); //阻止冒泡(scroll类嵌套)\n\n        detail.gesture && detail.gesture.preventDefault();\n      }\n\n      if (isReturn) {\n        //禁止非法方向滚动\n        return;\n      }\n\n      if (!this.moved) {\n        $.trigger(this.scroller, 'scrollstart', this);\n      } else {\n        e.stopPropagation(); //move期间阻止冒泡(scroll嵌套)\n      }\n\n      var deltaX = 0;\n      var deltaY = 0;\n\n      if (!this.moved) {\n        //start\n        deltaX = detail.deltaX;\n        deltaY = detail.deltaY;\n      } else {\n        //move\n        deltaX = detail.deltaX - $.gestures.session.prevTouch.deltaX;\n        deltaY = detail.deltaY - $.gestures.session.prevTouch.deltaY;\n      }\n\n      var absDeltaX = Math.abs(detail.deltaX);\n      var absDeltaY = Math.abs(detail.deltaY);\n\n      if (absDeltaX > absDeltaY + this.options.directionLockThreshold) {\n        deltaY = 0;\n      } else if (absDeltaY >= absDeltaX + this.options.directionLockThreshold) {\n        deltaX = 0;\n      }\n\n      deltaX = this.hasHorizontalScroll ? deltaX : 0;\n      deltaY = this.hasVerticalScroll ? deltaY : 0;\n      var newX = this.x + deltaX;\n      var newY = this.y + deltaY; // Slow down if outside of the boundaries\n\n      if (newX > 0 || newX < this.maxScrollX) {\n        newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\n      }\n\n      if (newY > 0 || newY < this.maxScrollY) {\n        newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\n      }\n\n      if (!this.requestAnimationFrame) {\n        this._updateTranslate();\n      }\n\n      this.direction = detail.deltaX > 0 ? 'right' : 'left';\n      this.moved = true;\n      this.x = newX;\n      this.y = newY;\n      $.trigger(this.scroller, 'scroll', this);\n    },\n    _flick: function (e) {\n      //\t\t\tif (!this.moved || this.needReset) {\n      //\t\t\t\treturn;\n      //\t\t\t}\n      if (!this.moved) {\n        return;\n      }\n\n      e.stopPropagation();\n      var detail = e.detail;\n\n      this._clearRequestAnimationFrame();\n\n      if (e.type === 'dragend' && detail.flick) {\n        //dragend\n        return;\n      }\n\n      var newX = Math.round(this.x);\n      var newY = Math.round(this.y);\n      this.isInTransition = false; // reset if we are outside of the boundaries\n\n      if (this.resetPosition(this.options.bounceTime)) {\n        return;\n      }\n\n      this.scrollTo(newX, newY); // ensures that the last position is rounded\n\n      if (e.type === 'dragend') {\n        //dragend\n        $.trigger(this.scroller, 'scrollend', this);\n        return;\n      }\n\n      var time = 0;\n      var easing = ''; // start momentum animation if needed\n\n      if (this.options.momentum && detail.flickTime < 300) {\n        momentumX = this.hasHorizontalScroll ? this._momentum(this.x, detail.flickDistanceX, detail.flickTime, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : {\n          destination: newX,\n          duration: 0\n        };\n        momentumY = this.hasVerticalScroll ? this._momentum(this.y, detail.flickDistanceY, detail.flickTime, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : {\n          destination: newY,\n          duration: 0\n        };\n        newX = momentumX.destination;\n        newY = momentumY.destination;\n        time = Math.max(momentumX.duration, momentumY.duration);\n        this.isInTransition = true;\n      }\n\n      if (newX != this.x || newY != this.y) {\n        if (newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY) {\n          easing = ease.quadratic;\n        }\n\n        this.scrollTo(newX, newY, time, easing);\n        return;\n      }\n\n      $.trigger(this.scroller, 'scrollend', this); //\t\t\te.stopPropagation();\n    },\n    _end: function (e) {\n      this.needReset = false;\n\n      if (!this.moved && this.needReset || e.type === $.EVENT_CANCEL) {\n        this.resetPosition();\n      }\n    },\n    _transitionEnd: function (e) {\n      if (e.target != this.scroller || !this.isInTransition) {\n        return;\n      }\n\n      this._transitionTime();\n\n      if (!this.resetPosition(this.options.bounceTime)) {\n        this.isInTransition = false;\n        $.trigger(this.scroller, 'scrollend', this);\n      }\n    },\n    _scrollend: function (e) {\n      if (this.y === 0 && this.maxScrollY === 0 || Math.abs(this.y) > 0 && this.y <= this.maxScrollY) {\n        $.trigger(this.scroller, 'scrollbottom', this);\n      }\n    },\n    _resize: function () {\n      var that = this;\n      clearTimeout(that.resizeTimeout);\n      that.resizeTimeout = setTimeout(function () {\n        that.refresh();\n      }, that.options.resizePolling);\n    },\n    _transitionTime: function (time) {\n      time = time || 0;\n      this.scrollerStyle['webkitTransitionDuration'] = time + 'ms';\n\n      if (this.parallaxElement && this.options.scrollY) {\n        //目前仅支持竖向视差效果\n        this.parallaxStyle['webkitTransitionDuration'] = time + 'ms';\n      }\n\n      if (this.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\n        this.scrollerStyle['webkitTransitionDuration'] = '0.001s';\n\n        if (this.parallaxElement && this.options.scrollY) {\n          //目前仅支持竖向视差效果\n          this.parallaxStyle['webkitTransitionDuration'] = '0.001s';\n        }\n      }\n\n      if (this.indicators) {\n        for (var i = this.indicators.length; i--;) {\n          this.indicators[i].transitionTime(time);\n        }\n      }\n\n      if (time) {\n        //自定义timer，保证webkitTransitionEnd始终触发\n        this.transitionTimer && this.transitionTimer.cancel();\n        this.transitionTimer = $.later(function () {\n          $.trigger(this.scroller, 'webkitTransitionEnd');\n        }, time + 100, this);\n      }\n    },\n    _transitionTimingFunction: function (easing) {\n      this.scrollerStyle['webkitTransitionTimingFunction'] = easing;\n\n      if (this.parallaxElement && this.options.scrollY) {\n        //目前仅支持竖向视差效果\n        this.parallaxStyle['webkitTransitionDuration'] = easing;\n      }\n\n      if (this.indicators) {\n        for (var i = this.indicators.length; i--;) {\n          this.indicators[i].transitionTimingFunction(easing);\n        }\n      }\n    },\n    _translate: function (x, y) {\n      this.x = x;\n      this.y = y;\n    },\n    _clearRequestAnimationFrame: function () {\n      if (this.requestAnimationFrame) {\n        cancelAnimationFrame(this.requestAnimationFrame);\n        this.requestAnimationFrame = null;\n      }\n    },\n    _updateTranslate: function () {\n      var self = this;\n\n      if (self.x !== self.lastX || self.y !== self.lastY) {\n        self.setTranslate(self.x, self.y);\n      }\n\n      self.requestAnimationFrame = requestAnimationFrame(function () {\n        self._updateTranslate();\n      });\n    },\n    _createScrollBar: function (clazz) {\n      var scrollbar = document.createElement('div');\n      var indicator = document.createElement('div');\n      scrollbar.className = CLASS_SCROLLBAR + ' ' + clazz;\n      indicator.className = CLASS_INDICATOR;\n      scrollbar.appendChild(indicator);\n\n      if (clazz === CLASS_SCROLLBAR_VERTICAL) {\n        this.scrollbarY = scrollbar;\n        this.scrollbarIndicatorY = indicator;\n      } else if (clazz === CLASS_SCROLLBAR_HORIZONTAL) {\n        this.scrollbarX = scrollbar;\n        this.scrollbarIndicatorX = indicator;\n      }\n\n      this.wrapper.appendChild(scrollbar);\n      return scrollbar;\n    },\n    _preventDefaultException: function (el, exceptions) {\n      for (var i in exceptions) {\n        if (exceptions[i].test(el[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    _reLayout: function () {\n      if (!this.hasHorizontalScroll) {\n        this.maxScrollX = 0;\n        this.scrollerWidth = this.wrapperWidth;\n      }\n\n      if (!this.hasVerticalScroll) {\n        this.maxScrollY = 0;\n        this.scrollerHeight = this.wrapperHeight;\n      }\n\n      this.indicators.map(function (indicator) {\n        indicator.refresh();\n      }); //以防slider类嵌套使用\n\n      if (this.options.snap && typeof this.options.snap === 'string') {\n        var items = this.scroller.querySelectorAll(this.options.snap);\n        this.itemLength = 0;\n        this.snaps = [];\n\n        for (var i = 0, len = items.length; i < len; i++) {\n          var item = items[i];\n\n          if (item.parentNode === this.scroller) {\n            this.itemLength++;\n            this.snaps.push(item);\n          }\n        }\n\n        this._initSnap(); //需要每次都_initSnap么。其实init的时候执行一次，后续resize的时候执行一次就行了吧.先这么做吧，如果影响性能，再调整\n\n      }\n    },\n    _momentum: function (current, distance, time, lowerMargin, wrapperSize, deceleration) {\n      var speed = parseFloat(Math.abs(distance) / time),\n          destination,\n          duration;\n      deceleration = deceleration === undefined ? 0.0006 : deceleration;\n      destination = current + speed * speed / (2 * deceleration) * (distance < 0 ? -1 : 1);\n      duration = speed / deceleration;\n\n      if (destination < lowerMargin) {\n        destination = wrapperSize ? lowerMargin - wrapperSize / 2.5 * (speed / 8) : lowerMargin;\n        distance = Math.abs(destination - current);\n        duration = distance / speed;\n      } else if (destination > 0) {\n        destination = wrapperSize ? wrapperSize / 2.5 * (speed / 8) : 0;\n        distance = Math.abs(current) + destination;\n        duration = distance / speed;\n      }\n\n      return {\n        destination: Math.round(destination),\n        duration: duration\n      };\n    },\n    _getTranslateStr: function (x, y) {\n      if (this.options.hardwareAccelerated) {\n        return 'translate3d(' + x + 'px,' + y + 'px,0px) ' + this.translateZ;\n      }\n\n      return 'translate(' + x + 'px,' + y + 'px) ';\n    },\n    //API\n    setStopped: function (stopped) {\n      this.stopped = !!stopped;\n    },\n    setTranslate: function (x, y) {\n      this.x = x;\n      this.y = y;\n      this.scrollerStyle['webkitTransform'] = this._getTranslateStr(x, y);\n\n      if (this.parallaxElement && this.options.scrollY) {\n        //目前仅支持竖向视差效果\n        var parallaxY = y * this.options.parallaxRatio;\n        var scale = 1 + parallaxY / ((this.parallaxHeight - parallaxY) / 2);\n\n        if (scale > 1) {\n          this.parallaxImgStyle['opacity'] = 1 - parallaxY / 100 * this.options.parallaxRatio;\n          this.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -parallaxY) + ' scale(' + scale + ',' + scale + ')';\n        } else {\n          this.parallaxImgStyle['opacity'] = 1;\n          this.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -1) + ' scale(1,1)';\n        }\n      }\n\n      if (this.indicators) {\n        for (var i = this.indicators.length; i--;) {\n          this.indicators[i].updatePosition();\n        }\n      }\n\n      this.lastX = this.x;\n      this.lastY = this.y;\n      $.trigger(this.scroller, 'scroll', this);\n    },\n    reLayout: function () {\n      this.wrapper.offsetHeight;\n      var paddingLeft = parseFloat($.getStyles(this.wrapper, 'padding-left')) || 0;\n      var paddingRight = parseFloat($.getStyles(this.wrapper, 'padding-right')) || 0;\n      var paddingTop = parseFloat($.getStyles(this.wrapper, 'padding-top')) || 0;\n      var paddingBottom = parseFloat($.getStyles(this.wrapper, 'padding-bottom')) || 0;\n      var clientWidth = this.wrapper.clientWidth;\n      var clientHeight = this.wrapper.clientHeight;\n      this.scrollerWidth = this.scroller.offsetWidth;\n      this.scrollerHeight = this.scroller.offsetHeight;\n      this.wrapperWidth = clientWidth - paddingLeft - paddingRight;\n      this.wrapperHeight = clientHeight - paddingTop - paddingBottom;\n      this.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\n      this.maxScrollY = Math.min(this.wrapperHeight - this.scrollerHeight, 0);\n      this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0;\n      this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0;\n\n      this._reLayout();\n    },\n    resetPosition: function (time) {\n      var x = this.x,\n          y = this.y;\n      time = time || 0;\n\n      if (!this.hasHorizontalScroll || this.x > 0) {\n        x = 0;\n      } else if (this.x < this.maxScrollX) {\n        x = this.maxScrollX;\n      }\n\n      if (!this.hasVerticalScroll || this.y > 0) {\n        y = 0;\n      } else if (this.y < this.maxScrollY) {\n        y = this.maxScrollY;\n      }\n\n      if (x == this.x && y == this.y) {\n        return false;\n      }\n\n      this.scrollTo(x, y, time, this.options.scrollEasing);\n      return true;\n    },\n    _reInit: function () {\n      var groups = this.wrapper.querySelectorAll('.' + CLASS_SCROLL);\n\n      for (var i = 0, len = groups.length; i < len; i++) {\n        if (groups[i].parentNode === this.wrapper) {\n          this.scroller = groups[i];\n          break;\n        }\n      }\n\n      this.scrollerStyle = this.scroller && this.scroller.style;\n    },\n    refresh: function () {\n      this._reInit();\n\n      this.reLayout();\n      $.trigger(this.scroller, 'refresh', this);\n      this.resetPosition();\n    },\n    scrollTo: function (x, y, time, easing) {\n      var easing = easing || ease.circular; //\t\t\tthis.isInTransition = time > 0 && (this.lastX != x || this.lastY != y);\n      //暂不严格判断x,y，否则会导致部分版本上不正常触发轮播\n\n      this.isInTransition = time > 0;\n\n      if (this.isInTransition) {\n        this._clearRequestAnimationFrame();\n\n        this._transitionTimingFunction(easing.style);\n\n        this._transitionTime(time);\n\n        this.setTranslate(x, y);\n      } else {\n        this.setTranslate(x, y);\n      }\n    },\n    scrollToBottom: function (time, easing) {\n      time = time || this.options.scrollTime;\n      this.scrollTo(0, this.maxScrollY, time, easing);\n    },\n    gotoPage: function (index) {\n      this._gotoPage(index);\n    },\n    destroy: function () {\n      this._initEvent(true); //detach\n\n\n      delete $.data[this.wrapper.getAttribute('data-scroll')];\n      this.wrapper.setAttribute('data-scroll', '');\n    }\n  }); //Indicator\n\n  var Indicator = function (scroller, options) {\n    this.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\n    this.wrapperStyle = this.wrapper.style;\n    this.indicator = this.wrapper.children[0];\n    this.indicatorStyle = this.indicator.style;\n    this.scroller = scroller;\n    this.options = $.extend({\n      listenX: true,\n      listenY: true,\n      fade: false,\n      speedRatioX: 0,\n      speedRatioY: 0\n    }, options);\n    this.sizeRatioX = 1;\n    this.sizeRatioY = 1;\n    this.maxPosX = 0;\n    this.maxPosY = 0;\n\n    if (this.options.fade) {\n      this.wrapperStyle['webkitTransform'] = this.scroller.translateZ;\n      this.wrapperStyle['webkitTransitionDuration'] = this.options.fixedBadAndorid && $.os.isBadAndroid ? '0.001s' : '0ms';\n      this.wrapperStyle.opacity = '0';\n    }\n  };\n\n  Indicator.prototype = {\n    handleEvent: function (e) {},\n    transitionTime: function (time) {\n      time = time || 0;\n      this.indicatorStyle['webkitTransitionDuration'] = time + 'ms';\n\n      if (this.scroller.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\n        this.indicatorStyle['webkitTransitionDuration'] = '0.001s';\n      }\n    },\n    transitionTimingFunction: function (easing) {\n      this.indicatorStyle['webkitTransitionTimingFunction'] = easing;\n    },\n    refresh: function () {\n      this.transitionTime();\n\n      if (this.options.listenX && !this.options.listenY) {\n        this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\n      } else if (this.options.listenY && !this.options.listenX) {\n        this.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\n      } else {\n        this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\n      }\n\n      this.wrapper.offsetHeight; // force refresh\n\n      if (this.options.listenX) {\n        this.wrapperWidth = this.wrapper.clientWidth;\n        this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\n        this.indicatorStyle.width = this.indicatorWidth + 'px';\n        this.maxPosX = this.wrapperWidth - this.indicatorWidth;\n        this.minBoundaryX = 0;\n        this.maxBoundaryX = this.maxPosX;\n        this.sizeRatioX = this.options.speedRatioX || this.scroller.maxScrollX && this.maxPosX / this.scroller.maxScrollX;\n      }\n\n      if (this.options.listenY) {\n        this.wrapperHeight = this.wrapper.clientHeight;\n        this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\n        this.indicatorStyle.height = this.indicatorHeight + 'px';\n        this.maxPosY = this.wrapperHeight - this.indicatorHeight;\n        this.minBoundaryY = 0;\n        this.maxBoundaryY = this.maxPosY;\n        this.sizeRatioY = this.options.speedRatioY || this.scroller.maxScrollY && this.maxPosY / this.scroller.maxScrollY;\n      }\n\n      this.updatePosition();\n    },\n    updatePosition: function () {\n      var x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\n          y = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\n\n      if (x < this.minBoundaryX) {\n        this.width = Math.max(this.indicatorWidth + x, 8);\n        this.indicatorStyle.width = this.width + 'px';\n        x = this.minBoundaryX;\n      } else if (x > this.maxBoundaryX) {\n        this.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\n        this.indicatorStyle.width = this.width + 'px';\n        x = this.maxPosX + this.indicatorWidth - this.width;\n      } else if (this.width != this.indicatorWidth) {\n        this.width = this.indicatorWidth;\n        this.indicatorStyle.width = this.width + 'px';\n      }\n\n      if (y < this.minBoundaryY) {\n        this.height = Math.max(this.indicatorHeight + y * 3, 8);\n        this.indicatorStyle.height = this.height + 'px';\n        y = this.minBoundaryY;\n      } else if (y > this.maxBoundaryY) {\n        this.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\n        this.indicatorStyle.height = this.height + 'px';\n        y = this.maxPosY + this.indicatorHeight - this.height;\n      } else if (this.height != this.indicatorHeight) {\n        this.height = this.indicatorHeight;\n        this.indicatorStyle.height = this.height + 'px';\n      }\n\n      this.x = x;\n      this.y = y;\n      this.indicatorStyle['webkitTransform'] = this.scroller._getTranslateStr(x, y);\n    },\n    fade: function (val, hold) {\n      if (hold && !this.visible) {\n        return;\n      }\n\n      clearTimeout(this.fadeTimeout);\n      this.fadeTimeout = null;\n      var time = val ? 250 : 500,\n          delay = val ? 0 : 300;\n      val = val ? '1' : '0';\n      this.wrapperStyle['webkitTransitionDuration'] = time + 'ms';\n      this.fadeTimeout = setTimeout(function (val) {\n        this.wrapperStyle.opacity = val;\n        this.visible = +val;\n      }.bind(this, val), delay);\n    }\n  };\n  $.Scroll = Scroll;\n\n  $.fn.scroll = function (options) {\n    var scrollApis = [];\n    this.each(function () {\n      var scrollApi = null;\n      var self = this;\n      var id = self.getAttribute('data-scroll');\n\n      if (!id) {\n        id = ++$.uuid;\n\n        var _options = $.extend({}, options);\n\n        if (self.classList.contains('mui-segmented-control')) {\n          _options = $.extend(_options, {\n            scrollY: false,\n            scrollX: true,\n            indicators: false,\n            snap: '.mui-control-item'\n          });\n        }\n\n        $.data[id] = scrollApi = new Scroll(self, _options);\n        self.setAttribute('data-scroll', id);\n      } else {\n        scrollApi = $.data[id];\n      }\n\n      scrollApis.push(scrollApi);\n    });\n    return scrollApis.length === 1 ? scrollApis[0] : scrollApis;\n  };\n})(mui, window, document);\n\n(function ($, window, document, undefined) {\n  var CLASS_VISIBILITY = 'mui-visibility';\n  var CLASS_HIDDEN = 'mui-hidden';\n  var PullRefresh = $.Scroll.extend($.extend({\n    handleEvent: function (e) {\n      this._super(e);\n\n      if (e.type === 'scrollbottom') {\n        if (e.target === this.scroller) {\n          this._scrollbottom();\n        }\n      }\n    },\n    _scrollbottom: function () {\n      if (!this.pulldown && !this.loading) {\n        this.pulldown = false;\n\n        this._initPullupRefresh();\n\n        this.pullupLoading();\n      }\n    },\n    _start: function (e) {\n      //仅下拉刷新在start阻止默认事件\n      if (e.touches && e.touches.length && e.touches[0].clientX > 30) {\n        e.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\n      }\n\n      if (!this.loading) {\n        this.pulldown = this.pullPocket = this.pullCaption = this.pullLoading = false;\n      }\n\n      this._super(e);\n    },\n    _drag: function (e) {\n      this._super(e);\n\n      if (!this.pulldown && !this.loading && this.topPocket && e.detail.direction === 'down' && this.y >= 0) {\n        this._initPulldownRefresh();\n      }\n\n      if (this.pulldown) {\n        this._setCaption(this.y > this.options.down.height ? this.options.down.contentover : this.options.down.contentdown);\n      }\n    },\n    _reLayout: function () {\n      this.hasVerticalScroll = true;\n\n      this._super();\n    },\n    //API\n    resetPosition: function (time) {\n      if (this.pulldown) {\n        if (this.y >= this.options.down.height) {\n          this.pulldownLoading(undefined, time || 0);\n          return true;\n        } else {\n          !this.loading && this.topPocket.classList.remove(CLASS_VISIBILITY);\n        }\n      }\n\n      return this._super(time);\n    },\n    pulldownLoading: function (y, time) {\n      typeof y === 'undefined' && (y = this.options.down.height); //默认高度\n\n      this.scrollTo(0, y, time, this.options.bounceEasing);\n\n      if (this.loading) {\n        return;\n      } //\t\t\tif (!this.pulldown) {\n\n\n      this._initPulldownRefresh(); //\t\t\t}\n\n\n      this._setCaption(this.options.down.contentrefresh);\n\n      this.loading = true;\n      this.indicators.map(function (indicator) {\n        indicator.fade(0);\n      });\n      var callback = this.options.down.callback;\n      callback && callback.call(this);\n    },\n    endPulldownToRefresh: function () {\n      var self = this;\n\n      if (self.topPocket && self.loading && this.pulldown) {\n        self.scrollTo(0, 0, self.options.bounceTime, self.options.bounceEasing);\n        self.loading = false;\n\n        self._setCaption(self.options.down.contentdown, true);\n\n        setTimeout(function () {\n          self.loading || self.topPocket.classList.remove(CLASS_VISIBILITY);\n        }, 350);\n      }\n    },\n    pullupLoading: function (callback, x, time) {\n      x = x || 0;\n      this.scrollTo(x, this.maxScrollY, time, this.options.bounceEasing);\n\n      if (this.loading) {\n        return;\n      }\n\n      this._initPullupRefresh();\n\n      this._setCaption(this.options.up.contentrefresh);\n\n      this.indicators.map(function (indicator) {\n        indicator.fade(0);\n      });\n      this.loading = true;\n      callback = callback || this.options.up.callback;\n      callback && callback.call(this);\n    },\n    endPullupToRefresh: function (finished) {\n      var self = this;\n\n      if (self.bottomPocket) {\n        // && self.loading && !this.pulldown\n        self.loading = false;\n\n        if (finished) {\n          this.finished = true;\n\n          self._setCaption(self.options.up.contentnomore); //\t\t\t\t\tself.bottomPocket.classList.remove(CLASS_VISIBILITY);\n          //\t\t\t\t\tself.bottomPocket.classList.add(CLASS_HIDDEN);\n\n\n          self.wrapper.removeEventListener('scrollbottom', self);\n        } else {\n          self._setCaption(self.options.up.contentdown); //\t\t\t\t\tsetTimeout(function() {\n\n\n          self.loading || self.bottomPocket.classList.remove(CLASS_VISIBILITY); //\t\t\t\t\t}, 300);\n        }\n      }\n    },\n    disablePullupToRefresh: function () {\n      this._initPullupRefresh();\n\n      this.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\n      this.wrapper.removeEventListener('scrollbottom', this);\n    },\n    enablePullupToRefresh: function () {\n      this._initPullupRefresh();\n\n      this.bottomPocket.classList.remove(CLASS_HIDDEN);\n\n      this._setCaption(this.options.up.contentdown);\n\n      this.wrapper.addEventListener('scrollbottom', this);\n    },\n    refresh: function (isReset) {\n      if (isReset && this.finished) {\n        this.enablePullupToRefresh();\n        this.finished = false;\n      }\n\n      this._super();\n    }\n  }, $.PullRefresh));\n\n  $.fn.pullRefresh = function (options) {\n    if (this.length === 1) {\n      var self = this[0];\n      var pullRefreshApi = null;\n      var id = self.getAttribute('data-pullrefresh');\n\n      if (!id && typeof options === 'undefined') {\n        return false;\n      }\n\n      options = options || {};\n\n      if (!id) {\n        id = ++$.uuid;\n        $.data[id] = pullRefreshApi = new PullRefresh(self, options);\n        self.setAttribute('data-pullrefresh', id);\n      } else {\n        pullRefreshApi = $.data[id];\n      }\n\n      if (options.down && options.down.auto) {\n        //如果设置了auto，则自动下拉一次\n        pullRefreshApi.pulldownLoading(options.down.autoY);\n      } else if (options.up && options.up.auto) {\n        //如果设置了auto，则自动上拉一次\n        pullRefreshApi.pullupLoading();\n      } //暂不提供这种调用方式吧\t\t\t\n      //\t\t\tif (typeof options === 'string') {\n      //\t\t\t\tvar methodValue = pullRefreshApi[options].apply(pullRefreshApi, $.slice.call(arguments, 1));\n      //\t\t\t\tif (methodValue !== undefined) {\n      //\t\t\t\t\treturn methodValue;\n      //\t\t\t\t}\n      //\t\t\t}\n\n\n      return pullRefreshApi;\n    }\n  };\n})(mui, window, document);\n/**\n * snap 重构\n * @param {Object} $\n * @param {Object} window\n */\n\n\n(function ($, window) {\n  var CLASS_SLIDER = 'mui-slider';\n  var CLASS_SLIDER_GROUP = 'mui-slider-group';\n  var CLASS_SLIDER_LOOP = 'mui-slider-loop';\n  var CLASS_SLIDER_INDICATOR = 'mui-slider-indicator';\n  var CLASS_ACTION_PREVIOUS = 'mui-action-previous';\n  var CLASS_ACTION_NEXT = 'mui-action-next';\n  var CLASS_SLIDER_ITEM = 'mui-slider-item';\n  var CLASS_ACTIVE = 'mui-active';\n  var SELECTOR_SLIDER_ITEM = '.' + CLASS_SLIDER_ITEM;\n  var SELECTOR_SLIDER_INDICATOR = '.' + CLASS_SLIDER_INDICATOR;\n  var SELECTOR_SLIDER_PROGRESS_BAR = '.mui-slider-progress-bar';\n  var Slider = $.Slider = $.Scroll.extend({\n    init: function (element, options) {\n      this._super(element, $.extend(true, {\n        fingers: 1,\n        interval: 0,\n        //设置为0，则不定时轮播\n        scrollY: false,\n        scrollX: true,\n        indicators: false,\n        scrollTime: 1000,\n        startX: false,\n        slideTime: 0,\n        //滑动动画时间\n        snap: SELECTOR_SLIDER_ITEM\n      }, options));\n\n      if (this.options.startX) {//\t\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n      }\n    },\n    _init: function () {\n      this._reInit();\n\n      if (this.scroller) {\n        this.scrollerStyle = this.scroller.style;\n        this.progressBar = this.wrapper.querySelector(SELECTOR_SLIDER_PROGRESS_BAR);\n\n        if (this.progressBar) {\n          this.progressBarWidth = this.progressBar.offsetWidth;\n          this.progressBarStyle = this.progressBar.style;\n        } //忘记这个代码是干什么的了？\n        //\t\t\t\tthis.x = this._getScroll();\n        //\t\t\t\tif (this.options.startX === false) {\n        //\t\t\t\t\tthis.options.startX = this.x;\n        //\t\t\t\t}\n        //根据active修正startX\n\n\n        this._super();\n\n        this._initTimer();\n      }\n    },\n    _triggerSlide: function () {\n      var self = this;\n      self.isInTransition = false;\n      var page = self.currentPage;\n      self.slideNumber = self._fixedSlideNumber();\n\n      if (self.loop) {\n        if (self.slideNumber === 0) {\n          self.setTranslate(self.pages[1][0].x, 0);\n        } else if (self.slideNumber === self.itemLength - 3) {\n          self.setTranslate(self.pages[self.itemLength - 2][0].x, 0);\n        }\n      }\n\n      if (self.lastSlideNumber != self.slideNumber) {\n        self.lastSlideNumber = self.slideNumber;\n        self.lastPage = self.currentPage;\n        $.trigger(self.wrapper, 'slide', {\n          slideNumber: self.slideNumber\n        });\n      }\n\n      self._initTimer();\n    },\n    _handleSlide: function (e) {\n      var self = this;\n\n      if (e.target !== self.wrapper) {\n        return;\n      }\n\n      var detail = e.detail;\n      detail.slideNumber = detail.slideNumber || 0;\n      var temps = self.scroller.querySelectorAll(SELECTOR_SLIDER_ITEM);\n      var items = [];\n\n      for (var i = 0, len = temps.length; i < len; i++) {\n        var item = temps[i];\n\n        if (item.parentNode === self.scroller) {\n          items.push(item);\n        }\n      }\n\n      var _slideNumber = detail.slideNumber;\n\n      if (self.loop) {\n        _slideNumber += 1;\n      }\n\n      if (!self.wrapper.classList.contains('mui-segmented-control')) {\n        for (var i = 0, len = items.length; i < len; i++) {\n          var item = items[i];\n\n          if (item.parentNode === self.scroller) {\n            if (i === _slideNumber) {\n              item.classList.add(CLASS_ACTIVE);\n            } else {\n              item.classList.remove(CLASS_ACTIVE);\n            }\n          }\n        }\n      }\n\n      var indicatorWrap = self.wrapper.querySelector('.mui-slider-indicator');\n\n      if (indicatorWrap) {\n        if (indicatorWrap.getAttribute('data-scroll')) {\n          //scroll\n          $(indicatorWrap).scroll().gotoPage(detail.slideNumber);\n        }\n\n        var indicators = indicatorWrap.querySelectorAll('.mui-indicator');\n\n        if (indicators.length > 0) {\n          //图片轮播\n          for (var i = 0, len = indicators.length; i < len; i++) {\n            indicators[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\n          }\n        } else {\n          var number = indicatorWrap.querySelector('.mui-number span');\n\n          if (number) {\n            //图文表格\n            number.innerText = detail.slideNumber + 1;\n          } else {\n            //segmented controls\n            var controlItems = indicatorWrap.querySelectorAll('.mui-control-item');\n\n            for (var i = 0, len = controlItems.length; i < len; i++) {\n              controlItems[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\n            }\n          }\n        }\n      }\n\n      e.stopPropagation();\n    },\n    _handleTabShow: function (e) {\n      var self = this;\n      self.gotoItem(e.detail.tabNumber || 0, self.options.slideTime);\n    },\n    _handleIndicatorTap: function (event) {\n      var self = this;\n      var target = event.target;\n\n      if (target.classList.contains(CLASS_ACTION_PREVIOUS) || target.classList.contains(CLASS_ACTION_NEXT)) {\n        self[target.classList.contains(CLASS_ACTION_PREVIOUS) ? 'prevItem' : 'nextItem']();\n        event.stopPropagation();\n      }\n    },\n    _initEvent: function (detach) {\n      var self = this;\n\n      self._super(detach);\n\n      var action = detach ? 'removeEventListener' : 'addEventListener';\n      self.wrapper[action]('slide', this);\n      self.wrapper[action]($.eventName('shown', 'tab'), this);\n    },\n    handleEvent: function (e) {\n      this._super(e);\n\n      switch (e.type) {\n        case 'slide':\n          this._handleSlide(e);\n\n          break;\n\n        case $.eventName('shown', 'tab'):\n          if (~this.snaps.indexOf(e.target)) {\n            //避免嵌套监听错误的tab show\n            this._handleTabShow(e);\n          }\n\n          break;\n      }\n    },\n    _scrollend: function (e) {\n      this._super(e);\n\n      this._triggerSlide(e);\n    },\n    _drag: function (e) {\n      this._super(e);\n\n      var direction = e.detail.direction;\n\n      if (direction === 'left' || direction === 'right') {\n        //拖拽期间取消定时\n        var slidershowTimer = this.wrapper.getAttribute('data-slidershowTimer');\n        slidershowTimer && window.clearTimeout(slidershowTimer);\n        e.stopPropagation();\n      }\n    },\n    _initTimer: function () {\n      var self = this;\n      var slider = self.wrapper;\n      var interval = self.options.interval;\n      var slidershowTimer = slider.getAttribute('data-slidershowTimer');\n      slidershowTimer && window.clearTimeout(slidershowTimer);\n\n      if (interval) {\n        slidershowTimer = window.setTimeout(function () {\n          if (!slider) {\n            return;\n          } //仅slider显示状态进行自动轮播\n\n\n          if (!!(slider.offsetWidth || slider.offsetHeight)) {\n            self.nextItem(true); //下一个\n          }\n\n          self._initTimer();\n        }, interval);\n        slider.setAttribute('data-slidershowTimer', slidershowTimer);\n      }\n    },\n    _fixedSlideNumber: function (page) {\n      page = page || this.currentPage;\n      var slideNumber = page.pageX;\n\n      if (this.loop) {\n        if (page.pageX === 0) {\n          slideNumber = this.itemLength - 3;\n        } else if (page.pageX === this.itemLength - 1) {\n          slideNumber = 0;\n        } else {\n          slideNumber = page.pageX - 1;\n        }\n      }\n\n      return slideNumber;\n    },\n    _reLayout: function () {\n      this.hasHorizontalScroll = true;\n      this.loop = this.scroller.classList.contains(CLASS_SLIDER_LOOP);\n\n      this._super();\n    },\n    _getScroll: function () {\n      var result = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\n      return result ? result.x : 0;\n    },\n    _transitionEnd: function (e) {\n      if (e.target !== this.scroller || !this.isInTransition) {\n        return;\n      }\n\n      this._transitionTime();\n\n      this.isInTransition = false;\n      $.trigger(this.wrapper, 'scrollend', this);\n    },\n    _flick: function (e) {\n      if (!this.moved) {\n        //无moved\n        return;\n      }\n\n      var detail = e.detail;\n      var direction = detail.direction;\n\n      this._clearRequestAnimationFrame();\n\n      this.isInTransition = true; //\t\t\tif (direction === 'up' || direction === 'down') {\n      //\t\t\t\tthis.resetPosition(this.options.bounceTime);\n      //\t\t\t\treturn;\n      //\t\t\t}\n\n      if (e.type === 'flick') {\n        if (detail.deltaTime < 200) {\n          //flick，太容易触发，额外校验一下deltaTime\n          this.x = this._getPage(this.slideNumber + (direction === 'right' ? -1 : 1), true).x;\n        }\n\n        this.resetPosition(this.options.bounceTime);\n      } else if (e.type === 'dragend' && !detail.flick) {\n        this.resetPosition(this.options.bounceTime);\n      }\n\n      e.stopPropagation();\n    },\n    _initSnap: function () {\n      this.scrollerWidth = this.itemLength * this.scrollerWidth;\n      this.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\n\n      this._super();\n\n      if (!this.currentPage.x) {\n        //当slider处于隐藏状态时，导致snap计算是错误的，临时先这么判断一下，后续要考虑解决所有scroll在隐藏状态下初始化属性不正确的问题\n        var currentPage = this.pages[this.loop ? 1 : 0];\n        currentPage = currentPage || this.pages[0];\n\n        if (!currentPage) {\n          return;\n        }\n\n        this.currentPage = currentPage[0];\n        this.slideNumber = 0;\n        this.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? 0 : this.lastSlideNumber;\n      } else {\n        this.slideNumber = this._fixedSlideNumber();\n        this.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? this.slideNumber : this.lastSlideNumber;\n      }\n\n      this.options.startX = this.currentPage.x || 0;\n    },\n    _getSnapX: function (offsetLeft) {\n      return Math.max(-offsetLeft, this.maxScrollX);\n    },\n    _getPage: function (slideNumber, isFlick) {\n      if (this.loop) {\n        if (slideNumber > this.itemLength - (isFlick ? 2 : 3)) {\n          slideNumber = 1;\n          time = 0;\n        } else if (slideNumber < (isFlick ? -1 : 0)) {\n          slideNumber = this.itemLength - 2;\n          time = 0;\n        } else {\n          slideNumber += 1;\n        }\n      } else {\n        if (!isFlick) {\n          if (slideNumber > this.itemLength - 1) {\n            slideNumber = 0;\n            time = 0;\n          } else if (slideNumber < 0) {\n            slideNumber = this.itemLength - 1;\n            time = 0;\n          }\n        }\n\n        slideNumber = Math.min(Math.max(0, slideNumber), this.itemLength - 1);\n      }\n\n      return this.pages[slideNumber][0];\n    },\n    _gotoItem: function (slideNumber, time) {\n      this.currentPage = this._getPage(slideNumber, true); //此处传true。可保证程序切换时，动画与人手操作一致(第一张，最后一张的切换动画)\n\n      this.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\n\n      if (time === 0) {\n        $.trigger(this.wrapper, 'scrollend', this);\n      }\n    },\n    //API\n    setTranslate: function (x, y) {\n      this._super(x, y);\n\n      var progressBar = this.progressBar;\n\n      if (progressBar) {\n        this.progressBarStyle.webkitTransform = this._getTranslateStr(-x * (this.progressBarWidth / this.wrapperWidth), 0);\n      }\n    },\n    resetPosition: function (time) {\n      time = time || 0;\n\n      if (this.x > 0) {\n        this.x = 0;\n      } else if (this.x < this.maxScrollX) {\n        this.x = this.maxScrollX;\n      }\n\n      this.currentPage = this._nearestSnap(this.x);\n      this.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\n      return true;\n    },\n    gotoItem: function (slideNumber, time) {\n      this._gotoItem(slideNumber, typeof time === 'undefined' ? this.options.scrollTime : time);\n    },\n    nextItem: function () {\n      this._gotoItem(this.slideNumber + 1, this.options.scrollTime);\n    },\n    prevItem: function () {\n      this._gotoItem(this.slideNumber - 1, this.options.scrollTime);\n    },\n    getSlideNumber: function () {\n      return this.slideNumber || 0;\n    },\n    _reInit: function () {\n      var groups = this.wrapper.querySelectorAll('.' + CLASS_SLIDER_GROUP);\n\n      for (var i = 0, len = groups.length; i < len; i++) {\n        if (groups[i].parentNode === this.wrapper) {\n          this.scroller = groups[i];\n          break;\n        }\n      }\n\n      this.scrollerStyle = this.scroller && this.scroller.style;\n\n      if (this.progressBar) {\n        this.progressBarWidth = this.progressBar.offsetWidth;\n        this.progressBarStyle = this.progressBar.style;\n      }\n    },\n    refresh: function (options) {\n      if (options) {\n        $.extend(this.options, options);\n\n        this._super();\n\n        this._initTimer();\n      } else {\n        this._super();\n      }\n    },\n    destroy: function () {\n      this._initEvent(true); //detach\n\n\n      delete $.data[this.wrapper.getAttribute('data-slider')];\n      this.wrapper.setAttribute('data-slider', '');\n    }\n  });\n\n  $.fn.slider = function (options) {\n    var slider = null;\n    this.each(function () {\n      var sliderElement = this;\n\n      if (!this.classList.contains(CLASS_SLIDER)) {\n        sliderElement = this.querySelector('.' + CLASS_SLIDER);\n      }\n\n      if (sliderElement && sliderElement.querySelector(SELECTOR_SLIDER_ITEM)) {\n        var id = sliderElement.getAttribute('data-slider');\n\n        if (!id) {\n          id = ++$.uuid;\n          $.data[id] = slider = new Slider(sliderElement, options);\n          sliderElement.setAttribute('data-slider', id);\n        } else {\n          slider = $.data[id];\n\n          if (slider && options) {\n            slider.refresh(options);\n          }\n        }\n      }\n    });\n    return slider;\n  };\n\n  $.ready(function () {\n    //\t\tsetTimeout(function() {\n    $('.mui-slider').slider();\n    $('.mui-scroll-wrapper.mui-slider-indicator.mui-segmented-control').scroll({\n      scrollY: false,\n      scrollX: true,\n      indicators: false,\n      snap: '.mui-control-item'\n    }); //\t\t}, 500); //临时处理slider宽度计算不正确的问题(初步确认是scrollbar导致的)\n  });\n})(mui, window);\n/**\n * pullRefresh 5+\n * @param {type} $\n * @returns {undefined}\n */\n\n\n(function ($, document) {\n  if (!$.os.plus) {\n    //仅在5+android支持多webview的使用\n    return;\n  }\n\n  $.plusReady(function () {\n    if (window.__NWin_Enable__ === false) {\n      //不支持多webview，则不用5+下拉刷新\n      return;\n    }\n\n    var CLASS_PLUS_PULLREFRESH = 'mui-plus-pullrefresh';\n    var CLASS_VISIBILITY = 'mui-visibility';\n    var CLASS_HIDDEN = 'mui-hidden';\n    var CLASS_BLOCK = 'mui-block';\n    var CLASS_PULL_CAPTION = 'mui-pull-caption';\n    var CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\n    var CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\n    var CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\n    var PlusPullRefresh = $.Class.extend({\n      init: function (element, options) {\n        this.element = element;\n        this.options = options;\n        this.wrapper = this.scroller = element;\n\n        this._init();\n\n        this._initPulldownRefreshEvent();\n      },\n      _init: function () {\n        var self = this; //document.addEventListener('plusscrollbottom', this);\n\n        window.addEventListener('dragup', self);\n        document.addEventListener(\"plusscrollbottom\", self);\n        self.scrollInterval = window.setInterval(function () {\n          if (self.isScroll && !self.loading) {\n            if (window.pageYOffset + window.innerHeight + 10 >= document.documentElement.scrollHeight) {\n              self.isScroll = false; //放在这里是因为快速滚动的话，有可能检测时，还没到底，所以只要有滚动，没到底之前一直检测高度变化\n\n              if (self.bottomPocket) {\n                self.pullupLoading();\n              }\n            }\n          }\n        }, 100);\n      },\n      _initPulldownRefreshEvent: function () {\n        var self = this;\n        $.plusReady(function () {\n          if (self.options.down.style == \"circle\") {\n            //单webview、原生转圈\n            self.options.webview = plus.webview.currentWebview();\n            self.options.webview.setPullToRefresh({\n              support: true,\n              color: self.options.down.color || '#2BD009',\n              height: self.options.down.height || '50px',\n              range: self.options.down.range || '100px',\n              style: 'circle',\n              offset: self.options.down.offset || '0px'\n            }, function () {\n              self.options.down.callback();\n            });\n          } else if (self.topPocket && self.options.webviewId) {\n            var webview = plus.webview.getWebviewById(self.options.webviewId); //子窗口\n\n            if (!webview) {\n              return;\n            }\n\n            self.options.webview = webview;\n            var downOptions = self.options.down;\n            var height = downOptions.height;\n            webview.addEventListener('close', function () {\n              var attrWebviewId = self.options.webviewId && self.options.webviewId.replace(/\\//g, \"_\"); //替换所有\"/\" \n\n              self.element.removeAttribute('data-pullrefresh-plus-' + attrWebviewId);\n            });\n            webview.addEventListener(\"dragBounce\", function (e) {\n              if (!self.pulldown) {\n                self._initPulldownRefresh();\n              } else {\n                self.pullPocket.classList.add(CLASS_BLOCK);\n              }\n\n              switch (e.status) {\n                case \"beforeChangeOffset\":\n                  //下拉可刷新状态\n                  self._setCaption(downOptions.contentdown);\n\n                  break;\n\n                case \"afterChangeOffset\":\n                  //松开可刷新状态\n                  self._setCaption(downOptions.contentover);\n\n                  break;\n\n                case \"dragEndAfterChangeOffset\":\n                  //正在刷新状态\n                  //执行下拉刷新所在webview的回调函数\n                  webview.evalJS(\"window.mui&&mui.options.pullRefresh.down.callback()\");\n\n                  self._setCaption(downOptions.contentrefresh);\n\n                  break;\n\n                default:\n                  break;\n              }\n            }, false);\n            webview.setBounce({\n              position: {\n                top: height * 2 + 'px'\n              },\n              changeoffset: {\n                top: height + 'px'\n              }\n            });\n          }\n        });\n      },\n      handleEvent: function (e) {\n        var self = this;\n\n        if (self.stopped) {\n          return;\n        }\n\n        self.isScroll = false;\n\n        if (e.type === 'dragup' || e.type === 'plusscrollbottom') {\n          self.isScroll = true;\n          setTimeout(function () {\n            self.isScroll = false;\n          }, 1000);\n        }\n      }\n    }).extend($.extend({\n      setStopped: function (stopped) {\n        //该方法是子页面调用的\n        this.stopped = !!stopped; //TODO 此处需要设置当前webview的bounce为none,目前5+有BUG\n\n        var webview = plus.webview.currentWebview();\n\n        if (this.stopped) {\n          webview.setStyle({\n            bounce: 'none'\n          });\n          webview.setBounce({\n            position: {\n              top: 'none'\n            }\n          });\n        } else {\n          var height = this.options.down.height;\n          webview.setStyle({\n            bounce: 'vertical'\n          });\n          webview.setBounce({\n            position: {\n              top: height * 2 + 'px'\n            },\n            changeoffset: {\n              top: height + 'px'\n            }\n          });\n        }\n      },\n      beginPulldown: function () {\n        var self = this;\n        $.plusReady(function () {\n          //这里延时的目的是为了保证下拉刷新组件初始化完成，后续应该做成有状态的\n          setTimeout(function () {\n            if (self.options.down.style == \"circle\") {\n              //单webview下拉刷新\n              plus.webview.currentWebview().beginPullToRefresh();\n            } else {\n              //双webview模式\n              var webview = self.options.webview;\n\n              if (webview) {\n                webview.setBounce({\n                  offset: {\n                    top: self.options.down.height + \"px\"\n                  }\n                });\n              }\n            }\n          }, 15);\n        }.bind(this));\n      },\n      pulldownLoading: function () {\n        //该方法是子页面调用的，兼容老的历史API\n        this.beginPulldown();\n      },\n      _pulldownLoading: function () {\n        //该方法是父页面调用的\n        var self = this;\n        $.plusReady(function () {\n          var childWebview = plus.webview.getWebviewById(self.options.webviewId);\n          childWebview && childWebview.setBounce({\n            offset: {\n              top: self.options.down.height + \"px\"\n            }\n          });\n        });\n      },\n      endPulldown: function () {\n        var _wv = plus.webview.currentWebview(); //双webview的下拉刷新，需要修改父窗口提示信息\n\n\n        if (_wv.parent() && this.options.down.style !== \"circle\") {\n          _wv.parent().evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify({\n            webviewId: _wv.id\n          }) + \"')._endPulldownToRefresh()\");\n        } else {\n          _wv.endPullToRefresh();\n        }\n      },\n      endPulldownToRefresh: function () {\n        //该方法是子页面调用的，兼容老的历史API\n        this.endPulldown();\n      },\n      _endPulldownToRefresh: function () {\n        //该方法是父页面调用的\n        var self = this;\n\n        if (self.topPocket && self.options.webview) {\n          self.options.webview.endPullToRefresh(); //下拉刷新所在webview回弹\n\n          self.loading = false;\n\n          self._setCaption(self.options.down.contentdown, true);\n\n          setTimeout(function () {\n            self.loading || self.topPocket.classList.remove(CLASS_BLOCK);\n          }, 350);\n        }\n      },\n      beginPullup: function (callback) {\n        //开始上拉加载\n        var self = this;\n        if (self.isLoading) return;\n        self.isLoading = true;\n\n        if (self.pulldown !== false) {\n          self._initPullupRefresh();\n        } else {\n          this.pullPocket.classList.add(CLASS_BLOCK);\n        }\n\n        setTimeout(function () {\n          self.pullLoading.classList.add(CLASS_VISIBILITY);\n          self.pullLoading.classList.remove(CLASS_HIDDEN);\n          self.pullCaption.innerHTML = ''; //修正5+里边第一次加载时，文字显示的bug(还会显示出来个“多”,猜测应该是渲染问题导致的)\n\n          self.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH;\n          self.pullCaption.innerHTML = self.options.up.contentrefresh;\n          callback = callback || self.options.up.callback;\n          callback && callback.call(self);\n        }, 300);\n      },\n      pullupLoading: function (callback) {\n        //兼容老的API\n        this.beginPullup(callback);\n      },\n      endPullup: function (finished) {\n        //上拉加载结束\n        var self = this;\n\n        if (self.pullLoading) {\n          self.pullLoading.classList.remove(CLASS_VISIBILITY);\n          self.pullLoading.classList.add(CLASS_HIDDEN);\n          self.isLoading = false;\n\n          if (finished) {\n            self.finished = true;\n            self.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\n            self.pullCaption.innerHTML = self.options.up.contentnomore; //取消5+的plusscrollbottom事件\n\n            document.removeEventListener('plusscrollbottom', self);\n            window.removeEventListener('dragup', self);\n          } else {\n            //初始化时隐藏，后续不再隐藏\n            self.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n            self.pullCaption.innerHTML = self.options.up.contentdown;\n          }\n        }\n      },\n      endPullupToRefresh: function (finished) {\n        //上拉加载结束，兼容老的API\n        this.endPullup(finished);\n      },\n      disablePullupToRefresh: function () {\n        this._initPullupRefresh();\n\n        this.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\n        window.removeEventListener('dragup', this);\n      },\n      enablePullupToRefresh: function () {\n        this._initPullupRefresh();\n\n        this.bottomPocket.classList.remove(CLASS_HIDDEN);\n        this.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n        this.pullCaption.innerHTML = this.options.up.contentdown;\n        document.addEventListener(\"plusscrollbottom\", this);\n        window.addEventListener('dragup', this);\n      },\n      scrollTo: function (x, y, time) {\n        $.scrollTo(y, time);\n      },\n      scrollToBottom: function (time) {\n        $.scrollTo(document.documentElement.scrollHeight, time);\n      },\n      refresh: function (isReset) {\n        if (isReset && this.finished) {\n          this.enablePullupToRefresh();\n          this.finished = false;\n        }\n      }\n    }, $.PullRefresh)); //override h5 pullRefresh\n\n    $.fn.pullRefresh_native = function (options) {\n      var self;\n\n      if (this.length === 0) {\n        self = document.createElement('div');\n        self.className = 'mui-content';\n        document.body.appendChild(self);\n      } else {\n        self = this[0];\n      }\n\n      var args = options; //一个父需要支持多个子下拉刷新\n\n      options = options || {};\n\n      if (typeof options === 'string') {\n        options = $.parseJSON(options);\n      }\n\n      ;\n      !options.webviewId && (options.webviewId = plus.webview.currentWebview().id || plus.webview.currentWebview().getURL());\n      var pullRefreshApi = null;\n      var attrWebviewId = options.webviewId && options.webviewId.replace(/\\//g, \"_\"); //替换所有\"/\"\n\n      var id = self.getAttribute('data-pullrefresh-plus-' + attrWebviewId);\n\n      if (!id && typeof args === 'undefined') {\n        return false;\n      }\n\n      if (!id) {\n        //避免重复初始化5+ pullrefresh\n        id = ++$.uuid;\n        self.setAttribute('data-pullrefresh-plus-' + attrWebviewId, id);\n        document.body.classList.add(CLASS_PLUS_PULLREFRESH);\n        $.data[id] = pullRefreshApi = new PlusPullRefresh(self, options);\n      } else {\n        pullRefreshApi = $.data[id];\n      }\n\n      if (options.down && options.down.auto) {\n        //如果设置了auto，则自动下拉一次\n        //pullRefreshApi._pulldownLoading(); //parent webview\n        pullRefreshApi.beginPulldown();\n      } else if (options.up && options.up.auto) {\n        //如果设置了auto，则自动上拉一次\n        pullRefreshApi.beginPullup();\n      }\n\n      return pullRefreshApi;\n    };\n  });\n})(mui, document);\n/**\n * off-canvas\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} action\n * @returns {undefined}\n */\n\n\n(function ($, window, document, name) {\n  var CLASS_OFF_CANVAS_LEFT = 'mui-off-canvas-left';\n  var CLASS_OFF_CANVAS_RIGHT = 'mui-off-canvas-right';\n  var CLASS_ACTION_BACKDROP = 'mui-off-canvas-backdrop';\n  var CLASS_OFF_CANVAS_WRAP = 'mui-off-canvas-wrap';\n  var CLASS_SLIDE_IN = 'mui-slide-in';\n  var CLASS_ACTIVE = 'mui-active';\n  var CLASS_TRANSITIONING = 'mui-transitioning';\n  var SELECTOR_INNER_WRAP = '.mui-inner-wrap';\n  var OffCanvas = $.Class.extend({\n    init: function (element, options) {\n      this.wrapper = this.element = element;\n      this.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n      this.classList = this.wrapper.classList;\n\n      if (this.scroller) {\n        this.options = $.extend(true, {\n          dragThresholdX: 10,\n          scale: 0.8,\n          opacity: 0.1,\n          preventDefaultException: {\n            tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\n          }\n        }, options);\n        document.body.classList.add('mui-fullscreen'); //fullscreen\n\n        this.refresh();\n        this.initEvent();\n      }\n    },\n    _preventDefaultException: function (el, exceptions) {\n      for (var i in exceptions) {\n        if (exceptions[i].test(el[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    refresh: function (offCanvas) {\n      //\t\t\toffCanvas && !offCanvas.classList.contains(CLASS_ACTIVE) && this.classList.remove(CLASS_ACTIVE);\n      this.slideIn = this.classList.contains(CLASS_SLIDE_IN);\n      this.scalable = this.classList.contains('mui-scalable') && !this.slideIn;\n      this.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP); //\t\t\t!offCanvas && this.scroller.classList.remove(CLASS_TRANSITIONING);\n      //\t\t\t!offCanvas && this.scroller.setAttribute('style', '');\n\n      this.offCanvasLefts = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_LEFT);\n      this.offCanvasRights = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_RIGHT);\n\n      if (offCanvas) {\n        if (offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\n          this.offCanvasLeft = offCanvas;\n        } else if (offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\n          this.offCanvasRight = offCanvas;\n        }\n      } else {\n        this.offCanvasRight = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT);\n        this.offCanvasLeft = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT);\n      }\n\n      this.offCanvasRightWidth = this.offCanvasLeftWidth = 0;\n      this.offCanvasLeftSlideIn = this.offCanvasRightSlideIn = false;\n\n      if (this.offCanvasRight) {\n        this.offCanvasRightWidth = this.offCanvasRight.offsetWidth;\n        this.offCanvasRightSlideIn = this.slideIn && this.offCanvasRight.parentNode === this.wrapper; //\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_TRANSITIONING);\n        //\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_ACTIVE);\n        //\t\t\t\tthis.offCanvasRight.setAttribute('style', '');\n      }\n\n      if (this.offCanvasLeft) {\n        this.offCanvasLeftWidth = this.offCanvasLeft.offsetWidth;\n        this.offCanvasLeftSlideIn = this.slideIn && this.offCanvasLeft.parentNode === this.wrapper; //\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_TRANSITIONING);\n        //\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_ACTIVE);\n        //\t\t\t\tthis.offCanvasLeft.setAttribute('style', '');\n      }\n\n      this.backdrop = this.scroller.querySelector('.' + CLASS_ACTION_BACKDROP);\n      this.options.dragThresholdX = this.options.dragThresholdX || 10;\n      this.visible = false;\n      this.startX = null;\n      this.lastX = null;\n      this.offsetX = null;\n      this.lastTranslateX = null;\n    },\n    handleEvent: function (e) {\n      switch (e.type) {\n        case $.EVENT_START:\n          e.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\n          break;\n\n        case 'webkitTransitionEnd':\n          //有个bug需要处理，需要考虑假设没有触发webkitTransitionEnd的情况\n          if (e.target === this.scroller) {\n            this._dispatchEvent();\n          }\n\n          break;\n\n        case 'drag':\n          var detail = e.detail;\n\n          if (!this.startX) {\n            this.startX = detail.center.x;\n            this.lastX = this.startX;\n          } else {\n            this.lastX = detail.center.x;\n          }\n\n          if (!this.isDragging && Math.abs(this.lastX - this.startX) > this.options.dragThresholdX && (detail.direction === 'left' || detail.direction === 'right')) {\n            if (this.slideIn) {\n              this.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n\n              if (this.classList.contains(CLASS_ACTIVE)) {\n                if (this.offCanvasRight && this.offCanvasRight.classList.contains(CLASS_ACTIVE)) {\n                  this.offCanvas = this.offCanvasRight;\n                  this.offCanvasWidth = this.offCanvasRightWidth;\n                } else {\n                  this.offCanvas = this.offCanvasLeft;\n                  this.offCanvasWidth = this.offCanvasLeftWidth;\n                }\n              } else {\n                if (detail.direction === 'left' && this.offCanvasRight) {\n                  this.offCanvas = this.offCanvasRight;\n                  this.offCanvasWidth = this.offCanvasRightWidth;\n                } else if (detail.direction === 'right' && this.offCanvasLeft) {\n                  this.offCanvas = this.offCanvasLeft;\n                  this.offCanvasWidth = this.offCanvasLeftWidth;\n                } else {\n                  this.scroller = null;\n                }\n              }\n            } else {\n              if (this.classList.contains(CLASS_ACTIVE)) {\n                if (detail.direction === 'left') {\n                  this.offCanvas = this.offCanvasLeft;\n                  this.offCanvasWidth = this.offCanvasLeftWidth;\n                } else {\n                  this.offCanvas = this.offCanvasRight;\n                  this.offCanvasWidth = this.offCanvasRightWidth;\n                }\n              } else {\n                if (detail.direction === 'right') {\n                  this.offCanvas = this.offCanvasLeft;\n                  this.offCanvasWidth = this.offCanvasLeftWidth;\n                } else {\n                  this.offCanvas = this.offCanvasRight;\n                  this.offCanvasWidth = this.offCanvasRightWidth;\n                }\n              }\n            }\n\n            if (this.offCanvas && this.scroller) {\n              this.startX = this.lastX;\n              this.isDragging = true;\n              $.gestures.session.lockDirection = true; //锁定方向\n\n              $.gestures.session.startDirection = detail.direction;\n              this.offCanvas.classList.remove(CLASS_TRANSITIONING);\n              this.scroller.classList.remove(CLASS_TRANSITIONING);\n              this.offsetX = this.getTranslateX();\n\n              this._initOffCanvasVisible();\n            }\n          }\n\n          if (this.isDragging) {\n            this.updateTranslate(this.offsetX + (this.lastX - this.startX));\n            detail.gesture.preventDefault();\n            e.stopPropagation();\n          }\n\n          break;\n\n        case 'dragend':\n          if (this.isDragging) {\n            var detail = e.detail;\n            var direction = detail.direction;\n            this.isDragging = false;\n            this.offCanvas.classList.add(CLASS_TRANSITIONING);\n            this.scroller.classList.add(CLASS_TRANSITIONING);\n            var ratio = 0;\n            var x = this.getTranslateX();\n\n            if (!this.slideIn) {\n              if (x >= 0) {\n                ratio = this.offCanvasLeftWidth && x / this.offCanvasLeftWidth || 0;\n              } else {\n                ratio = this.offCanvasRightWidth && x / this.offCanvasRightWidth || 0;\n              }\n\n              if (ratio === 0) {\n                this.openPercentage(0);\n\n                this._dispatchEvent(); //此处不触发webkitTransitionEnd,所以手动dispatch\n\n\n                return;\n              }\n\n              if (direction === 'right' && ratio >= 0 && (ratio >= 0.5 || detail.swipe)) {\n                //右滑打开\n                this.openPercentage(100);\n              } else if (direction === 'right' && ratio < 0 && (ratio > -0.5 || detail.swipe)) {\n                //右滑关闭\n                this.openPercentage(0);\n              } else if (direction === 'right' && ratio > 0 && ratio < 0.5) {\n                //右滑还原关闭\n                this.openPercentage(0);\n              } else if (direction === 'right' && ratio < 0.5) {\n                //右滑还原打开\n                this.openPercentage(-100);\n              } else if (direction === 'left' && ratio <= 0 && (ratio <= -0.5 || detail.swipe)) {\n                //左滑打开\n                this.openPercentage(-100);\n              } else if (direction === 'left' && ratio > 0 && (ratio <= 0.5 || detail.swipe)) {\n                //左滑关闭\n                this.openPercentage(0);\n              } else if (direction === 'left' && ratio < 0 && ratio >= -0.5) {\n                //左滑还原关闭\n                this.openPercentage(0);\n              } else if (direction === 'left' && ratio > 0.5) {\n                //左滑还原打开\n                this.openPercentage(100);\n              } else {\n                //默认关闭\n                this.openPercentage(0);\n              }\n\n              if (ratio === 1 || ratio === -1) {\n                //此处不触发webkitTransitionEnd,所以手动dispatch\n                this._dispatchEvent();\n              }\n            } else {\n              if (x >= 0) {\n                ratio = this.offCanvasRightWidth && x / this.offCanvasRightWidth || 0;\n              } else {\n                ratio = this.offCanvasLeftWidth && x / this.offCanvasLeftWidth || 0;\n              }\n\n              if (direction === 'right' && ratio <= 0 && (ratio >= -0.5 || detail.swipe)) {\n                //右滑打开\n                this.openPercentage(100);\n              } else if (direction === 'right' && ratio > 0 && (ratio >= 0.5 || detail.swipe)) {\n                //右滑关闭\n                this.openPercentage(0);\n              } else if (direction === 'right' && ratio <= -0.5) {\n                //右滑还原关闭\n                this.openPercentage(0);\n              } else if (direction === 'right' && ratio > 0 && ratio <= 0.5) {\n                //右滑还原打开\n                this.openPercentage(-100);\n              } else if (direction === 'left' && ratio >= 0 && (ratio <= 0.5 || detail.swipe)) {\n                //左滑打开\n                this.openPercentage(-100);\n              } else if (direction === 'left' && ratio < 0 && (ratio <= -0.5 || detail.swipe)) {\n                //左滑关闭\n                this.openPercentage(0);\n              } else if (direction === 'left' && ratio >= 0.5) {\n                //左滑还原关闭\n                this.openPercentage(0);\n              } else if (direction === 'left' && ratio >= -0.5 && ratio < 0) {\n                //左滑还原打开\n                this.openPercentage(100);\n              } else {\n                this.openPercentage(0);\n              }\n\n              if (ratio === 1 || ratio === -1 || ratio === 0) {\n                this._dispatchEvent();\n\n                return;\n              }\n            }\n          }\n\n          break;\n      }\n    },\n    _dispatchEvent: function () {\n      if (this.classList.contains(CLASS_ACTIVE)) {\n        $.trigger(this.wrapper, 'shown', this);\n      } else {\n        $.trigger(this.wrapper, 'hidden', this);\n      }\n    },\n    _initOffCanvasVisible: function () {\n      if (!this.visible) {\n        this.visible = true;\n\n        if (this.offCanvasLeft) {\n          this.offCanvasLeft.style.visibility = 'visible';\n        }\n\n        if (this.offCanvasRight) {\n          this.offCanvasRight.style.visibility = 'visible';\n        }\n      }\n    },\n    initEvent: function () {\n      var self = this;\n\n      if (self.backdrop) {\n        self.backdrop.addEventListener('tap', function (e) {\n          self.close();\n          e.detail.gesture.preventDefault();\n        });\n      }\n\n      if (this.classList.contains('mui-draggable')) {\n        this.wrapper.addEventListener($.EVENT_START, this); //临时处理\n\n        this.wrapper.addEventListener('drag', this);\n        this.wrapper.addEventListener('dragend', this);\n      }\n\n      this.wrapper.addEventListener('webkitTransitionEnd', this);\n    },\n    openPercentage: function (percentage) {\n      var p = percentage / 100;\n\n      if (!this.slideIn) {\n        if (this.offCanvasLeft && percentage >= 0) {\n          this.updateTranslate(this.offCanvasLeftWidth * p);\n          this.offCanvasLeft.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n        } else if (this.offCanvasRight && percentage <= 0) {\n          this.updateTranslate(this.offCanvasRightWidth * p);\n          this.offCanvasRight.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n        }\n\n        this.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n      } else {\n        if (this.offCanvasLeft && percentage >= 0) {\n          p = p === 0 ? -1 : 0;\n          this.updateTranslate(this.offCanvasLeftWidth * p);\n          this.offCanvasLeft.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n        } else if (this.offCanvasRight && percentage <= 0) {\n          p = p === 0 ? 1 : 0;\n          this.updateTranslate(this.offCanvasRightWidth * p);\n          this.offCanvasRight.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n        }\n\n        this.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n      }\n    },\n    updateTranslate: function (x) {\n      if (x !== this.lastTranslateX) {\n        if (!this.slideIn) {\n          if (!this.offCanvasLeft && x > 0 || !this.offCanvasRight && x < 0) {\n            this.setTranslateX(0);\n            return;\n          }\n\n          if (this.leftShowing && x > this.offCanvasLeftWidth) {\n            this.setTranslateX(this.offCanvasLeftWidth);\n            return;\n          }\n\n          if (this.rightShowing && x < -this.offCanvasRightWidth) {\n            this.setTranslateX(-this.offCanvasRightWidth);\n            return;\n          }\n\n          this.setTranslateX(x);\n\n          if (x >= 0) {\n            this.leftShowing = true;\n            this.rightShowing = false;\n\n            if (x > 0) {\n              if (this.offCanvasLeft) {\n                $.each(this.offCanvasLefts, function (index, offCanvas) {\n                  if (offCanvas === this.offCanvasLeft) {\n                    this.offCanvasLeft.style.zIndex = 0;\n                  } else {\n                    offCanvas.style.zIndex = -1;\n                  }\n                }.bind(this));\n              }\n\n              if (this.offCanvasRight) {\n                this.offCanvasRight.style.zIndex = -1;\n              }\n            }\n          } else {\n            this.rightShowing = true;\n            this.leftShowing = false;\n\n            if (this.offCanvasRight) {\n              $.each(this.offCanvasRights, function (index, offCanvas) {\n                if (offCanvas === this.offCanvasRight) {\n                  offCanvas.style.zIndex = 0;\n                } else {\n                  offCanvas.style.zIndex = -1;\n                }\n              }.bind(this));\n            }\n\n            if (this.offCanvasLeft) {\n              this.offCanvasLeft.style.zIndex = -1;\n            }\n          }\n        } else {\n          if (this.offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\n            if (x < 0) {\n              this.setTranslateX(0);\n              return;\n            }\n\n            if (x > this.offCanvasRightWidth) {\n              this.setTranslateX(this.offCanvasRightWidth);\n              return;\n            }\n          } else {\n            if (x > 0) {\n              this.setTranslateX(0);\n              return;\n            }\n\n            if (x < -this.offCanvasLeftWidth) {\n              this.setTranslateX(-this.offCanvasLeftWidth);\n              return;\n            }\n          }\n\n          this.setTranslateX(x);\n        }\n\n        this.lastTranslateX = x;\n      }\n    },\n    setTranslateX: $.animationFrame(function (x) {\n      if (this.scroller) {\n        if (this.scalable && this.offCanvas.parentNode === this.wrapper) {\n          var percent = Math.abs(x) / this.offCanvasWidth;\n          var zoomOutScale = 1 - (1 - this.options.scale) * percent;\n          var zoomInScale = this.options.scale + (1 - this.options.scale) * percent;\n          var zoomOutOpacity = 1 - (1 - this.options.opacity) * percent;\n          var zoomInOpacity = this.options.opacity + (1 - this.options.opacity) * percent;\n\n          if (this.offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\n            this.offCanvas.style.webkitTransformOrigin = '-100%';\n            this.scroller.style.webkitTransformOrigin = 'left';\n          } else {\n            this.offCanvas.style.webkitTransformOrigin = '200%';\n            this.scroller.style.webkitTransformOrigin = 'right';\n          }\n\n          this.offCanvas.style.opacity = zoomInOpacity;\n          this.offCanvas.style.webkitTransform = 'translate3d(0,0,0) scale(' + zoomInScale + ')';\n          this.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0) scale(' + zoomOutScale + ')';\n        } else {\n          if (this.slideIn) {\n            this.offCanvas.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\n          } else {\n            this.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\n          }\n        }\n      }\n    }),\n    getTranslateX: function () {\n      if (this.offCanvas) {\n        var scroller = this.slideIn ? this.offCanvas : this.scroller;\n        var result = $.parseTranslateMatrix($.getStyles(scroller, 'webkitTransform'));\n        return result && result.x || 0;\n      }\n\n      return 0;\n    },\n    isShown: function (direction) {\n      var shown = false;\n\n      if (!this.slideIn) {\n        var x = this.getTranslateX();\n\n        if (direction === 'right') {\n          shown = this.classList.contains(CLASS_ACTIVE) && x < 0;\n        } else if (direction === 'left') {\n          shown = this.classList.contains(CLASS_ACTIVE) && x > 0;\n        } else {\n          shown = this.classList.contains(CLASS_ACTIVE) && x !== 0;\n        }\n      } else {\n        if (direction === 'left') {\n          shown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\n        } else if (direction === 'right') {\n          shown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE);\n        } else {\n          shown = this.classList.contains(CLASS_ACTIVE) && (this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE));\n        }\n      }\n\n      return shown;\n    },\n    close: function () {\n      this._initOffCanvasVisible();\n\n      this.offCanvas = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\n      this.offCanvasWidth = this.offCanvas.offsetWidth;\n\n      if (this.scroller) {\n        this.offCanvas.offsetHeight;\n        this.offCanvas.classList.add(CLASS_TRANSITIONING);\n        this.scroller.classList.add(CLASS_TRANSITIONING);\n        this.openPercentage(0);\n      }\n    },\n    show: function (direction) {\n      this._initOffCanvasVisible();\n\n      if (this.isShown(direction)) {\n        return false;\n      }\n\n      if (!direction) {\n        direction = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT) ? 'right' : 'left';\n      }\n\n      if (direction === 'right') {\n        this.offCanvas = this.offCanvasRight;\n        this.offCanvasWidth = this.offCanvasRightWidth;\n      } else {\n        this.offCanvas = this.offCanvasLeft;\n        this.offCanvasWidth = this.offCanvasLeftWidth;\n      }\n\n      if (this.scroller) {\n        this.offCanvas.offsetHeight;\n        this.offCanvas.classList.add(CLASS_TRANSITIONING);\n        this.scroller.classList.add(CLASS_TRANSITIONING);\n        this.openPercentage(direction === 'left' ? 100 : -100);\n      }\n\n      return true;\n    },\n    toggle: function (directionOrOffCanvas) {\n      var direction = directionOrOffCanvas;\n\n      if (directionOrOffCanvas && directionOrOffCanvas.classList) {\n        direction = directionOrOffCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT) ? 'left' : 'right';\n        this.refresh(directionOrOffCanvas);\n      }\n\n      if (!this.show(direction)) {\n        this.close();\n      }\n    }\n  }); //hash to offcanvas\n\n  var findOffCanvasContainer = function (target) {\n    parentNode = target.parentNode;\n\n    if (parentNode) {\n      if (parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n        return parentNode;\n      } else {\n        parentNode = parentNode.parentNode;\n\n        if (parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n          return parentNode;\n        }\n      }\n    }\n  };\n\n  var handle = function (event, target) {\n    if (target.tagName === 'A' && target.hash) {\n      var offcanvas = document.getElementById(target.hash.replace('#', ''));\n\n      if (offcanvas) {\n        var container = findOffCanvasContainer(offcanvas);\n\n        if (container) {\n          $.targets._container = container;\n          return offcanvas;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  $.registerTarget({\n    name: name,\n    index: 60,\n    handle: handle,\n    target: false,\n    isReset: false,\n    isContinue: true\n  });\n  window.addEventListener('tap', function (e) {\n    if (!$.targets.offcanvas) {\n      return;\n    } //TODO 此处类型的代码后续考虑统一优化(target机制)，现在的实现费力不讨好\n\n\n    var target = e.target;\n\n    for (; target && target !== document; target = target.parentNode) {\n      if (target.tagName === 'A' && target.hash && target.hash === '#' + $.targets.offcanvas.id) {\n        e.detail && e.detail.gesture && e.detail.gesture.preventDefault(); //fixed hashchange\n\n        $($.targets._container).offCanvas().toggle($.targets.offcanvas);\n        $.targets.offcanvas = $.targets._container = null;\n        break;\n      }\n    }\n  });\n\n  $.fn.offCanvas = function (options) {\n    var offCanvasApis = [];\n    this.each(function () {\n      var offCanvasApi = null;\n      var self = this; //hack old version\n\n      if (!self.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n        self = findOffCanvasContainer(self);\n      }\n\n      var id = self.getAttribute('data-offCanvas');\n\n      if (!id) {\n        id = ++$.uuid;\n        $.data[id] = offCanvasApi = new OffCanvas(self, options);\n        self.setAttribute('data-offCanvas', id);\n      } else {\n        offCanvasApi = $.data[id];\n      }\n\n      if (options === 'show' || options === 'close' || options === 'toggle') {\n        offCanvasApi.toggle();\n      }\n\n      offCanvasApis.push(offCanvasApi);\n    });\n    return offCanvasApis.length === 1 ? offCanvasApis[0] : offCanvasApis;\n  };\n\n  $.ready(function () {\n    $('.mui-off-canvas-wrap').offCanvas();\n  });\n})(mui, window, document, 'offcanvas');\n/**\n * actions\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n\n\n(function ($, name) {\n  var CLASS_ACTION = 'mui-action';\n\n  var handle = function (event, target) {\n    var className = target.className || '';\n\n    if (typeof className !== 'string') {\n      //svg className(SVGAnimatedString)\n      className = '';\n    }\n\n    if (className && ~className.indexOf(CLASS_ACTION)) {\n      if (target.classList.contains('mui-action-back')) {\n        event.preventDefault();\n      }\n\n      return target;\n    }\n\n    return false;\n  };\n\n  $.registerTarget({\n    name: name,\n    index: 50,\n    handle: handle,\n    target: false,\n    isContinue: true\n  });\n})(mui, 'action');\n/**\n * Modals\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} name\n * @returns {undefined}\n */\n\n\n(function ($, window, document, name) {\n  var CLASS_MODAL = 'mui-modal';\n\n  var handle = function (event, target) {\n    if (target.tagName === 'A' && target.hash) {\n      var modal = document.getElementById(target.hash.replace('#', ''));\n\n      if (modal && modal.classList.contains(CLASS_MODAL)) {\n        return modal;\n      }\n    }\n\n    return false;\n  };\n\n  $.registerTarget({\n    name: name,\n    index: 50,\n    handle: handle,\n    target: false,\n    isReset: false,\n    isContinue: true\n  });\n  window.addEventListener('tap', function (event) {\n    if ($.targets.modal) {\n      event.detail.gesture.preventDefault(); //fixed hashchange\n\n      $.targets.modal.classList.toggle('mui-active');\n    }\n  });\n})(mui, window, document, 'modal');\n/**\n * Popovers\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} name\n * @param {type} undefined\n * @returns {undefined}\n */\n\n\n(function ($, window, document, name) {\n  var CLASS_POPOVER = 'mui-popover';\n  var CLASS_POPOVER_ARROW = 'mui-popover-arrow';\n  var CLASS_ACTION_POPOVER = 'mui-popover-action';\n  var CLASS_BACKDROP = 'mui-backdrop';\n  var CLASS_BAR_POPOVER = 'mui-bar-popover';\n  var CLASS_BAR_BACKDROP = 'mui-bar-backdrop';\n  var CLASS_ACTION_BACKDROP = 'mui-backdrop-action';\n  var CLASS_ACTIVE = 'mui-active';\n  var CLASS_BOTTOM = 'mui-bottom';\n\n  var handle = function (event, target) {\n    if (target.tagName === 'A' && target.hash) {\n      $.targets._popover = document.getElementById(target.hash.replace('#', ''));\n\n      if ($.targets._popover && $.targets._popover.classList.contains(CLASS_POPOVER)) {\n        return target;\n      } else {\n        $.targets._popover = null;\n      }\n    }\n\n    return false;\n  };\n\n  $.registerTarget({\n    name: name,\n    index: 60,\n    handle: handle,\n    target: false,\n    isReset: false,\n    isContinue: true\n  });\n\n  var onPopoverShown = function (e) {\n    this.removeEventListener('webkitTransitionEnd', onPopoverShown);\n    this.addEventListener($.EVENT_MOVE, $.preventDefault);\n    $.trigger(this, 'shown', this);\n  };\n\n  var onPopoverHidden = function (e) {\n    setStyle(this, 'none');\n    this.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n    this.removeEventListener($.EVENT_MOVE, $.preventDefault);\n    $.trigger(this, 'hidden', this);\n  };\n\n  var backdrop = function () {\n    var element = document.createElement('div');\n    element.classList.add(CLASS_BACKDROP);\n    element.addEventListener($.EVENT_MOVE, $.preventDefault);\n    element.addEventListener('tap', function (e) {\n      var popover = $.targets._popover;\n\n      if (popover) {\n        popover.addEventListener('webkitTransitionEnd', onPopoverHidden);\n        popover.classList.remove(CLASS_ACTIVE);\n        removeBackdrop(popover);\n      }\n    });\n    return element;\n  }();\n\n  var removeBackdropTimer;\n\n  var removeBackdrop = function (popover) {\n    backdrop.setAttribute('style', 'opacity:0');\n    $.targets.popover = $.targets._popover = null; //reset\n\n    removeBackdropTimer = $.later(function () {\n      if (!popover.classList.contains(CLASS_ACTIVE) && backdrop.parentNode && backdrop.parentNode === document.body) {\n        document.body.removeChild(backdrop);\n      }\n    }, 350);\n  };\n\n  window.addEventListener('tap', function (e) {\n    if (!$.targets.popover) {\n      return;\n    }\n\n    var toggle = false;\n    var target = e.target;\n\n    for (; target && target !== document; target = target.parentNode) {\n      if (target === $.targets.popover) {\n        toggle = true;\n      }\n    }\n\n    if (toggle) {\n      e.detail.gesture.preventDefault(); //fixed hashchange\n\n      togglePopover($.targets._popover, $.targets.popover);\n    }\n  });\n\n  var togglePopover = function (popover, anchor, state) {\n    if (state === 'show' && popover.classList.contains(CLASS_ACTIVE) || state === 'hide' && !popover.classList.contains(CLASS_ACTIVE)) {\n      return;\n    }\n\n    removeBackdropTimer && removeBackdropTimer.cancel(); //取消remove的timer\n    //remove一遍，以免来回快速切换，导致webkitTransitionEnd不触发，无法remove\n\n    popover.removeEventListener('webkitTransitionEnd', onPopoverShown);\n    popover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n    backdrop.classList.remove(CLASS_BAR_BACKDROP);\n    backdrop.classList.remove(CLASS_ACTION_BACKDROP);\n\n    var _popover = document.querySelector('.mui-popover.mui-active');\n\n    if (_popover) {\n      //\t\t\t_popover.setAttribute('style', '');\n      _popover.addEventListener('webkitTransitionEnd', onPopoverHidden);\n\n      _popover.classList.remove(CLASS_ACTIVE); //\t\t\t_popover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n      //同一个弹出则直接返回，解决同一个popover的toggle\n\n\n      if (popover === _popover) {\n        removeBackdrop(_popover);\n        return;\n      }\n    }\n\n    var isActionSheet = false;\n\n    if (popover.classList.contains(CLASS_BAR_POPOVER) || popover.classList.contains(CLASS_ACTION_POPOVER)) {\n      //navBar\n      if (popover.classList.contains(CLASS_ACTION_POPOVER)) {\n        //action sheet popover\n        isActionSheet = true;\n        backdrop.classList.add(CLASS_ACTION_BACKDROP);\n      } else {\n        //bar popover\n        backdrop.classList.add(CLASS_BAR_BACKDROP); //\t\t\t\tif (anchor) {\n        //\t\t\t\t\tif (anchor.parentNode) {\n        //\t\t\t\t\t\tvar offsetWidth = anchor.offsetWidth;\n        //\t\t\t\t\t\tvar offsetLeft = anchor.offsetLeft;\n        //\t\t\t\t\t\tvar innerWidth = window.innerWidth;\n        //\t\t\t\t\t\tpopover.style.left = (Math.min(Math.max(offsetLeft, defaultPadding), innerWidth - offsetWidth - defaultPadding)) + \"px\";\n        //\t\t\t\t\t} else {\n        //\t\t\t\t\t\t//TODO anchor is position:{left,top,bottom,right}\n        //\t\t\t\t\t}\n        //\t\t\t\t}\n      }\n    }\n\n    setStyle(popover, 'block'); //actionsheet transform\n\n    popover.offsetHeight;\n    popover.classList.add(CLASS_ACTIVE);\n    backdrop.setAttribute('style', '');\n    document.body.appendChild(backdrop);\n    calPosition(popover, anchor, isActionSheet); //position\n\n    backdrop.classList.add(CLASS_ACTIVE);\n    popover.addEventListener('webkitTransitionEnd', onPopoverShown);\n  };\n\n  var setStyle = function (popover, display, top, left) {\n    var style = popover.style;\n    if (typeof display !== 'undefined') style.display = display;\n    if (typeof top !== 'undefined') style.top = top + 'px';\n    if (typeof left !== 'undefined') style.left = left + 'px';\n  };\n\n  var calPosition = function (popover, anchor, isActionSheet) {\n    if (!popover || !anchor) {\n      return;\n    }\n\n    if (isActionSheet) {\n      //actionsheet\n      setStyle(popover, 'block');\n      return;\n    }\n\n    var wWidth = window.innerWidth;\n    var wHeight = window.innerHeight;\n    var pWidth = popover.offsetWidth;\n    var pHeight = popover.offsetHeight;\n    var aWidth = anchor.offsetWidth;\n    var aHeight = anchor.offsetHeight;\n    var offset = $.offset(anchor);\n    var arrow = popover.querySelector('.' + CLASS_POPOVER_ARROW);\n\n    if (!arrow) {\n      arrow = document.createElement('div');\n      arrow.className = CLASS_POPOVER_ARROW;\n      popover.appendChild(arrow);\n    }\n\n    var arrowSize = arrow && arrow.offsetWidth / 2 || 0;\n    var pTop = 0;\n    var pLeft = 0;\n    var diff = 0;\n    var arrowLeft = 0;\n    var defaultPadding = popover.classList.contains(CLASS_ACTION_POPOVER) ? 0 : 5;\n    var position = 'top';\n\n    if (pHeight + arrowSize < offset.top - window.pageYOffset) {\n      //top\n      pTop = offset.top - pHeight - arrowSize;\n    } else if (pHeight + arrowSize < wHeight - (offset.top - window.pageYOffset) - aHeight) {\n      //bottom\n      position = 'bottom';\n      pTop = offset.top + aHeight + arrowSize;\n    } else {\n      //middle\n      position = 'middle';\n      pTop = Math.max((wHeight - pHeight) / 2 + window.pageYOffset, 0);\n      pLeft = Math.max((wWidth - pWidth) / 2 + window.pageXOffset, 0);\n    }\n\n    if (position === 'top' || position === 'bottom') {\n      pLeft = aWidth / 2 + offset.left - pWidth / 2;\n      diff = pLeft;\n      if (pLeft < defaultPadding) pLeft = defaultPadding;\n      if (pLeft + pWidth > wWidth) pLeft = wWidth - pWidth - defaultPadding;\n\n      if (arrow) {\n        if (position === 'top') {\n          arrow.classList.add(CLASS_BOTTOM);\n        } else {\n          arrow.classList.remove(CLASS_BOTTOM);\n        }\n\n        diff = diff - pLeft;\n        arrowLeft = pWidth / 2 - arrowSize / 2 + diff;\n        arrowLeft = Math.max(Math.min(arrowLeft, pWidth - arrowSize * 2 - 6), 6);\n        arrow.setAttribute('style', 'left:' + arrowLeft + 'px');\n      }\n    } else if (position === 'middle') {\n      arrow.setAttribute('style', 'display:none');\n    }\n\n    setStyle(popover, 'block', pTop, pLeft);\n  };\n\n  $.createMask = function (callback) {\n    var element = document.createElement('div');\n    element.classList.add(CLASS_BACKDROP);\n    element.addEventListener($.EVENT_MOVE, $.preventDefault);\n    element.addEventListener('tap', function () {\n      mask.close();\n    });\n    var mask = [element];\n    mask._show = false;\n\n    mask.show = function () {\n      mask._show = true;\n      element.setAttribute('style', 'opacity:1');\n      document.body.appendChild(element);\n      return mask;\n    };\n\n    mask._remove = function () {\n      if (mask._show) {\n        mask._show = false;\n        element.setAttribute('style', 'opacity:0');\n        $.later(function () {\n          var body = document.body;\n          element.parentNode === body && body.removeChild(element);\n        }, 350);\n      }\n\n      return mask;\n    };\n\n    mask.close = function () {\n      if (callback) {\n        if (callback() !== false) {\n          mask._remove();\n        }\n      } else {\n        mask._remove();\n      }\n    };\n\n    return mask;\n  };\n\n  $.fn.popover = function () {\n    var args = arguments;\n    this.each(function () {\n      $.targets._popover = this;\n\n      if (args[0] === 'show' || args[0] === 'hide' || args[0] === 'toggle') {\n        togglePopover(this, args[1], args[0]);\n      }\n    });\n  };\n})(mui, window, document, 'popover');\n/**\n * segmented-controllers\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} undefined\n * @returns {undefined}\n */\n\n\n(function ($, window, document, name, undefined) {\n  var CLASS_CONTROL_ITEM = 'mui-control-item';\n  var CLASS_SEGMENTED_CONTROL = 'mui-segmented-control';\n  var CLASS_SEGMENTED_CONTROL_VERTICAL = 'mui-segmented-control-vertical';\n  var CLASS_CONTROL_CONTENT = 'mui-control-content';\n  var CLASS_TAB_BAR = 'mui-bar-tab';\n  var CLASS_TAB_ITEM = 'mui-tab-item';\n  var CLASS_SLIDER_ITEM = 'mui-slider-item';\n\n  var handle = function (event, target) {\n    if (target.classList && (target.classList.contains(CLASS_CONTROL_ITEM) || target.classList.contains(CLASS_TAB_ITEM))) {\n      if (target.parentNode && target.parentNode.classList && target.parentNode.classList.contains(CLASS_SEGMENTED_CONTROL_VERTICAL)) {//vertical 如果preventDefault会导致无法滚动\n      } else {\n        event.preventDefault(); //stop hash change\t\t\t\t\n      } //\t\t\tif (target.hash) {\n\n\n      return target; //\t\t\t}\n    }\n\n    return false;\n  };\n\n  $.registerTarget({\n    name: name,\n    index: 80,\n    handle: handle,\n    target: false\n  });\n  window.addEventListener('tap', function (e) {\n    var targetTab = $.targets.tab;\n\n    if (!targetTab) {\n      return;\n    }\n\n    var activeTab;\n    var activeBodies;\n    var targetBody;\n    var className = 'mui-active';\n    var classSelector = '.' + className;\n    var segmentedControl = targetTab.parentNode;\n\n    for (; segmentedControl && segmentedControl !== document; segmentedControl = segmentedControl.parentNode) {\n      if (segmentedControl.classList.contains(CLASS_SEGMENTED_CONTROL)) {\n        activeTab = segmentedControl.querySelector(classSelector + '.' + CLASS_CONTROL_ITEM);\n        break;\n      } else if (segmentedControl.classList.contains(CLASS_TAB_BAR)) {\n        activeTab = segmentedControl.querySelector(classSelector + '.' + CLASS_TAB_ITEM);\n      }\n    }\n\n    if (activeTab) {\n      activeTab.classList.remove(className);\n    }\n\n    var isLastActive = targetTab === activeTab;\n\n    if (targetTab) {\n      targetTab.classList.add(className);\n    }\n\n    if (!targetTab.hash) {\n      return;\n    }\n\n    targetBody = document.getElementById(targetTab.hash.replace('#', ''));\n\n    if (!targetBody) {\n      return;\n    }\n\n    if (!targetBody.classList.contains(CLASS_CONTROL_CONTENT)) {\n      //tab bar popover\n      targetTab.classList[isLastActive ? 'remove' : 'add'](className);\n      return;\n    }\n\n    if (isLastActive) {\n      //same\n      return;\n    }\n\n    var parentNode = targetBody.parentNode;\n    activeBodies = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT + classSelector);\n\n    for (var i = 0; i < activeBodies.length; i++) {\n      var activeBody = activeBodies[i];\n      activeBody.parentNode === parentNode && activeBody.classList.remove(className);\n    }\n\n    targetBody.classList.add(className);\n    var contents = [];\n\n    var _contents = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT);\n\n    for (var i = 0; i < _contents.length; i++) {\n      //查找直属子节点\n      _contents[i].parentNode === parentNode && contents.push(_contents[i]);\n    }\n\n    $.trigger(targetBody, $.eventName('shown', name), {\n      tabNumber: Array.prototype.indexOf.call(contents, targetBody)\n    });\n    e.detail && e.detail.gesture.preventDefault(); //fixed hashchange\n  });\n})(mui, window, document, 'tab');\n/**\n * Toggles switch\n * @param {type} $\n * @param {type} window\n * @param {type} name\n * @returns {undefined}\n */\n\n\n(function ($, window, name) {\n  var CLASS_SWITCH = 'mui-switch';\n  var CLASS_SWITCH_HANDLE = 'mui-switch-handle';\n  var CLASS_ACTIVE = 'mui-active';\n  var CLASS_DRAGGING = 'mui-dragging';\n  var CLASS_DISABLED = 'mui-disabled';\n  var SELECTOR_SWITCH_HANDLE = '.' + CLASS_SWITCH_HANDLE;\n\n  var handle = function (event, target) {\n    if (target.classList && target.classList.contains(CLASS_SWITCH)) {\n      return target;\n    }\n\n    return false;\n  };\n\n  $.registerTarget({\n    name: name,\n    index: 100,\n    handle: handle,\n    target: false\n  });\n\n  var Toggle = function (element) {\n    this.element = element;\n    this.classList = this.element.classList;\n    this.handle = this.element.querySelector(SELECTOR_SWITCH_HANDLE);\n    this.init();\n    this.initEvent();\n  };\n\n  Toggle.prototype.init = function () {\n    this.toggleWidth = this.element.offsetWidth;\n    this.handleWidth = this.handle.offsetWidth;\n    this.handleX = this.toggleWidth - this.handleWidth - 3;\n  };\n\n  Toggle.prototype.initEvent = function () {\n    this.element.addEventListener($.EVENT_START, this);\n    this.element.addEventListener('drag', this);\n    this.element.addEventListener('swiperight', this);\n    this.element.addEventListener($.EVENT_END, this);\n    this.element.addEventListener($.EVENT_CANCEL, this);\n  };\n\n  Toggle.prototype.handleEvent = function (e) {\n    if (this.classList.contains(CLASS_DISABLED)) {\n      return;\n    }\n\n    switch (e.type) {\n      case $.EVENT_START:\n        this.start(e);\n        break;\n\n      case 'drag':\n        this.drag(e);\n        break;\n\n      case 'swiperight':\n        this.swiperight();\n        break;\n\n      case $.EVENT_END:\n      case $.EVENT_CANCEL:\n        this.end(e);\n        break;\n    }\n  };\n\n  Toggle.prototype.start = function (e) {\n    this.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\n    this.classList.add(CLASS_DRAGGING);\n\n    if (this.toggleWidth === 0 || this.handleWidth === 0) {\n      //当switch处于隐藏状态时，width为0，需要重新初始化\n      this.init();\n    }\n  };\n\n  Toggle.prototype.drag = function (e) {\n    var detail = e.detail;\n\n    if (!this.isDragging) {\n      if (detail.direction === 'left' || detail.direction === 'right') {\n        this.isDragging = true;\n        this.lastChanged = undefined;\n        this.initialState = this.classList.contains(CLASS_ACTIVE);\n      }\n    }\n\n    if (this.isDragging) {\n      this.setTranslateX(detail.deltaX);\n      e.stopPropagation();\n      detail.gesture.preventDefault();\n    }\n  };\n\n  Toggle.prototype.swiperight = function (e) {\n    if (this.isDragging) {\n      e.stopPropagation();\n    }\n  };\n\n  Toggle.prototype.end = function (e) {\n    this.classList.remove(CLASS_DRAGGING);\n\n    if (this.isDragging) {\n      this.isDragging = false;\n      e.stopPropagation();\n      $.trigger(this.element, 'toggle', {\n        isActive: this.classList.contains(CLASS_ACTIVE)\n      });\n    } else {\n      this.toggle();\n    }\n  };\n\n  Toggle.prototype.toggle = function (animate) {\n    var classList = this.classList;\n\n    if (animate === false) {\n      this.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '0s';\n    } else {\n      this.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\n    }\n\n    if (classList.contains(CLASS_ACTIVE)) {\n      classList.remove(CLASS_ACTIVE);\n      this.handle.style.webkitTransform = 'translate(0,0)';\n    } else {\n      classList.add(CLASS_ACTIVE);\n      this.handle.style.webkitTransform = 'translate(' + this.handleX + 'px,0)';\n    }\n\n    $.trigger(this.element, 'toggle', {\n      isActive: this.classList.contains(CLASS_ACTIVE)\n    });\n  };\n\n  Toggle.prototype.setTranslateX = $.animationFrame(function (x) {\n    if (!this.isDragging) {\n      return;\n    }\n\n    var isChanged = false;\n\n    if (this.initialState && -x > this.handleX / 2 || !this.initialState && x > this.handleX / 2) {\n      isChanged = true;\n    }\n\n    if (this.lastChanged !== isChanged) {\n      if (isChanged) {\n        this.handle.style.webkitTransform = 'translate(' + (this.initialState ? 0 : this.handleX) + 'px,0)';\n        this.classList[this.initialState ? 'remove' : 'add'](CLASS_ACTIVE);\n      } else {\n        this.handle.style.webkitTransform = 'translate(' + (this.initialState ? this.handleX : 0) + 'px,0)';\n        this.classList[this.initialState ? 'add' : 'remove'](CLASS_ACTIVE);\n      }\n\n      this.lastChanged = isChanged;\n    }\n  });\n\n  $.fn['switch'] = function (options) {\n    var switchApis = [];\n    this.each(function () {\n      var switchApi = null;\n      var id = this.getAttribute('data-switch');\n\n      if (!id) {\n        id = ++$.uuid;\n        $.data[id] = new Toggle(this);\n        this.setAttribute('data-switch', id);\n      } else {\n        switchApi = $.data[id];\n      }\n\n      switchApis.push(switchApi);\n    });\n    return switchApis.length > 1 ? switchApis : switchApis[0];\n  };\n\n  $.ready(function () {\n    $('.' + CLASS_SWITCH)['switch']();\n  });\n})(mui, window, 'toggle');\n/**\n * Tableviews\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n\n\n(function ($, window, document) {\n  var CLASS_ACTIVE = 'mui-active';\n  var CLASS_SELECTED = 'mui-selected';\n  var CLASS_GRID_VIEW = 'mui-grid-view';\n  var CLASS_RADIO_VIEW = 'mui-table-view-radio';\n  var CLASS_TABLE_VIEW_CELL = 'mui-table-view-cell';\n  var CLASS_COLLAPSE_CONTENT = 'mui-collapse-content';\n  var CLASS_DISABLED = 'mui-disabled';\n  var CLASS_TOGGLE = 'mui-switch';\n  var CLASS_BTN = 'mui-btn';\n  var CLASS_SLIDER_HANDLE = 'mui-slider-handle';\n  var CLASS_SLIDER_LEFT = 'mui-slider-left';\n  var CLASS_SLIDER_RIGHT = 'mui-slider-right';\n  var CLASS_TRANSITIONING = 'mui-transitioning';\n  var SELECTOR_SLIDER_HANDLE = '.' + CLASS_SLIDER_HANDLE;\n  var SELECTOR_SLIDER_LEFT = '.' + CLASS_SLIDER_LEFT;\n  var SELECTOR_SLIDER_RIGHT = '.' + CLASS_SLIDER_RIGHT;\n  var SELECTOR_SELECTED = '.' + CLASS_SELECTED;\n  var SELECTOR_BUTTON = '.' + CLASS_BTN;\n  var overFactor = 0.8;\n  var cell, a;\n  var isMoved = isOpened = openedActions = progress = false;\n  var sliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\n  var timer = translateX = lastTranslateX = sliderActionLeftWidth = sliderActionRightWidth = 0;\n\n  var toggleActive = function (isActive) {\n    if (isActive) {\n      if (a) {\n        a.classList.add(CLASS_ACTIVE);\n      } else if (cell) {\n        cell.classList.add(CLASS_ACTIVE);\n      }\n    } else {\n      timer && timer.cancel();\n\n      if (a) {\n        a.classList.remove(CLASS_ACTIVE);\n      } else if (cell) {\n        cell.classList.remove(CLASS_ACTIVE);\n      }\n    }\n  };\n\n  var updateTranslate = function () {\n    if (translateX !== lastTranslateX) {\n      if (buttonsRight && buttonsRight.length > 0) {\n        progress = translateX / sliderActionRightWidth;\n\n        if (translateX < -sliderActionRightWidth) {\n          translateX = -sliderActionRightWidth - Math.pow(-translateX - sliderActionRightWidth, overFactor);\n        }\n\n        for (var i = 0, len = buttonsRight.length; i < len; i++) {\n          var buttonRight = buttonsRight[i];\n\n          if (typeof buttonRight._buttonOffset === 'undefined') {\n            buttonRight._buttonOffset = buttonRight.offsetLeft;\n          }\n\n          buttonOffset = buttonRight._buttonOffset;\n          setTranslate(buttonRight, translateX - buttonOffset * (1 + Math.max(progress, -1)));\n        }\n      }\n\n      if (buttonsLeft && buttonsLeft.length > 0) {\n        progress = translateX / sliderActionLeftWidth;\n\n        if (translateX > sliderActionLeftWidth) {\n          translateX = sliderActionLeftWidth + Math.pow(translateX - sliderActionLeftWidth, overFactor);\n        }\n\n        for (var i = 0, len = buttonsLeft.length; i < len; i++) {\n          var buttonLeft = buttonsLeft[i];\n\n          if (typeof buttonLeft._buttonOffset === 'undefined') {\n            buttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\n          }\n\n          buttonOffset = buttonLeft._buttonOffset;\n\n          if (buttonsLeft.length > 1) {\n            buttonLeft.style.zIndex = buttonsLeft.length - i;\n          }\n\n          setTranslate(buttonLeft, translateX + buttonOffset * (1 - Math.min(progress, 1)));\n        }\n      }\n\n      setTranslate(sliderHandle, translateX);\n      lastTranslateX = translateX;\n    }\n\n    sliderRequestAnimationFrame = requestAnimationFrame(function () {\n      updateTranslate();\n    });\n  };\n\n  var setTranslate = function (element, x) {\n    if (element) {\n      element.style.webkitTransform = 'translate(' + x + 'px,0)';\n    }\n  };\n\n  window.addEventListener($.EVENT_START, function (event) {\n    if (cell) {\n      toggleActive(false);\n    }\n\n    cell = a = false;\n    isMoved = isOpened = openedActions = false;\n    var target = event.target;\n    var isDisabled = false;\n\n    for (; target && target !== document; target = target.parentNode) {\n      if (target.classList) {\n        var classList = target.classList;\n\n        if (target.tagName === 'INPUT' && target.type !== 'radio' && target.type !== 'checkbox' || target.tagName === 'BUTTON' || classList.contains(CLASS_TOGGLE) || classList.contains(CLASS_BTN) || classList.contains(CLASS_DISABLED)) {\n          isDisabled = true;\n        }\n\n        if (classList.contains(CLASS_COLLAPSE_CONTENT)) {\n          //collapse content\n          break;\n        }\n\n        if (classList.contains(CLASS_TABLE_VIEW_CELL)) {\n          cell = target; //TODO swipe to delete close\n\n          var selected = cell.parentNode.querySelector(SELECTOR_SELECTED);\n\n          if (!cell.parentNode.classList.contains(CLASS_RADIO_VIEW) && selected && selected !== cell) {\n            $.swipeoutClose(selected);\n            cell = isDisabled = false;\n            return;\n          }\n\n          if (!cell.parentNode.classList.contains(CLASS_GRID_VIEW)) {\n            var link = cell.querySelector('a');\n\n            if (link && link.parentNode === cell) {\n              //li>a\n              a = link;\n            }\n          }\n\n          var handle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\n\n          if (handle) {\n            toggleEvents(cell);\n            event.stopPropagation();\n          }\n\n          if (!isDisabled) {\n            if (handle) {\n              if (timer) {\n                timer.cancel();\n              }\n\n              timer = $.later(function () {\n                toggleActive(true);\n              }, 100);\n            } else {\n              toggleActive(true);\n            }\n          }\n\n          break;\n        }\n      }\n    }\n  });\n  window.addEventListener($.EVENT_MOVE, function (event) {\n    toggleActive(false);\n  });\n  var handleEvent = {\n    handleEvent: function (event) {\n      switch (event.type) {\n        case 'drag':\n          this.drag(event);\n          break;\n\n        case 'dragend':\n          this.dragend(event);\n          break;\n\n        case 'flick':\n          this.flick(event);\n          break;\n\n        case 'swiperight':\n          this.swiperight(event);\n          break;\n\n        case 'swipeleft':\n          this.swipeleft(event);\n          break;\n      }\n    },\n    drag: function (event) {\n      if (!cell) {\n        return;\n      }\n\n      if (!isMoved) {\n        //init\n        sliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\n        sliderHandle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\n\n        if (sliderHandle) {\n          sliderActionLeft = cell.querySelector(SELECTOR_SLIDER_LEFT);\n          sliderActionRight = cell.querySelector(SELECTOR_SLIDER_RIGHT);\n\n          if (sliderActionLeft) {\n            sliderActionLeftWidth = sliderActionLeft.offsetWidth;\n            buttonsLeft = sliderActionLeft.querySelectorAll(SELECTOR_BUTTON);\n          }\n\n          if (sliderActionRight) {\n            sliderActionRightWidth = sliderActionRight.offsetWidth;\n            buttonsRight = sliderActionRight.querySelectorAll(SELECTOR_BUTTON);\n          }\n\n          cell.classList.remove(CLASS_TRANSITIONING);\n          isOpened = cell.classList.contains(CLASS_SELECTED);\n\n          if (isOpened) {\n            openedActions = cell.querySelector(SELECTOR_SLIDER_LEFT + SELECTOR_SELECTED) ? 'left' : 'right';\n          }\n        }\n      }\n\n      var detail = event.detail;\n      var direction = detail.direction;\n      var angle = detail.angle;\n\n      if (direction === 'left' && (angle > 150 || angle < -150)) {\n        if (buttonsRight || buttonsLeft && isOpened) {\n          //存在右侧按钮或存在左侧按钮且是已打开状态\n          isMoved = true;\n        }\n      } else if (direction === 'right' && angle > -30 && angle < 30) {\n        if (buttonsLeft || buttonsRight && isOpened) {\n          //存在左侧按钮或存在右侧按钮且是已打开状态\n          isMoved = true;\n        }\n      }\n\n      if (isMoved) {\n        event.stopPropagation();\n        event.detail.gesture.preventDefault();\n        var translate = event.detail.deltaX;\n\n        if (isOpened) {\n          if (openedActions === 'right') {\n            translate = translate - sliderActionRightWidth;\n          } else {\n            translate = translate + sliderActionLeftWidth;\n          }\n        }\n\n        if (translate > 0 && !buttonsLeft || translate < 0 && !buttonsRight) {\n          if (!isOpened) {\n            return;\n          }\n\n          translate = 0;\n        }\n\n        if (translate < 0) {\n          sliderDirection = 'toLeft';\n        } else if (translate > 0) {\n          sliderDirection = 'toRight';\n        } else {\n          if (!sliderDirection) {\n            sliderDirection = 'toLeft';\n          }\n        }\n\n        if (!sliderRequestAnimationFrame) {\n          updateTranslate();\n        }\n\n        translateX = translate;\n      }\n    },\n    flick: function (event) {\n      if (isMoved) {\n        event.stopPropagation();\n      }\n    },\n    swipeleft: function (event) {\n      if (isMoved) {\n        event.stopPropagation();\n      }\n    },\n    swiperight: function (event) {\n      if (isMoved) {\n        event.stopPropagation();\n      }\n    },\n    dragend: function (event) {\n      if (!isMoved) {\n        return;\n      }\n\n      event.stopPropagation();\n\n      if (sliderRequestAnimationFrame) {\n        cancelAnimationFrame(sliderRequestAnimationFrame);\n        sliderRequestAnimationFrame = null;\n      }\n\n      var detail = event.detail;\n      isMoved = false;\n      var action = 'close';\n      var actionsWidth = sliderDirection === 'toLeft' ? sliderActionRightWidth : sliderActionLeftWidth;\n      var isToggle = detail.swipe || Math.abs(translateX) > actionsWidth / 2;\n\n      if (isToggle) {\n        if (!isOpened) {\n          action = 'open';\n        } else if (detail.direction === 'left' && openedActions === 'right') {\n          action = 'open';\n        } else if (detail.direction === 'right' && openedActions === 'left') {\n          action = 'open';\n        }\n      }\n\n      cell.classList.add(CLASS_TRANSITIONING);\n      var buttons;\n\n      if (action === 'open') {\n        var newTranslate = sliderDirection === 'toLeft' ? -actionsWidth : actionsWidth;\n        setTranslate(sliderHandle, newTranslate);\n        buttons = sliderDirection === 'toLeft' ? buttonsRight : buttonsLeft;\n\n        if (typeof buttons !== 'undefined') {\n          var button = null;\n\n          for (var i = 0; i < buttons.length; i++) {\n            button = buttons[i];\n            setTranslate(button, newTranslate);\n          }\n\n          button.parentNode.classList.add(CLASS_SELECTED);\n          cell.classList.add(CLASS_SELECTED);\n\n          if (!isOpened) {\n            $.trigger(cell, sliderDirection === 'toLeft' ? 'slideleft' : 'slideright');\n          }\n        }\n      } else {\n        setTranslate(sliderHandle, 0);\n        sliderActionLeft && sliderActionLeft.classList.remove(CLASS_SELECTED);\n        sliderActionRight && sliderActionRight.classList.remove(CLASS_SELECTED);\n        cell.classList.remove(CLASS_SELECTED);\n      }\n\n      var buttonOffset;\n\n      if (buttonsLeft && buttonsLeft.length > 0 && buttonsLeft !== buttons) {\n        for (var i = 0, len = buttonsLeft.length; i < len; i++) {\n          var buttonLeft = buttonsLeft[i];\n          buttonOffset = buttonLeft._buttonOffset;\n\n          if (typeof buttonOffset === 'undefined') {\n            buttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\n          }\n\n          setTranslate(buttonLeft, buttonOffset);\n        }\n      }\n\n      if (buttonsRight && buttonsRight.length > 0 && buttonsRight !== buttons) {\n        for (var i = 0, len = buttonsRight.length; i < len; i++) {\n          var buttonRight = buttonsRight[i];\n          buttonOffset = buttonRight._buttonOffset;\n\n          if (typeof buttonOffset === 'undefined') {\n            buttonRight._buttonOffset = buttonRight.offsetLeft;\n          }\n\n          setTranslate(buttonRight, -buttonOffset);\n        }\n      }\n    }\n  };\n\n  function toggleEvents(element, isRemove) {\n    var method = !!isRemove ? 'removeEventListener' : 'addEventListener';\n    element[method]('drag', handleEvent);\n    element[method]('dragend', handleEvent);\n    element[method]('swiperight', handleEvent);\n    element[method]('swipeleft', handleEvent);\n    element[method]('flick', handleEvent);\n  }\n\n  ;\n  /**\n   * 打开滑动菜单\n   * @param {Object} el\n   * @param {Object} direction\n   */\n\n  $.swipeoutOpen = function (el, direction) {\n    if (!el) return;\n    var classList = el.classList;\n    if (classList.contains(CLASS_SELECTED)) return;\n\n    if (!direction) {\n      if (el.querySelector(SELECTOR_SLIDER_RIGHT)) {\n        direction = 'right';\n      } else {\n        direction = 'left';\n      }\n    }\n\n    var swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\n    if (!swipeoutAction) return;\n    swipeoutAction.classList.add(CLASS_SELECTED);\n    classList.add(CLASS_SELECTED);\n    classList.remove(CLASS_TRANSITIONING);\n    var buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\n    var swipeoutWidth = swipeoutAction.offsetWidth;\n    var translate = direction === 'right' ? -swipeoutWidth : swipeoutWidth;\n    var length = buttons.length;\n    var button;\n\n    for (var i = 0; i < length; i++) {\n      button = buttons[i];\n\n      if (direction === 'right') {\n        setTranslate(button, -button.offsetLeft);\n      } else {\n        setTranslate(button, swipeoutWidth - button.offsetWidth - button.offsetLeft);\n      }\n    }\n\n    classList.add(CLASS_TRANSITIONING);\n\n    for (var i = 0; i < length; i++) {\n      setTranslate(buttons[i], translate);\n    }\n\n    setTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), translate);\n  };\n  /**\n   * 关闭滑动菜单\n   * @param {Object} el\n   */\n\n\n  $.swipeoutClose = function (el) {\n    if (!el) return;\n    var classList = el.classList;\n    if (!classList.contains(CLASS_SELECTED)) return;\n    var direction = el.querySelector(SELECTOR_SLIDER_RIGHT + SELECTOR_SELECTED) ? 'right' : 'left';\n    var swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\n    if (!swipeoutAction) return;\n    swipeoutAction.classList.remove(CLASS_SELECTED);\n    classList.remove(CLASS_SELECTED);\n    classList.add(CLASS_TRANSITIONING);\n    var buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\n    var swipeoutWidth = swipeoutAction.offsetWidth;\n    var length = buttons.length;\n    var button;\n    setTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), 0);\n\n    for (var i = 0; i < length; i++) {\n      button = buttons[i];\n\n      if (direction === 'right') {\n        setTranslate(button, -button.offsetLeft);\n      } else {\n        setTranslate(button, swipeoutWidth - button.offsetWidth - button.offsetLeft);\n      }\n    }\n  };\n\n  window.addEventListener($.EVENT_END, function (event) {\n    //使用touchend来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\n    if (!cell) {\n      return;\n    }\n\n    toggleActive(false);\n    sliderHandle && toggleEvents(cell, true);\n  });\n  window.addEventListener($.EVENT_CANCEL, function (event) {\n    //使用touchcancel来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\n    if (!cell) {\n      return;\n    }\n\n    toggleActive(false);\n    sliderHandle && toggleEvents(cell, true);\n  });\n\n  var radioOrCheckboxClick = function (event) {\n    var type = event.target && event.target.type || '';\n\n    if (type === 'radio' || type === 'checkbox') {\n      return;\n    }\n\n    var classList = cell.classList;\n\n    if (classList.contains('mui-radio')) {\n      var input = cell.querySelector('input[type=radio]');\n\n      if (input) {\n        //\t\t\t\tinput.click();\n        if (!input.disabled && !input.readOnly) {\n          input.checked = !input.checked;\n          $.trigger(input, 'change');\n        }\n      }\n    } else if (classList.contains('mui-checkbox')) {\n      var input = cell.querySelector('input[type=checkbox]');\n\n      if (input) {\n        //\t\t\t\tinput.click();\n        if (!input.disabled && !input.readOnly) {\n          input.checked = !input.checked;\n          $.trigger(input, 'change');\n        }\n      }\n    }\n  }; //fixed hashchange(android)\n\n\n  window.addEventListener($.EVENT_CLICK, function (e) {\n    if (cell && cell.classList.contains('mui-collapse')) {\n      e.preventDefault();\n    }\n  });\n  window.addEventListener('doubletap', function (event) {\n    if (cell) {\n      radioOrCheckboxClick(event);\n    }\n  });\n  var preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\n  window.addEventListener('tap', function (event) {\n    if (!cell) {\n      return;\n    }\n\n    var isExpand = false;\n    var classList = cell.classList;\n    var ul = cell.parentNode;\n\n    if (ul && ul.classList.contains(CLASS_RADIO_VIEW)) {\n      if (classList.contains(CLASS_SELECTED)) {\n        return;\n      }\n\n      var selected = ul.querySelector('li' + SELECTOR_SELECTED);\n\n      if (selected) {\n        selected.classList.remove(CLASS_SELECTED);\n      }\n\n      classList.add(CLASS_SELECTED);\n      $.trigger(cell, 'selected', {\n        el: cell\n      });\n      return;\n    }\n\n    if (classList.contains('mui-collapse') && !cell.parentNode.classList.contains('mui-unfold')) {\n      if (!preventDefaultException.test(event.target.tagName)) {\n        event.detail.gesture.preventDefault();\n      }\n\n      if (!classList.contains(CLASS_ACTIVE)) {\n        //展开时,需要收缩其他同类\n        var collapse = cell.parentNode.querySelector('.mui-collapse.mui-active');\n\n        if (collapse) {\n          collapse.classList.remove(CLASS_ACTIVE);\n        }\n\n        isExpand = true;\n      }\n\n      classList.toggle(CLASS_ACTIVE);\n\n      if (isExpand) {\n        //触发展开事件\n        $.trigger(cell, 'expand'); //scroll\n        //暂不滚动\n        // var offsetTop = $.offset(cell).top;\n        // var scrollTop = document.body.scrollTop;\n        // var height = window.innerHeight;\n        // var offsetHeight = cell.offsetHeight;\n        // var cellHeight = (offsetTop - scrollTop + offsetHeight);\n        // if (offsetHeight > height) {\n        // \t$.scrollTo(offsetTop, 300);\n        // } else if (cellHeight > height) {\n        // \t$.scrollTo(cellHeight - height + scrollTop, 300);\n        // }\n      }\n    } else {\n      radioOrCheckboxClick(event);\n    }\n  });\n})(mui, window, document);\n\n(function ($, window) {\n  /**\n   * 警告消息框\n   */\n  $.alert = function (message, title, btnValue, callback) {\n    if ($.os.plus) {\n      if (typeof message === 'undefined') {\n        return;\n      } else {\n        if (typeof title === 'function') {\n          callback = title;\n          title = null;\n          btnValue = '确定';\n        } else if (typeof btnValue === 'function') {\n          callback = btnValue;\n          btnValue = null;\n        }\n\n        $.plusReady(function () {\n          plus.nativeUI.alert(message, callback, title, btnValue);\n        });\n      }\n    } else {\n      //TODO H5版本\n      window.alert(message);\n    }\n  };\n})(mui, window);\n\n(function ($, window) {\n  /**\n   * 确认消息框\n   */\n  $.confirm = function (message, title, btnArray, callback) {\n    if ($.os.plus) {\n      if (typeof message === 'undefined') {\n        return;\n      } else {\n        if (typeof title === 'function') {\n          callback = title;\n          title = null;\n          btnArray = null;\n        } else if (typeof btnArray === 'function') {\n          callback = btnArray;\n          btnArray = null;\n        }\n\n        $.plusReady(function () {\n          plus.nativeUI.confirm(message, callback, title, btnArray);\n        });\n      }\n    } else {\n      //H5版本，0为确认，1为取消\n      if (window.confirm(message)) {\n        callback({\n          index: 0\n        });\n      } else {\n        callback({\n          index: 1\n        });\n      }\n    }\n  };\n})(mui, window);\n\n(function ($, window) {\n  /**\n   * 输入对话框\n   */\n  $.prompt = function (text, defaultText, title, btnArray, callback) {\n    if ($.os.plus) {\n      if (typeof message === 'undefined') {\n        return;\n      } else {\n        if (typeof defaultText === 'function') {\n          callback = defaultText;\n          defaultText = null;\n          title = null;\n          btnArray = null;\n        } else if (typeof title === 'function') {\n          callback = title;\n          title = null;\n          btnArray = null;\n        } else if (typeof btnArray === 'function') {\n          callback = btnArray;\n          btnArray = null;\n        }\n\n        $.plusReady(function () {\n          plus.nativeUI.prompt(text, callback, title, defaultText, btnArray);\n        });\n      }\n    } else {\n      //H5版本(确认index为0，取消index为1)\n      var result = window.prompt(text);\n\n      if (result) {\n        callback({\n          index: 0,\n          value: result\n        });\n      } else {\n        callback({\n          index: 1,\n          value: ''\n        });\n      }\n    }\n  };\n})(mui, window);\n\n(function ($, window) {\n  var CLASS_ACTIVE = 'mui-active';\n  /**\n   * 自动消失提示框\n   */\n\n  $.toast = function (message, options) {\n    var durations = {\n      'long': 3500,\n      'short': 2000\n    }; //计算显示时间\n\n    options = $.extend({\n      duration: 'short'\n    }, options || {});\n\n    if ($.os.plus && options.type !== 'div') {\n      //默认显示在底部；\n      $.plusReady(function () {\n        plus.nativeUI.toast(message, {\n          verticalAlign: 'bottom',\n          duration: options.duration\n        });\n      });\n    } else {\n      if (typeof options.duration === 'number') {\n        duration = options.duration > 0 ? options.duration : durations['short'];\n      } else {\n        duration = durations[options.duration];\n      }\n\n      if (!duration) {\n        duration = durations['short'];\n      }\n\n      var toast = document.createElement('div');\n      toast.classList.add('mui-toast-container');\n      toast.innerHTML = '<div class=\"' + 'mui-toast-message' + '\">' + message + '</div>';\n      toast.addEventListener('webkitTransitionEnd', function () {\n        if (!toast.classList.contains(CLASS_ACTIVE)) {\n          toast.parentNode.removeChild(toast);\n          toast = null;\n        }\n      }); //点击则自动消失\n\n      toast.addEventListener('click', function () {\n        toast.parentNode.removeChild(toast);\n        toast = null;\n      });\n      document.body.appendChild(toast);\n      toast.offsetHeight;\n      toast.classList.add(CLASS_ACTIVE);\n      setTimeout(function () {\n        toast && toast.classList.remove(CLASS_ACTIVE);\n      }, duration);\n      return {\n        isVisible: function () {\n          return !!toast;\n        }\n      };\n    }\n  };\n})(mui, window);\n/**\n * Popup(alert,confirm,prompt)  \n * @param {Object} $\n * @param {Object} window\n * @param {Object} document\n */\n\n\n(function ($, window, document) {\n  var CLASS_POPUP = 'mui-popup';\n  var CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\n  var CLASS_POPUP_IN = 'mui-popup-in';\n  var CLASS_POPUP_OUT = 'mui-popup-out';\n  var CLASS_POPUP_INNER = 'mui-popup-inner';\n  var CLASS_POPUP_TITLE = 'mui-popup-title';\n  var CLASS_POPUP_TEXT = 'mui-popup-text';\n  var CLASS_POPUP_INPUT = 'mui-popup-input';\n  var CLASS_POPUP_BUTTONS = 'mui-popup-buttons';\n  var CLASS_POPUP_BUTTON = 'mui-popup-button';\n  var CLASS_POPUP_BUTTON_BOLD = 'mui-popup-button-bold';\n  var CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\n  var CLASS_ACTIVE = 'mui-active';\n  var popupStack = [];\n\n  var backdrop = function () {\n    var element = document.createElement('div');\n    element.classList.add(CLASS_POPUP_BACKDROP);\n    element.addEventListener($.EVENT_MOVE, $.preventDefault);\n    element.addEventListener('webkitTransitionEnd', function () {\n      if (!this.classList.contains(CLASS_ACTIVE)) {\n        element.parentNode && element.parentNode.removeChild(element);\n      }\n    });\n    return element;\n  }();\n\n  var createInput = function (placeholder) {\n    return '<div class=\"' + CLASS_POPUP_INPUT + '\"><input type=\"text\" autofocus placeholder=\"' + (placeholder || '') + '\"/></div>';\n  };\n\n  var createInner = function (message, title, extra) {\n    return '<div class=\"' + CLASS_POPUP_INNER + '\"><div class=\"' + CLASS_POPUP_TITLE + '\">' + title + '</div><div class=\"' + CLASS_POPUP_TEXT + '\">' + message.replace(/\\r\\n/g, \"<br/>\").replace(/\\n/g, \"<br/>\") + '</div>' + (extra || '') + '</div>';\n  };\n\n  var createButtons = function (btnArray) {\n    var length = btnArray.length;\n    var btns = [];\n\n    for (var i = 0; i < length; i++) {\n      btns.push('<span class=\"' + CLASS_POPUP_BUTTON + (i === length - 1 ? ' ' + CLASS_POPUP_BUTTON_BOLD : '') + '\">' + btnArray[i] + '</span>');\n    }\n\n    return '<div class=\"' + CLASS_POPUP_BUTTONS + '\">' + btns.join('') + '</div>';\n  };\n\n  var createPopup = function (html, callback) {\n    var popupElement = document.createElement('div');\n    popupElement.className = CLASS_POPUP;\n    popupElement.innerHTML = html;\n\n    var removePopupElement = function () {\n      popupElement.parentNode && popupElement.parentNode.removeChild(popupElement);\n      popupElement = null;\n    };\n\n    popupElement.addEventListener($.EVENT_MOVE, $.preventDefault);\n    popupElement.addEventListener('webkitTransitionEnd', function (e) {\n      if (popupElement && e.target === popupElement && popupElement.classList.contains(CLASS_POPUP_OUT)) {\n        removePopupElement();\n      }\n    });\n    popupElement.style.display = 'block';\n    document.body.appendChild(popupElement);\n    popupElement.offsetHeight;\n    popupElement.classList.add(CLASS_POPUP_IN);\n\n    if (!backdrop.classList.contains(CLASS_ACTIVE)) {\n      backdrop.style.display = 'block';\n      document.body.appendChild(backdrop);\n      backdrop.offsetHeight;\n      backdrop.classList.add(CLASS_ACTIVE);\n    }\n\n    var btns = $.qsa('.' + CLASS_POPUP_BUTTON, popupElement);\n    var input = popupElement.querySelector('.' + CLASS_POPUP_INPUT + ' input');\n    var popup = {\n      element: popupElement,\n      close: function (index, animate) {\n        if (popupElement) {\n          var result = callback && callback({\n            index: index || 0,\n            value: input && input.value || ''\n          });\n\n          if (result === false) {\n            //返回false则不关闭当前popup\n            return;\n          }\n\n          if (animate !== false) {\n            popupElement.classList.remove(CLASS_POPUP_IN);\n            popupElement.classList.add(CLASS_POPUP_OUT);\n          } else {\n            removePopupElement();\n          }\n\n          popupStack.pop(); //如果还有其他popup，则不remove backdrop\n\n          if (popupStack.length) {\n            popupStack[popupStack.length - 1]['show'](animate);\n          } else {\n            backdrop.classList.remove(CLASS_ACTIVE);\n          }\n        }\n      }\n    };\n\n    var handleEvent = function (e) {\n      popup.close(btns.indexOf(e.target));\n    };\n\n    $(popupElement).on('tap', '.' + CLASS_POPUP_BUTTON, handleEvent);\n\n    if (popupStack.length) {\n      popupStack[popupStack.length - 1]['hide']();\n    }\n\n    popupStack.push({\n      close: popup.close,\n      show: function (animate) {\n        popupElement.style.display = 'block';\n        popupElement.offsetHeight;\n        popupElement.classList.add(CLASS_POPUP_IN);\n      },\n      hide: function () {\n        popupElement.style.display = 'none';\n        popupElement.classList.remove(CLASS_POPUP_IN);\n      }\n    });\n    return popup;\n  };\n\n  var createAlert = function (message, title, btnValue, callback, type) {\n    if (typeof message === 'undefined') {\n      return;\n    } else {\n      if (typeof title === 'function') {\n        callback = title;\n        type = btnValue;\n        title = null;\n        btnValue = null;\n      } else if (typeof btnValue === 'function') {\n        type = callback;\n        callback = btnValue;\n        btnValue = null;\n      }\n    }\n\n    if (!$.os.plus || type === 'div') {\n      return createPopup(createInner(message, title || '提示') + createButtons([btnValue || '确定']), callback);\n    }\n\n    return plus.nativeUI.alert(message, callback, title || '提示', btnValue || '确定');\n  };\n\n  var createConfirm = function (message, title, btnArray, callback, type) {\n    if (typeof message === 'undefined') {\n      return;\n    } else {\n      if (typeof title === 'function') {\n        callback = title;\n        type = btnArray;\n        title = null;\n        btnArray = null;\n      } else if (typeof btnArray === 'function') {\n        type = callback;\n        callback = btnArray;\n        btnArray = null;\n      }\n    }\n\n    if (!$.os.plus || type === 'div') {\n      return createPopup(createInner(message, title || '提示') + createButtons(btnArray || ['取消', '确认']), callback);\n    }\n\n    return plus.nativeUI.confirm(message, callback, title, btnArray || ['取消', '确认']);\n  };\n\n  var createPrompt = function (message, placeholder, title, btnArray, callback, type) {\n    if (typeof message === 'undefined') {\n      return;\n    } else {\n      if (typeof placeholder === 'function') {\n        callback = placeholder;\n        type = title;\n        placeholder = null;\n        title = null;\n        btnArray = null;\n      } else if (typeof title === 'function') {\n        callback = title;\n        type = btnArray;\n        title = null;\n        btnArray = null;\n      } else if (typeof btnArray === 'function') {\n        type = callback;\n        callback = btnArray;\n        btnArray = null;\n      }\n    }\n\n    if (!$.os.plus || type === 'div') {\n      return createPopup(createInner(message, title || '提示', createInput(placeholder)) + createButtons(btnArray || ['取消', '确认']), callback);\n    }\n\n    return plus.nativeUI.prompt(message, callback, title || '提示', placeholder, btnArray || ['取消', '确认']);\n  };\n\n  var closePopup = function () {\n    if (popupStack.length) {\n      popupStack[popupStack.length - 1]['close']();\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  var closePopups = function () {\n    while (popupStack.length) {\n      popupStack[popupStack.length - 1]['close']();\n    }\n  };\n\n  $.closePopup = closePopup;\n  $.closePopups = closePopups;\n  $.alert = createAlert;\n  $.confirm = createConfirm;\n  $.prompt = createPrompt;\n})(mui, window, document);\n\n(function ($, document) {\n  var CLASS_PROGRESSBAR = 'mui-progressbar';\n  var CLASS_PROGRESSBAR_IN = 'mui-progressbar-in';\n  var CLASS_PROGRESSBAR_OUT = 'mui-progressbar-out';\n  var CLASS_PROGRESSBAR_INFINITE = 'mui-progressbar-infinite';\n  var SELECTOR_PROGRESSBAR = '.mui-progressbar';\n\n  var _findProgressbar = function (container) {\n    container = $(container || 'body');\n    if (container.length === 0) return;\n    container = container[0];\n\n    if (container.classList.contains(CLASS_PROGRESSBAR)) {\n      return container;\n    }\n\n    var progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR);\n\n    if (progressbars) {\n      for (var i = 0, len = progressbars.length; i < len; i++) {\n        var progressbar = progressbars[i];\n\n        if (progressbar.parentNode === container) {\n          return progressbar;\n        }\n      }\n    }\n  };\n  /**\n   * 创建并显示进度条 \n   * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\n   * @param {Object} progress 可选，undefined表示循环，数字表示具体进度\n   * @param {Object} color 可选，指定颜色样式(目前暂未提供实际样式，可暂时不暴露此参数)\n   */\n\n\n  var showProgressbar = function (container, progress, color) {\n    if (typeof container === 'number') {\n      color = progress;\n      progress = container;\n      container = 'body';\n    }\n\n    container = $(container || 'body');\n    if (container.length === 0) return;\n    container = container[0];\n    var progressbar;\n\n    if (container.classList.contains(CLASS_PROGRESSBAR)) {\n      progressbar = container;\n    } else {\n      var progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR + ':not(.' + CLASS_PROGRESSBAR_OUT + ')');\n\n      if (progressbars) {\n        for (var i = 0, len = progressbars.length; i < len; i++) {\n          var _progressbar = progressbars[i];\n\n          if (_progressbar.parentNode === container) {\n            progressbar = _progressbar;\n            break;\n          }\n        }\n      }\n\n      if (!progressbar) {\n        progressbar = document.createElement('span');\n        progressbar.className = CLASS_PROGRESSBAR + ' ' + CLASS_PROGRESSBAR_IN + (typeof progress !== 'undefined' ? '' : ' ' + CLASS_PROGRESSBAR_INFINITE) + (color ? ' ' + CLASS_PROGRESSBAR + '-' + color : '');\n\n        if (typeof progress !== 'undefined') {\n          progressbar.innerHTML = '<span></span>';\n        }\n\n        container.appendChild(progressbar);\n      } else {\n        progressbar.classList.add(CLASS_PROGRESSBAR_IN);\n      }\n    }\n\n    if (progress) setProgressbar(container, progress);\n    return progressbar;\n  };\n  /**\n   * 关闭进度条 \n   * @param {Object} container 可选，默认body，支持selector,DOM Node,mui wrapper\n   */\n\n\n  var hideProgressbar = function (container) {\n    var progressbar = _findProgressbar(container);\n\n    if (!progressbar) {\n      return;\n    }\n\n    var classList = progressbar.classList;\n\n    if (!classList.contains(CLASS_PROGRESSBAR_IN) || classList.contains(CLASS_PROGRESSBAR_OUT)) {\n      return;\n    }\n\n    classList.remove(CLASS_PROGRESSBAR_IN);\n    classList.add(CLASS_PROGRESSBAR_OUT);\n    progressbar.addEventListener('webkitAnimationEnd', function () {\n      progressbar.parentNode && progressbar.parentNode.removeChild(progressbar);\n      progressbar = null;\n    });\n    return;\n  };\n  /**\n   * 设置指定进度条进度 \n   * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\n   * @param {Object} progress 可选，默认0 取值范围[0-100]\n   * @param {Object} speed 进度条动画时间\n   */\n\n\n  var setProgressbar = function (container, progress, speed) {\n    if (typeof container === 'number') {\n      speed = progress;\n      progress = container;\n      container = false;\n    }\n\n    var progressbar = _findProgressbar(container);\n\n    if (!progressbar || progressbar.classList.contains(CLASS_PROGRESSBAR_INFINITE)) {\n      return;\n    }\n\n    if (progress) progress = Math.min(Math.max(progress, 0), 100);\n    progressbar.offsetHeight;\n    var span = progressbar.querySelector('span');\n\n    if (span) {\n      var style = span.style;\n      style.webkitTransform = 'translate3d(' + (-100 + progress) + '%,0,0)';\n\n      if (typeof speed !== 'undefined') {\n        style.webkitTransitionDuration = speed + 'ms';\n      } else {\n        style.webkitTransitionDuration = '';\n      }\n    }\n\n    return progressbar;\n  };\n\n  $.fn.progressbar = function (options) {\n    var progressbarApis = [];\n    options = options || {};\n    this.each(function () {\n      var self = this;\n      var progressbarApi = self.mui_plugin_progressbar;\n\n      if (!progressbarApi) {\n        self.mui_plugin_progressbar = progressbarApi = {\n          options: options,\n          setOptions: function (options) {\n            this.options = options;\n          },\n          show: function () {\n            return showProgressbar(self, this.options.progress, this.options.color);\n          },\n          setProgress: function (progress) {\n            return setProgressbar(self, progress);\n          },\n          hide: function () {\n            return hideProgressbar(self);\n          }\n        };\n      } else if (options) {\n        progressbarApi.setOptions(options);\n      }\n\n      progressbarApis.push(progressbarApi);\n    });\n    return progressbarApis.length === 1 ? progressbarApis[0] : progressbarApis;\n  }; //\t$.setProgressbar = setProgressbar;\n  //\t$.showProgressbar = showProgressbar;\n  //\t$.hideProgressbar = hideProgressbar;\n\n})(mui, document);\n/**\n * Input(TODO resize)\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n\n\n(function ($, window, document) {\n  var CLASS_ICON = 'mui-icon';\n  var CLASS_ICON_CLEAR = 'mui-icon-clear';\n  var CLASS_ICON_SPEECH = 'mui-icon-speech';\n  var CLASS_ICON_SEARCH = 'mui-icon-search';\n  var CLASS_ICON_PASSWORD = 'mui-icon-eye';\n  var CLASS_INPUT_ROW = 'mui-input-row';\n  var CLASS_PLACEHOLDER = 'mui-placeholder';\n  var CLASS_TOOLTIP = 'mui-tooltip';\n  var CLASS_HIDDEN = 'mui-hidden';\n  var CLASS_FOCUSIN = 'mui-focusin';\n  var SELECTOR_ICON_CLOSE = '.' + CLASS_ICON_CLEAR;\n  var SELECTOR_ICON_SPEECH = '.' + CLASS_ICON_SPEECH;\n  var SELECTOR_ICON_PASSWORD = '.' + CLASS_ICON_PASSWORD;\n  var SELECTOR_PLACEHOLDER = '.' + CLASS_PLACEHOLDER;\n  var SELECTOR_TOOLTIP = '.' + CLASS_TOOLTIP;\n\n  var findRow = function (target) {\n    for (; target && target !== document; target = target.parentNode) {\n      if (target.classList && target.classList.contains(CLASS_INPUT_ROW)) {\n        return target;\n      }\n    }\n\n    return null;\n  };\n\n  var Input = function (element, options) {\n    this.element = element;\n    this.options = options || {\n      actions: 'clear'\n    };\n\n    if (~this.options.actions.indexOf('slider')) {\n      //slider\n      this.sliderActionClass = CLASS_TOOLTIP + ' ' + CLASS_HIDDEN;\n      this.sliderActionSelector = SELECTOR_TOOLTIP;\n    } else {\n      //clear,speech,search\n      if (~this.options.actions.indexOf('clear')) {\n        this.clearActionClass = CLASS_ICON + ' ' + CLASS_ICON_CLEAR + ' ' + CLASS_HIDDEN;\n        this.clearActionSelector = SELECTOR_ICON_CLOSE;\n      }\n\n      if (~this.options.actions.indexOf('speech')) {\n        //only for 5+\n        this.speechActionClass = CLASS_ICON + ' ' + CLASS_ICON_SPEECH;\n        this.speechActionSelector = SELECTOR_ICON_SPEECH;\n      }\n\n      if (~this.options.actions.indexOf('search')) {\n        this.searchActionClass = CLASS_PLACEHOLDER;\n        this.searchActionSelector = SELECTOR_PLACEHOLDER;\n      }\n\n      if (~this.options.actions.indexOf('password')) {\n        this.passwordActionClass = CLASS_ICON + ' ' + CLASS_ICON_PASSWORD;\n        this.passwordActionSelector = SELECTOR_ICON_PASSWORD;\n      }\n    }\n\n    this.init();\n  };\n\n  Input.prototype.init = function () {\n    this.initAction();\n    this.initElementEvent();\n  };\n\n  Input.prototype.initAction = function () {\n    var self = this;\n    var row = self.element.parentNode;\n\n    if (row) {\n      if (self.sliderActionClass) {\n        self.sliderAction = self.createAction(row, self.sliderActionClass, self.sliderActionSelector);\n      } else {\n        if (self.searchActionClass) {\n          self.searchAction = self.createAction(row, self.searchActionClass, self.searchActionSelector);\n          self.searchAction.addEventListener('tap', function (e) {\n            $.focus(self.element);\n            e.stopPropagation();\n          });\n        }\n\n        if (self.speechActionClass) {\n          self.speechAction = self.createAction(row, self.speechActionClass, self.speechActionSelector);\n          self.speechAction.addEventListener('click', $.stopPropagation);\n          self.speechAction.addEventListener('tap', function (event) {\n            self.speechActionClick(event);\n          });\n        }\n\n        if (self.clearActionClass) {\n          self.clearAction = self.createAction(row, self.clearActionClass, self.clearActionSelector);\n          self.clearAction.addEventListener('tap', function (event) {\n            self.clearActionClick(event);\n          });\n        }\n\n        if (self.passwordActionClass) {\n          self.passwordAction = self.createAction(row, self.passwordActionClass, self.passwordActionSelector);\n          self.passwordAction.addEventListener('tap', function (event) {\n            self.passwordActionClick(event);\n          });\n        }\n      }\n    }\n  };\n\n  Input.prototype.createAction = function (row, actionClass, actionSelector) {\n    var action = row.querySelector(actionSelector);\n\n    if (!action) {\n      var action = document.createElement('span');\n      action.className = actionClass;\n\n      if (actionClass === this.searchActionClass) {\n        action.innerHTML = '<span class=\"' + CLASS_ICON + ' ' + CLASS_ICON_SEARCH + '\"></span><span>' + this.element.getAttribute('placeholder') + '</span>';\n        this.element.setAttribute('placeholder', '');\n\n        if (this.element.value.trim()) {\n          row.classList.add('mui-active');\n        }\n      }\n\n      row.insertBefore(action, this.element.nextSibling);\n    }\n\n    return action;\n  };\n\n  Input.prototype.initElementEvent = function () {\n    var element = this.element;\n\n    if (this.sliderActionClass) {\n      var tooltip = this.sliderAction;\n      var timer = null;\n\n      var showTip = function () {\n        //每次重新计算是因为控件可能被隐藏，初始化时计算是不正确的\n        tooltip.classList.remove(CLASS_HIDDEN);\n        var offsetLeft = element.offsetLeft;\n        var width = element.offsetWidth - 28;\n        var tooltipWidth = tooltip.offsetWidth;\n        var distince = Math.abs(element.max - element.min);\n        var scaleWidth = width / distince * Math.abs(element.value - element.min);\n        tooltip.style.left = 14 + offsetLeft + scaleWidth - tooltipWidth / 2 + 'px';\n        tooltip.innerText = element.value;\n\n        if (timer) {\n          clearTimeout(timer);\n        }\n\n        timer = setTimeout(function () {\n          tooltip.classList.add(CLASS_HIDDEN);\n        }, 1000);\n      };\n\n      element.addEventListener('input', showTip);\n      element.addEventListener('tap', showTip);\n      element.addEventListener($.EVENT_MOVE, function (e) {\n        e.stopPropagation();\n      });\n    } else {\n      if (this.clearActionClass) {\n        var action = this.clearAction;\n\n        if (!action) {\n          return;\n        }\n\n        $.each(['keyup', 'change', 'input', 'focus', 'cut', 'paste'], function (index, type) {\n          (function (type) {\n            element.addEventListener(type, function () {\n              action.classList[element.value.trim() ? 'remove' : 'add'](CLASS_HIDDEN);\n            });\n          })(type);\n        });\n        element.addEventListener('blur', function () {\n          action.classList.add(CLASS_HIDDEN);\n        });\n      }\n\n      if (this.searchActionClass) {\n        element.addEventListener('focus', function () {\n          element.parentNode.classList.add('mui-active');\n        });\n        element.addEventListener('blur', function () {\n          if (!element.value.trim()) {\n            element.parentNode.classList.remove('mui-active');\n          }\n        });\n      }\n    }\n  };\n\n  Input.prototype.setPlaceholder = function (text) {\n    if (this.searchActionClass) {\n      var placeholder = this.element.parentNode.querySelector(SELECTOR_PLACEHOLDER);\n      placeholder && (placeholder.getElementsByTagName('span')[1].innerText = text);\n    } else {\n      this.element.setAttribute('placeholder', text);\n    }\n  };\n\n  Input.prototype.passwordActionClick = function (event) {\n    if (this.element.type === 'text') {\n      this.element.type = 'password';\n    } else {\n      this.element.type = 'text';\n    }\n\n    this.passwordAction.classList.toggle('mui-active');\n    event.preventDefault();\n  };\n\n  Input.prototype.clearActionClick = function (event) {\n    var self = this;\n    self.element.value = '';\n    $.focus(self.element);\n    self.clearAction.classList.add(CLASS_HIDDEN);\n    event.preventDefault();\n  };\n\n  Input.prototype.speechActionClick = function (event) {\n    if (window.plus) {\n      var self = this;\n      var oldValue = self.element.value;\n      self.element.value = '';\n      document.body.classList.add(CLASS_FOCUSIN);\n      plus.speech.startRecognize({\n        engine: 'iFly'\n      }, function (s) {\n        self.element.value += s;\n        $.focus(self.element);\n        plus.speech.stopRecognize();\n        $.trigger(self.element, 'recognized', {\n          value: self.element.value\n        });\n\n        if (oldValue !== self.element.value) {\n          $.trigger(self.element, 'change');\n          $.trigger(self.element, 'input');\n        } // document.body.classList.remove(CLASS_FOCUSIN);\n\n      }, function (e) {\n        document.body.classList.remove(CLASS_FOCUSIN);\n      });\n    } else {\n      alert('only for 5+');\n    }\n\n    event.preventDefault();\n  };\n\n  $.fn.input = function (options) {\n    var inputApis = [];\n    this.each(function () {\n      var inputApi = null;\n      var actions = [];\n      var row = findRow(this.parentNode);\n\n      if (this.type === 'range' && row.classList.contains('mui-input-range')) {\n        actions.push('slider');\n      } else {\n        var classList = this.classList;\n\n        if (classList.contains('mui-input-clear')) {\n          actions.push('clear');\n        }\n\n        if (!($.os.android && $.os.stream) && classList.contains('mui-input-speech')) {\n          actions.push('speech');\n        }\n\n        if (classList.contains('mui-input-password')) {\n          actions.push('password');\n        }\n\n        if (this.type === 'search' && row.classList.contains('mui-search')) {\n          actions.push('search');\n        }\n      }\n\n      var id = this.getAttribute('data-input-' + actions[0]);\n\n      if (!id) {\n        id = ++$.uuid;\n        inputApi = $.data[id] = new Input(this, {\n          actions: actions.join(',')\n        });\n\n        for (var i = 0, len = actions.length; i < len; i++) {\n          this.setAttribute('data-input-' + actions[i], id);\n        }\n      } else {\n        inputApi = $.data[id];\n      }\n\n      inputApis.push(inputApi);\n    });\n    return inputApis.length === 1 ? inputApis[0] : inputApis;\n  };\n\n  $.ready(function () {\n    $('.mui-input-row input').input();\n  });\n})(mui, window, document);\n\n(function ($, window) {\n  var CLASS_ACTIVE = 'mui-active';\n  var rgbaRegex = /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d*(?:\\.\\d+)?)\\)$/;\n\n  var getColor = function (colorStr) {\n    var matches = colorStr.match(rgbaRegex);\n\n    if (matches && matches.length === 5) {\n      return [matches[1], matches[2], matches[3], matches[4]];\n    }\n\n    return [];\n  };\n\n  var Transparent = function (element, options) {\n    this.element = element;\n    this.options = $.extend({\n      top: 0,\n      //距离顶部高度(到达该高度即触发)\n      offset: 150,\n      //滚动透明距离\n      duration: 16,\n      //过渡时间\n      scrollby: window //监听滚动距离容器\n\n    }, options || {});\n    this.scrollByElem = this.options.scrollby || window;\n\n    if (!this.scrollByElem) {\n      throw new Error(\"监听滚动的元素不存在\");\n    }\n\n    this.isNativeScroll = false;\n\n    if (this.scrollByElem === window) {\n      this.isNativeScroll = true;\n    } else if (!~this.scrollByElem.className.indexOf('mui-scroll-wrapper')) {\n      this.isNativeScroll = true;\n    }\n\n    this._style = this.element.style;\n    this._bgColor = this._style.backgroundColor;\n    var color = getColor(mui.getStyles(this.element, 'backgroundColor'));\n\n    if (color.length) {\n      this._R = color[0];\n      this._G = color[1];\n      this._B = color[2];\n      this._A = parseFloat(color[3]);\n      this.lastOpacity = this._A;\n      this._bufferFn = $.buffer(this.handleScroll, this.options.duration, this);\n      this.initEvent();\n    } else {\n      throw new Error(\"元素背景颜色必须为RGBA\");\n    }\n  };\n\n  Transparent.prototype.initEvent = function () {\n    this.scrollByElem.addEventListener('scroll', this._bufferFn);\n\n    if (this.isNativeScroll) {\n      //原生scroll\n      this.scrollByElem.addEventListener($.EVENT_MOVE, this._bufferFn);\n    }\n  };\n\n  Transparent.prototype.handleScroll = function (e) {\n    var y = window.scrollY;\n\n    if (!this.isNativeScroll && e && e.detail) {\n      y = -e.detail.y;\n    }\n\n    var opacity = (y - this.options.top) / this.options.offset + this._A;\n    opacity = Math.min(Math.max(this._A, opacity), 1);\n    this._style.backgroundColor = 'rgba(' + this._R + ',' + this._G + ',' + this._B + ',' + opacity + ')';\n\n    if (opacity > this._A) {\n      this.element.classList.add(CLASS_ACTIVE);\n    } else {\n      this.element.classList.remove(CLASS_ACTIVE);\n    }\n\n    if (this.lastOpacity !== opacity) {\n      $.trigger(this.element, 'alpha', {\n        alpha: opacity\n      });\n      this.lastOpacity = opacity;\n    }\n  };\n\n  Transparent.prototype.destory = function () {\n    this.scrollByElem.removeEventListener('scroll', this._bufferFn);\n    this.scrollByElem.removeEventListener($.EVENT_MOVE, this._bufferFn);\n    this.element.style.backgroundColor = this._bgColor;\n    this.element.mui_plugin_transparent = null;\n  };\n\n  $.fn.transparent = function (options) {\n    options = options || {};\n    var transparentApis = [];\n    this.each(function () {\n      var transparentApi = this.mui_plugin_transparent;\n\n      if (!transparentApi) {\n        var top = this.getAttribute('data-top');\n        var offset = this.getAttribute('data-offset');\n        var duration = this.getAttribute('data-duration');\n        var scrollby = this.getAttribute('data-scrollby');\n\n        if (top !== null && typeof options.top === 'undefined') {\n          options.top = top;\n        }\n\n        if (offset !== null && typeof options.offset === 'undefined') {\n          options.offset = offset;\n        }\n\n        if (duration !== null && typeof options.duration === 'undefined') {\n          options.duration = duration;\n        }\n\n        if (scrollby !== null && typeof options.scrollby === 'undefined') {\n          options.scrollby = document.querySelector(scrollby) || window;\n        }\n\n        transparentApi = this.mui_plugin_transparent = new Transparent(this, options);\n      }\n\n      transparentApis.push(transparentApi);\n    });\n    return transparentApis.length === 1 ? transparentApis[0] : transparentApis;\n  };\n\n  $.ready(function () {\n    $('.mui-bar-transparent').transparent();\n  });\n})(mui, window);\n/**\n * 数字输入框\n * varstion 1.0.1\n * by Houfeng\n * Houfeng@DCloud.io\n */\n\n\n(function ($) {\n  var touchSupport = ('ontouchstart' in document);\n  var tapEventName = touchSupport ? 'tap' : 'click';\n  var changeEventName = 'change';\n  var holderClassName = 'mui-numbox';\n  var plusClassSelector = '.mui-btn-numbox-plus,.mui-numbox-btn-plus';\n  var minusClassSelector = '.mui-btn-numbox-minus,.mui-numbox-btn-minus';\n  var inputClassSelector = '.mui-input-numbox,.mui-numbox-input';\n  var Numbox = $.Numbox = $.Class.extend({\n    /**\n     * 构造函数\n     **/\n    init: function (holder, options) {\n      var self = this;\n\n      if (!holder) {\n        throw \"构造 numbox 时缺少容器元素\";\n      }\n\n      self.holder = holder;\n      options = options || {};\n      options.step = parseInt(options.step || 1);\n      self.options = options;\n      self.input = $.qsa(inputClassSelector, self.holder)[0];\n      self.plus = $.qsa(plusClassSelector, self.holder)[0];\n      self.minus = $.qsa(minusClassSelector, self.holder)[0];\n      self.checkValue();\n      self.initEvent();\n    },\n\n    /**\n     * 初始化事件绑定\n     **/\n    initEvent: function () {\n      var self = this;\n      self.plus.addEventListener(tapEventName, function (event) {\n        var val = parseInt(self.input.value) + self.options.step;\n        self.input.value = val.toString();\n        $.trigger(self.input, changeEventName, null);\n      });\n      self.minus.addEventListener(tapEventName, function (event) {\n        var val = parseInt(self.input.value) - self.options.step;\n        self.input.value = val.toString();\n        $.trigger(self.input, changeEventName, null);\n      });\n      self.input.addEventListener(changeEventName, function (event) {\n        self.checkValue();\n        var val = parseInt(self.input.value); //触发顶层容器\n\n        $.trigger(self.holder, changeEventName, {\n          value: val\n        });\n      });\n    },\n\n    /**\n     * 获取当前值\n     **/\n    getValue: function () {\n      var self = this;\n      return parseInt(self.input.value);\n    },\n\n    /**\n     * 验证当前值是法合法\n     **/\n    checkValue: function () {\n      var self = this;\n      var val = self.input.value;\n\n      if (val == null || val == '' || isNaN(val)) {\n        self.input.value = self.options.min || 0;\n        self.minus.disabled = self.options.min != null;\n      } else {\n        var val = parseInt(val);\n\n        if (self.options.max != null && !isNaN(self.options.max) && val >= parseInt(self.options.max)) {\n          val = self.options.max;\n          self.plus.disabled = true;\n        } else {\n          self.plus.disabled = false;\n        }\n\n        if (self.options.min != null && !isNaN(self.options.min) && val <= parseInt(self.options.min)) {\n          val = self.options.min;\n          self.minus.disabled = true;\n        } else {\n          self.minus.disabled = false;\n        }\n\n        self.input.value = val;\n      }\n    },\n\n    /**\n     * 更新选项\n     **/\n    setOption: function (name, value) {\n      var self = this;\n      self.options[name] = value;\n    },\n\n    /**\n     * 动态设置新值\n     **/\n    setValue: function (value) {\n      this.input.value = value;\n      this.checkValue();\n    }\n  });\n\n  $.fn.numbox = function (options) {\n    var instanceArray = []; //遍历选择的元素\n\n    this.each(function (i, element) {\n      if (element.numbox) {\n        return;\n      }\n\n      if (options) {\n        element.numbox = new Numbox(element, options);\n      } else {\n        var optionsText = element.getAttribute('data-numbox-options');\n        var options = optionsText ? JSON.parse(optionsText) : {};\n        options.step = element.getAttribute('data-numbox-step') || options.step;\n        options.min = element.getAttribute('data-numbox-min') || options.min;\n        options.max = element.getAttribute('data-numbox-max') || options.max;\n        element.numbox = new Numbox(element, options);\n      }\n    });\n    return this[0] ? this[0].numbox : null;\n  }; //自动处理 class='mui-locker' 的 dom\n\n\n  $.ready(function () {\n    $('.' + holderClassName).numbox();\n  });\n})(mui);\n/**\n * Button\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n\n\n(function ($, window, document) {\n  var CLASS_ICON = 'mui-icon';\n  var CLASS_DISABLED = 'mui-disabled';\n  var STATE_RESET = 'reset';\n  var STATE_LOADING = 'loading';\n  var defaultOptions = {\n    loadingText: 'Loading...',\n    //文案\n    loadingIcon: 'mui-spinner' + ' ' + 'mui-spinner-white',\n    //图标，可为空\n    loadingIconPosition: 'left' //图标所处位置，仅支持left|right\n\n  };\n\n  var Button = function (element, options) {\n    this.element = element;\n    this.options = $.extend({}, defaultOptions, options);\n\n    if (!this.options.loadingText) {\n      this.options.loadingText = defaultOptions.loadingText;\n    }\n\n    if (this.options.loadingIcon === null) {\n      this.options.loadingIcon = 'mui-spinner';\n\n      if ($.getStyles(this.element, 'color') === 'rgb(255, 255, 255)') {\n        this.options.loadingIcon += ' ' + 'mui-spinner-white';\n      }\n    }\n\n    this.isInput = this.element.tagName === 'INPUT';\n    this.resetHTML = this.isInput ? this.element.value : this.element.innerHTML;\n    this.state = '';\n  };\n\n  Button.prototype.loading = function () {\n    this.setState(STATE_LOADING);\n  };\n\n  Button.prototype.reset = function () {\n    this.setState(STATE_RESET);\n  };\n\n  Button.prototype.setState = function (state) {\n    if (this.state === state) {\n      return false;\n    }\n\n    this.state = state;\n\n    if (state === STATE_RESET) {\n      this.element.disabled = false;\n      this.element.classList.remove(CLASS_DISABLED);\n      this.setHtml(this.resetHTML);\n    } else if (state === STATE_LOADING) {\n      this.element.disabled = true;\n      this.element.classList.add(CLASS_DISABLED);\n      var html = this.isInput ? this.options.loadingText : '<span>' + this.options.loadingText + '</span>';\n\n      if (this.options.loadingIcon && !this.isInput) {\n        if (this.options.loadingIconPosition === 'right') {\n          html += '&nbsp;<span class=\"' + this.options.loadingIcon + '\"></span>';\n        } else {\n          html = '<span class=\"' + this.options.loadingIcon + '\"></span>&nbsp;' + html;\n        }\n      }\n\n      this.setHtml(html);\n    }\n  };\n\n  Button.prototype.setHtml = function (html) {\n    if (this.isInput) {\n      this.element.value = html;\n    } else {\n      this.element.innerHTML = html;\n    }\n  };\n\n  $.fn.button = function (state) {\n    var buttonApis = [];\n    this.each(function () {\n      var buttonApi = this.mui_plugin_button;\n\n      if (!buttonApi) {\n        var loadingText = this.getAttribute('data-loading-text');\n        var loadingIcon = this.getAttribute('data-loading-icon');\n        var loadingIconPosition = this.getAttribute('data-loading-icon-position');\n        this.mui_plugin_button = buttonApi = new Button(this, {\n          loadingText: loadingText,\n          loadingIcon: loadingIcon,\n          loadingIconPosition: loadingIconPosition\n        });\n      }\n\n      if (state === STATE_LOADING || state === STATE_RESET) {\n        buttonApi.setState(state);\n      }\n\n      buttonApis.push(buttonApi);\n    });\n    return buttonApis.length === 1 ? buttonApis[0] : buttonApis;\n  };\n})(mui, window, document);","map":{"version":3,"names":["mui","document","undefined","readyRE","idSelectorRE","classSelectorRE","tagSelectorRE","translateRE","translateMatrixRE","$","selector","context","wrap","isArrayLike","slice","call","ready","trim","test","found","getElementById","RegExp","$1","qsa","e","dom","Object","setPrototypeOf","fn","uuid","data","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","isFunction","isPlainObject","isArray","noop","filter","type","obj","String","class2type","toString","Array","object","isWindow","window","isObject","getPrototypeOf","prototype","isEmptyObject","o","p","value","getElementsByClassName","getElementsByTagName","querySelectorAll","callback","readyState","addEventListener","buffer","ms","timer","lastStart","lastEnd","run","cancel","now","apply","later","stop","each","elements","hasOwnProperty","every","el","idx","key","focus","element","os","ios","setTimeout","trigger","eventType","eventData","dispatchEvent","CustomEvent","detail","bubbles","cancelable","getStyles","property","styles","ownerDocument","defaultView","getComputedStyle","getPropertyValue","parseTranslate","translateString","position","result","match","split","x","parseFloat","y","z","parseTranslateMatrix","matrix","is3D","push","hooks","addAction","hook","index","sort","a","b","doAction","handle","when","m","d","f","r","id","clearTimeout","Date","toLowerCase","JSON","parseJSON","parse","define","amd","module","exports","install","Vue","$mui","detect","ua","funcs","wechat","version","replace","android","isBadAndroid","navigator","appVersion","iphone","ipad","func","userAgent","plus","body","classList","add","stream","isTouchable","EVENT_START","EVENT_MOVE","EVENT_END","EVENT_CANCEL","EVENT_CLICK","_mid","delegates","eventMethods","preventDefault","stopImmediatePropagation","stopPropagation","returnTrue","returnFalse","compatible","event","currentTarget","predicate","sourceMethod","mid","delegateFns","delegateFn","callbackObjs","handlerQueue","selectorAlls","parentNode","indexOf","disabled","contains","matches","callbacks","handlers","handler","tagName","gesture","isPropagationStopped","findDelegateFn","delegateCallbacks","filterFn","preventDefaultException","on","isAddEventListener","delegateEvents","delegateCallbackObjs","delegateFnArray","delegateCallback","href","off","splice","forEach","removeEventListener","bind","targets","targetHandles","registerTarget","founds","isFound","targetHandle","isContinue","isReset","proto","params","evt","createEvent","initEvent","Event","Function","to","partial","bound","args","concat","documentElement","defineProperty","HTMLElement","get","self","update","classes","className","join","ret","remove","toggle","item","requestAnimationFrame","lastTime","webkitRequestAnimationFrame","currTime","getTime","timeToCall","Math","max","cancelAnimationFrame","webkitCancelAnimationFrame","webkitCancelRequestAnimationFrame","FastClick","querySelector","targetElement","click","clickEvent","touch","activeElement","blur","changedTouches","initMouseEvent","screenX","screenY","clientX","clientY","forwardedTouchEvent","propagationStopped","CLASS_FOCUSIN","CLASS_BAR_TAB","CLASS_BAR_FOOTER","CLASS_BAR_FOOTER_SECONDARY","CLASS_BAR_FOOTER_SECONDARY_TAB","webview","currentWebview","children","readOnly","isFooter","scrollTop","scrollHeight","scrollLeft","scrollTo","namespace","classNamePrefix","classSelectorPrefix","classSelector","eventName","gestures","session","addGesture","round","abs","sqrt","atan","atan2","getDistance","p1","p2","props","getScale","starts","moves","getAngle","PI","getDirection","getRotation","start","end","getVelocity","deltaTime","stoped","gestureConfig","hasParent","node","parent","uniqueArray","results","values","val","sortUniqueArray","getMultiCenter","touches","touchesLength","pageX","pageY","multiTouch","pinch","copySimpleTouchData","timestamp","center","deltaX","deltaY","calDelta","offset","offsetDelta","prevDelta","prevTouch","calTouchData","firstTouch","firstMultiTouch","offsetCenter","angle","distance","offsetDirection","scale","rotation","calIntervalTouchData","CAL_INTERVAL","last","lastInterval","velocity","velocityX","velocityY","direction","v","targetIds","convertTouches","getTouches","allTouches","targetTouches","changedTargetTouches","identifier","sessionTarget","changedTouchesLength","isFirst","isFinal","handleTouchEvent","popover","tab","offcanvas","modal","isScrolling","scrollingTimeout","flickStartTime","flickStart","flick","flickMaxTime","flickMinDistince","flickTime","flickDistanceX","flickDistanceY","swipe","swipeMaxTime","swipeMinDistince","lockDirection","startDirection","drag","fingers","lastTarget","lastTapTime","tapMaxDistance","tapMaxTime","doubletap","tapMaxInterval","holdTimeout","holdThreshold","hold","lastScale","scaleDiff","minRotationAngle","global","tap","longtap","initGlobal","inits","init","isInit","repeat","addInit","subpages","createIframe","wrapper","createElement","top","bottom","style","iframe","url","appendChild","handleScroll","location","localStorage","getItem","onload","setInterval","_scrollTop","scrollY","setItem","osObj","classArray","defaultOptions","swipeBack","preloadPages","preloadLimit","keyEventBind","backbutton","menubutton","titleConfig","height","backgroundColor","bottomBorderColor","title","text","left","width","color","align","family","size","weight","fontSrc","back","image","base64Data","imgSrc","sprite","defaultShow","autoShow","duration","aniShow","extras","show","waitingOptions","showOptions","windowOptions","scalable","bounce","plusReady","fire","evalJS","stringify","receive","triggerPreload","preloaded","list","timeChecked","openWindow","webviewCache","nShow","nWaiting","webviews","getWebviewById","createNew","afterShowMethodName","Error","waitingConfig","waiting","nativeUI","showWaiting","createWindow","showWebview","close","openWindowWithTitle","tid","view","nativeObj","View","dock","drawRect","_b","parseInt","_title","drawText","_back","backClick","_backImage","right","bitmap","Bitmap","loadBase64Data","load","drawBitmap","setTouchEventRect","interceptTouchEvent","append","isCreate","preload","getURL","create","subpage","subpageId","subWebview","preloads","first","shift","closeAll","closeOpened","opened","len","openedWebview","open_open","createWindows","option","appendWebview","runtime","appid","statusBarBackground","setStatusBarBackground","display","supportStatusbarOffset","addBack","history","beforeback","action","_popover","offCanvas","previewImage","getPreviewImage","isShown","closePopup","__back__first","wobj","canBack","toast","quit","hide","menu","__back","__menu","pullRefreshOptions","pullRefresh","hasPulldown","down","hasPullup","up","container","$container","pullRefresh_native","__NWin_Enable__","upOptions","webviewId","downOptions","jsonType","htmlType","rscript","scriptTypeRE","xmlTypeRE","blankRE","ajaxSettings","beforeSend","success","error","complete","xhr","protocol","XMLHttpRequest","accepts","script","json","xml","html","timeout","processData","cache","ajaxBeforeSend","settings","ajaxSuccess","ajaxComplete","ajaxError","status","serialize","traditional","scope","array","hash","serializeData","contentType","headers","param","toUpperCase","appendQuery","query","mimeToDataType","mime","parseArguments","dataType","ajax","setHeader","nativeSetHeader","setRequestHeader","abortTimeout","mimeType","overrideMimeType","onreadystatechange","isLocal","responseText","getResponseHeader","eval","responseXML","statusText","abort","xhrFields","async","open","username","password","send","k","encodeURIComponent","post","getJSON","parts","response","div","innerHTML","selectorDiv","childs","originAnchor","crossDomain","net","urlAnchor","host","webkit","messageHandlers","box","getBoundingClientRect","pageYOffset","clientTop","pageXOffset","clientLeft","scroll","distaince","animationFrame","cb","isQueued","initializing","fnTest","xyz","Class","Fn","prop","_super","tmp","constructor","CLASS_PULL_TOP_POCKET","CLASS_PULL_BOTTOM_POCKET","CLASS_PULL","CLASS_PULL_LOADING","CLASS_PULL_CAPTION","CLASS_PULL_CAPTION_DOWN","CLASS_PULL_CAPTION_REFRESH","CLASS_PULL_CAPTION_NOMORE","CLASS_ICON","CLASS_SPINNER","CLASS_ICON_PULLDOWN","CLASS_BLOCK","CLASS_HIDDEN","CLASS_VISIBILITY","CLASS_LOADING_UP","CLASS_LOADING_DOWN","CLASS_LOADING","pocketHtml","PullRefresh","scrollX","indicators","deceleration","contentinit","contentdown","contentover","contentrefresh","auto","contentnomore","_init","_initPocket","_initPulldownRefresh","pulldown","topPocket","pullPocket","pullCaption","topCaption","pullLoading","topLoading","_initPullupRefresh","bottomPocket","bottomCaption","bottomLoading","scroller","_createPocket","insertBefore","firstChild","clazz","iconClass","pocket","_resetPullDownLoading","loading","webkitTransition","webkitTransform","webkitAnimation","_setCaptionClass","isPulldown","caption","_setCaption","reset","lastTitle","CLASS_SCROLL","CLASS_SCROLLBAR","CLASS_INDICATOR","CLASS_SCROLLBAR_VERTICAL","CLASS_SCROLLBAR_HORIZONTAL","CLASS_ACTIVE","ease","quadratic","circular","outCirc","outCubic","Scroll","scrollerStyle","stopped","startX","startY","hardwareAccelerated","fixedBadAndorid","momentum","snapX","snap","bounceTime","bounceEasing","scrollTime","scrollEasing","directionLockThreshold","parallaxElement","parallaxRatio","translateZ","refresh","_initParallax","_initIndicators","_initEvent","parallaxStyle","parallaxHeight","offsetHeight","parallaxImgStyle","indicator","_createScrollBar","listenX","listenY","Indicator","_initSnap","currentPage","pages","snaps","n","leftX","rightX","offsetLeft","offsetWidth","_getSnapX","maxScrollX","min","wrapperWidth","_gotoPage","_nearestSnap","nearestX","detach","segmentedControl","_handleIndicatorScrollend","map","fade","_handleIndicatorScrollstart","_handleIndicatorRefresh","handleEvent","resetPosition","_start","_drag","_flick","_end","transitionTimer","_transitionEnd","_scrollend","_resize","moved","needReset","_transitionTime","isInTransition","pos","setTranslate","reLayout","_getDirectionByAngle","innerHeight","isPreventDefault","isReturn","absDeltaX","absDeltaY","hasHorizontalScroll","hasVerticalScroll","newX","newY","maxScrollY","_updateTranslate","_clearRequestAnimationFrame","time","easing","momentumX","_momentum","destination","momentumY","wrapperHeight","that","resizeTimeout","resizePolling","transitionTime","_transitionTimingFunction","transitionTimingFunction","_translate","lastX","lastY","scrollbar","scrollbarY","scrollbarIndicatorY","scrollbarX","scrollbarIndicatorX","_preventDefaultException","exceptions","_reLayout","scrollerWidth","scrollerHeight","items","itemLength","current","lowerMargin","wrapperSize","speed","_getTranslateStr","setStopped","parallaxY","updatePosition","paddingLeft","paddingRight","paddingTop","paddingBottom","clientWidth","clientHeight","_reInit","groups","scrollToBottom","gotoPage","destroy","getAttribute","setAttribute","wrapperStyle","indicatorStyle","speedRatioX","speedRatioY","sizeRatioX","sizeRatioY","maxPosX","maxPosY","opacity","indicatorWidth","minBoundaryX","maxBoundaryX","indicatorHeight","minBoundaryY","maxBoundaryY","visible","fadeTimeout","delay","scrollApis","scrollApi","_options","_scrollbottom","pullupLoading","pulldownLoading","endPulldownToRefresh","endPullupToRefresh","finished","disablePullupToRefresh","enablePullupToRefresh","pullRefreshApi","autoY","CLASS_SLIDER","CLASS_SLIDER_GROUP","CLASS_SLIDER_LOOP","CLASS_SLIDER_INDICATOR","CLASS_ACTION_PREVIOUS","CLASS_ACTION_NEXT","CLASS_SLIDER_ITEM","SELECTOR_SLIDER_ITEM","SELECTOR_SLIDER_INDICATOR","SELECTOR_SLIDER_PROGRESS_BAR","Slider","interval","slideTime","progressBar","progressBarWidth","progressBarStyle","_initTimer","_triggerSlide","page","slideNumber","_fixedSlideNumber","loop","lastSlideNumber","lastPage","_handleSlide","temps","_slideNumber","indicatorWrap","number","innerText","controlItems","_handleTabShow","gotoItem","tabNumber","_handleIndicatorTap","slidershowTimer","slider","nextItem","_getScroll","_getPage","isFlick","_gotoItem","prevItem","getSlideNumber","sliderElement","CLASS_PLUS_PULLREFRESH","PlusPullRefresh","_initPulldownRefreshEvent","scrollInterval","isScroll","setPullToRefresh","support","range","attrWebviewId","removeAttribute","setBounce","changeoffset","setStyle","beginPulldown","beginPullToRefresh","_pulldownLoading","childWebview","endPulldown","_wv","endPullToRefresh","_endPulldownToRefresh","beginPullup","isLoading","endPullup","CLASS_OFF_CANVAS_LEFT","CLASS_OFF_CANVAS_RIGHT","CLASS_ACTION_BACKDROP","CLASS_OFF_CANVAS_WRAP","CLASS_SLIDE_IN","CLASS_TRANSITIONING","SELECTOR_INNER_WRAP","OffCanvas","dragThresholdX","slideIn","offCanvasLefts","offCanvasRights","offCanvasLeft","offCanvasRight","offCanvasRightWidth","offCanvasLeftWidth","offCanvasLeftSlideIn","offCanvasRightSlideIn","backdrop","offsetX","lastTranslateX","_dispatchEvent","isDragging","offCanvasWidth","getTranslateX","_initOffCanvasVisible","updateTranslate","ratio","openPercentage","visibility","percentage","setTranslateX","leftShowing","rightShowing","zIndex","percent","zoomOutScale","zoomInScale","zoomOutOpacity","zoomInOpacity","webkitTransformOrigin","shown","directionOrOffCanvas","findOffCanvasContainer","_container","offCanvasApis","offCanvasApi","CLASS_ACTION","CLASS_MODAL","CLASS_POPOVER","CLASS_POPOVER_ARROW","CLASS_ACTION_POPOVER","CLASS_BACKDROP","CLASS_BAR_POPOVER","CLASS_BAR_BACKDROP","CLASS_BOTTOM","onPopoverShown","onPopoverHidden","removeBackdrop","removeBackdropTimer","removeChild","togglePopover","anchor","state","isActionSheet","calPosition","wWidth","innerWidth","wHeight","pWidth","pHeight","aWidth","aHeight","arrow","arrowSize","pTop","pLeft","diff","arrowLeft","defaultPadding","createMask","mask","_show","_remove","CLASS_CONTROL_ITEM","CLASS_SEGMENTED_CONTROL","CLASS_SEGMENTED_CONTROL_VERTICAL","CLASS_CONTROL_CONTENT","CLASS_TAB_BAR","CLASS_TAB_ITEM","targetTab","activeTab","activeBodies","targetBody","isLastActive","activeBody","contents","_contents","CLASS_SWITCH","CLASS_SWITCH_HANDLE","CLASS_DRAGGING","CLASS_DISABLED","SELECTOR_SWITCH_HANDLE","Toggle","toggleWidth","handleWidth","handleX","swiperight","webkitTransitionDuration","lastChanged","initialState","isActive","animate","isChanged","switchApis","switchApi","CLASS_SELECTED","CLASS_GRID_VIEW","CLASS_RADIO_VIEW","CLASS_TABLE_VIEW_CELL","CLASS_COLLAPSE_CONTENT","CLASS_TOGGLE","CLASS_BTN","CLASS_SLIDER_HANDLE","CLASS_SLIDER_LEFT","CLASS_SLIDER_RIGHT","SELECTOR_SLIDER_HANDLE","SELECTOR_SLIDER_LEFT","SELECTOR_SLIDER_RIGHT","SELECTOR_SELECTED","SELECTOR_BUTTON","overFactor","cell","isMoved","isOpened","openedActions","progress","sliderHandle","sliderActionLeft","sliderActionRight","buttonsLeft","buttonsRight","sliderDirection","sliderRequestAnimationFrame","translateX","sliderActionLeftWidth","sliderActionRightWidth","toggleActive","pow","buttonRight","_buttonOffset","buttonOffset","buttonLeft","isDisabled","selected","swipeoutClose","link","toggleEvents","dragend","swipeleft","translate","actionsWidth","isToggle","buttons","newTranslate","button","isRemove","method","swipeoutOpen","swipeoutAction","swipeoutWidth","radioOrCheckboxClick","input","checked","isExpand","ul","collapse","alert","message","btnValue","confirm","btnArray","prompt","defaultText","durations","verticalAlign","isVisible","CLASS_POPUP","CLASS_POPUP_BACKDROP","CLASS_POPUP_IN","CLASS_POPUP_OUT","CLASS_POPUP_INNER","CLASS_POPUP_TITLE","CLASS_POPUP_TEXT","CLASS_POPUP_INPUT","CLASS_POPUP_BUTTONS","CLASS_POPUP_BUTTON","CLASS_POPUP_BUTTON_BOLD","popupStack","createInput","placeholder","createInner","extra","createButtons","btns","createPopup","popupElement","removePopupElement","popup","pop","createAlert","createConfirm","createPrompt","closePopups","CLASS_PROGRESSBAR","CLASS_PROGRESSBAR_IN","CLASS_PROGRESSBAR_OUT","CLASS_PROGRESSBAR_INFINITE","SELECTOR_PROGRESSBAR","_findProgressbar","progressbars","progressbar","showProgressbar","_progressbar","setProgressbar","hideProgressbar","span","progressbarApis","progressbarApi","mui_plugin_progressbar","setOptions","setProgress","CLASS_ICON_CLEAR","CLASS_ICON_SPEECH","CLASS_ICON_SEARCH","CLASS_ICON_PASSWORD","CLASS_INPUT_ROW","CLASS_PLACEHOLDER","CLASS_TOOLTIP","SELECTOR_ICON_CLOSE","SELECTOR_ICON_SPEECH","SELECTOR_ICON_PASSWORD","SELECTOR_PLACEHOLDER","SELECTOR_TOOLTIP","findRow","Input","actions","sliderActionClass","sliderActionSelector","clearActionClass","clearActionSelector","speechActionClass","speechActionSelector","searchActionClass","searchActionSelector","passwordActionClass","passwordActionSelector","initAction","initElementEvent","row","sliderAction","createAction","searchAction","speechAction","speechActionClick","clearAction","clearActionClick","passwordAction","passwordActionClick","actionClass","actionSelector","nextSibling","tooltip","showTip","tooltipWidth","distince","scaleWidth","setPlaceholder","oldValue","speech","startRecognize","engine","s","stopRecognize","inputApis","inputApi","rgbaRegex","getColor","colorStr","Transparent","scrollby","scrollByElem","isNativeScroll","_style","_bgColor","_R","_G","_B","_A","lastOpacity","_bufferFn","alpha","destory","mui_plugin_transparent","transparent","transparentApis","transparentApi","touchSupport","tapEventName","changeEventName","holderClassName","plusClassSelector","minusClassSelector","inputClassSelector","Numbox","holder","step","minus","checkValue","getValue","isNaN","setOption","setValue","numbox","instanceArray","optionsText","STATE_RESET","STATE_LOADING","loadingText","loadingIcon","loadingIconPosition","Button","isInput","resetHTML","setState","setHtml","buttonApis","buttonApi","mui_plugin_button"],"sources":["C:/Users/章和平/Documents/DOP/eqmonntion/src/lib/mui/js/mui.js"],"sourcesContent":["/*!\n * =====================================================\n * Mui v3.7.0 (http://dev.dcloud.net.cn/mui)\n * =====================================================\n */\n/**\n * MUI核心JS\n * @type _L4.$|Function\n */\nvar mui = (function(document, undefined) {\n\tvar readyRE = /complete|loaded|interactive/;\n\tvar idSelectorRE = /^#([\\w-]+)$/;\n\tvar classSelectorRE = /^\\.([\\w-]+)$/;\n\tvar tagSelectorRE = /^[\\w-]+$/;\n\tvar translateRE = /translate(?:3d)?\\((.+?)\\)/;\n\tvar translateMatrixRE = /matrix(3d)?\\((.+?)\\)/;\n\n\tvar $ = function(selector, context) {\n\t\tcontext = context || document;\n\t\tif(!selector)\n\t\t\treturn wrap();\n\t\tif(typeof selector === 'object')\n\t\t\tif($.isArrayLike(selector)) {\n\t\t\t\treturn wrap($.slice.call(selector), null);\n\t\t\t} else {\n\t\t\t\treturn wrap([selector], null);\n\t\t\t}\n\t\tif(typeof selector === 'function')\n\t\t\treturn $.ready(selector);\n\t\tif(typeof selector === 'string') {\n\t\t\ttry {\n\t\t\t\tselector = selector.trim();\n\t\t\t\tif(idSelectorRE.test(selector)) {\n\t\t\t\t\tvar found = document.getElementById(RegExp.$1);\n\t\t\t\t\treturn wrap(found ? [found] : []);\n\t\t\t\t}\n\t\t\t\treturn wrap($.qsa(selector, context), selector);\n\t\t\t} catch(e) {}\n\t\t}\n\t\treturn wrap();\n\t};\n\n\tvar wrap = function(dom, selector) {\n\t\tdom = dom || [];\n\t\tObject.setPrototypeOf(dom, $.fn);\n\t\tdom.selector = selector || '';\n\t\treturn dom;\n\t};\n\n\t$.uuid = 0;\n\n\t$.data = {};\n\t/**\n\t * extend(simple)\n\t * @param {type} target\n\t * @param {type} source\n\t * @param {type} deep\n\t * @returns {unresolved}\n\t */\n\t$.extend = function() { //from jquery2\n\t\tvar options, name, src, copy, copyIsArray, clone,\n\t\t\ttarget = arguments[0] || {},\n\t\t\ti = 1,\n\t\t\tlength = arguments.length,\n\t\t\tdeep = false;\n\n\t\tif(typeof target === \"boolean\") {\n\t\t\tdeep = target;\n\n\t\t\ttarget = arguments[i] || {};\n\t\t\ti++;\n\t\t}\n\n\t\tif(typeof target !== \"object\" && !$.isFunction(target)) {\n\t\t\ttarget = {};\n\t\t}\n\n\t\tif(i === length) {\n\t\t\ttarget = this;\n\t\t\ti--;\n\t\t}\n\n\t\tfor(; i < length; i++) {\n\t\t\tif((options = arguments[i]) != null) {\n\t\t\t\tfor(name in options) {\n\t\t\t\t\tsrc = target[name];\n\t\t\t\t\tcopy = options[name];\n\n\t\t\t\t\tif(target === copy) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(deep && copy && ($.isPlainObject(copy) || (copyIsArray = $.isArray(copy)))) {\n\t\t\t\t\t\tif(copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && $.isArray(src) ? src : [];\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && $.isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget[name] = $.extend(deep, clone, copy);\n\n\t\t\t\t\t} else if(copy !== undefined) {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn target;\n\t};\n\t/**\n\t * mui noop(function)\n\t */\n\t$.noop = function() {};\n\t/**\n\t * mui slice(array)\n\t */\n\t$.slice = [].slice;\n\t/**\n\t * mui filter(array)\n\t */\n\t$.filter = [].filter;\n\n\t$.type = function(obj) {\n\t\treturn obj == null ? String(obj) : class2type[{}.toString.call(obj)] || \"object\";\n\t};\n\t/**\n\t * mui isArray\n\t */\n\t$.isArray = Array.isArray ||\n\t\tfunction(object) {\n\t\t\treturn object instanceof Array;\n\t\t};\n\t/**\n\t * mui isArrayLike \n\t * @param {Object} obj\n\t */\n\t$.isArrayLike = function(obj) {\n\t\tvar length = !!obj && \"length\" in obj && obj.length;\n\t\tvar type = $.type(obj);\n\t\tif(type === \"function\" || $.isWindow(obj)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn type === \"array\" || length === 0 ||\n\t\t\ttypeof length === \"number\" && length > 0 && (length - 1) in obj;\n\t};\n\t/**\n\t * mui isWindow(需考虑obj为undefined的情况)\n\t */\n\t$.isWindow = function(obj) {\n\t\treturn obj != null && obj === obj.window;\n\t};\n\t/**\n\t * mui isObject\n\t */\n\t$.isObject = function(obj) {\n\t\treturn $.type(obj) === \"object\";\n\t};\n\t/**\n\t * mui isPlainObject\n\t */\n\t$.isPlainObject = function(obj) {\n\t\treturn $.isObject(obj) && !$.isWindow(obj) && Object.getPrototypeOf(obj) === Object.prototype;\n\t};\n\t/**\n\t * mui isEmptyObject\n\t * @param {Object} o\n\t */\n\t$.isEmptyObject = function(o) {\n\t\tfor(var p in o) {\n\t\t\tif(p !== undefined) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t};\n\t/**\n\t * mui isFunction\n\t */\n\t$.isFunction = function(value) {\n\t\treturn $.type(value) === \"function\";\n\t};\n\t/**\n\t * mui querySelectorAll\n\t * @param {type} selector\n\t * @param {type} context\n\t * @returns {Array}\n\t */\n\t$.qsa = function(selector, context) {\n\t\tcontext = context || document;\n\t\treturn $.slice.call(classSelectorRE.test(selector) ? context.getElementsByClassName(RegExp.$1) : tagSelectorRE.test(selector) ? context.getElementsByTagName(selector) : context.querySelectorAll(selector));\n\t};\n\t/**\n\t * ready(DOMContentLoaded)\n\t * @param {type} callback\n\t * @returns {_L6.$}\n\t */\n\t$.ready = function(callback) {\n\t\tif(readyRE.test(document.readyState)) {\n\t\t\tcallback($);\n\t\t} else {\n\t\t\tdocument.addEventListener('DOMContentLoaded', function() {\n\t\t\t\tcallback($);\n\t\t\t}, false);\n\t\t}\n\t\treturn this;\n\t};\n\t/**\n\t * 将 fn 缓存一段时间后, 再被调用执行\n\t * 此方法为了避免在 ms 段时间内, 执行 fn 多次. 常用于 resize , scroll , mousemove 等连续性事件中;\n\t * 当 ms 设置为 -1, 表示立即执行 fn, 即和直接调用 fn 一样;\n\t * 调用返回函数的 stop 停止最后一次的 buffer 效果\n\t * @param {Object} fn\n\t * @param {Object} ms\n\t * @param {Object} context\n\t */\n\t$.buffer = function(fn, ms, context) {\n\t\tvar timer;\n\t\tvar lastStart = 0;\n\t\tvar lastEnd = 0;\n\t\tvar ms = ms || 150;\n\n\t\tfunction run() {\n\t\t\tif(timer) {\n\t\t\t\ttimer.cancel();\n\t\t\t\ttimer = 0;\n\t\t\t}\n\t\t\tlastStart = $.now();\n\t\t\tfn.apply(context || this, arguments);\n\t\t\tlastEnd = $.now();\n\t\t}\n\n\t\treturn $.extend(function() {\n\t\t\tif(\n\t\t\t\t(!lastStart) || // 从未运行过\n\t\t\t\t(lastEnd >= lastStart && $.now() - lastEnd > ms) || // 上次运行成功后已经超过ms毫秒\n\t\t\t\t(lastEnd < lastStart && $.now() - lastStart > ms * 8) // 上次运行或未完成，后8*ms毫秒\n\t\t\t) {\n\t\t\t\trun.apply(this, arguments);\n\t\t\t} else {\n\t\t\t\tif(timer) {\n\t\t\t\t\ttimer.cancel();\n\t\t\t\t}\n\t\t\t\ttimer = $.later(run, ms, null, $.slice.call(arguments));\n\t\t\t}\n\t\t}, {\n\t\t\tstop: function() {\n\t\t\t\tif(timer) {\n\t\t\t\t\ttimer.cancel();\n\t\t\t\t\ttimer = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t/**\n\t * each\n\t * @param {type} elements\n\t * @param {type} callback\n\t * @returns {_L8.$}\n\t */\n\t$.each = function(elements, callback, hasOwnProperty) {\n\t\tif(!elements) {\n\t\t\treturn this;\n\t\t}\n\t\tif(typeof elements.length === 'number') {\n\t\t\t[].every.call(elements, function(el, idx) {\n\t\t\t\treturn callback.call(el, idx, el) !== false;\n\t\t\t});\n\t\t} else {\n\t\t\tfor(var key in elements) {\n\t\t\t\tif(hasOwnProperty) {\n\t\t\t\t\tif(elements.hasOwnProperty(key)) {\n\t\t\t\t\t\tif(callback.call(elements[key], key, elements[key]) === false) return elements;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(callback.call(elements[key], key, elements[key]) === false) return elements;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t};\n\t$.focus = function(element) {\n\t\tif($.os.ios) {\n\t\t\tsetTimeout(function() {\n\t\t\t\telement.focus();\n\t\t\t}, 10);\n\t\t} else {\n\t\t\telement.focus();\n\t\t}\n\t};\n\t/**\n\t * trigger event\n\t * @param {type} element\n\t * @param {type} eventType\n\t * @param {type} eventData\n\t * @returns {_L8.$}\n\t */\n\t$.trigger = function(element, eventType, eventData) {\n\t\telement.dispatchEvent(new CustomEvent(eventType, {\n\t\t\tdetail: eventData,\n\t\t\tbubbles: true,\n\t\t\tcancelable: true\n\t\t}));\n\t\treturn this;\n\t};\n\t/**\n\t * getStyles\n\t * @param {type} element\n\t * @param {type} property\n\t * @returns {styles}\n\t */\n\t$.getStyles = function(element, property) {\n\t\tvar styles = element.ownerDocument.defaultView.getComputedStyle(element, null);\n\t\tif(property) {\n\t\t\treturn styles.getPropertyValue(property) || styles[property];\n\t\t}\n\t\treturn styles;\n\t};\n\t/**\n\t * parseTranslate\n\t * @param {type} translateString\n\t * @param {type} position\n\t * @returns {Object}\n\t */\n\t$.parseTranslate = function(translateString, position) {\n\t\tvar result = translateString.match(translateRE || '');\n\t\tif(!result || !result[1]) {\n\t\t\tresult = ['', '0,0,0'];\n\t\t}\n\t\tresult = result[1].split(\",\");\n\t\tresult = {\n\t\t\tx: parseFloat(result[0]),\n\t\t\ty: parseFloat(result[1]),\n\t\t\tz: parseFloat(result[2])\n\t\t};\n\t\tif(position && result.hasOwnProperty(position)) {\n\t\t\treturn result[position];\n\t\t}\n\t\treturn result;\n\t};\n\t/**\n\t * parseTranslateMatrix\n\t * @param {type} translateString\n\t * @param {type} position\n\t * @returns {Object}\n\t */\n\t$.parseTranslateMatrix = function(translateString, position) {\n\t\tvar matrix = translateString.match(translateMatrixRE);\n\t\tvar is3D = matrix && matrix[1];\n\t\tif(matrix) {\n\t\t\tmatrix = matrix[2].split(\",\");\n\t\t\tif(is3D === \"3d\")\n\t\t\t\tmatrix = matrix.slice(12, 15);\n\t\t\telse {\n\t\t\t\tmatrix.push(0);\n\t\t\t\tmatrix = matrix.slice(4, 7);\n\t\t\t}\n\t\t} else {\n\t\t\tmatrix = [0, 0, 0];\n\t\t}\n\t\tvar result = {\n\t\t\tx: parseFloat(matrix[0]),\n\t\t\ty: parseFloat(matrix[1]),\n\t\t\tz: parseFloat(matrix[2])\n\t\t};\n\t\tif(position && result.hasOwnProperty(position)) {\n\t\t\treturn result[position];\n\t\t}\n\t\treturn result;\n\t};\n\t$.hooks = {};\n\t$.addAction = function(type, hook) {\n\t\tvar hooks = $.hooks[type];\n\t\tif(!hooks) {\n\t\t\thooks = [];\n\t\t}\n\t\thook.index = hook.index || 1000;\n\t\thooks.push(hook);\n\t\thooks.sort(function(a, b) {\n\t\t\treturn a.index - b.index;\n\t\t});\n\t\t$.hooks[type] = hooks;\n\t\treturn $.hooks[type];\n\t};\n\t$.doAction = function(type, callback) {\n\t\tif($.isFunction(callback)) { //指定了callback\n\t\t\t$.each($.hooks[type], callback);\n\t\t} else { //未指定callback，直接执行\n\t\t\t$.each($.hooks[type], function(index, hook) {\n\t\t\t\treturn !hook.handle();\n\t\t\t});\n\t\t}\n\t};\n\t/**\n\t * setTimeout封装\n\t * @param {Object} fn\n\t * @param {Object} when\n\t * @param {Object} context\n\t * @param {Object} data\n\t */\n\t$.later = function(fn, when, context, data) {\n\t\twhen = when || 0;\n\t\tvar m = fn;\n\t\tvar d = data;\n\t\tvar f;\n\t\tvar r;\n\n\t\tif(typeof fn === 'string') {\n\t\t\tm = context[fn];\n\t\t}\n\n\t\tf = function() {\n\t\t\tm.apply(context, $.isArray(d) ? d : [d]);\n\t\t};\n\n\t\tr = setTimeout(f, when);\n\n\t\treturn {\n\t\t\tid: r,\n\t\t\tcancel: function() {\n\t\t\t\tclearTimeout(r);\n\t\t\t}\n\t\t};\n\t};\n\t$.now = Date.now || function() {\n\t\treturn +new Date();\n\t};\n\tvar class2type = {};\n\t$.each(['Boolean', 'Number', 'String', 'Function', 'Array', 'Date', 'RegExp', 'Object', 'Error'], function(i, name) {\n\t\tclass2type[\"[object \" + name + \"]\"] = name.toLowerCase();\n\t});\n\tif(window.JSON) {\n\t\t$.parseJSON = JSON.parse;\n\t}\n\t/**\n\t * $.fn\n\t */\n\t$.fn = {\n\t\teach: function(callback) {\n\t\t\t[].every.call(this, function(el, idx) {\n\t\t\t\treturn callback.call(el, idx, el) !== false;\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\t};\n\n\t/**\n\t * 兼容 AMD 模块\n\t **/\n\tif(typeof define === 'function' && define.amd) {\n\t\tdefine('mui', [], function() {\n\t\t\treturn $;\n\t\t});\n\t}\n\n\treturn $;\n})(document);\n\nmodule.exports = {\n\tinstall: function(Vue) {\n\t\twindow.mui = mui;\n\t\tVue.prototype.$mui = mui\n\t}\n};\n//window.mui = mui;\n//'$' in window || (window.$ = mui);\n/**\n * $.os\n * @param {type} $\n * @returns {undefined}\n */\n(function($, window) {\n\tfunction detect(ua) {\n\t\tthis.os = {};\n\t\tvar funcs = [\n\n\t\t\tfunction() { //wechat\n\t\t\t\tvar wechat = ua.match(/(MicroMessenger)\\/([\\d\\.]+)/i);\n\t\t\t\tif(wechat) { //wechat\n\t\t\t\t\tthis.os.wechat = {\n\t\t\t\t\t\tversion: wechat[2].replace(/_/g, '.')\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tfunction() { //android\n\t\t\t\tvar android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n\t\t\t\tif(android) {\n\t\t\t\t\tthis.os.android = true;\n\t\t\t\t\tthis.os.version = android[2];\n\n\t\t\t\t\tthis.os.isBadAndroid = !(/Chrome\\/\\d/.test(window.navigator.appVersion));\n\t\t\t\t}\n\t\t\t\treturn this.os.android === true;\n\t\t\t},\n\t\t\tfunction() { //ios\n\t\t\t\tvar iphone = ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n\t\t\t\tif(iphone) { //iphone\n\t\t\t\t\tthis.os.ios = this.os.iphone = true;\n\t\t\t\t\tthis.os.version = iphone[2].replace(/_/g, '.');\n\t\t\t\t} else {\n\t\t\t\t\tvar ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n\t\t\t\t\tif(ipad) { //ipad\n\t\t\t\t\t\tthis.os.ios = this.os.ipad = true;\n\t\t\t\t\t\tthis.os.version = ipad[2].replace(/_/g, '.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.os.ios === true;\n\t\t\t}\n\t\t];\n\t\t[].every.call(funcs, function(func) {\n\t\t\treturn !func.call($);\n\t\t});\n\t}\n\tdetect.call($, navigator.userAgent);\n})(mui, window);\n/**\n * $.os.plus\n * @param {type} $\n * @returns {undefined}\n */\n(function($, document) {\n\tfunction detect(ua) {\n\t\tthis.os = this.os || {};\n\t\tvar plus = ua.match(/Html5Plus/i); //TODO 5\\+Browser?\n\t\tif(plus) {\n\t\t\tthis.os.plus = true;\n\t\t\t$(function() {\n\t\t\t\tdocument.body.classList.add('mui-plus');\n\t\t\t});\n\t\t\tif(ua.match(/StreamApp/i)) { //TODO 最好有流应用自己的标识\n\t\t\t\tthis.os.stream = true;\n\t\t\t\t$(function() {\n\t\t\t\t\tdocument.body.classList.add('mui-plus-stream');\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tdetect.call($, navigator.userAgent);\n})(mui, document);\n/**\n * 仅提供简单的on，off(仅支持事件委托，不支持当前元素绑定，当前元素绑定请直接使用addEventListener,removeEventListener)\n * @param {Object} $\n */\n(function($) {\n\tif('ontouchstart' in window) {\n\t\t$.isTouchable = true;\n\t\t$.EVENT_START = 'touchstart';\n\t\t$.EVENT_MOVE = 'touchmove';\n\t\t$.EVENT_END = 'touchend';\n\t} else {\n\t\t$.isTouchable = false;\n\t\t$.EVENT_START = 'mousedown';\n\t\t$.EVENT_MOVE = 'mousemove';\n\t\t$.EVENT_END = 'mouseup';\n\t}\n\t$.EVENT_CANCEL = 'touchcancel';\n\t$.EVENT_CLICK = 'click';\n\n\tvar _mid = 1;\n\tvar delegates = {};\n\t//需要wrap的函数\n\tvar eventMethods = {\n\t\tpreventDefault: 'isDefaultPrevented',\n\t\tstopImmediatePropagation: 'isImmediatePropagationStopped',\n\t\tstopPropagation: 'isPropagationStopped'\n\t};\n\t//默认true返回函数\n\tvar returnTrue = function() {\n\t\treturn true\n\t};\n\t//默认false返回函数\n\tvar returnFalse = function() {\n\t\treturn false\n\t};\n\t//wrap浏览器事件\n\tvar compatible = function(event, target) {\n\t\tif(!event.detail) {\n\t\t\tevent.detail = {\n\t\t\t\tcurrentTarget: target\n\t\t\t};\n\t\t} else {\n\t\t\tevent.detail.currentTarget = target;\n\t\t}\n\t\t$.each(eventMethods, function(name, predicate) {\n\t\t\tvar sourceMethod = event[name];\n\t\t\tevent[name] = function() {\n\t\t\t\tthis[predicate] = returnTrue;\n\t\t\t\treturn sourceMethod && sourceMethod.apply(event, arguments)\n\t\t\t}\n\t\t\tevent[predicate] = returnFalse;\n\t\t}, true);\n\t\treturn event;\n\t};\n\t//简单的wrap对象_mid\n\tvar mid = function(obj) {\n\t\treturn obj && (obj._mid || (obj._mid = _mid++));\n\t};\n\t//事件委托对象绑定的事件回调列表\n\tvar delegateFns = {};\n\t//返回事件委托的wrap事件回调\n\tvar delegateFn = function(element, event, selector, callback) {\n\t\treturn function(e) {\n\t\t\t//same event\n\t\t\tvar callbackObjs = delegates[element._mid][event];\n\t\t\tvar handlerQueue = [];\n\t\t\tvar target = e.target;\n\t\t\tvar selectorAlls = {};\n\t\t\tfor(; target && target !== document; target = target.parentNode) {\n\t\t\t\tif(target === element) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif(~['click', 'tap', 'doubletap', 'longtap', 'hold'].indexOf(event) && (target.disabled || target.classList.contains('mui-disabled'))) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar matches = {};\n\t\t\t\t$.each(callbackObjs, function(selector, callbacks) { //same selector\n\t\t\t\t\tselectorAlls[selector] || (selectorAlls[selector] = $.qsa(selector, element));\n\t\t\t\t\tif(selectorAlls[selector] && ~(selectorAlls[selector]).indexOf(target)) {\n\t\t\t\t\t\tif(!matches[selector]) {\n\t\t\t\t\t\t\tmatches[selector] = callbacks;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\t\t\t\tif(!$.isEmptyObject(matches)) {\n\t\t\t\t\thandlerQueue.push({\n\t\t\t\t\t\telement: target,\n\t\t\t\t\t\thandlers: matches\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tselectorAlls = null;\n\t\t\te = compatible(e); //compatible event\n\t\t\t$.each(handlerQueue, function(index, handler) {\n\t\t\t\ttarget = handler.element;\n\t\t\t\tvar tagName = target.tagName;\n\t\t\t\tif(event === 'tap' && (tagName !== 'INPUT' && tagName !== 'TEXTAREA' && tagName !== 'SELECT')) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.detail && e.detail.gesture && e.detail.gesture.preventDefault();\n\t\t\t\t}\n\t\t\t\t$.each(handler.handlers, function(index, handler) {\n\t\t\t\t\t$.each(handler, function(index, callback) {\n\t\t\t\t\t\tif(callback.call(target, e) === false) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, true);\n\t\t\t\t}, true)\n\t\t\t\tif(e.isPropagationStopped()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}, true);\n\t\t};\n\t};\n\tvar findDelegateFn = function(element, event) {\n\t\tvar delegateCallbacks = delegateFns[mid(element)];\n\t\tvar result = [];\n\t\tif(delegateCallbacks) {\n\t\t\tresult = [];\n\t\t\tif(event) {\n\t\t\t\tvar filterFn = function(fn) {\n\t\t\t\t\treturn fn.type === event;\n\t\t\t\t}\n\t\t\t\treturn delegateCallbacks.filter(filterFn);\n\t\t\t} else {\n\t\t\t\tresult = delegateCallbacks;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\tvar preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\n\t/**\n\t * mui delegate events\n\t * @param {type} event\n\t * @param {type} selector\n\t * @param {type} callback\n\t * @returns {undefined}\n\t */\n\t$.fn.on = function(event, selector, callback) { //仅支持简单的事件委托,主要是tap事件使用，类似mouse,focus之类暂不封装支持\n\t\treturn this.each(function() {\n\t\t\tvar element = this;\n\t\t\tmid(element);\n\t\t\tmid(callback);\n\t\t\tvar isAddEventListener = false;\n\t\t\tvar delegateEvents = delegates[element._mid] || (delegates[element._mid] = {});\n\t\t\tvar delegateCallbackObjs = delegateEvents[event] || ((delegateEvents[event] = {}));\n\t\t\tif($.isEmptyObject(delegateCallbackObjs)) {\n\t\t\t\tisAddEventListener = true;\n\t\t\t}\n\t\t\tvar delegateCallbacks = delegateCallbackObjs[selector] || (delegateCallbackObjs[selector] = []);\n\t\t\tdelegateCallbacks.push(callback);\n\t\t\tif(isAddEventListener) {\n\t\t\t\tvar delegateFnArray = delegateFns[mid(element)];\n\t\t\t\tif(!delegateFnArray) {\n\t\t\t\t\tdelegateFnArray = [];\n\t\t\t\t}\n\t\t\t\tvar delegateCallback = delegateFn(element, event, selector, callback);\n\t\t\t\tdelegateFnArray.push(delegateCallback);\n\t\t\t\tdelegateCallback.i = delegateFnArray.length - 1;\n\t\t\t\tdelegateCallback.type = event;\n\t\t\t\tdelegateFns[mid(element)] = delegateFnArray;\n\t\t\t\telement.addEventListener(event, delegateCallback);\n\t\t\t\tif(event === 'tap') { //TODO 需要找个更好的解决方案\n\t\t\t\t\telement.addEventListener('click', function(e) {\n\t\t\t\t\t\tif(e.target) {\n\t\t\t\t\t\t\tvar tagName = e.target.tagName;\n\t\t\t\t\t\t\tif(!preventDefaultException.test(tagName)) {\n\t\t\t\t\t\t\t\tif(tagName === 'A') {\n\t\t\t\t\t\t\t\t\tvar href = e.target.href;\n\t\t\t\t\t\t\t\t\tif(!(href && ~href.indexOf('tel:'))) {\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t$.fn.off = function(event, selector, callback) {\n\t\treturn this.each(function() {\n\t\t\tvar _mid = mid(this);\n\t\t\tif(!event) { //mui(selector).off();\n\t\t\t\tdelegates[_mid] && delete delegates[_mid];\n\t\t\t} else if(!selector) { //mui(selector).off(event);\n\t\t\t\tdelegates[_mid] && delete delegates[_mid][event];\n\t\t\t} else if(!callback) { //mui(selector).off(event,selector);\n\t\t\t\tdelegates[_mid] && delegates[_mid][event] && delete delegates[_mid][event][selector];\n\t\t\t} else { //mui(selector).off(event,selector,callback);\n\t\t\t\tvar delegateCallbacks = delegates[_mid] && delegates[_mid][event] && delegates[_mid][event][selector];\n\t\t\t\t$.each(delegateCallbacks, function(index, delegateCallback) {\n\t\t\t\t\tif(mid(delegateCallback) === mid(callback)) {\n\t\t\t\t\t\tdelegateCallbacks.splice(index, 1);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\t\t\t}\n\t\t\tif(delegates[_mid]) {\n\t\t\t\t//如果off掉了所有当前element的指定的event事件，则remove掉当前element的delegate回调\n\t\t\t\tif((!delegates[_mid][event] || $.isEmptyObject(delegates[_mid][event]))) {\n\t\t\t\t\tfindDelegateFn(this, event).forEach(function(fn) {\n\t\t\t\t\t\tthis.removeEventListener(fn.type, fn);\n\t\t\t\t\t\tdelete delegateFns[_mid][fn.i];\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//如果delegates[_mid]已不存在，删除所有\n\t\t\t\tfindDelegateFn(this).forEach(function(fn) {\n\t\t\t\t\tthis.removeEventListener(fn.type, fn);\n\t\t\t\t\tdelete delegateFns[_mid][fn.i];\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t});\n\n\t};\n})(mui);\n/**\n * mui target(action>popover>modal>tab>toggle)\n */\n(function($, window, document) {\n\t/**\n\t * targets\n\t */\n\t$.targets = {};\n\t/**\n\t * target handles\n\t */\n\t$.targetHandles = [];\n\t/**\n\t * register target\n\t * @param {type} target\n\t * @returns {$.targets}\n\t */\n\t$.registerTarget = function(target) {\n\n\t\ttarget.index = target.index || 1000;\n\n\t\t$.targetHandles.push(target);\n\n\t\t$.targetHandles.sort(function(a, b) {\n\t\t\treturn a.index - b.index;\n\t\t});\n\n\t\treturn $.targetHandles;\n\t};\n\twindow.addEventListener($.EVENT_START, function(event) {\n\t\tvar target = event.target;\n\t\tvar founds = {};\n\t\tfor(; target && target !== document; target = target.parentNode) {\n\t\t\tvar isFound = false;\n\t\t\t$.each($.targetHandles, function(index, targetHandle) {\n\t\t\t\tvar name = targetHandle.name;\n\t\t\t\tif(!isFound && !founds[name] && targetHandle.hasOwnProperty('handle')) {\n\t\t\t\t\t$.targets[name] = targetHandle.handle(event, target);\n\t\t\t\t\tif($.targets[name]) {\n\t\t\t\t\t\tfounds[name] = true;\n\t\t\t\t\t\tif(targetHandle.isContinue !== true) {\n\t\t\t\t\t\t\tisFound = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(!founds[name]) {\n\t\t\t\t\t\tif(targetHandle.isReset !== false)\n\t\t\t\t\t\t\t$.targets[name] = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(isFound) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\twindow.addEventListener('click', function(event) { //解决touch与click的target不一致的问题(比如链接边缘点击时，touch的target为html，而click的target为A)\n\t\tvar target = event.target;\n\t\tvar isFound = false;\n\t\tfor(; target && target !== document; target = target.parentNode) {\n\t\t\tif(target.tagName === 'A') {\n\t\t\t\t$.each($.targetHandles, function(index, targetHandle) {\n\t\t\t\t\tvar name = targetHandle.name;\n\t\t\t\t\tif(targetHandle.hasOwnProperty('handle')) {\n\t\t\t\t\t\tif(targetHandle.handle(event, target)) {\n\t\t\t\t\t\t\tisFound = true;\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(isFound) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n})(mui, window, document);\n/**\n * fixed trim\n * @param {type} undefined\n * @returns {undefined}\n */\n(function(undefined) {\n\tif(String.prototype.trim === undefined) { // fix for iOS 3.2\n\t\tString.prototype.trim = function() {\n\t\t\treturn this.replace(/^\\s+|\\s+$/g, '');\n\t\t};\n\t}\n\tObject.setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\n\t\tobj['__proto__'] = proto;\n\t\treturn obj;\n\t};\n\n})();\n/**\n * fixed CustomEvent\n */\n(function() {\n\tif(typeof window.CustomEvent === 'undefined') {\n\t\tfunction CustomEvent(event, params) {\n\t\t\tparams = params || {\n\t\t\t\tbubbles: false,\n\t\t\t\tcancelable: false,\n\t\t\t\tdetail: undefined\n\t\t\t};\n\t\t\tvar evt = document.createEvent('Events');\n\t\t\tvar bubbles = true;\n\t\t\tfor(var name in params) {\n\t\t\t\t(name === 'bubbles') ? (bubbles = !!params[name]) : (evt[name] = params[name]);\n\t\t\t}\n\t\t\tevt.initEvent(event, bubbles, true);\n\t\t\treturn evt;\n\t\t};\n\t\tCustomEvent.prototype = window.Event.prototype;\n\t\twindow.CustomEvent = CustomEvent;\n\t}\n})();\n/*\n\tA shim for non ES5 supporting browsers.\n\tAdds function bind to Function prototype, so that you can do partial application.\n\tWorks even with the nasty thing, where the first word is the opposite of extranet, the second one is the profession of Columbus, and the version number is 9, flipped 180 degrees.\n*/\n\nFunction.prototype.bind = Function.prototype.bind || function(to) {\n\t// Make an array of our arguments, starting from second argument\n\tvar partial = Array.prototype.splice.call(arguments, 1),\n\t\t// We'll need the original function.\n\t\tfn = this;\n\tvar bound = function() {\n\t\t\t// Join the already applied arguments to the now called ones (after converting to an array again).\n\t\t\tvar args = partial.concat(Array.prototype.splice.call(arguments, 0));\n\t\t\t// If not being called as a constructor\n\t\t\tif(!(this instanceof bound)) {\n\t\t\t\t// return the result of the function called bound to target and partially applied.\n\t\t\t\treturn fn.apply(to, args);\n\t\t\t}\n\t\t\t// If being called as a constructor, apply the function bound to self.\n\t\t\tfn.apply(this, args);\n\t\t}\n\t\t// Attach the prototype of the function to our newly created function.\n\tbound.prototype = fn.prototype;\n\treturn bound;\n};\n/**\n * mui fixed classList\n * @param {type} document\n * @returns {undefined}\n */\n(function(document) {\n\tif(!(\"classList\" in document.documentElement) && Object.defineProperty && typeof HTMLElement !== 'undefined') {\n\n\t\tObject.defineProperty(HTMLElement.prototype, 'classList', {\n\t\t\tget: function() {\n\t\t\t\tvar self = this;\n\n\t\t\t\tfunction update(fn) {\n\t\t\t\t\treturn function(value) {\n\t\t\t\t\t\tvar classes = self.className.split(/\\s+/),\n\t\t\t\t\t\t\tindex = classes.indexOf(value);\n\n\t\t\t\t\t\tfn(classes, index, value);\n\t\t\t\t\t\tself.className = classes.join(\" \");\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tvar ret = {\n\t\t\t\t\tadd: update(function(classes, index, value) {\n\t\t\t\t\t\t~index || classes.push(value);\n\t\t\t\t\t}),\n\t\t\t\t\tremove: update(function(classes, index) {\n\t\t\t\t\t\t~index && classes.splice(index, 1);\n\t\t\t\t\t}),\n\t\t\t\t\ttoggle: update(function(classes, index, value) {\n\t\t\t\t\t\t~index ? classes.splice(index, 1) : classes.push(value);\n\t\t\t\t\t}),\n\t\t\t\t\tcontains: function(value) {\n\t\t\t\t\t\treturn !!~self.className.split(/\\s+/).indexOf(value);\n\t\t\t\t\t},\n\t\t\t\t\titem: function(i) {\n\t\t\t\t\t\treturn self.className.split(/\\s+/)[i] || null;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tObject.defineProperty(ret, 'length', {\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\treturn self.className.split(/\\s+/).length;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t});\n\t}\n})(document);\n\n/**\n * mui fixed requestAnimationFrame\n * @param {type} window\n * @returns {undefined}\n */\n(function(window) {\n\tif(!window.requestAnimationFrame) {\n\t\tvar lastTime = 0;\n\t\twindow.requestAnimationFrame = window.webkitRequestAnimationFrame || function(callback, element) {\n\t\t\tvar currTime = new Date().getTime();\n\t\t\tvar timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\n\t\t\tvar id = window.setTimeout(function() {\n\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t}, timeToCall);\n\t\t\tlastTime = currTime + timeToCall;\n\t\t\treturn id;\n\t\t};\n\t\twindow.cancelAnimationFrame = window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || function(id) {\n\t\t\tclearTimeout(id);\n\t\t};\n\t};\n}(window));\n/**\n * fastclick(only for radio,checkbox)\n */\n(function($, window, name) {\n\tif(!$.os.android && !$.os.ios) { //目前仅识别android和ios\n\t\treturn;\n\t}\n\tif(window.FastClick) {\n\t\treturn;\n\t}\n\n\tvar handle = function(event, target) {\n\t\tif(target.tagName === 'LABEL') {\n\t\t\tif(target.parentNode) {\n\t\t\t\ttarget = target.parentNode.querySelector('input');\n\t\t\t}\n\t\t}\n\t\tif(target && (target.type === 'radio' || target.type === 'checkbox')) {\n\t\t\tif(!target.disabled) { //disabled\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 40,\n\t\thandle: handle,\n\t\ttarget: false\n\t});\n\tvar dispatchEvent = function(event) {\n\t\tvar targetElement = $.targets.click;\n\t\tif(targetElement) {\n\t\t\tvar clickEvent, touch;\n\t\t\t// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect\n\t\t\tif(document.activeElement && document.activeElement !== targetElement) {\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\t\t\ttouch = event.detail.gesture.changedTouches[0];\n\t\t\t// Synthesise a click event, with an extra attribute so it can be tracked\n\t\t\tclickEvent = document.createEvent('MouseEvents');\n\t\t\tclickEvent.initMouseEvent('click', true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n\t\t\tclickEvent.forwardedTouchEvent = true;\n\t\t\ttargetElement.dispatchEvent(clickEvent);\n\t\t\tevent.detail && event.detail.gesture.preventDefault();\n\t\t}\n\t};\n\twindow.addEventListener('tap', dispatchEvent);\n\twindow.addEventListener('doubletap', dispatchEvent);\n\t//捕获\n\twindow.addEventListener('click', function(event) {\n\t\tif($.targets.click) {\n\t\t\tif(!event.forwardedTouchEvent) { //stop click\n\t\t\t\tif(event.stopImmediatePropagation) {\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t} else {\n\t\t\t\t\t// Part of the hack for browsers that don't support Event#stopImmediatePropagation\n\t\t\t\t\tevent.propagationStopped = true;\n\t\t\t\t}\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}, true);\n\n})(mui, window, 'click');\n(function($, document) {\n\t$(function() {\n\t\tif(!$.os.ios) {\n\t\t\treturn;\n\t\t}\n\t\tvar CLASS_FOCUSIN = 'mui-focusin';\n\t\tvar CLASS_BAR_TAB = 'mui-bar-tab';\n\t\tvar CLASS_BAR_FOOTER = 'mui-bar-footer';\n\t\tvar CLASS_BAR_FOOTER_SECONDARY = 'mui-bar-footer-secondary';\n\t\tvar CLASS_BAR_FOOTER_SECONDARY_TAB = 'mui-bar-footer-secondary-tab';\n\t\t// var content = document.querySelector('.' + CLASS_CONTENT);\n\t\t// if (content) {\n\t\t// \tdocument.body.insertBefore(content, document.body.firstElementChild);\n\t\t// }\n\t\tdocument.addEventListener('focusin', function(e) {\n\t\t\tif($.os.plus) { //在父webview里边不fix\n\t\t\t\tif(window.plus) {\n\t\t\t\t\tif(plus.webview.currentWebview().children().length > 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar target = e.target;\n\t\t\t//TODO 需考虑所有键盘弹起的情况\n\t\t\tif(target.tagName && (target.tagName === 'TEXTAREA' || (target.tagName === 'INPUT' && (target.type === 'text' || target.type === 'search' || target.type === 'number')))) {\n\t\t\t\tif(target.disabled || target.readOnly) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tdocument.body.classList.add(CLASS_FOCUSIN);\n\t\t\t\tvar isFooter = false;\n\t\t\t\tfor(; target && target !== document; target = target.parentNode) {\n\t\t\t\t\tvar classList = target.classList;\n\t\t\t\t\tif(classList && classList.contains(CLASS_BAR_TAB) || classList.contains(CLASS_BAR_FOOTER) || classList.contains(CLASS_BAR_FOOTER_SECONDARY) || classList.contains(CLASS_BAR_FOOTER_SECONDARY_TAB)) {\n\t\t\t\t\t\tisFooter = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(isFooter) {\n\t\t\t\t\tvar scrollTop = document.body.scrollHeight;\n\t\t\t\t\tvar scrollLeft = document.body.scrollLeft;\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\twindow.scrollTo(scrollLeft, scrollTop);\n\t\t\t\t\t}, 20);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener('focusout', function(e) {\n\t\t\tvar classList = document.body.classList;\n\t\t\tif(classList.contains(CLASS_FOCUSIN)) {\n\t\t\t\tclassList.remove(CLASS_FOCUSIN);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twindow.scrollTo(document.body.scrollLeft, document.body.scrollTop);\n\t\t\t\t}, 20);\n\t\t\t}\n\t\t});\n\t});\n})(mui, document);\n/**\n * mui namespace(optimization)\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\t$.namespace = 'mui';\n\t$.classNamePrefix = $.namespace + '-';\n\t$.classSelectorPrefix = '.' + $.classNamePrefix;\n\t/**\n\t * 返回正确的className\n\t * @param {type} className\n\t * @returns {String}\n\t */\n\t$.className = function(className) {\n\t\treturn $.classNamePrefix + className;\n\t};\n\t/**\n\t * 返回正确的classSelector\n\t * @param {type} classSelector\n\t * @returns {String}\n\t */\n\t$.classSelector = function(classSelector) {\n\t\treturn classSelector.replace(/\\./g, $.classSelectorPrefix);\n\t};\n\t/**\n\t * 返回正确的eventName\n\t * @param {type} event\n\t * @param {type} module\n\t * @returns {String}\n\t */\n\t$.eventName = function(event, module) {\n\t\treturn event + ($.namespace ? ('.' + $.namespace) : '') + (module ? ('.' + module) : '');\n\t};\n})(mui);\n\n/**\n * mui gestures\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n\t$.gestures = {\n\t\tsession: {}\n\t};\n\t/**\n\t * Gesture preventDefault\n\t * @param {type} e\n\t * @returns {undefined}\n\t */\n\t$.preventDefault = function(e) {\n\t\te.preventDefault();\n\t};\n\t/**\n\t * Gesture stopPropagation\n\t * @param {type} e\n\t * @returns {undefined}\n\t */\n\t$.stopPropagation = function(e) {\n\t\te.stopPropagation();\n\t};\n\n\t/**\n\t * register gesture\n\t * @param {type} gesture\n\t * @returns {$.gestures}\n\t */\n\t$.addGesture = function(gesture) {\n\t\treturn $.addAction('gestures', gesture);\n\n\t};\n\n\tvar round = Math.round;\n\tvar abs = Math.abs;\n\tvar sqrt = Math.sqrt;\n\tvar atan = Math.atan;\n\tvar atan2 = Math.atan2;\n\t/**\n\t * distance\n\t * @param {type} p1\n\t * @param {type} p2\n\t * @returns {Number}\n\t */\n\tvar getDistance = function(p1, p2, props) {\n\t\tif(!props) {\n\t\t\tprops = ['x', 'y'];\n\t\t}\n\t\tvar x = p2[props[0]] - p1[props[0]];\n\t\tvar y = p2[props[1]] - p1[props[1]];\n\t\treturn sqrt((x * x) + (y * y));\n\t};\n\t/**\n\t * scale\n\t * @param {Object} starts\n\t * @param {Object} moves\n\t */\n\tvar getScale = function(starts, moves) {\n\t\tif(starts.length >= 2 && moves.length >= 2) {\n\t\t\tvar props = ['pageX', 'pageY'];\n\t\t\treturn getDistance(moves[1], moves[0], props) / getDistance(starts[1], starts[0], props);\n\t\t}\n\t\treturn 1;\n\t};\n\t/**\n\t * angle\n\t * @param {type} p1\n\t * @param {type} p2\n\t * @returns {Number}\n\t */\n\tvar getAngle = function(p1, p2, props) {\n\t\tif(!props) {\n\t\t\tprops = ['x', 'y'];\n\t\t}\n\t\tvar x = p2[props[0]] - p1[props[0]];\n\t\tvar y = p2[props[1]] - p1[props[1]];\n\t\treturn atan2(y, x) * 180 / Math.PI;\n\t};\n\t/**\n\t * direction\n\t * @param {Object} x\n\t * @param {Object} y\n\t */\n\tvar getDirection = function(x, y) {\n\t\tif(x === y) {\n\t\t\treturn '';\n\t\t}\n\t\tif(abs(x) >= abs(y)) {\n\t\t\treturn x > 0 ? 'left' : 'right';\n\t\t}\n\t\treturn y > 0 ? 'up' : 'down';\n\t};\n\t/**\n\t * rotation\n\t * @param {Object} start\n\t * @param {Object} end\n\t */\n\tvar getRotation = function(start, end) {\n\t\tvar props = ['pageX', 'pageY'];\n\t\treturn getAngle(end[1], end[0], props) - getAngle(start[1], start[0], props);\n\t};\n\t/**\n\t * px per ms\n\t * @param {Object} deltaTime\n\t * @param {Object} x\n\t * @param {Object} y\n\t */\n\tvar getVelocity = function(deltaTime, x, y) {\n\t\treturn {\n\t\t\tx: x / deltaTime || 0,\n\t\t\ty: y / deltaTime || 0\n\t\t};\n\t};\n\t/**\n\t * detect gestures\n\t * @param {type} event\n\t * @param {type} touch\n\t * @returns {undefined}\n\t */\n\tvar detect = function(event, touch) {\n\t\tif($.gestures.stoped) {\n\t\t\treturn;\n\t\t}\n\t\t$.doAction('gestures', function(index, gesture) {\n\t\t\tif(!$.gestures.stoped) {\n\t\t\t\tif($.options.gestureConfig[gesture.name] !== false) {\n\t\t\t\t\tgesture.handle(event, touch);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t/**\n\t * 暂时无用\n\t * @param {Object} node\n\t * @param {Object} parent\n\t */\n\tvar hasParent = function(node, parent) {\n\t\twhile(node) {\n\t\t\tif(node == parent) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\treturn false;\n\t};\n\n\tvar uniqueArray = function(src, key, sort) {\n\t\tvar results = [];\n\t\tvar values = [];\n\t\tvar i = 0;\n\n\t\twhile(i < src.length) {\n\t\t\tvar val = key ? src[i][key] : src[i];\n\t\t\tif(values.indexOf(val) < 0) {\n\t\t\t\tresults.push(src[i]);\n\t\t\t}\n\t\t\tvalues[i] = val;\n\t\t\ti++;\n\t\t}\n\n\t\tif(sort) {\n\t\t\tif(!key) {\n\t\t\t\tresults = results.sort();\n\t\t\t} else {\n\t\t\t\tresults = results.sort(function sortUniqueArray(a, b) {\n\t\t\t\t\treturn a[key] > b[key];\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t};\n\tvar getMultiCenter = function(touches) {\n\t\tvar touchesLength = touches.length;\n\t\tif(touchesLength === 1) {\n\t\t\treturn {\n\t\t\t\tx: round(touches[0].pageX),\n\t\t\t\ty: round(touches[0].pageY)\n\t\t\t};\n\t\t}\n\n\t\tvar x = 0;\n\t\tvar y = 0;\n\t\tvar i = 0;\n\t\twhile(i < touchesLength) {\n\t\t\tx += touches[i].pageX;\n\t\t\ty += touches[i].pageY;\n\t\t\ti++;\n\t\t}\n\n\t\treturn {\n\t\t\tx: round(x / touchesLength),\n\t\t\ty: round(y / touchesLength)\n\t\t};\n\t};\n\tvar multiTouch = function() {\n\t\treturn $.options.gestureConfig.pinch;\n\t};\n\tvar copySimpleTouchData = function(touch) {\n\t\tvar touches = [];\n\t\tvar i = 0;\n\t\twhile(i < touch.touches.length) {\n\t\t\ttouches[i] = {\n\t\t\t\tpageX: round(touch.touches[i].pageX),\n\t\t\t\tpageY: round(touch.touches[i].pageY)\n\t\t\t};\n\t\t\ti++;\n\t\t}\n\t\treturn {\n\t\t\ttimestamp: $.now(),\n\t\t\tgesture: touch.gesture,\n\t\t\ttouches: touches,\n\t\t\tcenter: getMultiCenter(touch.touches),\n\t\t\tdeltaX: touch.deltaX,\n\t\t\tdeltaY: touch.deltaY\n\t\t};\n\t};\n\n\tvar calDelta = function(touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar center = touch.center;\n\t\tvar offset = session.offsetDelta || {};\n\t\tvar prevDelta = session.prevDelta || {};\n\t\tvar prevTouch = session.prevTouch || {};\n\n\t\tif(touch.gesture.type === $.EVENT_START || touch.gesture.type === $.EVENT_END) {\n\t\t\tprevDelta = session.prevDelta = {\n\t\t\t\tx: prevTouch.deltaX || 0,\n\t\t\t\ty: prevTouch.deltaY || 0\n\t\t\t};\n\n\t\t\toffset = session.offsetDelta = {\n\t\t\t\tx: center.x,\n\t\t\t\ty: center.y\n\t\t\t};\n\t\t}\n\t\ttouch.deltaX = prevDelta.x + (center.x - offset.x);\n\t\ttouch.deltaY = prevDelta.y + (center.y - offset.y);\n\t};\n\tvar calTouchData = function(touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar touches = touch.touches;\n\t\tvar touchesLength = touches.length;\n\n\t\tif(!session.firstTouch) {\n\t\t\tsession.firstTouch = copySimpleTouchData(touch);\n\t\t}\n\n\t\tif(multiTouch() && touchesLength > 1 && !session.firstMultiTouch) {\n\t\t\tsession.firstMultiTouch = copySimpleTouchData(touch);\n\t\t} else if(touchesLength === 1) {\n\t\t\tsession.firstMultiTouch = false;\n\t\t}\n\n\t\tvar firstTouch = session.firstTouch;\n\t\tvar firstMultiTouch = session.firstMultiTouch;\n\t\tvar offsetCenter = firstMultiTouch ? firstMultiTouch.center : firstTouch.center;\n\n\t\tvar center = touch.center = getMultiCenter(touches);\n\t\ttouch.timestamp = $.now();\n\t\ttouch.deltaTime = touch.timestamp - firstTouch.timestamp;\n\n\t\ttouch.angle = getAngle(offsetCenter, center);\n\t\ttouch.distance = getDistance(offsetCenter, center);\n\n\t\tcalDelta(touch);\n\n\t\ttouch.offsetDirection = getDirection(touch.deltaX, touch.deltaY);\n\n\t\ttouch.scale = firstMultiTouch ? getScale(firstMultiTouch.touches, touches) : 1;\n\t\ttouch.rotation = firstMultiTouch ? getRotation(firstMultiTouch.touches, touches) : 0;\n\n\t\tcalIntervalTouchData(touch);\n\n\t};\n\tvar CAL_INTERVAL = 25;\n\tvar calIntervalTouchData = function(touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar last = session.lastInterval || touch;\n\t\tvar deltaTime = touch.timestamp - last.timestamp;\n\t\tvar velocity;\n\t\tvar velocityX;\n\t\tvar velocityY;\n\t\tvar direction;\n\n\t\tif(touch.gesture.type != $.EVENT_CANCEL && (deltaTime > CAL_INTERVAL || last.velocity === undefined)) {\n\t\t\tvar deltaX = last.deltaX - touch.deltaX;\n\t\t\tvar deltaY = last.deltaY - touch.deltaY;\n\n\t\t\tvar v = getVelocity(deltaTime, deltaX, deltaY);\n\t\t\tvelocityX = v.x;\n\t\t\tvelocityY = v.y;\n\t\t\tvelocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n\t\t\tdirection = getDirection(deltaX, deltaY) || last.direction;\n\n\t\t\tsession.lastInterval = touch;\n\t\t} else {\n\t\t\tvelocity = last.velocity;\n\t\t\tvelocityX = last.velocityX;\n\t\t\tvelocityY = last.velocityY;\n\t\t\tdirection = last.direction;\n\t\t}\n\n\t\ttouch.velocity = velocity;\n\t\ttouch.velocityX = velocityX;\n\t\ttouch.velocityY = velocityY;\n\t\ttouch.direction = direction;\n\t};\n\tvar targetIds = {};\n\tvar convertTouches = function(touches) {\n\t\tfor(var i = 0; i < touches.length; i++) {\n\t\t\t!touches['identifier'] && (touches['identifier'] = 0);\n\t\t}\n\t\treturn touches;\n\t};\n\tvar getTouches = function(event, touch) {\n\t\tvar allTouches = convertTouches($.slice.call(event.touches || [event]));\n\n\t\tvar type = event.type;\n\n\t\tvar targetTouches = [];\n\t\tvar changedTargetTouches = [];\n\n\t\t//当touchstart或touchmove且touches长度为1，直接获得all和changed\n\t\tif((type === $.EVENT_START || type === $.EVENT_MOVE) && allTouches.length === 1) {\n\t\t\ttargetIds[allTouches[0].identifier] = true;\n\t\t\ttargetTouches = allTouches;\n\t\t\tchangedTargetTouches = allTouches;\n\t\t\ttouch.target = event.target;\n\t\t} else {\n\t\t\tvar i = 0;\n\t\t\tvar targetTouches = [];\n\t\t\tvar changedTargetTouches = [];\n\t\t\tvar changedTouches = convertTouches($.slice.call(event.changedTouches || [event]));\n\n\t\t\ttouch.target = event.target;\n\t\t\tvar sessionTarget = $.gestures.session.target || event.target;\n\t\t\ttargetTouches = allTouches.filter(function(touch) {\n\t\t\t\treturn hasParent(touch.target, sessionTarget);\n\t\t\t});\n\n\t\t\tif(type === $.EVENT_START) {\n\t\t\t\ti = 0;\n\t\t\t\twhile(i < targetTouches.length) {\n\t\t\t\t\ttargetIds[targetTouches[i].identifier] = true;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti = 0;\n\t\t\twhile(i < changedTouches.length) {\n\t\t\t\tif(targetIds[changedTouches[i].identifier]) {\n\t\t\t\t\tchangedTargetTouches.push(changedTouches[i]);\n\t\t\t\t}\n\t\t\t\tif(type === $.EVENT_END || type === $.EVENT_CANCEL) {\n\t\t\t\t\tdelete targetIds[changedTouches[i].identifier];\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\tif(!changedTargetTouches.length) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\ttargetTouches = uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true);\n\t\tvar touchesLength = targetTouches.length;\n\t\tvar changedTouchesLength = changedTargetTouches.length;\n\t\tif(type === $.EVENT_START && touchesLength - changedTouchesLength === 0) { //first\n\t\t\ttouch.isFirst = true;\n\t\t\t$.gestures.touch = $.gestures.session = {\n\t\t\t\ttarget: event.target\n\t\t\t};\n\t\t}\n\t\ttouch.isFinal = ((type === $.EVENT_END || type === $.EVENT_CANCEL) && (touchesLength - changedTouchesLength === 0));\n\n\t\ttouch.touches = targetTouches;\n\t\ttouch.changedTouches = changedTargetTouches;\n\t\treturn true;\n\n\t};\n\tvar handleTouchEvent = function(event) {\n\t\tvar touch = {\n\t\t\tgesture: event\n\t\t};\n\t\tvar touches = getTouches(event, touch);\n\t\tif(!touches) {\n\t\t\treturn;\n\t\t}\n\t\tcalTouchData(touch);\n\t\tdetect(event, touch);\n\t\t$.gestures.session.prevTouch = touch;\n\t\tif(event.type === $.EVENT_END && !$.isTouchable) {\n\t\t\t$.gestures.touch = $.gestures.session = {};\n\t\t}\n\t};\n\twindow.addEventListener($.EVENT_START, handleTouchEvent);\n\twindow.addEventListener($.EVENT_MOVE, handleTouchEvent);\n\twindow.addEventListener($.EVENT_END, handleTouchEvent);\n\twindow.addEventListener($.EVENT_CANCEL, handleTouchEvent);\n\t//fixed hashchange(android)\n\twindow.addEventListener($.EVENT_CLICK, function(e) {\n\t\t//TODO 应该判断当前target是不是在targets.popover内部，而不是非要相等\n\t\tif(($.os.android || $.os.ios) && (($.targets.popover && e.target === $.targets.popover) || ($.targets.tab) || $.targets.offcanvas || $.targets.modal)) {\n\t\t\te.preventDefault();\n\t\t}\n\t}, true);\n\n\t//增加原生滚动识别\n\t$.isScrolling = false;\n\tvar scrollingTimeout = null;\n\twindow.addEventListener('scroll', function() {\n\t\t$.isScrolling = true;\n\t\tscrollingTimeout && clearTimeout(scrollingTimeout);\n\t\tscrollingTimeout = setTimeout(function() {\n\t\t\t$.isScrolling = false;\n\t\t}, 250);\n\t});\n})(mui, window);\n/**\n * mui gesture flick[left|right|up|down]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar flickStartTime = 0;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tvar now = $.now();\n\t\tswitch(event.type) {\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif(now - flickStartTime > 300) {\n\t\t\t\t\tflickStartTime = now;\n\t\t\t\t\tsession.flickStart = touch.center;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\ttouch.flick = false;\n\t\t\t\tif(session.flickStart && options.flickMaxTime > (now - flickStartTime) && touch.distance > options.flickMinDistince) {\n\t\t\t\t\ttouch.flick = true;\n\t\t\t\t\ttouch.flickTime = now - flickStartTime;\n\t\t\t\t\ttouch.flickDistanceX = touch.center.x - session.flickStart.x;\n\t\t\t\t\ttouch.flickDistanceY = touch.center.y - session.flickStart.y;\n\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t};\n\t/**\n\t * mui gesture flick\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 5,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tflickMaxTime: 200,\n\t\t\tflickMinDistince: 10\n\t\t}\n\t});\n})(mui, 'flick');\n/**\n * mui gesture swipe[left|right|up|down]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tif(event.type === $.EVENT_END || event.type === $.EVENT_CANCEL) {\n\t\t\tvar options = this.options;\n\t\t\ttouch.swipe = false;\n\t\t\t//TODO 后续根据velocity计算\n\t\t\tif(touch.direction && options.swipeMaxTime > touch.deltaTime && touch.distance > options.swipeMinDistince) {\n\t\t\t\ttouch.swipe = true;\n\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\n\t\t\t}\n\t\t}\n\t};\n\t/**\n\t * mui gesture swipe\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tswipeMaxTime: 300,\n\t\t\tswipeMinDistince: 18\n\t\t}\n\t});\n})(mui, 'swipe');\n/**\n * mui gesture drag[start|left|right|up|down|end]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tswitch(event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif(!touch.direction || !session.target) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//修正direction,可在session期间自行锁定拖拽方向，方便开发scroll类不同方向拖拽插件嵌套\n\t\t\t\tif(session.lockDirection && session.startDirection) {\n\t\t\t\t\tif(session.startDirection && session.startDirection !== touch.direction) {\n\t\t\t\t\t\tif(session.startDirection === 'up' || session.startDirection === 'down') {\n\t\t\t\t\t\t\ttouch.direction = touch.deltaY < 0 ? 'up' : 'down';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttouch.direction = touch.deltaX < 0 ? 'left' : 'right';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(!session.drag) {\n\t\t\t\t\tsession.drag = true;\n\t\t\t\t\t$.trigger(session.target, name + 'start', touch);\n\t\t\t\t}\n\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tif(session.drag && touch.isFinal) {\n\t\t\t\t\t$.trigger(session.target, name + 'end', touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture drag\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 20,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1\n\t\t}\n\t});\n})(mui, 'drag');\n/**\n * mui gesture tap and doubleTap\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar lastTarget;\n\tvar lastTapTime;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tswitch(event.type) {\n\t\t\tcase $.EVENT_END:\n\t\t\t\tif(!touch.isFinal) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar target = session.target;\n\t\t\t\tif(!target || (target.disabled || (target.classList && target.classList.contains('mui-disabled')))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(touch.distance < options.tapMaxDistance && touch.deltaTime < options.tapMaxTime) {\n\t\t\t\t\tif($.options.gestureConfig.doubletap && lastTarget && (lastTarget === target)) { //same target\n\t\t\t\t\t\tif(lastTapTime && (touch.timestamp - lastTapTime) < options.tapMaxInterval) {\n\t\t\t\t\t\t\t$.trigger(target, 'doubletap', touch);\n\t\t\t\t\t\t\tlastTapTime = $.now();\n\t\t\t\t\t\t\tlastTarget = target;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t$.trigger(target, name, touch);\n\t\t\t\t\tlastTapTime = $.now();\n\t\t\t\t\tlastTarget = target;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture tap\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 30,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1,\n\t\t\ttapMaxInterval: 300,\n\t\t\ttapMaxDistance: 5,\n\t\t\ttapMaxTime: 250\n\t\t}\n\t});\n})(mui, 'tap');\n/**\n * mui gesture longtap\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar timer;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tswitch(event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t}, options.holdTimeout);\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif(touch.distance > options.holdThreshold) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tclearTimeout(timer);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture longtap\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1,\n\t\t\tholdTimeout: 500,\n\t\t\tholdThreshold: 2\n\t\t}\n\t});\n})(mui, 'longtap');\n/**\n * mui gesture hold\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar timer;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tswitch(event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tif($.options.gestureConfig.hold) {\n\t\t\t\t\ttimer && clearTimeout(timer);\n\t\t\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\t\ttouch.hold = true;\n\t\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t\t}, options.holdTimeout);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tif(timer) {\n\t\t\t\t\tclearTimeout(timer) && (timer = null);\n\t\t\t\t\t$.trigger(session.target, 'release', touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture hold\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1,\n\t\t\tholdTimeout: 0\n\t\t}\n\t});\n})(mui, 'hold');\n/**\n * mui gesture pinch\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar handle = function(event, touch) {\n\t\tvar options = this.options;\n\t\tvar session = $.gestures.session;\n\t\tswitch(event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif($.options.gestureConfig.pinch) {\n\t\t\t\t\tif(touch.touches.length < 2) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(!session.pinch) { //start\n\t\t\t\t\t\tsession.pinch = true;\n\t\t\t\t\t\t$.trigger(session.target, name + 'start', touch);\n\t\t\t\t\t}\n\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t\tvar scale = touch.scale;\n\t\t\t\t\tvar rotation = touch.rotation;\n\t\t\t\t\tvar lastScale = typeof touch.lastScale === 'undefined' ? 1 : touch.lastScale;\n\t\t\t\t\tvar scaleDiff = 0.000000000001; //防止scale与lastScale相等，不触发事件的情况。\n\t\t\t\t\tif(scale > lastScale) { //out\n\t\t\t\t\t\tlastScale = scale - scaleDiff;\n\t\t\t\t\t\t$.trigger(session.target, name + 'out', touch);\n\t\t\t\t\t} //in\n\t\t\t\t\telse if(scale < lastScale) {\n\t\t\t\t\t\tlastScale = scale + scaleDiff;\n\t\t\t\t\t\t$.trigger(session.target, name + 'in', touch);\n\t\t\t\t\t}\n\t\t\t\t\tif(Math.abs(rotation) > options.minRotationAngle) {\n\t\t\t\t\t\t$.trigger(session.target, 'rotate', touch);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tif($.options.gestureConfig.pinch && session.pinch && touch.touches.length === 2) {\n\t\t\t\t\tsession.pinch = false;\n\t\t\t\t\t$.trigger(session.target, name + 'end', touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture pinch\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tminRotationAngle: 0\n\t\t}\n\t});\n})(mui, 'pinch');\n/**\n * mui.init\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\t$.global = $.options = {\n\t\tgestureConfig: {\n\t\t\ttap: true,\n\t\t\tdoubletap: false,\n\t\t\tlongtap: false,\n\t\t\thold: false,\n\t\t\tflick: true,\n\t\t\tswipe: true,\n\t\t\tdrag: true,\n\t\t\tpinch: false\n\t\t}\n\t};\n\t/**\n\t *\n\t * @param {type} options\n\t * @returns {undefined}\n\t */\n\t$.initGlobal = function(options) {\n\t\t$.options = $.extend(true, $.global, options);\n\t\treturn this;\n\t};\n\tvar inits = {};\n\n\t/**\n\t * 单页配置 初始化\n\t * @param {object} options\n\t */\n\t$.init = function(options) {\n\t\t$.options = $.extend(true, $.global, options || {});\n\t\t$.ready(function() {\n\t\t\t$.doAction('inits', function(index, init) {\n\t\t\t\tvar isInit = !!(!inits[init.name] || init.repeat);\n\t\t\t\tif(isInit) {\n\t\t\t\t\tinit.handle.call($);\n\t\t\t\t\tinits[init.name] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn this;\n\t};\n\n\t/**\n\t * 增加初始化执行流程\n\t * @param {function} init\n\t */\n\t$.addInit = function(init) {\n\t\treturn $.addAction('inits', init);\n\t};\n\t/**\n\t * 处理html5版本subpages \n\t */\n\t$.addInit({\n\t\tname: 'iframe',\n\t\tindex: 100,\n\t\thandle: function() {\n\t\t\tvar options = $.options;\n\t\t\tvar subpages = options.subpages || [];\n\t\t\tif(!$.os.plus && subpages.length) {\n\t\t\t\t//暂时只处理单个subpage。后续可以考虑支持多个subpage\n\t\t\t\tcreateIframe(subpages[0]);\n\t\t\t}\n\t\t}\n\t});\n\tvar createIframe = function(options) {\n\t\tvar wrapper = document.createElement('div');\n\t\twrapper.className = 'mui-iframe-wrapper';\n\t\tvar styles = options.styles || {};\n\t\tif(typeof styles.top !== 'string') {\n\t\t\tstyles.top = '0px';\n\t\t}\n\t\tif(typeof styles.bottom !== 'string') {\n\t\t\tstyles.bottom = '0px';\n\t\t}\n\t\twrapper.style.top = styles.top;\n\t\twrapper.style.bottom = styles.bottom;\n\t\tvar iframe = document.createElement('iframe');\n\t\tiframe.src = options.url;\n\t\tiframe.id = options.id || options.url;\n\t\tiframe.name = iframe.id;\n\t\twrapper.appendChild(iframe);\n\t\tdocument.body.appendChild(wrapper);\n\t\t//目前仅处理微信\n\t\t$.os.wechat && handleScroll(wrapper, iframe);\n\t};\n\n\tfunction handleScroll(wrapper, iframe) {\n\t\tvar key = 'MUI_SCROLL_POSITION_' + document.location.href + '_' + iframe.src;\n\t\tvar scrollTop = (parseFloat(localStorage.getItem(key)) || 0);\n\t\tif(scrollTop) {\n\t\t\t(function(y) {\n\t\t\t\tiframe.onload = function() {\n\t\t\t\t\twindow.scrollTo(0, y);\n\t\t\t\t};\n\t\t\t})(scrollTop);\n\t\t}\n\t\tsetInterval(function() {\n\t\t\tvar _scrollTop = window.scrollY;\n\t\t\tif(scrollTop !== _scrollTop) {\n\t\t\t\tlocalStorage.setItem(key, _scrollTop + '');\n\t\t\t\tscrollTop = _scrollTop;\n\t\t\t}\n\t\t}, 100);\n\t};\n\t$(function() {\n\t\tvar classList = document.body.classList;\n\t\tvar os = [];\n\t\tif($.os.ios) {\n\t\t\tos.push({\n\t\t\t\tos: 'ios',\n\t\t\t\tversion: $.os.version\n\t\t\t});\n\t\t\tclassList.add('mui-ios');\n\t\t} else if($.os.android) {\n\t\t\tos.push({\n\t\t\t\tos: 'android',\n\t\t\t\tversion: $.os.version\n\t\t\t});\n\t\t\tclassList.add('mui-android');\n\t\t}\n\t\tif($.os.wechat) {\n\t\t\tos.push({\n\t\t\t\tos: 'wechat',\n\t\t\t\tversion: $.os.wechat.version\n\t\t\t});\n\t\t\tclassList.add('mui-wechat');\n\t\t}\n\t\tif(os.length) {\n\t\t\t$.each(os, function(index, osObj) {\n\t\t\t\tvar version = '';\n\t\t\t\tvar classArray = [];\n\t\t\t\tif(osObj.version) {\n\t\t\t\t\t$.each(osObj.version.split('.'), function(i, v) {\n\t\t\t\t\t\tversion = version + (version ? '-' : '') + v;\n\t\t\t\t\t\tclassList.add($.className(osObj.os + '-' + version));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(mui);\n/**\n * mui.init 5+\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\tvar defaultOptions = {\n\t\tswipeBack: false,\n\t\tpreloadPages: [], //5+ lazyLoad webview\n\t\tpreloadLimit: 10, //预加载窗口的数量限制(一旦超出，先进先出)\n\t\tkeyEventBind: {\n\t\t\tbackbutton: true,\n\t\t\tmenubutton: true\n\t\t},\n\t\ttitleConfig: {\n\t\t\theight: \"44px\",\n\t\t\tbackgroundColor: \"#f7f7f7\", //导航栏背景色\n\t\t\tbottomBorderColor: \"#cccccc\", //底部边线颜色\n\t\t\ttitle: { //标题配置\n\t\t\t\ttext: \"\", //标题文字\n\t\t\t\tposition: {\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\theight: \"100%\"\n\t\t\t\t},\n\t\t\t\tstyles: {\n\t\t\t\t\tcolor: \"#000000\",\n\t\t\t\t\talign: \"center\",\n\t\t\t\t\tfamily: \"'Helvetica Neue',Helvetica,sans-serif\",\n\t\t\t\t\tsize: \"17px\",\n\t\t\t\t\tstyle: \"normal\",\n\t\t\t\t\tweight: \"normal\",\n\t\t\t\t\tfontSrc: \"\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tback: {\n\t\t\t\timage: {\n\t\t\t\t\tbase64Data: '',\n\t\t\t\t\timgSrc: '',\n\t\t\t\t\tsprite: {\n\t\t\t\t\t\ttop: '0px',\n\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\theight: '100%'\n\t\t\t\t\t},\n\t\t\t\t\tposition: {\n\t\t\t\t\t\ttop: \"10px\",\n\t\t\t\t\t\tleft: \"10px\",\n\t\t\t\t\t\twidth: \"24px\",\n\t\t\t\t\t\theight: \"24px\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//默认页面动画\n\tvar defaultShow = {\n\t\tevent: \"titleUpdate\",\n\t\tautoShow: true,\n\t\tduration: 300,\n\t\taniShow: 'slide-in-right',\n\t\textras: {}\n\t};\n\t//若执行了显示动画初始化操作，则要覆盖默认配置\n\tif($.options.show) {\n\t\tdefaultShow = $.extend(true, defaultShow, $.options.show);\n\t}\n\n\t$.currentWebview = null;\n\n\t$.extend(true, $.global, defaultOptions);\n\t$.extend(true, $.options, defaultOptions);\n\t/**\n\t * 等待动画配置\n\t * @param {type} options\n\t * @returns {Object}\n\t */\n\t$.waitingOptions = function(options) {\n\t\treturn $.extend(true, {}, {\n\t\t\tautoShow: true,\n\t\t\ttitle: '',\n\t\t\tmodal: false\n\t\t}, options);\n\t};\n\t/**\n\t * 窗口显示配置\n\t * @param {type} options\n\t * @returns {Object}\n\t */\n\t$.showOptions = function(options) {\n\t\treturn $.extend(true, {}, defaultShow, options);\n\t};\n\t/**\n\t * 窗口默认配置\n\t * @param {type} options\n\t * @returns {Object}\n\t */\n\t$.windowOptions = function(options) {\n\t\treturn $.extend({\n\t\t\tscalable: false,\n\t\t\tbounce: \"\" //vertical\n\t\t}, options);\n\t};\n\t/**\n\t * plusReady\n\t * @param {type} callback\n\t * @returns {_L6.$}\n\t */\n\t$.plusReady = function(callback) {\n\t\tif(window.plus) {\n\t\t\tsetTimeout(function() { //解决callback与plusready事件的执行时机问题(典型案例:showWaiting,closeWaiting)\n\t\t\t\tcallback();\n\t\t\t}, 0);\n\t\t} else {\n\t\t\tdocument.addEventListener(\"plusready\", function() {\n\t\t\t\tcallback();\n\t\t\t}, false);\n\t\t}\n\t\treturn this;\n\t};\n\t/**\n\t * 5+ event(5+没提供之前我自己实现)\n\t * @param {type} webview\n\t * @param {type} eventType\n\t * @param {type} data\n\t * @returns {undefined}\n\t */\n\t$.fire = function(webview, eventType, data) {\n\t\tif(webview) {\n\t\t\tif(typeof data === 'undefined') {\n\t\t\t\tdata = '';\n\t\t\t} else if(typeof data === 'boolean' || typeof data === 'number') {\n\t\t\t\twebview.evalJS(\"typeof mui!=='undefined'&&mui.receive('\" + eventType + \"',\" + data + \")\");\n\t\t\t\treturn;\n\t\t\t} else if($.isPlainObject(data) || $.isArray(data)) {\n\t\t\t\tdata = JSON.stringify(data || {}).replace(/\\'/g, \"\\\\u0027\").replace(/\\\\/g, \"\\\\u005c\");\n\t\t\t}\n\t\t\twebview.evalJS(\"typeof mui!=='undefined'&&mui.receive('\" + eventType + \"','\" + data + \"')\");\n\t\t}\n\t};\n\t/**\n\t * 5+ event(5+没提供之前我自己实现)\n\t * @param {type} eventType\n\t * @param {type} data\n\t * @returns {undefined}\n\t */\n\t$.receive = function(eventType, data) {\n\t\tif(eventType) {\n\t\t\ttry {\n\t\t\t\tif(data && typeof data === 'string') {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t}\n\t\t\t} catch(e) {}\n\t\t\t$.trigger(document, eventType, data);\n\t\t}\n\t};\n\tvar triggerPreload = function(webview) {\n\t\tif(!webview.preloaded) { //保证仅触发一次\n\t\t\t$.fire(webview, 'preload');\n\t\t\tvar list = webview.children();\n\t\t\tfor(var i = 0; i < list.length; i++) {\n\t\t\t\t$.fire(list[i], 'preload');\n\t\t\t}\n\t\t\twebview.preloaded = true;\n\t\t}\n\t};\n\tvar trigger = function(webview, eventType, timeChecked) {\n\t\tif(timeChecked) {\n\t\t\tif(!webview[eventType + 'ed']) {\n\t\t\t\t$.fire(webview, eventType);\n\t\t\t\tvar list = webview.children();\n\t\t\t\tfor(var i = 0; i < list.length; i++) {\n\t\t\t\t\t$.fire(list[i], eventType);\n\t\t\t\t}\n\t\t\t\twebview[eventType + 'ed'] = true;\n\t\t\t}\n\t\t} else {\n\t\t\t$.fire(webview, eventType);\n\t\t\tvar list = webview.children();\n\t\t\tfor(var i = 0; i < list.length; i++) {\n\t\t\t\t$.fire(list[i], eventType);\n\t\t\t}\n\t\t}\n\n\t};\n\t/**\n\t * 打开新窗口\n\t * @param {string} url 要打开的页面地址\n\t * @param {string} id 指定页面ID\n\t * @param {object} options 可选:参数,等待,窗口,显示配置{params:{},waiting:{},styles:{},show:{}}\n\t */\n\t$.openWindow = function(url, id, options) {\n\t\tif(typeof url === 'object') {\n\t\t\toptions = url;\n\t\t\turl = options.url;\n\t\t\tid = options.id || url;\n\t\t} else {\n\t\t\tif(typeof id === 'object') {\n\t\t\t\toptions = id;\n\t\t\t\tid = options.id || url;\n\t\t\t} else {\n\t\t\t\tid = id || url;\n\t\t\t}\n\t\t}\n\t\tif(!$.os.plus) {\n\t\t\t//TODO 先临时这么处理：手机上顶层跳，PC上parent跳\n\t\t\tif($.os.ios || $.os.android) {\n\t\t\t\twindow.top.location.href = url;\n\t\t\t} else {\n\t\t\t\twindow.parent.location.href = url;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif(!window.plus) {\n\t\t\treturn;\n\t\t}\n\n\t\toptions = options || {};\n\t\tvar params = options.params || {};\n\t\tvar webview = null,\n\t\t\twebviewCache = null,\n\t\t\tnShow, nWaiting;\n\n\t\tif($.webviews[id]) {\n\t\t\twebviewCache = $.webviews[id];\n\t\t\t//webview真实存在，才能获取\n\t\t\tif(plus.webview.getWebviewById(id)) {\n\t\t\t\twebview = webviewCache.webview;\n\t\t\t}\n\t\t} else if(options.createNew !== true) {\n\t\t\twebview = plus.webview.getWebviewById(id);\n\t\t}\n\n\t\tif(webview) { //已缓存\n\t\t\t//每次show都需要传递动画参数；\n\t\t\t//预加载的动画参数优先级：openWindow配置>preloadPages配置>mui默认配置；\n\t\t\tnShow = webviewCache ? webviewCache.show : defaultShow;\n\t\t\tnShow = options.show ? $.extend(nShow, options.show) : nShow;\n\t\t\tnShow.autoShow && webview.show(nShow.aniShow, nShow.duration, function() {\n\t\t\t\ttriggerPreload(webview);\n\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\n\t\t\t});\n\t\t\tif(webviewCache) {\n\t\t\t\twebviewCache.afterShowMethodName && webview.evalJS(webviewCache.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n\t\t\t}\n\t\t\treturn webview;\n\t\t} else { //新窗口\n\t\t\tif(!url) {\n\t\t\t\tthrow new Error('webview[' + id + '] does not exist');\n\t\t\t}\n\n\t\t\t//显示waiting\n\t\t\tvar waitingConfig = $.waitingOptions(options.waiting);\n\t\t\tif(waitingConfig.autoShow) {\n\t\t\t\tnWaiting = plus.nativeUI.showWaiting(waitingConfig.title, waitingConfig.options);\n\t\t\t}\n\n\t\t\t//创建页面\n\t\t\toptions = $.extend(options, {\n\t\t\t\tid: id,\n\t\t\t\turl: url\n\t\t\t});\n\n\t\t\twebview = $.createWindow(options);\n\n\t\t\t//显示\n\t\t\tnShow = $.showOptions(options.show);\n\t\t\tif(nShow.autoShow) {\n\t\t\t\tvar showWebview = function() {\n\t\t\t\t\t//关闭等待框\n\t\t\t\t\tif(nWaiting) {\n\t\t\t\t\t\tnWaiting.close();\n\t\t\t\t\t}\n\t\t\t\t\t//显示页面\n\t\t\t\t\twebview.show(nShow.aniShow, nShow.duration, function() {}, nShow.extras);\n\t\t\t\t\toptions.afterShowMethodName && webview.evalJS(options.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n\t\t\t\t};\n\t\t\t\t//titleUpdate触发时机早于loaded，更换为titleUpdate后，可以更早的显示webview\n\t\t\t\twebview.addEventListener(nShow.event, showWebview, false);\n\t\t\t\t//loaded事件发生后，触发预加载和pagebeforeshow事件\n\t\t\t\twebview.addEventListener(\"loaded\", function() {\n\t\t\t\t\ttriggerPreload(webview);\n\t\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t\treturn webview;\n\t};\n\n\t$.openWindowWithTitle = function(options, titleConfig) {\n\t\toptions = options || {};\n\t\tvar url = options.url;\n\t\tvar id = options.id || url;\n\n\t\tif(!$.os.plus) {\n\t\t\t//TODO 先临时这么处理：手机上顶层跳，PC上parent跳\n\t\t\tif($.os.ios || $.os.android) {\n\t\t\t\twindow.top.location.href = url;\n\t\t\t} else {\n\t\t\t\twindow.parent.location.href = url;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif(!window.plus) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar params = options.params || {};\n\t\tvar webview = null,\n\t\t\twebviewCache = null,\n\t\t\tnShow, nWaiting;\n\n\t\tif($.webviews[id]) {\n\t\t\twebviewCache = $.webviews[id];\n\t\t\t//webview真实存在，才能获取\n\t\t\tif(plus.webview.getWebviewById(id)) {\n\t\t\t\twebview = webviewCache.webview;\n\t\t\t}\n\t\t} else if(options.createNew !== true) {\n\t\t\twebview = plus.webview.getWebviewById(id);\n\t\t}\n\n\t\tif(webview) { //已缓存\n\t\t\t//每次show都需要传递动画参数；\n\t\t\t//预加载的动画参数优先级：openWindow配置>preloadPages配置>mui默认配置；\n\t\t\tnShow = webviewCache ? webviewCache.show : defaultShow;\n\t\t\tnShow = options.show ? $.extend(nShow, options.show) : nShow;\n\t\t\tnShow.autoShow && webview.show(nShow.aniShow, nShow.duration, function() {\n\t\t\t\ttriggerPreload(webview);\n\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\n\t\t\t});\n\t\t\tif(webviewCache) {\n\t\t\t\twebviewCache.afterShowMethodName && webview.evalJS(webviewCache.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n\t\t\t}\n\t\t\treturn webview;\n\t\t} else { //新窗口\n\t\t\tif(!url) {\n\t\t\t\tthrow new Error('webview[' + id + '] does not exist');\n\t\t\t}\n\n\t\t\t//显示waiting\n\t\t\tvar waitingConfig = $.waitingOptions(options.waiting);\n\t\t\tif(waitingConfig.autoShow) {\n\t\t\t\tnWaiting = plus.nativeUI.showWaiting(waitingConfig.title, waitingConfig.options);\n\t\t\t}\n\n\t\t\t//创建页面\n\t\t\toptions = $.extend(options, {\n\t\t\t\tid: id,\n\t\t\t\turl: url\n\t\t\t});\n\n\t\t\twebview = $.createWindow(options);\n\n\t\t\tif(titleConfig) { //处理原生头\n\t\t\t\t$.extend(true, $.options.titleConfig, titleConfig);\n\t\t\t\tvar tid = $.options.titleConfig.id ? $.options.titleConfig.id : id + \"_title\";\n\t\t\t\tvar view = new plus.nativeObj.View(tid, {\n\t\t\t\t\ttop: 0,\n\t\t\t\t\theight: $.options.titleConfig.height,\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\tdock: \"top\",\n\t\t\t\t\tposition: \"dock\"\n\t\t\t\t});\n\t\t\t\tview.drawRect($.options.titleConfig.backgroundColor); //绘制背景色\n\t\t\t\tvar _b = parseInt($.options.titleConfig.height) - 1;\n\t\t\t\tview.drawRect($.options.titleConfig.bottomBorderColor, {\n\t\t\t\t\ttop: _b + \"px\",\n\t\t\t\t\tleft: \"0px\"\n\t\t\t\t}); //绘制底部边线\n\n\t\t\t\t//绘制文字\n\t\t\t\tif($.options.titleConfig.title.text) {\n\t\t\t\t\tvar _title = $.options.titleConfig.title;\n\t\t\t\t\tview.drawText(_title.text, _title.position, _title.styles);\n\t\t\t\t}\n\n\t\t\t\t//返回图标绘制\n\t\t\t\tvar _back = $.options.titleConfig.back;\n\t\t\t\tvar backClick = null;\n\t\t\t\t//优先字体\n\n\t\t\t\t//其次是图片\n\t\t\t\tvar _backImage = _back.image;\n\t\t\t\tif(_backImage.base64Data || _backImage.imgSrc) {\n\t\t\t\t\t//TODO 此处需要处理百分比的情况\n\t\t\t\t\tbackClick = {\n\t\t\t\t\t\tleft: parseInt(_backImage.position.left),\n\t\t\t\t\t\tright: parseInt(_backImage.position.left) + parseInt(_backImage.position.width)\n\t\t\t\t\t};\n\t\t\t\t\tvar bitmap = new plus.nativeObj.Bitmap(id + \"_back\");\n\t\t\t\t\tif(_backImage.base64Data) { //优先base64编码字符串\n\t\t\t\t\t\tbitmap.loadBase64Data(_backImage.base64Data);\n\t\t\t\t\t} else { //其次加载图片文件\n\t\t\t\t\t\tbitmap.load(_backImage.imgSrc);\n\t\t\t\t\t}\n\t\t\t\t\tview.drawBitmap(bitmap, _backImage.sprite, _backImage.position);\n\t\t\t\t}\n\n\t\t\t\t//处理点击事件\n\t\t\t\tview.setTouchEventRect({\n\t\t\t\t\ttop: \"0px\",\n\t\t\t\t\tleft: \"0px\",\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\theight: \"100%\"\n\t\t\t\t});\n\t\t\t\tview.interceptTouchEvent(true);\n\t\t\t\tview.addEventListener(\"click\", function(e) {\n\t\t\t\t\tvar x = e.clientX;\n\n\t\t\t\t\t//返回按钮点击\n\t\t\t\t\tif(backClick && x > backClick.left && x < backClick.right) {\n\t\t\t\t\t\tif(_back.click && $.isFunction(_back.click)) {\n\t\t\t\t\t\t\t_back.click();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twebview.evalJS(\"window.mui&&mui.back();\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\t\t\t\twebview.append(view);\n\n\t\t\t}\n\n\t\t\t//显示\n\t\t\tnShow = $.showOptions(options.show);\n\t\t\tif(nShow.autoShow) {\n\t\t\t\t//titleUpdate触发时机早于loaded，更换为titleUpdate后，可以更早的显示webview\n\t\t\t\twebview.addEventListener(nShow.event, function() {\n\t\t\t\t\t//关闭等待框\n\t\t\t\t\tif(nWaiting) {\n\t\t\t\t\t\tnWaiting.close();\n\t\t\t\t\t}\n\t\t\t\t\t//显示页面\n\t\t\t\t\twebview.show(nShow.aniShow, nShow.duration, function() {}, nShow.extras);\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t\treturn webview;\n\t};\n\n\t/**\n\t * 根据配置信息创建一个webview\n\t * @param {type} options\n\t * @param {type} isCreate\n\t * @returns {webview}\n\t */\n\t$.createWindow = function(options, isCreate) {\n\t\tif(!window.plus) {\n\t\t\treturn;\n\t\t}\n\t\tvar id = options.id || options.url;\n\t\tvar webview;\n\t\tif(options.preload) {\n\t\t\tif($.webviews[id] && $.webviews[id].webview.getURL()) { //已经cache\n\t\t\t\twebview = $.webviews[id].webview;\n\t\t\t} else { //新增预加载窗口\n\t\t\t\t//判断是否携带createNew参数，默认为false\n\t\t\t\tif(options.createNew !== true) {\n\t\t\t\t\twebview = plus.webview.getWebviewById(id);\n\t\t\t\t}\n\n\t\t\t\t//之前没有，那就新创建\t\n\t\t\t\tif(!webview) {\n\t\t\t\t\twebview = plus.webview.create(options.url, id, $.windowOptions(options.styles), $.extend({\n\t\t\t\t\t\tpreload: true\n\t\t\t\t\t}, options.extras));\n\t\t\t\t\tif(options.subpages) {\n\t\t\t\t\t\t$.each(options.subpages, function(index, subpage) {\n\t\t\t\t\t\t\tvar subpageId = subpage.id || subpage.url;\n\t\t\t\t\t\t\tif(subpageId) { //过滤空对象\n\t\t\t\t\t\t\t\tvar subWebview = plus.webview.getWebviewById(subpageId);\n\t\t\t\t\t\t\t\tif(!subWebview) { //如果该webview不存在，则创建\n\t\t\t\t\t\t\t\t\tsubWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), $.extend({\n\t\t\t\t\t\t\t\t\t\tpreload: true\n\t\t\t\t\t\t\t\t\t}, subpage.extras));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twebview.append(subWebview);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//TODO 理论上，子webview也应该计算到预加载队列中，但这样就麻烦了，要退必须退整体，否则可能出现问题；\n\t\t\t$.webviews[id] = {\n\t\t\t\twebview: webview, //目前仅preload的缓存webview\n\t\t\t\tpreload: true,\n\t\t\t\tshow: $.showOptions(options.show),\n\t\t\t\tafterShowMethodName: options.afterShowMethodName //就不应该用evalJS。应该是通过事件消息通讯\n\t\t\t};\n\t\t\t//索引该预加载窗口\n\t\t\tvar preloads = $.data.preloads;\n\t\t\tvar index = preloads.indexOf(id);\n\t\t\tif(~index) { //删除已存在的(变相调整插入位置)\n\t\t\t\tpreloads.splice(index, 1);\n\t\t\t}\n\t\t\tpreloads.push(id);\n\t\t\tif(preloads.length > $.options.preloadLimit) {\n\t\t\t\t//先进先出\n\t\t\t\tvar first = $.data.preloads.shift();\n\t\t\t\tvar webviewCache = $.webviews[first];\n\t\t\t\tif(webviewCache && webviewCache.webview) {\n\t\t\t\t\t//需要将自己打开的所有页面，全部close；\n\t\t\t\t\t//关闭该预加载webview\t\n\t\t\t\t\t$.closeAll(webviewCache.webview);\n\t\t\t\t}\n\t\t\t\t//删除缓存\n\t\t\t\tdelete $.webviews[first];\n\t\t\t}\n\t\t} else {\n\t\t\tif(isCreate !== false) { //直接创建非预加载窗口\n\t\t\t\twebview = plus.webview.create(options.url, id, $.windowOptions(options.styles), options.extras);\n\t\t\t\tif(options.subpages) {\n\t\t\t\t\t$.each(options.subpages, function(index, subpage) {\n\t\t\t\t\t\tvar subpageId = subpage.id || subpage.url;\n\t\t\t\t\t\tvar subWebview = plus.webview.getWebviewById(subpageId);\n\t\t\t\t\t\tif(!subWebview) {\n\t\t\t\t\t\t\tsubWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), subpage.extras);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebview.append(subWebview);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn webview;\n\t};\n\n\t/**\n\t * 预加载\n\t */\n\t$.preload = function(options) {\n\t\t//调用预加载函数，不管是否传递preload参数，强制变为true\n\t\tif(!options.preload) {\n\t\t\toptions.preload = true;\n\t\t}\n\t\treturn $.createWindow(options);\n\t};\n\n\t/**\n\t *关闭当前webview打开的所有webview；\n\t */\n\t$.closeOpened = function(webview) {\n\t\tvar opened = webview.opened();\n\t\tif(opened) {\n\t\t\tfor(var i = 0, len = opened.length; i < len; i++) {\n\t\t\t\tvar openedWebview = opened[i];\n\t\t\t\tvar open_open = openedWebview.opened();\n\t\t\t\tif(open_open && open_open.length > 0) {\n\t\t\t\t\t//关闭打开的webview\n\t\t\t\t\t$.closeOpened(openedWebview);\n\t\t\t\t\t//关闭自己\n\t\t\t\t\topenedWebview.close(\"none\");\n\t\t\t\t} else {\n\t\t\t\t\t//如果直接孩子节点，就不用关闭了，因为父关闭的时候，会自动关闭子；\n\t\t\t\t\tif(openedWebview.parent() !== webview) {\n\t\t\t\t\t\topenedWebview.close('none');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t$.closeAll = function(webview, aniShow) {\n\t\t$.closeOpened(webview);\n\t\tif(aniShow) {\n\t\t\twebview.close(aniShow);\n\t\t} else {\n\t\t\twebview.close();\n\t\t}\n\t};\n\n\t/**\n\t * 批量创建webview\n\t * @param {type} options\n\t * @returns {undefined}\n\t */\n\t$.createWindows = function(options) {\n\t\t$.each(options, function(index, option) {\n\t\t\t//初始化预加载窗口(创建)和非预加载窗口(仅配置，不创建)\n\t\t\t$.createWindow(option, false);\n\t\t});\n\t};\n\t/**\n\t * 创建当前页面的子webview\n\t * @param {type} options\n\t * @returns {webview}\n\t */\n\t$.appendWebview = function(options) {\n\t\tif(!window.plus) {\n\t\t\treturn;\n\t\t}\n\t\tvar id = options.id || options.url;\n\t\tvar webview;\n\t\tif(!$.webviews[id]) { //保证执行一遍\n\t\t\t//TODO 这里也有隐患，比如某个webview不是作为subpage创建的，而是作为target webview的话；\n\t\t\tif(!plus.webview.getWebviewById(id)) {\n\t\t\t\twebview = plus.webview.create(options.url, id, options.styles, options.extras);\n\t\t\t}\n\t\t\t//之前的实现方案：子窗口loaded之后再append到父窗口中；\n\t\t\t//问题：部分子窗口loaded事件发生较晚，此时执行父窗口的children方法会返回空，导致父子通讯失败；\n\t\t\t//     比如父页面执行完preload事件后，需触发子页面的preload事件，此时未append的话，就无法触发；\n\t\t\t//修改方式：不再监控loaded事件，直接append\n\t\t\t//by chb@20150521\n\t\t\t// webview.addEventListener('loaded', function() {\n\t\t\tplus.webview.currentWebview().append(webview);\n\t\t\t// });\n\t\t\t$.webviews[id] = options;\n\n\t\t}\n\t\treturn webview;\n\t};\n\n\t//全局webviews\n\t$.webviews = {};\n\t//预加载窗口索引\n\t$.data.preloads = [];\n\t//$.currentWebview\n\t$.plusReady(function() {\n\t\t$.currentWebview = plus.webview.currentWebview();\n\t});\n\t$.addInit({\n\t\tname: '5+',\n\t\tindex: 100,\n\t\thandle: function() {\n\t\t\tvar options = $.options;\n\t\t\tvar subpages = options.subpages || [];\n\t\t\tif($.os.plus) {\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\t//TODO  这里需要判断一下，最好等子窗口加载完毕后，再调用主窗口的show方法；\n\t\t\t\t\t//或者：在openwindow方法中，监听实现；\n\t\t\t\t\t$.each(subpages, function(index, subpage) {\n\t\t\t\t\t\t$.appendWebview(subpage);\n\t\t\t\t\t});\n\t\t\t\t\t//判断是否首页\n\t\t\t\t\tif(plus.webview.currentWebview() === plus.webview.getWebviewById(plus.runtime.appid)) {\n\t\t\t\t\t\t//首页需要自己激活预加载；\n\t\t\t\t\t\t//timeout因为子页面loaded之后才append的，防止子页面尚未append、从而导致其preload未触发的问题；\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\ttriggerPreload(plus.webview.currentWebview());\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}\n\t\t\t\t\t//设置ios顶部状态栏颜色；\n\t\t\t\t\tif($.os.ios && $.options.statusBarBackground) {\n\t\t\t\t\t\tplus.navigator.setStatusBarBackground($.options.statusBarBackground);\n\t\t\t\t\t}\n\t\t\t\t\tif($.os.android && parseFloat($.os.version) < 4.4) {\n\t\t\t\t\t\t//解决Android平台4.4版本以下，resume后，父窗体标题延迟渲染的问题；\n\t\t\t\t\t\tif(plus.webview.currentWebview().parent() == null) {\n\t\t\t\t\t\t\tdocument.addEventListener(\"resume\", function() {\n\t\t\t\t\t\t\t\tvar body = document.body;\n\t\t\t\t\t\t\t\tbody.style.display = 'none';\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tbody.style.display = '';\n\t\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//已支持iframe嵌入\n\t\t\t\t//\t\t\t\tif (subpages.length > 0) {\n\t\t\t\t//\t\t\t\t\tvar err = document.createElement('div');\n\t\t\t\t//\t\t\t\t\terr.className = 'mui-error';\n\t\t\t\t//\t\t\t\t\t//文字描述\n\t\t\t\t//\t\t\t\t\tvar span = document.createElement('span');\n\t\t\t\t//\t\t\t\t\tspan.innerHTML = '在该浏览器下，不支持创建子页面，具体参考';\n\t\t\t\t//\t\t\t\t\terr.appendChild(span);\n\t\t\t\t//\t\t\t\t\tvar a = document.createElement('a');\n\t\t\t\t//\t\t\t\t\ta.innerHTML = '\"mui框架适用场景\"';\n\t\t\t\t//\t\t\t\t\ta.href = 'http://ask.dcloud.net.cn/article/113';\n\t\t\t\t//\t\t\t\t\terr.appendChild(a);\n\t\t\t\t//\t\t\t\t\tdocument.body.appendChild(err);\n\t\t\t\t//\t\t\t\t\tconsole.log('在该浏览器下，不支持创建子页面');\n\t\t\t\t//\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\t});\n\twindow.addEventListener('preload', function() {\n\t\t//处理预加载部分\n\t\tvar webviews = $.options.preloadPages || [];\n\t\t$.plusReady(function() {\n\t\t\t$.each(webviews, function(index, webview) {\n\t\t\t\t$.createWindow($.extend(webview, {\n\t\t\t\t\tpreload: true\n\t\t\t\t}));\n\t\t\t});\n\n\t\t});\n\t});\n\t$.supportStatusbarOffset = function() {\n\t\treturn $.os.plus && $.os.ios && parseFloat($.os.version) >= 7;\n\t};\n\t$.ready(function() {\n\t\t//标识当前环境支持statusbar\n\t\tif($.supportStatusbarOffset()) {\n\t\t\tdocument.body.classList.add('mui-statusbar');\n\t\t}\n\t});\n})(mui);\n\n/**\n * mui back\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n\t/**\n\t * register back\n\t * @param {type} back\n\t * @returns {$.gestures}\n\t */\n\t$.addBack = function(back) {\n\t\treturn $.addAction('backs', back);\n\t};\n\t/**\n\t * default\n\t */\n\t$.addBack({\n\t\tname: 'browser',\n\t\tindex: 100,\n\t\thandle: function() {\n\t\t\tif(window.history.length > 1) {\n\t\t\t\twindow.history.back();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t});\n\t/**\n\t * 后退\n\t */\n\t$.back = function() {\n\t\tif(typeof $.options.beforeback === 'function') {\n\t\t\tif($.options.beforeback() === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$.doAction('backs');\n\t};\n\twindow.addEventListener('tap', function(e) {\n\t\tvar action = $.targets.action;\n\t\tif(action && action.classList.contains('mui-action-back')) {\n\t\t\t$.back();\n\t\t\t$.targets.action = false;\n\t\t}\n\t});\n\twindow.addEventListener('swiperight', function(e) {\n\t\tvar detail = e.detail;\n\t\tif($.options.swipeBack === true && Math.abs(detail.angle) < 3) {\n\t\t\t$.back();\n\t\t}\n\t});\n\n})(mui, window);\n/**\n * mui back 5+\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n\tif($.os.plus && $.os.android) {\n\t\t$.addBack({\n\t\t\tname: 'mui',\n\t\t\tindex: 5,\n\t\t\thandle: function() {\n\t\t\t\t//后续重新设计此处，将back放到各个空间内部实现\n\t\t\t\t//popover\n\t\t\t\tif($.targets._popover && $.targets._popover.classList.contains('mui-active')) {\n\t\t\t\t\t$($.targets._popover).popover('hide');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t//offcanvas\n\t\t\t\tvar offCanvas = document.querySelector('.mui-off-canvas-wrap.mui-active');\n\t\t\t\tif(offCanvas) {\n\t\t\t\t\t$(offCanvas).offCanvas('close');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar previewImage = $.isFunction($.getPreviewImage) && $.getPreviewImage();\n\t\t\t\tif(previewImage && previewImage.isShown()) {\n\t\t\t\t\tpreviewImage.close();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t//popup\n\t\t\t\treturn $.closePopup();\n\t\t\t}\n\t\t});\n\t}\n\t//首次按下back按键的时间\n\t$.__back__first = null;\n\t/**\n\t * 5+ back\n\t */\n\t$.addBack({\n\t\tname: '5+',\n\t\tindex: 10,\n\t\thandle: function() {\n\t\t\tif(!window.plus) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar wobj = plus.webview.currentWebview();\n\t\t\tvar parent = wobj.parent();\n\t\t\tif(parent) {\n\t\t\t\tparent.evalJS('mui&&mui.back();');\n\t\t\t} else {\n\t\t\t\twobj.canBack(function(e) {\n\t\t\t\t\t//by chb 暂时注释，在碰到类似popover之类的锚点的时候，需多次点击才能返回；\n\t\t\t\t\tif(e.canBack) { //webview history back\n\t\t\t\t\t\twindow.history.back();\n\t\t\t\t\t} else { //webview close or hide\n\t\t\t\t\t\t//fixed by fxy 此处不应该用opener判断，因为用户有可能自己close掉当前窗口的opener。这样的话。opener就为空了，导致不能执行close\n\t\t\t\t\t\tif(wobj.id === plus.runtime.appid) { //首页\n\t\t\t\t\t\t\t//首页不存在opener的情况下，后退实际上应该是退出应用；\n\t\t\t\t\t\t\t//首次按键，提示‘再按一次退出应用’\n\t\t\t\t\t\t\tif(!$.__back__first) {\n\t\t\t\t\t\t\t\t$.__back__first = new Date().getTime();\n\t\t\t\t\t\t\t\tmui.toast('再按一次退出应用');\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t$.__back__first = null;\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif(new Date().getTime() - $.__back__first < 2000) {\n\t\t\t\t\t\t\t\t\tplus.runtime.quit();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else { //其他页面，\n\t\t\t\t\t\t\tif(wobj.preload) {\n\t\t\t\t\t\t\t\twobj.hide(\"auto\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//关闭页面时，需要将其打开的所有子页面全部关闭；\n\t\t\t\t\t\t\t\t$.closeAll(wobj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t});\n\n\t$.menu = function() {\n\t\tvar menu = document.querySelector('.mui-action-menu');\n\t\tif(menu) {\n\t\t\t$.trigger(menu, $.EVENT_START); //临时处理menu无touchstart的话，找不到当前targets的问题\n\t\t\t$.trigger(menu, 'tap');\n\t\t} else { //执行父窗口的menu\n\t\t\tif(window.plus) {\n\t\t\t\tvar wobj = $.currentWebview;\n\t\t\t\tvar parent = wobj.parent();\n\t\t\t\tif(parent) { //又得evalJS\n\t\t\t\t\tparent.evalJS('mui&&mui.menu();');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tvar __back = function() {\n\t\t$.back();\n\t};\n\tvar __menu = function() {\n\t\t$.menu();\n\t};\n\t//默认监听\n\t$.plusReady(function() {\n\t\tif($.options.keyEventBind.backbutton) {\n\t\t\tplus.key.addEventListener('backbutton', __back, false);\n\t\t}\n\t\tif($.options.keyEventBind.menubutton) {\n\t\t\tplus.key.addEventListener('menubutton', __menu, false);\n\t\t}\n\t});\n\t//处理按键监听事件\n\t$.addInit({\n\t\tname: 'keyEventBind',\n\t\tindex: 1000,\n\t\thandle: function() {\n\t\t\t$.plusReady(function() {\n\t\t\t\t//如果不为true，则移除默认监听\n\t\t\t\tif(!$.options.keyEventBind.backbutton) {\n\t\t\t\t\tplus.key.removeEventListener('backbutton', __back);\n\t\t\t\t}\n\t\t\t\tif(!$.options.keyEventBind.menubutton) {\n\t\t\t\t\tplus.key.removeEventListener('menubutton', __menu);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(mui, window);\n/**\n * mui.init pulldownRefresh\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\t$.addInit({\n\t\tname: 'pullrefresh',\n\t\tindex: 1000,\n\t\thandle: function() {\n\t\t\tvar options = $.options;\n\t\t\tvar pullRefreshOptions = options.pullRefresh || {};\n\t\t\tvar hasPulldown = pullRefreshOptions.down && pullRefreshOptions.down.hasOwnProperty('callback');\n\t\t\tvar hasPullup = pullRefreshOptions.up && pullRefreshOptions.up.hasOwnProperty('callback');\n\t\t\tif(hasPulldown || hasPullup) {\n\t\t\t\tvar container = pullRefreshOptions.container;\n\t\t\t\tif(container) {\n\t\t\t\t\tvar $container = $(container);\n\t\t\t\t\tif($container.length === 1) {\n\t\t\t\t\t\tif($.os.plus) { //5+环境\n\t\t\t\t\t\t\tif(hasPulldown && pullRefreshOptions.down.style == \"circle\") { //原生转圈\n\t\t\t\t\t\t\t\t$.plusReady(function() {\n\t\t\t\t\t\t\t\t\t//这里改写$.fn.pullRefresh\n\t\t\t\t\t\t\t\t\t$.fn.pullRefresh = $.fn.pullRefresh_native;\n\t\t\t\t\t\t\t\t\t$container.pullRefresh(pullRefreshOptions);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t} else if($.os.android) { //非原生转圈，但是Android环境\n\t\t\t\t\t\t\t\t$.plusReady(function() {\n\t\t\t\t\t\t\t\t\t//这里改写$.fn.pullRefresh\n\t\t\t\t\t\t\t\t\t$.fn.pullRefresh = $.fn.pullRefresh_native\n\t\t\t\t\t\t\t\t\tvar webview = plus.webview.currentWebview();\n\t\t\t\t\t\t\t\t\tif(window.__NWin_Enable__ === false) { //不支持多webview\n\t\t\t\t\t\t\t\t\t\t$container.pullRefresh(pullRefreshOptions);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif(hasPullup) {\n\t\t\t\t\t\t\t\t\t\t\t//当前页面初始化pullup\n\t\t\t\t\t\t\t\t\t\t\tvar upOptions = {};\n\t\t\t\t\t\t\t\t\t\t\tupOptions.up = pullRefreshOptions.up;\n\t\t\t\t\t\t\t\t\t\t\tupOptions.webviewId = webview.id || webview.getURL();\n\t\t\t\t\t\t\t\t\t\t\t$container.pullRefresh(upOptions);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif(hasPulldown) {\n\t\t\t\t\t\t\t\t\t\t\tvar parent = webview.parent();\n\t\t\t\t\t\t\t\t\t\t\tvar id = webview.id || webview.getURL();\n\t\t\t\t\t\t\t\t\t\t\tif(parent) {\n\t\t\t\t\t\t\t\t\t\t\t\tif(!hasPullup) { //如果没有上拉加载，需要手动初始化一个默认的pullRefresh，以便当前页面容器可以调用endPulldownToRefresh等方法\n\t\t\t\t\t\t\t\t\t\t\t\t\t$container.pullRefresh({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twebviewId: id\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tvar downOptions = {\n\t\t\t\t\t\t\t\t\t\t\t\t\twebviewId: id //子页面id\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\tdownOptions.down = $.extend({}, pullRefreshOptions.down);\n\t\t\t\t\t\t\t\t\t\t\t\tdownOptions.down.callback = '_CALLBACK';\n\t\t\t\t\t\t\t\t\t\t\t\t//改写父页面的$.fn.pullRefresh\n\t\t\t\t\t\t\t\t\t\t\t\tparent.evalJS(\"mui.fn.pullRefresh=mui.fn.pullRefresh_native\");\n\t\t\t\t\t\t\t\t\t\t\t\t//父页面初始化pulldown\n\t\t\t\t\t\t\t\t\t\t\t\tparent.evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify(downOptions) + \"')\");\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else { //非原生转圈，iOS环境\n\t\t\t\t\t\t\t\t$container.pullRefresh(pullRefreshOptions);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$container.pullRefresh(pullRefreshOptions);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n})(mui);\n/**\n * mui ajax\n * @param {type} $\n * @returns {undefined}\n */\n(function($, window, undefined) {\n\n\tvar jsonType = 'application/json';\n\tvar htmlType = 'text/html';\n\tvar rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi;\n\tvar scriptTypeRE = /^(?:text|application)\\/javascript/i;\n\tvar xmlTypeRE = /^(?:text|application)\\/xml/i;\n\tvar blankRE = /^\\s*$/;\n\n\t$.ajaxSettings = {\n\t\ttype: 'GET',\n\t\tbeforeSend: $.noop,\n\t\tsuccess: $.noop,\n\t\terror: $.noop,\n\t\tcomplete: $.noop,\n\t\tcontext: null,\n\t\txhr: function(protocol) {\n\t\t\treturn new window.XMLHttpRequest();\n\t\t},\n\t\taccepts: {\n\t\t\tscript: 'text/javascript, application/javascript, application/x-javascript',\n\t\t\tjson: jsonType,\n\t\t\txml: 'application/xml, text/xml',\n\t\t\thtml: htmlType,\n\t\t\ttext: 'text/plain'\n\t\t},\n\t\ttimeout: 0,\n\t\tprocessData: true,\n\t\tcache: true\n\t};\n\tvar ajaxBeforeSend = function(xhr, settings) {\n\t\tvar context = settings.context\n\t\tif(settings.beforeSend.call(context, xhr, settings) === false) {\n\t\t\treturn false;\n\t\t}\n\t};\n\tvar ajaxSuccess = function(data, xhr, settings) {\n\t\tsettings.success.call(settings.context, data, 'success', xhr);\n\t\tajaxComplete('success', xhr, settings);\n\t};\n\t// type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n\tvar ajaxError = function(error, type, xhr, settings) {\n\t\tsettings.error.call(settings.context, xhr, type, error);\n\t\tajaxComplete(type, xhr, settings);\n\t};\n\t// status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n\tvar ajaxComplete = function(status, xhr, settings) {\n\t\tsettings.complete.call(settings.context, xhr, status);\n\t};\n\n\tvar serialize = function(params, obj, traditional, scope) {\n\t\tvar type, array = $.isArray(obj),\n\t\t\thash = $.isPlainObject(obj);\n\t\t$.each(obj, function(key, value) {\n\t\t\ttype = $.type(value);\n\t\t\tif(scope) {\n\t\t\t\tkey = traditional ? scope :\n\t\t\t\t\tscope + '[' + (hash || type === 'object' || type === 'array' ? key : '') + ']';\n\t\t\t}\n\t\t\t// handle data in serializeArray() format\n\t\t\tif(!scope && array) {\n\t\t\t\tparams.add(value.name, value.value);\n\t\t\t}\n\t\t\t// recurse into nested objects\n\t\t\telse if(type === \"array\" || (!traditional && type === \"object\")) {\n\t\t\t\tserialize(params, value, traditional, key);\n\t\t\t} else {\n\t\t\t\tparams.add(key, value);\n\t\t\t}\n\t\t});\n\t};\n\tvar serializeData = function(options) {\n\t\tif(options.processData && options.data && typeof options.data !== \"string\") {\n\t\t\tvar contentType = options.contentType;\n\t\t\tif(!contentType && options.headers) {\n\t\t\t\tcontentType = options.headers['Content-Type'];\n\t\t\t}\n\t\t\tif(contentType && ~contentType.indexOf(jsonType)) { //application/json\n\t\t\t\toptions.data = JSON.stringify(options.data);\n\t\t\t} else {\n\t\t\t\toptions.data = $.param(options.data, options.traditional);\n\t\t\t}\n\t\t}\n\t\tif(options.data && (!options.type || options.type.toUpperCase() === 'GET')) {\n\t\t\toptions.url = appendQuery(options.url, options.data);\n\t\t\toptions.data = undefined;\n\t\t}\n\t};\n\tvar appendQuery = function(url, query) {\n\t\tif(query === '') {\n\t\t\treturn url;\n\t\t}\n\t\treturn(url + '&' + query).replace(/[&?]{1,2}/, '?');\n\t};\n\tvar mimeToDataType = function(mime) {\n\t\tif(mime) {\n\t\t\tmime = mime.split(';', 2)[0];\n\t\t}\n\t\treturn mime && (mime === htmlType ? 'html' :\n\t\t\tmime === jsonType ? 'json' :\n\t\t\tscriptTypeRE.test(mime) ? 'script' :\n\t\t\txmlTypeRE.test(mime) && 'xml') || 'text';\n\t};\n\tvar parseArguments = function(url, data, success, dataType) {\n\t\tif($.isFunction(data)) {\n\t\t\tdataType = success, success = data, data = undefined;\n\t\t}\n\t\tif(!$.isFunction(success)) {\n\t\t\tdataType = success, success = undefined;\n\t\t}\n\t\treturn {\n\t\t\turl: url,\n\t\t\tdata: data,\n\t\t\tsuccess: success,\n\t\t\tdataType: dataType\n\t\t};\n\t};\n\t$.ajax = function(url, options) {\n\t\tif(typeof url === \"object\") {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\t\tvar settings = options || {};\n\t\tsettings.url = url || settings.url;\n\t\tfor(var key in $.ajaxSettings) {\n\t\t\tif(settings[key] === undefined) {\n\t\t\t\tsettings[key] = $.ajaxSettings[key];\n\t\t\t}\n\t\t}\n\t\tserializeData(settings);\n\t\tvar dataType = settings.dataType;\n\n\t\tif(settings.cache === false || ((!options || options.cache !== true) && ('script' === dataType))) {\n\t\t\tsettings.url = appendQuery(settings.url, '_=' + $.now());\n\t\t}\n\t\tvar mime = settings.accepts[dataType && dataType.toLowerCase()];\n\t\tvar headers = {};\n\t\tvar setHeader = function(name, value) {\n\t\t\theaders[name.toLowerCase()] = [name, value];\n\t\t};\n\t\tvar protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol;\n\t\tvar xhr = settings.xhr(settings);\n\t\tvar nativeSetHeader = xhr.setRequestHeader;\n\t\tvar abortTimeout;\n\n\t\tsetHeader('X-Requested-With', 'XMLHttpRequest');\n\t\tsetHeader('Accept', mime || '*/*');\n\t\tif(!!(mime = settings.mimeType || mime)) {\n\t\t\tif(mime.indexOf(',') > -1) {\n\t\t\t\tmime = mime.split(',', 2)[0];\n\t\t\t}\n\t\t\txhr.overrideMimeType && xhr.overrideMimeType(mime);\n\t\t}\n\t\tif(settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() !== 'GET')) {\n\t\t\tsetHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded');\n\t\t}\n\t\tif(settings.headers) {\n\t\t\tfor(var name in settings.headers)\n\t\t\t\tsetHeader(name, settings.headers[name]);\n\t\t}\n\t\txhr.setRequestHeader = setHeader;\n\n\t\txhr.onreadystatechange = function() {\n\t\t\tif(xhr.readyState === 4) {\n\t\t\t\txhr.onreadystatechange = $.noop;\n\t\t\t\tclearTimeout(abortTimeout);\n\t\t\t\tvar result, error = false;\n\t\t\t\tvar isLocal = protocol === 'file:';\n\t\t\t\tif((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || (xhr.status === 0 && isLocal && xhr.responseText)) {\n\t\t\t\t\tdataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));\n\t\t\t\t\tresult = xhr.responseText;\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// http://perfectionkills.com/global-eval-what-are-the-options/\n\t\t\t\t\t\tif(dataType === 'script') {\n\t\t\t\t\t\t\t(1, eval)(result);\n\t\t\t\t\t\t} else if(dataType === 'xml') {\n\t\t\t\t\t\t\tresult = xhr.responseXML;\n\t\t\t\t\t\t} else if(dataType === 'json') {\n\t\t\t\t\t\t\tresult = blankRE.test(result) ? null : $.parseJSON(result);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\terror = e;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(error) {\n\t\t\t\t\t\tajaxError(error, 'parsererror', xhr, settings);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tajaxSuccess(result, xhr, settings);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar status = xhr.status ? 'error' : 'abort';\n\t\t\t\t\tvar statusText = xhr.statusText || null;\n\t\t\t\t\tif(isLocal) {\n\t\t\t\t\t\tstatus = 'error';\n\t\t\t\t\t\tstatusText = '404';\n\t\t\t\t\t}\n\t\t\t\t\tajaxError(statusText, status, xhr, settings);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif(ajaxBeforeSend(xhr, settings) === false) {\n\t\t\txhr.abort();\n\t\t\tajaxError(null, 'abort', xhr, settings);\n\t\t\treturn xhr;\n\t\t}\n\n\t\tif(settings.xhrFields) {\n\t\t\tfor(var name in settings.xhrFields) {\n\t\t\t\txhr[name] = settings.xhrFields[name];\n\t\t\t}\n\t\t}\n\n\t\tvar async = 'async' in settings ? settings.async : true;\n\n\t\txhr.open(settings.type.toUpperCase(), settings.url, async, settings.username, settings.password);\n\n\t\tfor(var name in headers) {\n\t\t\tif(headers.hasOwnProperty(name)) {\n\t\t\t\tnativeSetHeader.apply(xhr, headers[name]);\n\t\t\t}\n\t\t}\n\t\tif(settings.timeout > 0) {\n\t\t\tabortTimeout = setTimeout(function() {\n\t\t\t\txhr.onreadystatechange = $.noop;\n\t\t\t\txhr.abort();\n\t\t\t\tajaxError(null, 'timeout', xhr, settings);\n\t\t\t}, settings.timeout);\n\t\t}\n\t\txhr.send(settings.data ? settings.data : null);\n\t\treturn xhr;\n\t};\n\n\t$.param = function(obj, traditional) {\n\t\tvar params = [];\n\t\tparams.add = function(k, v) {\n\t\t\tthis.push(encodeURIComponent(k) + '=' + encodeURIComponent(v));\n\t\t};\n\t\tserialize(params, obj, traditional);\n\t\treturn params.join('&').replace(/%20/g, '+');\n\t};\n\t$.get = function( /* url, data, success, dataType */ ) {\n\t\treturn $.ajax(parseArguments.apply(null, arguments));\n\t};\n\n\t$.post = function( /* url, data, success, dataType */ ) {\n\t\tvar options = parseArguments.apply(null, arguments);\n\t\toptions.type = 'POST';\n\t\treturn $.ajax(options);\n\t};\n\n\t$.getJSON = function( /* url, data, success */ ) {\n\t\tvar options = parseArguments.apply(null, arguments);\n\t\toptions.dataType = 'json';\n\t\treturn $.ajax(options);\n\t};\n\n\t$.fn.load = function(url, data, success) {\n\t\tif(!this.length)\n\t\t\treturn this;\n\t\tvar self = this,\n\t\t\tparts = url.split(/\\s/),\n\t\t\tselector,\n\t\t\toptions = parseArguments(url, data, success),\n\t\t\tcallback = options.success;\n\t\tif(parts.length > 1)\n\t\t\toptions.url = parts[0], selector = parts[1];\n\t\toptions.success = function(response) {\n\t\t\tif(selector) {\n\t\t\t\tvar div = document.createElement('div');\n\t\t\t\tdiv.innerHTML = response.replace(rscript, \"\");\n\t\t\t\tvar selectorDiv = document.createElement('div');\n\t\t\t\tvar childs = div.querySelectorAll(selector);\n\t\t\t\tif(childs && childs.length > 0) {\n\t\t\t\t\tfor(var i = 0, len = childs.length; i < len; i++) {\n\t\t\t\t\t\tselectorDiv.appendChild(childs[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tself[0].innerHTML = selectorDiv.innerHTML;\n\t\t\t} else {\n\t\t\t\tself[0].innerHTML = response;\n\t\t\t}\n\t\t\tcallback && callback.apply(self, arguments);\n\t\t};\n\t\t$.ajax(options);\n\t\treturn this;\n\t};\n\n})(mui, window);\n/**\n * 5+ ajax\n */\n(function($) {\n\tvar originAnchor = document.createElement('a');\n\toriginAnchor.href = window.location.href;\n\t$.plusReady(function() {\n\t\t$.ajaxSettings = $.extend($.ajaxSettings, {\n\t\t\txhr: function(settings) {\n\t\t\t\tif(settings.crossDomain) { //强制使用plus跨域\n\t\t\t\t\treturn new plus.net.XMLHttpRequest();\n\t\t\t\t}\n\t\t\t\t//仅在webview的url为远程文件，且ajax请求的资源不同源下使用plus.net.XMLHttpRequest\n\t\t\t\tif(originAnchor.protocol !== 'file:') {\n\t\t\t\t\tvar urlAnchor = document.createElement('a');\n\t\t\t\t\turlAnchor.href = settings.url;\n\t\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\t\tsettings.crossDomain = (originAnchor.protocol + '//' + originAnchor.host) !== (urlAnchor.protocol + '//' + urlAnchor.host);\n\t\t\t\t\tif(settings.crossDomain) {\n\t\t\t\t\t\treturn new plus.net.XMLHttpRequest();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif($.os.ios && window.webkit && window.webkit.messageHandlers) { //wkwebview下同样使用5+ xhr\n\t\t\t\t\treturn new plus.net.XMLHttpRequest();\n\t\t\t\t}\n\t\t\t\treturn new window.XMLHttpRequest();\n\t\t\t}\n\t\t});\n\t});\n})(mui);\n/**\n * mui layout(offset[,position,width,height...])\n * @param {type} $\n * @param {type} window\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, undefined) {\n\t$.offset = function(element) {\n\t\tvar box = {\n\t\t\ttop: 0,\n\t\t\tleft: 0\n\t\t};\n\t\tif(typeof element.getBoundingClientRect !== undefined) {\n\t\t\tbox = element.getBoundingClientRect();\n\t\t}\n\t\treturn {\n\t\t\ttop: box.top + window.pageYOffset - element.clientTop,\n\t\t\tleft: box.left + window.pageXOffset - element.clientLeft\n\t\t};\n\t};\n})(mui, window);\n/**\n * mui animation\n */\n(function($, window) {\n\t/**\n\t * scrollTo\n\t */\n\t$.scrollTo = function(scrollTop, duration, callback) {\n\t\tduration = duration || 1000;\n\t\tvar scroll = function(duration) {\n\t\t\tif(duration <= 0) {\n\t\t\t\twindow.scrollTo(0, scrollTop);\n\t\t\t\tcallback && callback();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar distaince = scrollTop - window.scrollY;\n\t\t\tsetTimeout(function() {\n\t\t\t\twindow.scrollTo(0, window.scrollY + distaince / duration * 10);\n\t\t\t\tscroll(duration - 10);\n\t\t\t}, 16.7);\n\t\t};\n\t\tscroll(duration);\n\t};\n\t$.animationFrame = function(cb) {\n\t\tvar args, isQueued, context;\n\t\treturn function() {\n\t\t\targs = arguments;\n\t\t\tcontext = this;\n\t\t\tif(!isQueued) {\n\t\t\t\tisQueued = true;\n\t\t\t\trequestAnimationFrame(function() {\n\t\t\t\t\tcb.apply(context, args);\n\t\t\t\t\tisQueued = false;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\n})(mui, window);\n(function($) {\n\tvar initializing = false,\n\t\tfnTest = /xyz/.test(function() {\n\t\t\txyz;\n\t\t}) ? /\\b_super\\b/ : /.*/;\n\n\tvar Class = function() {};\n\tClass.extend = function Fn(prop) {\n\t\tvar _super = this.prototype;\n\t\tinitializing = true;\n\t\tvar prototype = new this();\n\t\tinitializing = false;\n\t\tfor(var name in prop) {\n\t\t\tprototype[name] = typeof prop[name] == \"function\" &&\n\t\t\t\ttypeof _super[name] == \"function\" && fnTest.test(prop[name]) ?\n\t\t\t\t(function(name, fn) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tvar tmp = this._super;\n\n\t\t\t\t\t\tthis._super = _super[name];\n\n\t\t\t\t\t\tvar ret = fn.apply(this, arguments);\n\t\t\t\t\t\tthis._super = tmp;\n\n\t\t\t\t\t\treturn ret;\n\t\t\t\t\t};\n\t\t\t\t})(name, prop[name]) :\n\t\t\t\tprop[name];\n\t\t}\n\n\t\tfunction Class() {\n\t\t\tif(!initializing && this.init)\n\t\t\t\tthis.init.apply(this, arguments);\n\t\t}\n\t\tClass.prototype = prototype;\n\t\tClass.prototype.constructor = Class;\n\t\t//Class.extend = arguments.callee;\n\t\tClass.extend = Fn;\n\t\treturn Class;\n\t};\n\t$.Class = Class;\n})(mui);\n(function($, document, undefined) {\n\tvar CLASS_PULL_TOP_POCKET = 'mui-pull-top-pocket';\n\tvar CLASS_PULL_BOTTOM_POCKET = 'mui-pull-bottom-pocket';\n\tvar CLASS_PULL = 'mui-pull';\n\tvar CLASS_PULL_LOADING = 'mui-pull-loading';\n\tvar CLASS_PULL_CAPTION = 'mui-pull-caption';\n\tvar CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\n\tvar CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\n\tvar CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\n\n\tvar CLASS_ICON = 'mui-icon';\n\tvar CLASS_SPINNER = 'mui-spinner';\n\tvar CLASS_ICON_PULLDOWN = 'mui-icon-pulldown';\n\n\tvar CLASS_BLOCK = 'mui-block';\n\tvar CLASS_HIDDEN = 'mui-hidden';\n\tvar CLASS_VISIBILITY = 'mui-visibility';\n\n\tvar CLASS_LOADING_UP = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\n\tvar CLASS_LOADING_DOWN = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\n\tvar CLASS_LOADING = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_SPINNER;\n\n\tvar pocketHtml = ['<div class=\"' + CLASS_PULL + '\">', '<div class=\"{icon}\"></div>', '<div class=\"' + CLASS_PULL_CAPTION + '\">{contentrefresh}</div>', '</div>'].join('');\n\n\tvar PullRefresh = {\n\t\tinit: function(element, options) {\n\t\t\tthis._super(element, $.extend(true, {\n\t\t\t\tscrollY: true,\n\t\t\t\tscrollX: false,\n\t\t\t\tindicators: true,\n\t\t\t\tdeceleration: 0.003,\n\t\t\t\tdown: {\n\t\t\t\t\theight: 50,\n\t\t\t\t\tcontentinit: '下拉可以刷新',\n\t\t\t\t\tcontentdown: '下拉可以刷新',\n\t\t\t\t\tcontentover: '释放立即刷新',\n\t\t\t\t\tcontentrefresh: '正在刷新...'\n\t\t\t\t},\n\t\t\t\tup: {\n\t\t\t\t\theight: 50,\n\t\t\t\t\tauto: false,\n\t\t\t\t\tcontentinit: '上拉显示更多',\n\t\t\t\t\tcontentdown: '上拉显示更多',\n\t\t\t\t\tcontentrefresh: '正在加载...',\n\t\t\t\t\tcontentnomore: '没有更多数据了',\n\t\t\t\t\tduration: 300\n\t\t\t\t}\n\t\t\t}, options));\n\t\t},\n\t\t_init: function() {\n\t\t\tthis._super();\n\t\t\tthis._initPocket();\n\t\t},\n\t\t_initPulldownRefresh: function() {\n\t\t\tthis.pulldown = true;\n\t\t\tif(this.topPocket) {\n\t\t\t\tthis.pullPocket = this.topPocket;\n\t\t\t\tthis.pullPocket.classList.add(CLASS_BLOCK);\n\t\t\t\tthis.pullPocket.classList.add(CLASS_VISIBILITY);\n\t\t\t\tthis.pullCaption = this.topCaption;\n\t\t\t\tthis.pullLoading = this.topLoading;\n\t\t\t}\n\t\t},\n\t\t_initPullupRefresh: function() {\n\t\t\tthis.pulldown = false;\n\t\t\tif(this.bottomPocket) {\n\t\t\t\tthis.pullPocket = this.bottomPocket;\n\t\t\t\tthis.pullPocket.classList.add(CLASS_BLOCK);\n\t\t\t\tthis.pullPocket.classList.add(CLASS_VISIBILITY);\n\t\t\t\tthis.pullCaption = this.bottomCaption;\n\t\t\t\tthis.pullLoading = this.bottomLoading;\n\t\t\t}\n\t\t},\n\t\t_initPocket: function() {\n\t\t\tvar options = this.options;\n\t\t\tif(options.down && options.down.hasOwnProperty('callback')) {\n\t\t\t\tthis.topPocket = this.scroller.querySelector('.' + CLASS_PULL_TOP_POCKET);\n\t\t\t\tif(!this.topPocket) {\n\t\t\t\t\tthis.topPocket = this._createPocket(CLASS_PULL_TOP_POCKET, options.down, CLASS_LOADING_DOWN);\n\t\t\t\t\tthis.wrapper.insertBefore(this.topPocket, this.wrapper.firstChild);\n\t\t\t\t}\n\t\t\t\tthis.topLoading = this.topPocket.querySelector('.' + CLASS_PULL_LOADING);\n\t\t\t\tthis.topCaption = this.topPocket.querySelector('.' + CLASS_PULL_CAPTION);\n\t\t\t}\n\t\t\tif(options.up && options.up.hasOwnProperty('callback')) {\n\t\t\t\tthis.bottomPocket = this.scroller.querySelector('.' + CLASS_PULL_BOTTOM_POCKET);\n\t\t\t\tif(!this.bottomPocket) {\n\t\t\t\t\tthis.bottomPocket = this._createPocket(CLASS_PULL_BOTTOM_POCKET, options.up, CLASS_LOADING);\n\t\t\t\t\tthis.scroller.appendChild(this.bottomPocket);\n\t\t\t\t}\n\t\t\t\tthis.bottomLoading = this.bottomPocket.querySelector('.' + CLASS_PULL_LOADING);\n\t\t\t\tthis.bottomCaption = this.bottomPocket.querySelector('.' + CLASS_PULL_CAPTION);\n\t\t\t\t//TODO only for h5\n\t\t\t\tthis.wrapper.addEventListener('scrollbottom', this);\n\t\t\t}\n\t\t},\n\t\t_createPocket: function(clazz, options, iconClass) {\n\t\t\tvar pocket = document.createElement('div');\n\t\t\tpocket.className = clazz;\n\t\t\tpocket.innerHTML = pocketHtml.replace('{contentrefresh}', options.contentinit).replace('{icon}', iconClass);\n\t\t\treturn pocket;\n\t\t},\n\t\t_resetPullDownLoading: function() {\n\t\t\tvar loading = this.pullLoading;\n\t\t\tif(loading) {\n\t\t\t\tthis.pullCaption.innerHTML = this.options.down.contentdown;\n\t\t\t\tloading.style.webkitTransition = \"\";\n\t\t\t\tloading.style.webkitTransform = \"\";\n\t\t\t\tloading.style.webkitAnimation = \"\";\n\t\t\t\tloading.className = CLASS_LOADING_DOWN;\n\t\t\t}\n\t\t},\n\t\t_setCaptionClass: function(isPulldown, caption, title) {\n\t\t\tif(!isPulldown) {\n\t\t\t\tswitch(title) {\n\t\t\t\t\tcase this.options.up.contentdown:\n\t\t\t\t\t\tcaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase this.options.up.contentrefresh:\n\t\t\t\t\t\tcaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase this.options.up.contentnomore:\n\t\t\t\t\t\tcaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_setCaption: function(title, reset) {\n\t\t\tif(this.loading) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar options = this.options;\n\t\t\tvar pocket = this.pullPocket;\n\t\t\tvar caption = this.pullCaption;\n\t\t\tvar loading = this.pullLoading;\n\t\t\tvar isPulldown = this.pulldown;\n\t\t\tvar self = this;\n\t\t\tif(pocket) {\n\t\t\t\tif(reset) {\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tcaption.innerHTML = self.lastTitle = title;\n\t\t\t\t\t\tif(isPulldown) {\n\t\t\t\t\t\t\tloading.className = CLASS_LOADING_DOWN;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself._setCaptionClass(false, caption, title);\n\t\t\t\t\t\t\tloading.className = CLASS_LOADING;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tloading.style.webkitAnimation = \"\";\n\t\t\t\t\t\tloading.style.webkitTransition = \"\";\n\t\t\t\t\t\tloading.style.webkitTransform = \"\";\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tif(title !== this.lastTitle) {\n\t\t\t\t\t\tcaption.innerHTML = title;\n\t\t\t\t\t\tif(isPulldown) {\n\t\t\t\t\t\t\tif(title === options.down.contentrefresh) {\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING;\n\t\t\t\t\t\t\t\tloading.style.webkitAnimation = \"spinner-spin 1s step-end infinite\";\n\t\t\t\t\t\t\t} else if(title === options.down.contentover) {\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING_UP;\n\t\t\t\t\t\t\t\tloading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\n\t\t\t\t\t\t\t\tloading.style.webkitTransform = \"rotate(180deg)\";\n\t\t\t\t\t\t\t} else if(title === options.down.contentdown) {\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING_DOWN;\n\t\t\t\t\t\t\t\tloading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\n\t\t\t\t\t\t\t\tloading.style.webkitTransform = \"rotate(0deg)\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif(title === options.up.contentrefresh) {\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING + ' ' + CLASS_VISIBILITY;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING + ' ' + CLASS_HIDDEN;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself._setCaptionClass(false, caption, title);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.lastTitle = title;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t};\n\t$.PullRefresh = PullRefresh;\n})(mui, document);\n(function($, window, document, undefined) {\n\tvar CLASS_SCROLL = 'mui-scroll';\n\tvar CLASS_SCROLLBAR = 'mui-scrollbar';\n\tvar CLASS_INDICATOR = 'mui-scrollbar-indicator';\n\tvar CLASS_SCROLLBAR_VERTICAL = CLASS_SCROLLBAR + '-vertical';\n\tvar CLASS_SCROLLBAR_HORIZONTAL = CLASS_SCROLLBAR + '-horizontal';\n\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\tvar ease = {\n\t\tquadratic: {\n\t\t\tstyle: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n\t\t\tfn: function(k) {\n\t\t\t\treturn k * (2 - k);\n\t\t\t}\n\t\t},\n\t\tcircular: {\n\t\t\tstyle: 'cubic-bezier(0.1, 0.57, 0.1, 1)',\n\t\t\tfn: function(k) {\n\t\t\t\treturn Math.sqrt(1 - (--k * k));\n\t\t\t}\n\t\t},\n\t\toutCirc: {\n\t\t\tstyle: 'cubic-bezier(0.075, 0.82, 0.165, 1)'\n\t\t},\n\t\toutCubic: {\n\t\t\tstyle: 'cubic-bezier(0.165, 0.84, 0.44, 1)'\n\t\t}\n\t}\n\tvar Scroll = $.Class.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis.wrapper = this.element = element;\n\t\t\tthis.scroller = this.wrapper.children[0];\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\n\t\t\tthis.stopped = false;\n\n\t\t\tthis.options = $.extend(true, {\n\t\t\t\tscrollY: true, //是否竖向滚动\n\t\t\t\tscrollX: false, //是否横向滚动\n\t\t\t\tstartX: 0, //初始化时滚动至x\n\t\t\t\tstartY: 0, //初始化时滚动至y\n\n\t\t\t\tindicators: true, //是否显示滚动条\n\t\t\t\tstopPropagation: false,\n\t\t\t\thardwareAccelerated: true,\n\t\t\t\tfixedBadAndorid: false,\n\t\t\t\tpreventDefaultException: {\n\t\t\t\t\ttagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\n\t\t\t\t},\n\t\t\t\tmomentum: true,\n\n\t\t\t\tsnapX: 0.5, //横向切换距离(以当前容器宽度为基准)\n\t\t\t\tsnap: false, //图片轮播，拖拽式选项卡\n\n\t\t\t\tbounce: true, //是否启用回弹\n\t\t\t\tbounceTime: 500, //回弹动画时间\n\t\t\t\tbounceEasing: ease.outCirc, //回弹动画曲线\n\n\t\t\t\tscrollTime: 500,\n\t\t\t\tscrollEasing: ease.outCubic, //轮播动画曲线\n\n\t\t\t\tdirectionLockThreshold: 5,\n\n\t\t\t\tparallaxElement: false, //视差元素\n\t\t\t\tparallaxRatio: 0.5\n\t\t\t}, options);\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.translateZ = this.options.hardwareAccelerated ? ' translateZ(0)' : '';\n\n\t\t\tthis._init();\n\t\t\tif(this.scroller) {\n\t\t\t\tthis.refresh();\n\t\t\t\t//\t\t\t\tif (this.options.startX !== 0 || this.options.startY !== 0) { //需要判断吗？后续根据实际情况再看看\n\t\t\t\tthis.scrollTo(this.options.startX, this.options.startY);\n\t\t\t\t//\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_init: function() {\n\t\t\tthis._initParallax();\n\t\t\tthis._initIndicators();\n\t\t\tthis._initEvent();\n\t\t},\n\t\t_initParallax: function() {\n\t\t\tif(this.options.parallaxElement) {\n\t\t\t\tthis.parallaxElement = document.querySelector(this.options.parallaxElement);\n\t\t\t\tthis.parallaxStyle = this.parallaxElement.style;\n\t\t\t\tthis.parallaxHeight = this.parallaxElement.offsetHeight;\n\t\t\t\tthis.parallaxImgStyle = this.parallaxElement.querySelector('img').style;\n\t\t\t}\n\t\t},\n\t\t_initIndicators: function() {\n\t\t\tvar self = this;\n\t\t\tself.indicators = [];\n\t\t\tif(!this.options.indicators) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar indicators = [],\n\t\t\t\tindicator;\n\n\t\t\t// Vertical scrollbar\n\t\t\tif(self.options.scrollY) {\n\t\t\t\tindicator = {\n\t\t\t\t\tel: this._createScrollBar(CLASS_SCROLLBAR_VERTICAL),\n\t\t\t\t\tlistenX: false\n\t\t\t\t};\n\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\n\t\t\t\tindicators.push(indicator);\n\t\t\t}\n\n\t\t\t// Horizontal scrollbar\n\t\t\tif(this.options.scrollX) {\n\t\t\t\tindicator = {\n\t\t\t\t\tel: this._createScrollBar(CLASS_SCROLLBAR_HORIZONTAL),\n\t\t\t\t\tlistenY: false\n\t\t\t\t};\n\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\n\t\t\t\tindicators.push(indicator);\n\t\t\t}\n\n\t\t\tfor(var i = indicators.length; i--;) {\n\t\t\t\tthis.indicators.push(new Indicator(this, indicators[i]));\n\t\t\t}\n\n\t\t},\n\t\t_initSnap: function() {\n\t\t\tthis.currentPage = {};\n\t\t\tthis.pages = [];\n\t\t\tvar snaps = this.snaps;\n\t\t\tvar length = snaps.length;\n\t\t\tvar m = 0;\n\t\t\tvar n = -1;\n\t\t\tvar x = 0;\n\t\t\tvar leftX = 0;\n\t\t\tvar rightX = 0;\n\t\t\tvar snapX = 0;\n\t\t\tfor(var i = 0; i < length; i++) {\n\t\t\t\tvar snap = snaps[i];\n\t\t\t\tvar offsetLeft = snap.offsetLeft;\n\t\t\t\tvar offsetWidth = snap.offsetWidth;\n\t\t\t\tif(i === 0 || offsetLeft <= snaps[i - 1].offsetLeft) {\n\t\t\t\t\tm = 0;\n\t\t\t\t\tn++;\n\t\t\t\t}\n\t\t\t\tif(!this.pages[m]) {\n\t\t\t\t\tthis.pages[m] = [];\n\t\t\t\t}\n\t\t\t\tx = this._getSnapX(offsetLeft);\n\t\t\t\tsnapX = Math.round((offsetWidth) * this.options.snapX);\n\t\t\t\tleftX = x - snapX;\n\t\t\t\trightX = x - offsetWidth + snapX;\n\t\t\t\tthis.pages[m][n] = {\n\t\t\t\t\tx: x,\n\t\t\t\t\tleftX: leftX,\n\t\t\t\t\trightX: rightX,\n\t\t\t\t\tpageX: m,\n\t\t\t\t\telement: snap\n\t\t\t\t}\n\t\t\t\tif(snap.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\tthis.currentPage = this.pages[m][0];\n\t\t\t\t}\n\t\t\t\tif(x >= this.maxScrollX) {\n\t\t\t\t\tm++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.options.startX = this.currentPage.x || 0;\n\t\t},\n\t\t_getSnapX: function(offsetLeft) {\n\t\t\treturn Math.max(Math.min(0, -offsetLeft + (this.wrapperWidth / 2)), this.maxScrollX);\n\t\t},\n\t\t_gotoPage: function(index) {\n\t\t\tthis.currentPage = this.pages[Math.min(index, this.pages.length - 1)][0];\n\t\t\tfor(var i = 0, len = this.snaps.length; i < len; i++) {\n\t\t\t\tif(i === index) {\n\t\t\t\t\tthis.snaps[i].classList.add(CLASS_ACTIVE);\n\t\t\t\t} else {\n\t\t\t\t\tthis.snaps[i].classList.remove(CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scrollTo(this.currentPage.x, 0, this.options.scrollTime);\n\t\t},\n\t\t_nearestSnap: function(x) {\n\t\t\tif(!this.pages.length) {\n\t\t\t\treturn {\n\t\t\t\t\tx: 0,\n\t\t\t\t\tpageX: 0\n\t\t\t\t};\n\t\t\t}\n\t\t\tvar i = 0;\n\t\t\tvar length = this.pages.length;\n\t\t\tif(x > 0) {\n\t\t\t\tx = 0;\n\t\t\t} else if(x < this.maxScrollX) {\n\t\t\t\tx = this.maxScrollX;\n\t\t\t}\n\t\t\tfor(; i < length; i++) {\n\t\t\t\tvar nearestX = this.direction === 'left' ? this.pages[i][0].leftX : this.pages[i][0].rightX;\n\t\t\t\tif(x >= nearestX) {\n\t\t\t\t\treturn this.pages[i][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tx: 0,\n\t\t\t\tpageX: 0\n\t\t\t};\n\t\t},\n\t\t_initEvent: function(detach) {\n\t\t\tvar action = detach ? 'removeEventListener' : 'addEventListener';\n\t\t\twindow[action]('orientationchange', this);\n\t\t\twindow[action]('resize', this);\n\n\t\t\tthis.scroller[action]('webkitTransitionEnd', this);\n\n\t\t\tthis.wrapper[action]($.EVENT_START, this);\n\t\t\tthis.wrapper[action]($.EVENT_CANCEL, this);\n\t\t\tthis.wrapper[action]($.EVENT_END, this);\n\t\t\tthis.wrapper[action]('drag', this);\n\t\t\tthis.wrapper[action]('dragend', this);\n\t\t\tthis.wrapper[action]('flick', this);\n\t\t\tthis.wrapper[action]('scrollend', this);\n\t\t\tif(this.options.scrollX) {\n\t\t\t\tthis.wrapper[action]('swiperight', this);\n\t\t\t}\n\t\t\tvar segmentedControl = this.wrapper.querySelector('.mui-segmented-control');\n\t\t\tif(segmentedControl) { //靠，这个bug排查了一下午，阻止hash跳转，一旦hash跳转会导致可拖拽选项卡的tab不见\n\t\t\t\tmui(segmentedControl)[detach ? 'off' : 'on']('click', 'a', $.preventDefault);\n\t\t\t}\n\n\t\t\tthis.wrapper[action]('scrollstart', this);\n\t\t\tthis.wrapper[action]('refresh', this);\n\t\t},\n\t\t_handleIndicatorScrollend: function() {\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.fade();\n\t\t\t});\n\t\t},\n\t\t_handleIndicatorScrollstart: function() {\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.fade(1);\n\t\t\t});\n\t\t},\n\t\t_handleIndicatorRefresh: function() {\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.refresh();\n\t\t\t});\n\t\t},\n\t\thandleEvent: function(e) {\n\t\t\tif(this.stopped) {\n\t\t\t\tthis.resetPosition();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch(e.type) {\n\t\t\t\tcase $.EVENT_START:\n\t\t\t\t\tthis._start(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'drag':\n\t\t\t\t\tthis.options.stopPropagation && e.stopPropagation();\n\t\t\t\t\tthis._drag(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dragend':\n\t\t\t\tcase 'flick':\n\t\t\t\t\tthis.options.stopPropagation && e.stopPropagation();\n\t\t\t\t\tthis._flick(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tcase $.EVENT_END:\n\t\t\t\t\tthis._end(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'webkitTransitionEnd':\n\t\t\t\t\tthis.transitionTimer && this.transitionTimer.cancel();\n\t\t\t\t\tthis._transitionEnd(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scrollstart':\n\t\t\t\t\tthis._handleIndicatorScrollstart(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scrollend':\n\t\t\t\t\tthis._handleIndicatorScrollend(e);\n\t\t\t\t\tthis._scrollend(e);\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'orientationchange':\n\t\t\t\tcase 'resize':\n\t\t\t\t\tthis._resize();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'swiperight':\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'refresh':\n\t\t\t\t\tthis._handleIndicatorRefresh(e);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t},\n\t\t_start: function(e) {\n\t\t\tthis.moved = this.needReset = false;\n\t\t\tthis._transitionTime();\n\t\t\tif(this.isInTransition) {\n\t\t\t\tthis.needReset = true;\n\t\t\t\tthis.isInTransition = false;\n\t\t\t\tvar pos = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\n\t\t\t\tthis.setTranslate(Math.round(pos.x), Math.round(pos.y));\n\t\t\t\t//\t\t\t\tthis.resetPosition(); //reset\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t\t//\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tthis.reLayout();\n\t\t\t$.trigger(this.scroller, 'beforescrollstart', this);\n\t\t},\n\t\t_getDirectionByAngle: function(angle) {\n\t\t\tif(angle < -80 && angle > -100) {\n\t\t\t\treturn 'up';\n\t\t\t} else if(angle >= 80 && angle < 100) {\n\t\t\t\treturn 'down';\n\t\t\t} else if(angle >= 170 || angle <= -170) {\n\t\t\t\treturn 'left';\n\t\t\t} else if(angle >= -35 && angle <= 10) {\n\t\t\t\treturn 'right';\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t_drag: function(e) {\n\t\t\t//\t\t\tif (this.needReset) {\n\t\t\t//\t\t\t\te.stopPropagation(); //disable parent drag(nested scroller)\n\t\t\t//\t\t\t\treturn;\n\t\t\t//\t\t\t}\n\t\t\tvar detail = e.detail;\n\t\t\tif(this.options.scrollY || detail.direction === 'up' || detail.direction === 'down') { //如果是竖向滚动或手势方向是上或下\n\t\t\t\t//ios8 hack\n\t\t\t\tif($.os.ios && parseFloat($.os.version) >= 8) { //多webview时，离开当前webview会导致后续touch事件不触发\n\t\t\t\t\tvar clientY = detail.gesture.touches[0].clientY;\n\t\t\t\t\t//下拉刷新 or 上拉加载\n\t\t\t\t\tif((clientY + 10) > window.innerHeight || clientY < 10) {\n\t\t\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar isPreventDefault = isReturn = false;\n\t\t\tvar direction = this._getDirectionByAngle(detail.angle);\n\t\t\tif(detail.direction === 'left' || detail.direction === 'right') {\n\t\t\t\tif(this.options.scrollX) {\n\t\t\t\t\tisPreventDefault = true;\n\t\t\t\t\tif(!this.moved) { //识别角度(该角度导致轮播不灵敏)\n\t\t\t\t\t\t//\t\t\t\t\t\tif (direction !== 'left' && direction !== 'right') {\n\t\t\t\t\t\t//\t\t\t\t\t\t\tisReturn = true;\n\t\t\t\t\t\t//\t\t\t\t\t\t} else {\n\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\n\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\n\t\t\t\t\t\t//\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(this.options.scrollY && !this.moved) {\n\t\t\t\t\tisReturn = true;\n\t\t\t\t}\n\t\t\t} else if(detail.direction === 'up' || detail.direction === 'down') {\n\t\t\t\tif(this.options.scrollY) {\n\t\t\t\t\tisPreventDefault = true;\n\t\t\t\t\t//\t\t\t\t\tif (!this.moved) { //识别角度,竖向滚动似乎没必要进行小角度验证\n\t\t\t\t\t//\t\t\t\t\t\tif (direction !== 'up' && direction !== 'down') {\n\t\t\t\t\t//\t\t\t\t\t\t\tisReturn = true;\n\t\t\t\t\t//\t\t\t\t\t\t}\n\t\t\t\t\t//\t\t\t\t\t}\n\t\t\t\t\tif(!this.moved) {\n\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\n\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\n\t\t\t\t\t}\n\t\t\t\t} else if(this.options.scrollX && !this.moved) {\n\t\t\t\t\tisReturn = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisReturn = true;\n\t\t\t}\n\t\t\tif(this.moved || isPreventDefault) {\n\t\t\t\te.stopPropagation(); //阻止冒泡(scroll类嵌套)\n\t\t\t\tdetail.gesture && detail.gesture.preventDefault();\n\t\t\t}\n\t\t\tif(isReturn) { //禁止非法方向滚动\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!this.moved) {\n\t\t\t\t$.trigger(this.scroller, 'scrollstart', this);\n\t\t\t} else {\n\t\t\t\te.stopPropagation(); //move期间阻止冒泡(scroll嵌套)\n\t\t\t}\n\t\t\tvar deltaX = 0;\n\t\t\tvar deltaY = 0;\n\t\t\tif(!this.moved) { //start\n\t\t\t\tdeltaX = detail.deltaX;\n\t\t\t\tdeltaY = detail.deltaY;\n\t\t\t} else { //move\n\t\t\t\tdeltaX = detail.deltaX - $.gestures.session.prevTouch.deltaX;\n\t\t\t\tdeltaY = detail.deltaY - $.gestures.session.prevTouch.deltaY;\n\t\t\t}\n\t\t\tvar absDeltaX = Math.abs(detail.deltaX);\n\t\t\tvar absDeltaY = Math.abs(detail.deltaY);\n\t\t\tif(absDeltaX > absDeltaY + this.options.directionLockThreshold) {\n\t\t\t\tdeltaY = 0;\n\t\t\t} else if(absDeltaY >= absDeltaX + this.options.directionLockThreshold) {\n\t\t\t\tdeltaX = 0;\n\t\t\t}\n\n\t\t\tdeltaX = this.hasHorizontalScroll ? deltaX : 0;\n\t\t\tdeltaY = this.hasVerticalScroll ? deltaY : 0;\n\t\t\tvar newX = this.x + deltaX;\n\t\t\tvar newY = this.y + deltaY;\n\t\t\t// Slow down if outside of the boundaries\n\t\t\tif(newX > 0 || newX < this.maxScrollX) {\n\t\t\t\tnewX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\n\t\t\t}\n\t\t\tif(newY > 0 || newY < this.maxScrollY) {\n\t\t\t\tnewY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\n\t\t\t}\n\n\t\t\tif(!this.requestAnimationFrame) {\n\t\t\t\tthis._updateTranslate();\n\t\t\t}\n\t\t\tthis.direction = detail.deltaX > 0 ? 'right' : 'left';\n\t\t\tthis.moved = true;\n\t\t\tthis.x = newX;\n\t\t\tthis.y = newY;\n\t\t\t$.trigger(this.scroller, 'scroll', this);\n\t\t},\n\t\t_flick: function(e) {\n\t\t\t//\t\t\tif (!this.moved || this.needReset) {\n\t\t\t//\t\t\t\treturn;\n\t\t\t//\t\t\t}\n\t\t\tif(!this.moved) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t\tvar detail = e.detail;\n\t\t\tthis._clearRequestAnimationFrame();\n\t\t\tif(e.type === 'dragend' && detail.flick) { //dragend\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar newX = Math.round(this.x);\n\t\t\tvar newY = Math.round(this.y);\n\n\t\t\tthis.isInTransition = false;\n\t\t\t// reset if we are outside of the boundaries\n\t\t\tif(this.resetPosition(this.options.bounceTime)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.scrollTo(newX, newY); // ensures that the last position is rounded\n\n\t\t\tif(e.type === 'dragend') { //dragend\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar time = 0;\n\t\t\tvar easing = '';\n\t\t\t// start momentum animation if needed\n\t\t\tif(this.options.momentum && detail.flickTime < 300) {\n\t\t\t\tmomentumX = this.hasHorizontalScroll ? this._momentum(this.x, detail.flickDistanceX, detail.flickTime, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : {\n\t\t\t\t\tdestination: newX,\n\t\t\t\t\tduration: 0\n\t\t\t\t};\n\t\t\t\tmomentumY = this.hasVerticalScroll ? this._momentum(this.y, detail.flickDistanceY, detail.flickTime, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : {\n\t\t\t\t\tdestination: newY,\n\t\t\t\t\tduration: 0\n\t\t\t\t};\n\t\t\t\tnewX = momentumX.destination;\n\t\t\t\tnewY = momentumY.destination;\n\t\t\t\ttime = Math.max(momentumX.duration, momentumY.duration);\n\t\t\t\tthis.isInTransition = true;\n\t\t\t}\n\n\t\t\tif(newX != this.x || newY != this.y) {\n\t\t\t\tif(newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY) {\n\t\t\t\t\teasing = ease.quadratic;\n\t\t\t\t}\n\t\t\t\tthis.scrollTo(newX, newY, time, easing);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t//\t\t\te.stopPropagation();\n\t\t},\n\t\t_end: function(e) {\n\t\t\tthis.needReset = false;\n\t\t\tif((!this.moved && this.needReset) || e.type === $.EVENT_CANCEL) {\n\t\t\t\tthis.resetPosition();\n\t\t\t}\n\t\t},\n\t\t_transitionEnd: function(e) {\n\t\t\tif(e.target != this.scroller || !this.isInTransition) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._transitionTime();\n\t\t\tif(!this.resetPosition(this.options.bounceTime)) {\n\t\t\t\tthis.isInTransition = false;\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t}\n\t\t},\n\t\t_scrollend: function(e) {\n\t\t\tif((this.y === 0 && this.maxScrollY === 0) || (Math.abs(this.y) > 0 && this.y <= this.maxScrollY)) {\n\t\t\t\t$.trigger(this.scroller, 'scrollbottom', this);\n\t\t\t}\n\t\t},\n\t\t_resize: function() {\n\t\t\tvar that = this;\n\t\t\tclearTimeout(that.resizeTimeout);\n\t\t\tthat.resizeTimeout = setTimeout(function() {\n\t\t\t\tthat.refresh();\n\t\t\t}, that.options.resizePolling);\n\t\t},\n\t\t_transitionTime: function(time) {\n\t\t\ttime = time || 0;\n\t\t\tthis.scrollerStyle['webkitTransitionDuration'] = time + 'ms';\n\t\t\tif(this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = time + 'ms';\n\t\t\t}\n\t\t\tif(this.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\n\t\t\t\tthis.scrollerStyle['webkitTransitionDuration'] = '0.001s';\n\t\t\t\tif(this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = '0.001s';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.indicators) {\n\t\t\t\tfor(var i = this.indicators.length; i--;) {\n\t\t\t\t\tthis.indicators[i].transitionTime(time);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(time) { //自定义timer，保证webkitTransitionEnd始终触发\n\t\t\t\tthis.transitionTimer && this.transitionTimer.cancel();\n\t\t\t\tthis.transitionTimer = $.later(function() {\n\t\t\t\t\t$.trigger(this.scroller, 'webkitTransitionEnd');\n\t\t\t\t}, time + 100, this);\n\t\t\t}\n\t\t},\n\t\t_transitionTimingFunction: function(easing) {\n\t\t\tthis.scrollerStyle['webkitTransitionTimingFunction'] = easing;\n\t\t\tif(this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = easing;\n\t\t\t}\n\t\t\tif(this.indicators) {\n\t\t\t\tfor(var i = this.indicators.length; i--;) {\n\t\t\t\t\tthis.indicators[i].transitionTimingFunction(easing);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_translate: function(x, y) {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t},\n\t\t_clearRequestAnimationFrame: function() {\n\t\t\tif(this.requestAnimationFrame) {\n\t\t\t\tcancelAnimationFrame(this.requestAnimationFrame);\n\t\t\t\tthis.requestAnimationFrame = null;\n\t\t\t}\n\t\t},\n\t\t_updateTranslate: function() {\n\t\t\tvar self = this;\n\t\t\tif(self.x !== self.lastX || self.y !== self.lastY) {\n\t\t\t\tself.setTranslate(self.x, self.y);\n\t\t\t}\n\t\t\tself.requestAnimationFrame = requestAnimationFrame(function() {\n\t\t\t\tself._updateTranslate();\n\t\t\t});\n\t\t},\n\t\t_createScrollBar: function(clazz) {\n\t\t\tvar scrollbar = document.createElement('div');\n\t\t\tvar indicator = document.createElement('div');\n\t\t\tscrollbar.className = CLASS_SCROLLBAR + ' ' + clazz;\n\t\t\tindicator.className = CLASS_INDICATOR;\n\t\t\tscrollbar.appendChild(indicator);\n\t\t\tif(clazz === CLASS_SCROLLBAR_VERTICAL) {\n\t\t\t\tthis.scrollbarY = scrollbar;\n\t\t\t\tthis.scrollbarIndicatorY = indicator;\n\t\t\t} else if(clazz === CLASS_SCROLLBAR_HORIZONTAL) {\n\t\t\t\tthis.scrollbarX = scrollbar;\n\t\t\t\tthis.scrollbarIndicatorX = indicator;\n\t\t\t}\n\t\t\tthis.wrapper.appendChild(scrollbar);\n\t\t\treturn scrollbar;\n\t\t},\n\t\t_preventDefaultException: function(el, exceptions) {\n\t\t\tfor(var i in exceptions) {\n\t\t\t\tif(exceptions[i].test(el[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_reLayout: function() {\n\t\t\tif(!this.hasHorizontalScroll) {\n\t\t\t\tthis.maxScrollX = 0;\n\t\t\t\tthis.scrollerWidth = this.wrapperWidth;\n\t\t\t}\n\n\t\t\tif(!this.hasVerticalScroll) {\n\t\t\t\tthis.maxScrollY = 0;\n\t\t\t\tthis.scrollerHeight = this.wrapperHeight;\n\t\t\t}\n\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.refresh();\n\t\t\t});\n\n\t\t\t//以防slider类嵌套使用\n\t\t\tif(this.options.snap && typeof this.options.snap === 'string') {\n\t\t\t\tvar items = this.scroller.querySelectorAll(this.options.snap);\n\t\t\t\tthis.itemLength = 0;\n\t\t\t\tthis.snaps = [];\n\t\t\t\tfor(var i = 0, len = items.length; i < len; i++) {\n\t\t\t\t\tvar item = items[i];\n\t\t\t\t\tif(item.parentNode === this.scroller) {\n\t\t\t\t\t\tthis.itemLength++;\n\t\t\t\t\t\tthis.snaps.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._initSnap(); //需要每次都_initSnap么。其实init的时候执行一次，后续resize的时候执行一次就行了吧.先这么做吧，如果影响性能，再调整\n\t\t\t}\n\t\t},\n\t\t_momentum: function(current, distance, time, lowerMargin, wrapperSize, deceleration) {\n\t\t\tvar speed = parseFloat(Math.abs(distance) / time),\n\t\t\t\tdestination,\n\t\t\t\tduration;\n\n\t\t\tdeceleration = deceleration === undefined ? 0.0006 : deceleration;\n\t\t\tdestination = current + (speed * speed) / (2 * deceleration) * (distance < 0 ? -1 : 1);\n\t\t\tduration = speed / deceleration;\n\t\t\tif(destination < lowerMargin) {\n\t\t\t\tdestination = wrapperSize ? lowerMargin - (wrapperSize / 2.5 * (speed / 8)) : lowerMargin;\n\t\t\t\tdistance = Math.abs(destination - current);\n\t\t\t\tduration = distance / speed;\n\t\t\t} else if(destination > 0) {\n\t\t\t\tdestination = wrapperSize ? wrapperSize / 2.5 * (speed / 8) : 0;\n\t\t\t\tdistance = Math.abs(current) + destination;\n\t\t\t\tduration = distance / speed;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdestination: Math.round(destination),\n\t\t\t\tduration: duration\n\t\t\t};\n\t\t},\n\t\t_getTranslateStr: function(x, y) {\n\t\t\tif(this.options.hardwareAccelerated) {\n\t\t\t\treturn 'translate3d(' + x + 'px,' + y + 'px,0px) ' + this.translateZ;\n\t\t\t}\n\t\t\treturn 'translate(' + x + 'px,' + y + 'px) ';\n\t\t},\n\t\t//API\n\t\tsetStopped: function(stopped) {\n\t\t\tthis.stopped = !!stopped;\n\t\t},\n\t\tsetTranslate: function(x, y) {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.scrollerStyle['webkitTransform'] = this._getTranslateStr(x, y);\n\t\t\tif(this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\tvar parallaxY = y * this.options.parallaxRatio;\n\t\t\t\tvar scale = 1 + parallaxY / ((this.parallaxHeight - parallaxY) / 2);\n\t\t\t\tif(scale > 1) {\n\t\t\t\t\tthis.parallaxImgStyle['opacity'] = 1 - parallaxY / 100 * this.options.parallaxRatio;\n\t\t\t\t\tthis.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -parallaxY) + ' scale(' + scale + ',' + scale + ')';\n\t\t\t\t} else {\n\t\t\t\t\tthis.parallaxImgStyle['opacity'] = 1;\n\t\t\t\t\tthis.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -1) + ' scale(1,1)';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.indicators) {\n\t\t\t\tfor(var i = this.indicators.length; i--;) {\n\t\t\t\t\tthis.indicators[i].updatePosition();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.lastX = this.x;\n\t\t\tthis.lastY = this.y;\n\t\t\t$.trigger(this.scroller, 'scroll', this);\n\t\t},\n\t\treLayout: function() {\n\t\t\tthis.wrapper.offsetHeight;\n\n\t\t\tvar paddingLeft = parseFloat($.getStyles(this.wrapper, 'padding-left')) || 0;\n\t\t\tvar paddingRight = parseFloat($.getStyles(this.wrapper, 'padding-right')) || 0;\n\t\t\tvar paddingTop = parseFloat($.getStyles(this.wrapper, 'padding-top')) || 0;\n\t\t\tvar paddingBottom = parseFloat($.getStyles(this.wrapper, 'padding-bottom')) || 0;\n\n\t\t\tvar clientWidth = this.wrapper.clientWidth;\n\t\t\tvar clientHeight = this.wrapper.clientHeight;\n\n\t\t\tthis.scrollerWidth = this.scroller.offsetWidth;\n\t\t\tthis.scrollerHeight = this.scroller.offsetHeight;\n\n\t\t\tthis.wrapperWidth = clientWidth - paddingLeft - paddingRight;\n\t\t\tthis.wrapperHeight = clientHeight - paddingTop - paddingBottom;\n\n\t\t\tthis.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\n\t\t\tthis.maxScrollY = Math.min(this.wrapperHeight - this.scrollerHeight, 0);\n\t\t\tthis.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0;\n\t\t\tthis.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0;\n\t\t\tthis._reLayout();\n\t\t},\n\t\tresetPosition: function(time) {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y;\n\n\t\t\ttime = time || 0;\n\t\t\tif(!this.hasHorizontalScroll || this.x > 0) {\n\t\t\t\tx = 0;\n\t\t\t} else if(this.x < this.maxScrollX) {\n\t\t\t\tx = this.maxScrollX;\n\t\t\t}\n\n\t\t\tif(!this.hasVerticalScroll || this.y > 0) {\n\t\t\t\ty = 0;\n\t\t\t} else if(this.y < this.maxScrollY) {\n\t\t\t\ty = this.maxScrollY;\n\t\t\t}\n\n\t\t\tif(x == this.x && y == this.y) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.scrollTo(x, y, time, this.options.scrollEasing);\n\n\t\t\treturn true;\n\t\t},\n\t\t_reInit: function() {\n\t\t\tvar groups = this.wrapper.querySelectorAll('.' + CLASS_SCROLL);\n\t\t\tfor(var i = 0, len = groups.length; i < len; i++) {\n\t\t\t\tif(groups[i].parentNode === this.wrapper) {\n\t\t\t\t\tthis.scroller = groups[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\n\t\t},\n\t\trefresh: function() {\n\t\t\tthis._reInit();\n\t\t\tthis.reLayout();\n\t\t\t$.trigger(this.scroller, 'refresh', this);\n\t\t\tthis.resetPosition();\n\t\t},\n\t\tscrollTo: function(x, y, time, easing) {\n\t\t\tvar easing = easing || ease.circular;\n\t\t\t//\t\t\tthis.isInTransition = time > 0 && (this.lastX != x || this.lastY != y);\n\t\t\t//暂不严格判断x,y，否则会导致部分版本上不正常触发轮播\n\t\t\tthis.isInTransition = time > 0;\n\t\t\tif(this.isInTransition) {\n\t\t\t\tthis._clearRequestAnimationFrame();\n\t\t\t\tthis._transitionTimingFunction(easing.style);\n\t\t\t\tthis._transitionTime(time);\n\t\t\t\tthis.setTranslate(x, y);\n\t\t\t} else {\n\t\t\t\tthis.setTranslate(x, y);\n\t\t\t}\n\n\t\t},\n\t\tscrollToBottom: function(time, easing) {\n\t\t\ttime = time || this.options.scrollTime;\n\t\t\tthis.scrollTo(0, this.maxScrollY, time, easing);\n\t\t},\n\t\tgotoPage: function(index) {\n\t\t\tthis._gotoPage(index);\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._initEvent(true); //detach\n\t\t\tdelete $.data[this.wrapper.getAttribute('data-scroll')];\n\t\t\tthis.wrapper.setAttribute('data-scroll', '');\n\t\t}\n\t});\n\t//Indicator\n\tvar Indicator = function(scroller, options) {\n\t\tthis.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\n\t\tthis.wrapperStyle = this.wrapper.style;\n\t\tthis.indicator = this.wrapper.children[0];\n\t\tthis.indicatorStyle = this.indicator.style;\n\t\tthis.scroller = scroller;\n\n\t\tthis.options = $.extend({\n\t\t\tlistenX: true,\n\t\t\tlistenY: true,\n\t\t\tfade: false,\n\t\t\tspeedRatioX: 0,\n\t\t\tspeedRatioY: 0\n\t\t}, options);\n\n\t\tthis.sizeRatioX = 1;\n\t\tthis.sizeRatioY = 1;\n\t\tthis.maxPosX = 0;\n\t\tthis.maxPosY = 0;\n\n\t\tif(this.options.fade) {\n\t\t\tthis.wrapperStyle['webkitTransform'] = this.scroller.translateZ;\n\t\t\tthis.wrapperStyle['webkitTransitionDuration'] = this.options.fixedBadAndorid && $.os.isBadAndroid ? '0.001s' : '0ms';\n\t\t\tthis.wrapperStyle.opacity = '0';\n\t\t}\n\t}\n\tIndicator.prototype = {\n\t\thandleEvent: function(e) {\n\n\t\t},\n\t\ttransitionTime: function(time) {\n\t\t\ttime = time || 0;\n\t\t\tthis.indicatorStyle['webkitTransitionDuration'] = time + 'ms';\n\t\t\tif(this.scroller.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\n\t\t\t\tthis.indicatorStyle['webkitTransitionDuration'] = '0.001s';\n\t\t\t}\n\t\t},\n\t\ttransitionTimingFunction: function(easing) {\n\t\t\tthis.indicatorStyle['webkitTransitionTimingFunction'] = easing;\n\t\t},\n\t\trefresh: function() {\n\t\t\tthis.transitionTime();\n\n\t\t\tif(this.options.listenX && !this.options.listenY) {\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\n\t\t\t} else if(this.options.listenY && !this.options.listenX) {\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\n\t\t\t} else {\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\n\t\t\t}\n\n\t\t\tthis.wrapper.offsetHeight; // force refresh\n\n\t\t\tif(this.options.listenX) {\n\t\t\t\tthis.wrapperWidth = this.wrapper.clientWidth;\n\t\t\t\tthis.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\n\t\t\t\tthis.indicatorStyle.width = this.indicatorWidth + 'px';\n\n\t\t\t\tthis.maxPosX = this.wrapperWidth - this.indicatorWidth;\n\n\t\t\t\tthis.minBoundaryX = 0;\n\t\t\t\tthis.maxBoundaryX = this.maxPosX;\n\n\t\t\t\tthis.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));\n\t\t\t}\n\n\t\t\tif(this.options.listenY) {\n\t\t\t\tthis.wrapperHeight = this.wrapper.clientHeight;\n\t\t\t\tthis.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\n\t\t\t\tthis.indicatorStyle.height = this.indicatorHeight + 'px';\n\n\t\t\t\tthis.maxPosY = this.wrapperHeight - this.indicatorHeight;\n\n\t\t\t\tthis.minBoundaryY = 0;\n\t\t\t\tthis.maxBoundaryY = this.maxPosY;\n\n\t\t\t\tthis.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));\n\t\t\t}\n\n\t\t\tthis.updatePosition();\n\t\t},\n\n\t\tupdatePosition: function() {\n\t\t\tvar x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\n\t\t\t\ty = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\n\n\t\t\tif(x < this.minBoundaryX) {\n\t\t\t\tthis.width = Math.max(this.indicatorWidth + x, 8);\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t\tx = this.minBoundaryX;\n\t\t\t} else if(x > this.maxBoundaryX) {\n\t\t\t\tthis.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t\tx = this.maxPosX + this.indicatorWidth - this.width;\n\t\t\t} else if(this.width != this.indicatorWidth) {\n\t\t\t\tthis.width = this.indicatorWidth;\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t}\n\n\t\t\tif(y < this.minBoundaryY) {\n\t\t\t\tthis.height = Math.max(this.indicatorHeight + y * 3, 8);\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t\ty = this.minBoundaryY;\n\t\t\t} else if(y > this.maxBoundaryY) {\n\t\t\t\tthis.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t\ty = this.maxPosY + this.indicatorHeight - this.height;\n\t\t\t} else if(this.height != this.indicatorHeight) {\n\t\t\t\tthis.height = this.indicatorHeight;\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t}\n\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\n\t\t\tthis.indicatorStyle['webkitTransform'] = this.scroller._getTranslateStr(x, y);\n\n\t\t},\n\t\tfade: function(val, hold) {\n\t\t\tif(hold && !this.visible) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(this.fadeTimeout);\n\t\t\tthis.fadeTimeout = null;\n\n\t\t\tvar time = val ? 250 : 500,\n\t\t\t\tdelay = val ? 0 : 300;\n\n\t\t\tval = val ? '1' : '0';\n\n\t\t\tthis.wrapperStyle['webkitTransitionDuration'] = time + 'ms';\n\n\t\t\tthis.fadeTimeout = setTimeout((function(val) {\n\t\t\t\tthis.wrapperStyle.opacity = val;\n\t\t\t\tthis.visible = +val;\n\t\t\t}).bind(this, val), delay);\n\t\t}\n\t};\n\n\t$.Scroll = Scroll;\n\n\t$.fn.scroll = function(options) {\n\t\tvar scrollApis = [];\n\t\tthis.each(function() {\n\t\t\tvar scrollApi = null;\n\t\t\tvar self = this;\n\t\t\tvar id = self.getAttribute('data-scroll');\n\t\t\tif(!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\tvar _options = $.extend({}, options);\n\t\t\t\tif(self.classList.contains('mui-segmented-control')) {\n\t\t\t\t\t_options = $.extend(_options, {\n\t\t\t\t\t\tscrollY: false,\n\t\t\t\t\t\tscrollX: true,\n\t\t\t\t\t\tindicators: false,\n\t\t\t\t\t\tsnap: '.mui-control-item'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t$.data[id] = scrollApi = new Scroll(self, _options);\n\t\t\t\tself.setAttribute('data-scroll', id);\n\t\t\t} else {\n\t\t\t\tscrollApi = $.data[id];\n\t\t\t}\n\t\t\tscrollApis.push(scrollApi);\n\t\t});\n\t\treturn scrollApis.length === 1 ? scrollApis[0] : scrollApis;\n\t};\n})(mui, window, document);\n(function($, window, document, undefined) {\n\n\tvar CLASS_VISIBILITY = 'mui-visibility';\n\tvar CLASS_HIDDEN = 'mui-hidden';\n\n\tvar PullRefresh = $.Scroll.extend($.extend({\n\t\thandleEvent: function(e) {\n\t\t\tthis._super(e);\n\t\t\tif(e.type === 'scrollbottom') {\n\t\t\t\tif(e.target === this.scroller) {\n\t\t\t\t\tthis._scrollbottom();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_scrollbottom: function() {\n\t\t\tif(!this.pulldown && !this.loading) {\n\t\t\t\tthis.pulldown = false;\n\t\t\t\tthis._initPullupRefresh();\n\t\t\t\tthis.pullupLoading();\n\t\t\t}\n\t\t},\n\t\t_start: function(e) {\n\t\t\t//仅下拉刷新在start阻止默认事件\n\t\t\tif(e.touches && e.touches.length && e.touches[0].clientX > 30) {\n\t\t\t\te.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\n\t\t\t}\n\t\t\tif(!this.loading) {\n\t\t\t\tthis.pulldown = this.pullPocket = this.pullCaption = this.pullLoading = false\n\t\t\t}\n\t\t\tthis._super(e);\n\t\t},\n\t\t_drag: function(e) {\n\t\t\tthis._super(e);\n\t\t\tif(!this.pulldown && !this.loading && this.topPocket && e.detail.direction === 'down' && this.y >= 0) {\n\t\t\t\tthis._initPulldownRefresh();\n\t\t\t}\n\t\t\tif(this.pulldown) {\n\t\t\t\tthis._setCaption(this.y > this.options.down.height ? this.options.down.contentover : this.options.down.contentdown);\n\t\t\t}\n\t\t},\n\n\t\t_reLayout: function() {\n\t\t\tthis.hasVerticalScroll = true;\n\t\t\tthis._super();\n\t\t},\n\t\t//API\n\t\tresetPosition: function(time) {\n\t\t\tif(this.pulldown) {\n\t\t\t\tif(this.y >= this.options.down.height) {\n\t\t\t\t\tthis.pulldownLoading(undefined, time || 0);\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\t!this.loading && this.topPocket.classList.remove(CLASS_VISIBILITY);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this._super(time);\n\t\t},\n\t\tpulldownLoading: function(y, time) {\n\t\t\ttypeof y === 'undefined' && (y = this.options.down.height); //默认高度\n\t\t\tthis.scrollTo(0, y, time, this.options.bounceEasing);\n\t\t\tif(this.loading) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//\t\t\tif (!this.pulldown) {\n\t\t\tthis._initPulldownRefresh();\n\t\t\t//\t\t\t}\n\t\t\tthis._setCaption(this.options.down.contentrefresh);\n\t\t\tthis.loading = true;\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.fade(0);\n\t\t\t});\n\t\t\tvar callback = this.options.down.callback;\n\t\t\tcallback && callback.call(this);\n\t\t},\n\t\tendPulldownToRefresh: function() {\n\t\t\tvar self = this;\n\t\t\tif(self.topPocket && self.loading && this.pulldown) {\n\t\t\t\tself.scrollTo(0, 0, self.options.bounceTime, self.options.bounceEasing);\n\t\t\t\tself.loading = false;\n\t\t\t\tself._setCaption(self.options.down.contentdown, true);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.loading || self.topPocket.classList.remove(CLASS_VISIBILITY);\n\t\t\t\t}, 350);\n\t\t\t}\n\t\t},\n\t\tpullupLoading: function(callback, x, time) {\n\t\t\tx = x || 0;\n\t\t\tthis.scrollTo(x, this.maxScrollY, time, this.options.bounceEasing);\n\t\t\tif(this.loading) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._initPullupRefresh();\n\t\t\tthis._setCaption(this.options.up.contentrefresh);\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.fade(0);\n\t\t\t});\n\t\t\tthis.loading = true;\n\t\t\tcallback = callback || this.options.up.callback;\n\t\t\tcallback && callback.call(this);\n\t\t},\n\t\tendPullupToRefresh: function(finished) {\n\t\t\tvar self = this;\n\t\t\tif(self.bottomPocket) { // && self.loading && !this.pulldown\n\t\t\t\tself.loading = false;\n\t\t\t\tif(finished) {\n\t\t\t\t\tthis.finished = true;\n\t\t\t\t\tself._setCaption(self.options.up.contentnomore);\n\t\t\t\t\t//\t\t\t\t\tself.bottomPocket.classList.remove(CLASS_VISIBILITY);\n\t\t\t\t\t//\t\t\t\t\tself.bottomPocket.classList.add(CLASS_HIDDEN);\n\t\t\t\t\tself.wrapper.removeEventListener('scrollbottom', self);\n\t\t\t\t} else {\n\t\t\t\t\tself._setCaption(self.options.up.contentdown);\n\t\t\t\t\t//\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.loading || self.bottomPocket.classList.remove(CLASS_VISIBILITY);\n\t\t\t\t\t//\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdisablePullupToRefresh: function() {\n\t\t\tthis._initPullupRefresh();\n\t\t\tthis.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\n\t\t\tthis.wrapper.removeEventListener('scrollbottom', this);\n\t\t},\n\t\tenablePullupToRefresh: function() {\n\t\t\tthis._initPullupRefresh();\n\t\t\tthis.bottomPocket.classList.remove(CLASS_HIDDEN);\n\t\t\tthis._setCaption(this.options.up.contentdown);\n\t\t\tthis.wrapper.addEventListener('scrollbottom', this);\n\t\t},\n\t\trefresh: function(isReset) {\n\t\t\tif(isReset && this.finished) {\n\t\t\t\tthis.enablePullupToRefresh();\n\t\t\t\tthis.finished = false;\n\t\t\t}\n\t\t\tthis._super();\n\t\t},\n\t}, $.PullRefresh));\n\t$.fn.pullRefresh = function(options) {\n\t\tif(this.length === 1) {\n\t\t\tvar self = this[0];\n\t\t\tvar pullRefreshApi = null;\n\t\t\tvar id = self.getAttribute('data-pullrefresh');\n\t\t\tif(!id && typeof options === 'undefined') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\toptions = options || {};\n\t\t\tif(!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\t$.data[id] = pullRefreshApi = new PullRefresh(self, options);\n\t\t\t\tself.setAttribute('data-pullrefresh', id);\n\t\t\t} else {\n\t\t\t\tpullRefreshApi = $.data[id];\n\t\t\t}\n\t\t\tif(options.down && options.down.auto) { //如果设置了auto，则自动下拉一次\n\t\t\t\tpullRefreshApi.pulldownLoading(options.down.autoY);\n\t\t\t} else if(options.up && options.up.auto) { //如果设置了auto，则自动上拉一次\n\t\t\t\tpullRefreshApi.pullupLoading();\n\t\t\t}\n\t\t\t//暂不提供这种调用方式吧\t\t\t\n\t\t\t//\t\t\tif (typeof options === 'string') {\n\t\t\t//\t\t\t\tvar methodValue = pullRefreshApi[options].apply(pullRefreshApi, $.slice.call(arguments, 1));\n\t\t\t//\t\t\t\tif (methodValue !== undefined) {\n\t\t\t//\t\t\t\t\treturn methodValue;\n\t\t\t//\t\t\t\t}\n\t\t\t//\t\t\t}\n\t\t\treturn pullRefreshApi;\n\t\t}\n\t};\n})(mui, window, document);\n/**\n * snap 重构\n * @param {Object} $\n * @param {Object} window\n */\n(function($, window) {\n\tvar CLASS_SLIDER = 'mui-slider';\n\tvar CLASS_SLIDER_GROUP = 'mui-slider-group';\n\tvar CLASS_SLIDER_LOOP = 'mui-slider-loop';\n\tvar CLASS_SLIDER_INDICATOR = 'mui-slider-indicator';\n\tvar CLASS_ACTION_PREVIOUS = 'mui-action-previous';\n\tvar CLASS_ACTION_NEXT = 'mui-action-next';\n\tvar CLASS_SLIDER_ITEM = 'mui-slider-item';\n\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\tvar SELECTOR_SLIDER_ITEM = '.' + CLASS_SLIDER_ITEM;\n\tvar SELECTOR_SLIDER_INDICATOR = '.' + CLASS_SLIDER_INDICATOR;\n\tvar SELECTOR_SLIDER_PROGRESS_BAR = '.mui-slider-progress-bar';\n\n\tvar Slider = $.Slider = $.Scroll.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis._super(element, $.extend(true, {\n\t\t\t\tfingers: 1,\n\t\t\t\tinterval: 0, //设置为0，则不定时轮播\n\t\t\t\tscrollY: false,\n\t\t\t\tscrollX: true,\n\t\t\t\tindicators: false,\n\t\t\t\tscrollTime: 1000,\n\t\t\t\tstartX: false,\n\t\t\t\tslideTime: 0, //滑动动画时间\n\t\t\t\tsnap: SELECTOR_SLIDER_ITEM\n\t\t\t}, options));\n\t\t\tif(this.options.startX) {\n\t\t\t\t//\t\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n\t\t\t}\n\t\t},\n\t\t_init: function() {\n\t\t\tthis._reInit();\n\t\t\tif(this.scroller) {\n\t\t\t\tthis.scrollerStyle = this.scroller.style;\n\t\t\t\tthis.progressBar = this.wrapper.querySelector(SELECTOR_SLIDER_PROGRESS_BAR);\n\t\t\t\tif(this.progressBar) {\n\t\t\t\t\tthis.progressBarWidth = this.progressBar.offsetWidth;\n\t\t\t\t\tthis.progressBarStyle = this.progressBar.style;\n\t\t\t\t}\n\t\t\t\t//忘记这个代码是干什么的了？\n\t\t\t\t//\t\t\t\tthis.x = this._getScroll();\n\t\t\t\t//\t\t\t\tif (this.options.startX === false) {\n\t\t\t\t//\t\t\t\t\tthis.options.startX = this.x;\n\t\t\t\t//\t\t\t\t}\n\t\t\t\t//根据active修正startX\n\n\t\t\t\tthis._super();\n\t\t\t\tthis._initTimer();\n\t\t\t}\n\t\t},\n\t\t_triggerSlide: function() {\n\t\t\tvar self = this;\n\t\t\tself.isInTransition = false;\n\t\t\tvar page = self.currentPage;\n\t\t\tself.slideNumber = self._fixedSlideNumber();\n\t\t\tif(self.loop) {\n\t\t\t\tif(self.slideNumber === 0) {\n\t\t\t\t\tself.setTranslate(self.pages[1][0].x, 0);\n\t\t\t\t} else if(self.slideNumber === self.itemLength - 3) {\n\t\t\t\t\tself.setTranslate(self.pages[self.itemLength - 2][0].x, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(self.lastSlideNumber != self.slideNumber) {\n\t\t\t\tself.lastSlideNumber = self.slideNumber;\n\t\t\t\tself.lastPage = self.currentPage;\n\t\t\t\t$.trigger(self.wrapper, 'slide', {\n\t\t\t\t\tslideNumber: self.slideNumber\n\t\t\t\t});\n\t\t\t}\n\t\t\tself._initTimer();\n\t\t},\n\t\t_handleSlide: function(e) {\n\t\t\tvar self = this;\n\t\t\tif(e.target !== self.wrapper) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar detail = e.detail;\n\t\t\tdetail.slideNumber = detail.slideNumber || 0;\n\t\t\tvar temps = self.scroller.querySelectorAll(SELECTOR_SLIDER_ITEM);\n\t\t\tvar items = [];\n\t\t\tfor(var i = 0, len = temps.length; i < len; i++) {\n\t\t\t\tvar item = temps[i];\n\t\t\t\tif(item.parentNode === self.scroller) {\n\t\t\t\t\titems.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar _slideNumber = detail.slideNumber;\n\t\t\tif(self.loop) {\n\t\t\t\t_slideNumber += 1;\n\t\t\t}\n\t\t\tif(!self.wrapper.classList.contains('mui-segmented-control')) {\n\t\t\t\tfor(var i = 0, len = items.length; i < len; i++) {\n\t\t\t\t\tvar item = items[i];\n\t\t\t\t\tif(item.parentNode === self.scroller) {\n\t\t\t\t\t\tif(i === _slideNumber) {\n\t\t\t\t\t\t\titem.classList.add(CLASS_ACTIVE);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.classList.remove(CLASS_ACTIVE);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar indicatorWrap = self.wrapper.querySelector('.mui-slider-indicator');\n\t\t\tif(indicatorWrap) {\n\t\t\t\tif(indicatorWrap.getAttribute('data-scroll')) { //scroll\n\t\t\t\t\t$(indicatorWrap).scroll().gotoPage(detail.slideNumber);\n\t\t\t\t}\n\t\t\t\tvar indicators = indicatorWrap.querySelectorAll('.mui-indicator');\n\t\t\t\tif(indicators.length > 0) { //图片轮播\n\t\t\t\t\tfor(var i = 0, len = indicators.length; i < len; i++) {\n\t\t\t\t\t\tindicators[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar number = indicatorWrap.querySelector('.mui-number span');\n\t\t\t\t\tif(number) { //图文表格\n\t\t\t\t\t\tnumber.innerText = (detail.slideNumber + 1);\n\t\t\t\t\t} else { //segmented controls\n\t\t\t\t\t\tvar controlItems = indicatorWrap.querySelectorAll('.mui-control-item');\n\t\t\t\t\t\tfor(var i = 0, len = controlItems.length; i < len; i++) {\n\t\t\t\t\t\t\tcontrolItems[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t},\n\t\t_handleTabShow: function(e) {\n\t\t\tvar self = this;\n\t\t\tself.gotoItem((e.detail.tabNumber || 0), self.options.slideTime);\n\t\t},\n\t\t_handleIndicatorTap: function(event) {\n\t\t\tvar self = this;\n\t\t\tvar target = event.target;\n\t\t\tif(target.classList.contains(CLASS_ACTION_PREVIOUS) || target.classList.contains(CLASS_ACTION_NEXT)) {\n\t\t\t\tself[target.classList.contains(CLASS_ACTION_PREVIOUS) ? 'prevItem' : 'nextItem']();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\t_initEvent: function(detach) {\n\t\t\tvar self = this;\n\t\t\tself._super(detach);\n\t\t\tvar action = detach ? 'removeEventListener' : 'addEventListener';\n\t\t\tself.wrapper[action]('slide', this);\n\t\t\tself.wrapper[action]($.eventName('shown', 'tab'), this);\n\t\t},\n\t\thandleEvent: function(e) {\n\t\t\tthis._super(e);\n\t\t\tswitch(e.type) {\n\t\t\t\tcase 'slide':\n\t\t\t\t\tthis._handleSlide(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.eventName('shown', 'tab'):\n\t\t\t\t\tif(~this.snaps.indexOf(e.target)) { //避免嵌套监听错误的tab show\n\t\t\t\t\t\tthis._handleTabShow(e);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t_scrollend: function(e) {\n\t\t\tthis._super(e);\n\t\t\tthis._triggerSlide(e);\n\t\t},\n\t\t_drag: function(e) {\n\t\t\tthis._super(e);\n\t\t\tvar direction = e.detail.direction;\n\t\t\tif(direction === 'left' || direction === 'right') {\n\t\t\t\t//拖拽期间取消定时\n\t\t\t\tvar slidershowTimer = this.wrapper.getAttribute('data-slidershowTimer');\n\t\t\t\tslidershowTimer && window.clearTimeout(slidershowTimer);\n\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t},\n\t\t_initTimer: function() {\n\t\t\tvar self = this;\n\t\t\tvar slider = self.wrapper;\n\t\t\tvar interval = self.options.interval;\n\t\t\tvar slidershowTimer = slider.getAttribute('data-slidershowTimer');\n\t\t\tslidershowTimer && window.clearTimeout(slidershowTimer);\n\t\t\tif(interval) {\n\t\t\t\tslidershowTimer = window.setTimeout(function() {\n\t\t\t\t\tif(!slider) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t//仅slider显示状态进行自动轮播\n\t\t\t\t\tif(!!(slider.offsetWidth || slider.offsetHeight)) {\n\t\t\t\t\t\tself.nextItem(true);\n\t\t\t\t\t\t//下一个\n\t\t\t\t\t}\n\t\t\t\t\tself._initTimer();\n\t\t\t\t}, interval);\n\t\t\t\tslider.setAttribute('data-slidershowTimer', slidershowTimer);\n\t\t\t}\n\t\t},\n\n\t\t_fixedSlideNumber: function(page) {\n\t\t\tpage = page || this.currentPage;\n\t\t\tvar slideNumber = page.pageX;\n\t\t\tif(this.loop) {\n\t\t\t\tif(page.pageX === 0) {\n\t\t\t\t\tslideNumber = this.itemLength - 3;\n\t\t\t\t} else if(page.pageX === (this.itemLength - 1)) {\n\t\t\t\t\tslideNumber = 0;\n\t\t\t\t} else {\n\t\t\t\t\tslideNumber = page.pageX - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn slideNumber;\n\t\t},\n\t\t_reLayout: function() {\n\t\t\tthis.hasHorizontalScroll = true;\n\t\t\tthis.loop = this.scroller.classList.contains(CLASS_SLIDER_LOOP);\n\t\t\tthis._super();\n\t\t},\n\t\t_getScroll: function() {\n\t\t\tvar result = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\n\t\t\treturn result ? result.x : 0;\n\t\t},\n\t\t_transitionEnd: function(e) {\n\t\t\tif(e.target !== this.scroller || !this.isInTransition) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._transitionTime();\n\t\t\tthis.isInTransition = false;\n\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n\t\t},\n\t\t_flick: function(e) {\n\t\t\tif(!this.moved) { //无moved\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar detail = e.detail;\n\t\t\tvar direction = detail.direction;\n\t\t\tthis._clearRequestAnimationFrame();\n\t\t\tthis.isInTransition = true;\n\t\t\t//\t\t\tif (direction === 'up' || direction === 'down') {\n\t\t\t//\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t//\t\t\t\treturn;\n\t\t\t//\t\t\t}\n\t\t\tif(e.type === 'flick') {\n\t\t\t\tif(detail.deltaTime < 200) { //flick，太容易触发，额外校验一下deltaTime\n\t\t\t\t\tthis.x = this._getPage((this.slideNumber + (direction === 'right' ? -1 : 1)), true).x;\n\t\t\t\t}\n\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t} else if(e.type === 'dragend' && !detail.flick) {\n\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t},\n\t\t_initSnap: function() {\n\t\t\tthis.scrollerWidth = this.itemLength * this.scrollerWidth;\n\t\t\tthis.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\n\t\t\tthis._super();\n\t\t\tif(!this.currentPage.x) {\n\t\t\t\t//当slider处于隐藏状态时，导致snap计算是错误的，临时先这么判断一下，后续要考虑解决所有scroll在隐藏状态下初始化属性不正确的问题\n\t\t\t\tvar currentPage = this.pages[this.loop ? 1 : 0];\n\t\t\t\tcurrentPage = currentPage || this.pages[0];\n\t\t\t\tif(!currentPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.currentPage = currentPage[0];\n\t\t\t\tthis.slideNumber = 0;\n\t\t\t\tthis.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? 0 : this.lastSlideNumber;\n\t\t\t} else {\n\t\t\t\tthis.slideNumber = this._fixedSlideNumber();\n\t\t\t\tthis.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? this.slideNumber : this.lastSlideNumber;\n\t\t\t}\n\t\t\tthis.options.startX = this.currentPage.x || 0;\n\t\t},\n\t\t_getSnapX: function(offsetLeft) {\n\t\t\treturn Math.max(-offsetLeft, this.maxScrollX);\n\t\t},\n\t\t_getPage: function(slideNumber, isFlick) {\n\t\t\tif(this.loop) {\n\t\t\t\tif(slideNumber > (this.itemLength - (isFlick ? 2 : 3))) {\n\t\t\t\t\tslideNumber = 1;\n\t\t\t\t\ttime = 0;\n\t\t\t\t} else if(slideNumber < (isFlick ? -1 : 0)) {\n\t\t\t\t\tslideNumber = this.itemLength - 2;\n\t\t\t\t\ttime = 0;\n\t\t\t\t} else {\n\t\t\t\t\tslideNumber += 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(!isFlick) {\n\t\t\t\t\tif(slideNumber > (this.itemLength - 1)) {\n\t\t\t\t\t\tslideNumber = 0;\n\t\t\t\t\t\ttime = 0;\n\t\t\t\t\t} else if(slideNumber < 0) {\n\t\t\t\t\t\tslideNumber = this.itemLength - 1;\n\t\t\t\t\t\ttime = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tslideNumber = Math.min(Math.max(0, slideNumber), this.itemLength - 1);\n\t\t\t}\n\t\t\treturn this.pages[slideNumber][0];\n\t\t},\n\t\t_gotoItem: function(slideNumber, time) {\n\t\t\tthis.currentPage = this._getPage(slideNumber, true); //此处传true。可保证程序切换时，动画与人手操作一致(第一张，最后一张的切换动画)\n\t\t\tthis.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\n\t\t\tif(time === 0) {\n\t\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n\t\t\t}\n\t\t},\n\t\t//API\n\t\tsetTranslate: function(x, y) {\n\t\t\tthis._super(x, y);\n\t\t\tvar progressBar = this.progressBar;\n\t\t\tif(progressBar) {\n\t\t\t\tthis.progressBarStyle.webkitTransform = this._getTranslateStr((-x * (this.progressBarWidth / this.wrapperWidth)), 0);\n\t\t\t}\n\t\t},\n\t\tresetPosition: function(time) {\n\t\t\ttime = time || 0;\n\t\t\tif(this.x > 0) {\n\t\t\t\tthis.x = 0;\n\t\t\t} else if(this.x < this.maxScrollX) {\n\t\t\t\tthis.x = this.maxScrollX;\n\t\t\t}\n\t\t\tthis.currentPage = this._nearestSnap(this.x);\n\t\t\tthis.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\n\t\t\treturn true;\n\t\t},\n\t\tgotoItem: function(slideNumber, time) {\n\t\t\tthis._gotoItem(slideNumber, typeof time === 'undefined' ? this.options.scrollTime : time);\n\t\t},\n\t\tnextItem: function() {\n\t\t\tthis._gotoItem(this.slideNumber + 1, this.options.scrollTime);\n\t\t},\n\t\tprevItem: function() {\n\t\t\tthis._gotoItem(this.slideNumber - 1, this.options.scrollTime);\n\t\t},\n\t\tgetSlideNumber: function() {\n\t\t\treturn this.slideNumber || 0;\n\t\t},\n\t\t_reInit: function() {\n\t\t\tvar groups = this.wrapper.querySelectorAll('.' + CLASS_SLIDER_GROUP);\n\t\t\tfor(var i = 0, len = groups.length; i < len; i++) {\n\t\t\t\tif(groups[i].parentNode === this.wrapper) {\n\t\t\t\t\tthis.scroller = groups[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\n\t\t\tif(this.progressBar) {\n\t\t\t\tthis.progressBarWidth = this.progressBar.offsetWidth;\n\t\t\t\tthis.progressBarStyle = this.progressBar.style;\n\t\t\t}\n\t\t},\n\t\trefresh: function(options) {\n\t\t\tif(options) {\n\t\t\t\t$.extend(this.options, options);\n\t\t\t\tthis._super();\n\t\t\t\tthis._initTimer();\n\t\t\t} else {\n\t\t\t\tthis._super();\n\t\t\t}\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._initEvent(true); //detach\n\t\t\tdelete $.data[this.wrapper.getAttribute('data-slider')];\n\t\t\tthis.wrapper.setAttribute('data-slider', '');\n\t\t}\n\t});\n\t$.fn.slider = function(options) {\n\t\tvar slider = null;\n\t\tthis.each(function() {\n\t\t\tvar sliderElement = this;\n\t\t\tif(!this.classList.contains(CLASS_SLIDER)) {\n\t\t\t\tsliderElement = this.querySelector('.' + CLASS_SLIDER);\n\t\t\t}\n\t\t\tif(sliderElement && sliderElement.querySelector(SELECTOR_SLIDER_ITEM)) {\n\t\t\t\tvar id = sliderElement.getAttribute('data-slider');\n\t\t\t\tif(!id) {\n\t\t\t\t\tid = ++$.uuid;\n\t\t\t\t\t$.data[id] = slider = new Slider(sliderElement, options);\n\t\t\t\t\tsliderElement.setAttribute('data-slider', id);\n\t\t\t\t} else {\n\t\t\t\t\tslider = $.data[id];\n\t\t\t\t\tif(slider && options) {\n\t\t\t\t\t\tslider.refresh(options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn slider;\n\t};\n\t$.ready(function() {\n\t\t//\t\tsetTimeout(function() {\n\t\t$('.mui-slider').slider();\n\t\t$('.mui-scroll-wrapper.mui-slider-indicator.mui-segmented-control').scroll({\n\t\t\tscrollY: false,\n\t\t\tscrollX: true,\n\t\t\tindicators: false,\n\t\t\tsnap: '.mui-control-item'\n\t\t});\n\t\t//\t\t}, 500); //临时处理slider宽度计算不正确的问题(初步确认是scrollbar导致的)\n\n\t});\n})(mui, window);\n/**\n * pullRefresh 5+\n * @param {type} $\n * @returns {undefined}\n */\n(function($, document) {\n\tif(!($.os.plus)) { //仅在5+android支持多webview的使用\n\t\treturn;\n\t}\n\t$.plusReady(function() {\n\t\tif(window.__NWin_Enable__ === false) { //不支持多webview，则不用5+下拉刷新\n\t\t\treturn;\n\t\t}\n\t\tvar CLASS_PLUS_PULLREFRESH = 'mui-plus-pullrefresh';\n\t\tvar CLASS_VISIBILITY = 'mui-visibility';\n\t\tvar CLASS_HIDDEN = 'mui-hidden';\n\t\tvar CLASS_BLOCK = 'mui-block';\n\n\t\tvar CLASS_PULL_CAPTION = 'mui-pull-caption';\n\t\tvar CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\n\t\tvar CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\n\t\tvar CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\n\n\t\tvar PlusPullRefresh = $.Class.extend({\n\t\t\tinit: function(element, options) {\n\t\t\t\tthis.element = element;\n\t\t\t\tthis.options = options;\n\t\t\t\tthis.wrapper = this.scroller = element;\n\t\t\t\tthis._init();\n\t\t\t\tthis._initPulldownRefreshEvent();\n\t\t\t},\n\t\t\t_init: function() {\n\t\t\t\tvar self = this;\n\t\t\t\t//document.addEventListener('plusscrollbottom', this);\n\t\t\t\twindow.addEventListener('dragup', self);\n\t\t\t\tdocument.addEventListener(\"plusscrollbottom\", self);\n\t\t\t\tself.scrollInterval = window.setInterval(function() {\n\t\t\t\t\tif(self.isScroll && !self.loading) {\n\t\t\t\t\t\tif(window.pageYOffset + window.innerHeight + 10 >= document.documentElement.scrollHeight) {\n\t\t\t\t\t\t\tself.isScroll = false; //放在这里是因为快速滚动的话，有可能检测时，还没到底，所以只要有滚动，没到底之前一直检测高度变化\n\t\t\t\t\t\t\tif(self.bottomPocket) {\n\t\t\t\t\t\t\t\tself.pullupLoading();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t},\n\t\t\t_initPulldownRefreshEvent: function() {\n\t\t\t\tvar self = this;\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tif(self.options.down.style == \"circle\") {\n\t\t\t\t\t\t//单webview、原生转圈\n\t\t\t\t\t\tself.options.webview = plus.webview.currentWebview();\n\t\t\t\t\t\tself.options.webview.setPullToRefresh({\n\t\t\t\t\t\t\tsupport: true,\n\t\t\t\t\t\t\tcolor: self.options.down.color || '#2BD009',\n\t\t\t\t\t\t\theight: self.options.down.height || '50px',\n\t\t\t\t\t\t\trange: self.options.down.range || '100px',\n\t\t\t\t\t\t\tstyle: 'circle',\n\t\t\t\t\t\t\toffset: self.options.down.offset || '0px'\n\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\tself.options.down.callback();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if(self.topPocket && self.options.webviewId) {\n\t\t\t\t\t\tvar webview = plus.webview.getWebviewById(self.options.webviewId); //子窗口\n\t\t\t\t\t\tif(!webview) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.options.webview = webview;\n\t\t\t\t\t\tvar downOptions = self.options.down;\n\t\t\t\t\t\tvar height = downOptions.height;\n\t\t\t\t\t\twebview.addEventListener('close', function() {\n\t\t\t\t\t\t\tvar attrWebviewId = self.options.webviewId && self.options.webviewId.replace(/\\//g, \"_\"); //替换所有\"/\" \n\t\t\t\t\t\t\tself.element.removeAttribute('data-pullrefresh-plus-' + attrWebviewId);\n\t\t\t\t\t\t});\n\t\t\t\t\t\twebview.addEventListener(\"dragBounce\", function(e) {\n\t\t\t\t\t\t\tif(!self.pulldown) {\n\t\t\t\t\t\t\t\tself._initPulldownRefresh();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tself.pullPocket.classList.add(CLASS_BLOCK);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tswitch(e.status) {\n\t\t\t\t\t\t\t\tcase \"beforeChangeOffset\": //下拉可刷新状态\n\t\t\t\t\t\t\t\t\tself._setCaption(downOptions.contentdown);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"afterChangeOffset\": //松开可刷新状态\n\t\t\t\t\t\t\t\t\tself._setCaption(downOptions.contentover);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"dragEndAfterChangeOffset\": //正在刷新状态\n\t\t\t\t\t\t\t\t\t//执行下拉刷新所在webview的回调函数\n\t\t\t\t\t\t\t\t\twebview.evalJS(\"window.mui&&mui.options.pullRefresh.down.callback()\");\n\t\t\t\t\t\t\t\t\tself._setCaption(downOptions.contentrefresh);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, false);\n\n\t\t\t\t\t\twebview.setBounce({\n\t\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\t\ttop: height * 2 + 'px'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tchangeoffset: {\n\t\t\t\t\t\t\t\ttop: height + 'px'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleEvent: function(e) {\n\t\t\t\tvar self = this;\n\t\t\t\tif(self.stopped) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tself.isScroll = false;\n\t\t\t\tif(e.type === 'dragup' || e.type === 'plusscrollbottom') {\n\t\t\t\t\tself.isScroll = true;\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tself.isScroll = false;\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t}\n\t\t}).extend($.extend({\n\t\t\tsetStopped: function(stopped) { //该方法是子页面调用的\n\t\t\t\tthis.stopped = !!stopped;\n\t\t\t\t//TODO 此处需要设置当前webview的bounce为none,目前5+有BUG\n\t\t\t\tvar webview = plus.webview.currentWebview();\n\t\t\t\tif(this.stopped) {\n\t\t\t\t\twebview.setStyle({\n\t\t\t\t\t\tbounce: 'none'\n\t\t\t\t\t});\n\t\t\t\t\twebview.setBounce({\n\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\ttop: 'none'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tvar height = this.options.down.height;\n\t\t\t\t\twebview.setStyle({\n\t\t\t\t\t\tbounce: 'vertical'\n\t\t\t\t\t});\n\t\t\t\t\twebview.setBounce({\n\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\ttop: height * 2 + 'px'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchangeoffset: {\n\t\t\t\t\t\t\ttop: height + 'px'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tbeginPulldown: function() {\n\t\t\t\tvar self = this;\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\t//这里延时的目的是为了保证下拉刷新组件初始化完成，后续应该做成有状态的\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tif(self.options.down.style == \"circle\") { //单webview下拉刷新\n\t\t\t\t\t\t\tplus.webview.currentWebview().beginPullToRefresh();\n\t\t\t\t\t\t} else { //双webview模式\n\t\t\t\t\t\t\tvar webview = self.options.webview;\n\t\t\t\t\t\t\tif(webview) {\n\t\t\t\t\t\t\t\twebview.setBounce({\n\t\t\t\t\t\t\t\t\toffset: {\n\t\t\t\t\t\t\t\t\t\ttop: self.options.down.height + \"px\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 15);\n\t\t\t\t}.bind(this));\n\t\t\t},\n\t\t\tpulldownLoading: function() { //该方法是子页面调用的，兼容老的历史API\n\t\t\t\tthis.beginPulldown();\n\t\t\t},\n\t\t\t_pulldownLoading: function() { //该方法是父页面调用的\n\t\t\t\tvar self = this;\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tvar childWebview = plus.webview.getWebviewById(self.options.webviewId);\n\t\t\t\t\tchildWebview && childWebview.setBounce({\n\t\t\t\t\t\toffset: {\n\t\t\t\t\t\t\ttop: self.options.down.height + \"px\"\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tendPulldown: function() {\n\t\t\t\tvar _wv = plus.webview.currentWebview();\n\t\t\t\t//双webview的下拉刷新，需要修改父窗口提示信息\n\t\t\t\tif(_wv.parent() && this.options.down.style !== \"circle\") {\n\t\t\t\t\t_wv.parent().evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify({\n\t\t\t\t\t\twebviewId: _wv.id\n\t\t\t\t\t}) + \"')._endPulldownToRefresh()\");\n\t\t\t\t} else {\n\t\t\t\t\t_wv.endPullToRefresh();\n\t\t\t\t}\n\t\t\t},\n\t\t\tendPulldownToRefresh: function() { //该方法是子页面调用的，兼容老的历史API\n\t\t\t\tthis.endPulldown();\n\t\t\t},\n\t\t\t_endPulldownToRefresh: function() { //该方法是父页面调用的\n\t\t\t\tvar self = this;\n\t\t\t\tif(self.topPocket && self.options.webview) {\n\t\t\t\t\tself.options.webview.endPullToRefresh(); //下拉刷新所在webview回弹\n\t\t\t\t\tself.loading = false;\n\t\t\t\t\tself._setCaption(self.options.down.contentdown, true);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tself.loading || self.topPocket.classList.remove(CLASS_BLOCK);\n\t\t\t\t\t}, 350);\n\t\t\t\t}\n\t\t\t},\n\t\t\tbeginPullup: function(callback) { //开始上拉加载\n\t\t\t\tvar self = this;\n\t\t\t\tif(self.isLoading) return;\n\t\t\t\tself.isLoading = true;\n\t\t\t\tif(self.pulldown !== false) {\n\t\t\t\t\tself._initPullupRefresh();\n\t\t\t\t} else {\n\t\t\t\t\tthis.pullPocket.classList.add(CLASS_BLOCK);\n\t\t\t\t}\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.pullLoading.classList.add(CLASS_VISIBILITY);\n\t\t\t\t\tself.pullLoading.classList.remove(CLASS_HIDDEN);\n\t\t\t\t\tself.pullCaption.innerHTML = ''; //修正5+里边第一次加载时，文字显示的bug(还会显示出来个“多”,猜测应该是渲染问题导致的)\n\t\t\t\t\tself.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH;\n\t\t\t\t\tself.pullCaption.innerHTML = self.options.up.contentrefresh;\n\t\t\t\t\tcallback = callback || self.options.up.callback;\n\t\t\t\t\tcallback && callback.call(self);\n\t\t\t\t}, 300);\n\t\t\t},\n\t\t\tpullupLoading: function(callback) { //兼容老的API\n\t\t\t\tthis.beginPullup(callback);\n\t\t\t},\n\t\t\tendPullup: function(finished) { //上拉加载结束\n\t\t\t\tvar self = this;\n\t\t\t\tif(self.pullLoading) {\n\t\t\t\t\tself.pullLoading.classList.remove(CLASS_VISIBILITY);\n\t\t\t\t\tself.pullLoading.classList.add(CLASS_HIDDEN);\n\t\t\t\t\tself.isLoading = false;\n\t\t\t\t\tif(finished) {\n\t\t\t\t\t\tself.finished = true;\n\t\t\t\t\t\tself.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\n\t\t\t\t\t\tself.pullCaption.innerHTML = self.options.up.contentnomore;\n\t\t\t\t\t\t//取消5+的plusscrollbottom事件\n\t\t\t\t\t\tdocument.removeEventListener('plusscrollbottom', self);\n\t\t\t\t\t\twindow.removeEventListener('dragup', self);\n\t\t\t\t\t} else { //初始化时隐藏，后续不再隐藏\n\t\t\t\t\t\tself.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n\t\t\t\t\t\tself.pullCaption.innerHTML = self.options.up.contentdown;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tendPullupToRefresh: function(finished) { //上拉加载结束，兼容老的API\n\t\t\t\tthis.endPullup(finished);\n\t\t\t},\n\t\t\tdisablePullupToRefresh: function() {\n\t\t\t\tthis._initPullupRefresh();\n\t\t\t\tthis.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\n\t\t\t\twindow.removeEventListener('dragup', this);\n\t\t\t},\n\t\t\tenablePullupToRefresh: function() {\n\t\t\t\tthis._initPullupRefresh();\n\t\t\t\tthis.bottomPocket.classList.remove(CLASS_HIDDEN);\n\t\t\t\tthis.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n\t\t\t\tthis.pullCaption.innerHTML = this.options.up.contentdown;\n\t\t\t\tdocument.addEventListener(\"plusscrollbottom\", this);\n\t\t\t\twindow.addEventListener('dragup', this);\n\t\t\t},\n\t\t\tscrollTo: function(x, y, time) {\n\t\t\t\t$.scrollTo(y, time);\n\t\t\t},\n\t\t\tscrollToBottom: function(time) {\n\t\t\t\t$.scrollTo(document.documentElement.scrollHeight, time);\n\t\t\t},\n\t\t\trefresh: function(isReset) {\n\t\t\t\tif(isReset && this.finished) {\n\t\t\t\t\tthis.enablePullupToRefresh();\n\t\t\t\t\tthis.finished = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}, $.PullRefresh));\n\n\t\t//override h5 pullRefresh\n\t\t$.fn.pullRefresh_native = function(options) {\n\t\t\tvar self;\n\t\t\tif(this.length === 0) {\n\t\t\t\tself = document.createElement('div');\n\t\t\t\tself.className = 'mui-content';\n\t\t\t\tdocument.body.appendChild(self);\n\t\t\t} else {\n\t\t\t\tself = this[0];\n\t\t\t}\n\t\t\tvar args = options;\n\t\t\t//一个父需要支持多个子下拉刷新\n\t\t\toptions = options || {}\n\t\t\tif(typeof options === 'string') {\n\t\t\t\toptions = $.parseJSON(options);\n\t\t\t};\n\t\t\t!options.webviewId && (options.webviewId = (plus.webview.currentWebview().id || plus.webview.currentWebview().getURL()));\n\t\t\tvar pullRefreshApi = null;\n\t\t\tvar attrWebviewId = options.webviewId && options.webviewId.replace(/\\//g, \"_\"); //替换所有\"/\"\n\t\t\tvar id = self.getAttribute('data-pullrefresh-plus-' + attrWebviewId);\n\t\t\tif(!id && typeof args === 'undefined') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(!id) { //避免重复初始化5+ pullrefresh\n\t\t\t\tid = ++$.uuid;\n\t\t\t\tself.setAttribute('data-pullrefresh-plus-' + attrWebviewId, id);\n\t\t\t\tdocument.body.classList.add(CLASS_PLUS_PULLREFRESH);\n\t\t\t\t$.data[id] = pullRefreshApi = new PlusPullRefresh(self, options);\n\t\t\t} else {\n\t\t\t\tpullRefreshApi = $.data[id];\n\t\t\t}\n\t\t\tif(options.down && options.down.auto) { //如果设置了auto，则自动下拉一次\n\t\t\t\t//pullRefreshApi._pulldownLoading(); //parent webview\n\t\t\t\tpullRefreshApi.beginPulldown();\n\t\t\t} else if(options.up && options.up.auto) { //如果设置了auto，则自动上拉一次\n\t\t\t\tpullRefreshApi.beginPullup();\n\t\t\t}\n\t\t\treturn pullRefreshApi;\n\t\t};\n\t});\n\n})(mui, document);\n/**\n * off-canvas\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} action\n * @returns {undefined}\n */\n(function($, window, document, name) {\n\tvar CLASS_OFF_CANVAS_LEFT = 'mui-off-canvas-left';\n\tvar CLASS_OFF_CANVAS_RIGHT = 'mui-off-canvas-right';\n\tvar CLASS_ACTION_BACKDROP = 'mui-off-canvas-backdrop';\n\tvar CLASS_OFF_CANVAS_WRAP = 'mui-off-canvas-wrap';\n\n\tvar CLASS_SLIDE_IN = 'mui-slide-in';\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\tvar CLASS_TRANSITIONING = 'mui-transitioning';\n\n\tvar SELECTOR_INNER_WRAP = '.mui-inner-wrap';\n\n\tvar OffCanvas = $.Class.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis.wrapper = this.element = element;\n\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n\t\t\tthis.classList = this.wrapper.classList;\n\t\t\tif(this.scroller) {\n\t\t\t\tthis.options = $.extend(true, {\n\t\t\t\t\tdragThresholdX: 10,\n\t\t\t\t\tscale: 0.8,\n\t\t\t\t\topacity: 0.1,\n\t\t\t\t\tpreventDefaultException: {\n\t\t\t\t\t\ttagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\n\t\t\t\t\t},\n\t\t\t\t}, options);\n\t\t\t\tdocument.body.classList.add('mui-fullscreen'); //fullscreen\n\t\t\t\tthis.refresh();\n\t\t\t\tthis.initEvent();\n\t\t\t}\n\t\t},\n\t\t_preventDefaultException: function(el, exceptions) {\n\t\t\tfor(var i in exceptions) {\n\t\t\t\tif(exceptions[i].test(el[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\trefresh: function(offCanvas) {\n\t\t\t//\t\t\toffCanvas && !offCanvas.classList.contains(CLASS_ACTIVE) && this.classList.remove(CLASS_ACTIVE);\n\t\t\tthis.slideIn = this.classList.contains(CLASS_SLIDE_IN);\n\t\t\tthis.scalable = this.classList.contains('mui-scalable') && !this.slideIn;\n\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n\t\t\t//\t\t\t!offCanvas && this.scroller.classList.remove(CLASS_TRANSITIONING);\n\t\t\t//\t\t\t!offCanvas && this.scroller.setAttribute('style', '');\n\t\t\tthis.offCanvasLefts = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_LEFT);\n\t\t\tthis.offCanvasRights = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_RIGHT);\n\t\t\tif(offCanvas) {\n\t\t\t\tif(offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\n\t\t\t\t\tthis.offCanvasLeft = offCanvas;\n\t\t\t\t} else if(offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\n\t\t\t\t\tthis.offCanvasRight = offCanvas;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.offCanvasRight = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT);\n\t\t\t\tthis.offCanvasLeft = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT);\n\t\t\t}\n\t\t\tthis.offCanvasRightWidth = this.offCanvasLeftWidth = 0;\n\t\t\tthis.offCanvasLeftSlideIn = this.offCanvasRightSlideIn = false;\n\t\t\tif(this.offCanvasRight) {\n\t\t\t\tthis.offCanvasRightWidth = this.offCanvasRight.offsetWidth;\n\t\t\t\tthis.offCanvasRightSlideIn = this.slideIn && (this.offCanvasRight.parentNode === this.wrapper);\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_ACTIVE);\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.setAttribute('style', '');\n\t\t\t}\n\t\t\tif(this.offCanvasLeft) {\n\t\t\t\tthis.offCanvasLeftWidth = this.offCanvasLeft.offsetWidth;\n\t\t\t\tthis.offCanvasLeftSlideIn = this.slideIn && (this.offCanvasLeft.parentNode === this.wrapper);\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_ACTIVE);\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.setAttribute('style', '');\n\t\t\t}\n\t\t\tthis.backdrop = this.scroller.querySelector('.' + CLASS_ACTION_BACKDROP);\n\n\t\t\tthis.options.dragThresholdX = this.options.dragThresholdX || 10;\n\n\t\t\tthis.visible = false;\n\t\t\tthis.startX = null;\n\t\t\tthis.lastX = null;\n\t\t\tthis.offsetX = null;\n\t\t\tthis.lastTranslateX = null;\n\t\t},\n\t\thandleEvent: function(e) {\n\t\t\tswitch(e.type) {\n\t\t\t\tcase $.EVENT_START:\n\t\t\t\t\te.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'webkitTransitionEnd': //有个bug需要处理，需要考虑假设没有触发webkitTransitionEnd的情况\n\t\t\t\t\tif(e.target === this.scroller) {\n\t\t\t\t\t\tthis._dispatchEvent();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'drag':\n\t\t\t\t\tvar detail = e.detail;\n\t\t\t\t\tif(!this.startX) {\n\t\t\t\t\t\tthis.startX = detail.center.x;\n\t\t\t\t\t\tthis.lastX = this.startX;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.lastX = detail.center.x;\n\t\t\t\t\t}\n\t\t\t\t\tif(!this.isDragging && Math.abs(this.lastX - this.startX) > this.options.dragThresholdX && (detail.direction === 'left' || (detail.direction === 'right'))) {\n\t\t\t\t\t\tif(this.slideIn) {\n\t\t\t\t\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n\t\t\t\t\t\t\tif(this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\t\t\t\tif(this.offCanvasRight && this.offCanvasRight.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif(detail.direction === 'left' && this.offCanvasRight) {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t} else if(detail.direction === 'right' && this.offCanvasLeft) {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.scroller = null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif(this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\t\t\t\tif(detail.direction === 'left') {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif(detail.direction === 'right') {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(this.offCanvas && this.scroller) {\n\t\t\t\t\t\t\tthis.startX = this.lastX;\n\t\t\t\t\t\t\tthis.isDragging = true;\n\n\t\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\n\t\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\n\n\t\t\t\t\t\t\tthis.offCanvas.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t\t\t\tthis.scroller.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t\t\t\tthis.offsetX = this.getTranslateX();\n\t\t\t\t\t\t\tthis._initOffCanvasVisible();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(this.isDragging) {\n\t\t\t\t\t\tthis.updateTranslate(this.offsetX + (this.lastX - this.startX));\n\t\t\t\t\t\tdetail.gesture.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tif(this.isDragging) {\n\t\t\t\t\t\tvar detail = e.detail;\n\t\t\t\t\t\tvar direction = detail.direction;\n\t\t\t\t\t\tthis.isDragging = false;\n\t\t\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\n\t\t\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\n\t\t\t\t\t\tvar ratio = 0;\n\t\t\t\t\t\tvar x = this.getTranslateX();\n\t\t\t\t\t\tif(!this.slideIn) {\n\t\t\t\t\t\t\tif(x >= 0) {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasLeftWidth && (x / this.offCanvasLeftWidth)) || 0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasRightWidth && (x / this.offCanvasRightWidth)) || 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(ratio === 0) {\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t\tthis._dispatchEvent(); //此处不触发webkitTransitionEnd,所以手动dispatch\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(direction === 'right' && ratio >= 0 && (ratio >= 0.5 || detail.swipe)) { //右滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else if(direction === 'right' && ratio < 0 && (ratio > -0.5 || detail.swipe)) { //右滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if(direction === 'right' && ratio > 0 && ratio < 0.5) { //右滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if(direction === 'right' && ratio < 0.5) { //右滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if(direction === 'left' && ratio <= 0 && (ratio <= -0.5 || detail.swipe)) { //左滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if(direction === 'left' && ratio > 0 && (ratio <= 0.5 || detail.swipe)) { //左滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if(direction === 'left' && ratio < 0 && ratio >= -0.5) { //左滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if(direction === 'left' && ratio > 0.5) { //左滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else { //默认关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(ratio === 1 || ratio === -1) { //此处不触发webkitTransitionEnd,所以手动dispatch\n\t\t\t\t\t\t\t\tthis._dispatchEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif(x >= 0) {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasRightWidth && (x / this.offCanvasRightWidth)) || 0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasLeftWidth && (x / this.offCanvasLeftWidth)) || 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(direction === 'right' && ratio <= 0 && (ratio >= -0.5 || detail.swipe)) { //右滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else if(direction === 'right' && ratio > 0 && (ratio >= 0.5 || detail.swipe)) { //右滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if(direction === 'right' && ratio <= -0.5) { //右滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if(direction === 'right' && ratio > 0 && ratio <= 0.5) { //右滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if(direction === 'left' && ratio >= 0 && (ratio <= 0.5 || detail.swipe)) { //左滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if(direction === 'left' && ratio < 0 && (ratio <= -0.5 || detail.swipe)) { //左滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if(direction === 'left' && ratio >= 0.5) { //左滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if(direction === 'left' && ratio >= -0.5 && ratio < 0) { //左滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(ratio === 1 || ratio === -1 || ratio === 0) {\n\t\t\t\t\t\t\t\tthis._dispatchEvent();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t_dispatchEvent: function() {\n\t\t\tif(this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t$.trigger(this.wrapper, 'shown', this);\n\t\t\t} else {\n\t\t\t\t$.trigger(this.wrapper, 'hidden', this);\n\t\t\t}\n\t\t},\n\t\t_initOffCanvasVisible: function() {\n\t\t\tif(!this.visible) {\n\t\t\t\tthis.visible = true;\n\t\t\t\tif(this.offCanvasLeft) {\n\t\t\t\t\tthis.offCanvasLeft.style.visibility = 'visible';\n\t\t\t\t}\n\t\t\t\tif(this.offCanvasRight) {\n\t\t\t\t\tthis.offCanvasRight.style.visibility = 'visible';\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tinitEvent: function() {\n\t\t\tvar self = this;\n\t\t\tif(self.backdrop) {\n\t\t\t\tself.backdrop.addEventListener('tap', function(e) {\n\t\t\t\t\tself.close();\n\t\t\t\t\te.detail.gesture.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t\tif(this.classList.contains('mui-draggable')) {\n\t\t\t\tthis.wrapper.addEventListener($.EVENT_START, this); //临时处理\n\t\t\t\tthis.wrapper.addEventListener('drag', this);\n\t\t\t\tthis.wrapper.addEventListener('dragend', this);\n\t\t\t}\n\t\t\tthis.wrapper.addEventListener('webkitTransitionEnd', this);\n\t\t},\n\t\topenPercentage: function(percentage) {\n\t\t\tvar p = percentage / 100;\n\t\t\tif(!this.slideIn) {\n\t\t\t\tif(this.offCanvasLeft && percentage >= 0) {\n\t\t\t\t\tthis.updateTranslate(this.offCanvasLeftWidth * p);\n\t\t\t\t\tthis.offCanvasLeft.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t} else if(this.offCanvasRight && percentage <= 0) {\n\t\t\t\t\tthis.updateTranslate(this.offCanvasRightWidth * p);\n\t\t\t\t\tthis.offCanvasRight.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t\tthis.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t} else {\n\t\t\t\tif(this.offCanvasLeft && percentage >= 0) {\n\t\t\t\t\tp = p === 0 ? -1 : 0;\n\t\t\t\t\tthis.updateTranslate(this.offCanvasLeftWidth * p);\n\t\t\t\t\tthis.offCanvasLeft.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t} else if(this.offCanvasRight && percentage <= 0) {\n\t\t\t\t\tp = p === 0 ? 1 : 0;\n\t\t\t\t\tthis.updateTranslate(this.offCanvasRightWidth * p);\n\t\t\t\t\tthis.offCanvasRight.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t\tthis.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t}\n\t\t},\n\t\tupdateTranslate: function(x) {\n\t\t\tif(x !== this.lastTranslateX) {\n\t\t\t\tif(!this.slideIn) {\n\t\t\t\t\tif((!this.offCanvasLeft && x > 0) || (!this.offCanvasRight && x < 0)) {\n\t\t\t\t\t\tthis.setTranslateX(0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(this.leftShowing && x > this.offCanvasLeftWidth) {\n\t\t\t\t\t\tthis.setTranslateX(this.offCanvasLeftWidth);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(this.rightShowing && x < -this.offCanvasRightWidth) {\n\t\t\t\t\t\tthis.setTranslateX(-this.offCanvasRightWidth);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setTranslateX(x);\n\t\t\t\t\tif(x >= 0) {\n\t\t\t\t\t\tthis.leftShowing = true;\n\t\t\t\t\t\tthis.rightShowing = false;\n\t\t\t\t\t\tif(x > 0) {\n\t\t\t\t\t\t\tif(this.offCanvasLeft) {\n\t\t\t\t\t\t\t\t$.each(this.offCanvasLefts, function(index, offCanvas) {\n\t\t\t\t\t\t\t\t\tif(offCanvas === this.offCanvasLeft) {\n\t\t\t\t\t\t\t\t\t\tthis.offCanvasLeft.style.zIndex = 0;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(this.offCanvasRight) {\n\t\t\t\t\t\t\t\tthis.offCanvasRight.style.zIndex = -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.rightShowing = true;\n\t\t\t\t\t\tthis.leftShowing = false;\n\t\t\t\t\t\tif(this.offCanvasRight) {\n\t\t\t\t\t\t\t$.each(this.offCanvasRights, function(index, offCanvas) {\n\t\t\t\t\t\t\t\tif(offCanvas === this.offCanvasRight) {\n\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = -1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(this.offCanvasLeft) {\n\t\t\t\t\t\t\tthis.offCanvasLeft.style.zIndex = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(this.offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\n\t\t\t\t\t\tif(x < 0) {\n\t\t\t\t\t\t\tthis.setTranslateX(0);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(x > this.offCanvasRightWidth) {\n\t\t\t\t\t\t\tthis.setTranslateX(this.offCanvasRightWidth);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(x > 0) {\n\t\t\t\t\t\t\tthis.setTranslateX(0);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(x < -this.offCanvasLeftWidth) {\n\t\t\t\t\t\t\tthis.setTranslateX(-this.offCanvasLeftWidth);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.setTranslateX(x);\n\t\t\t\t}\n\t\t\t\tthis.lastTranslateX = x;\n\t\t\t}\n\t\t},\n\t\tsetTranslateX: $.animationFrame(function(x) {\n\t\t\tif(this.scroller) {\n\t\t\t\tif(this.scalable && this.offCanvas.parentNode === this.wrapper) {\n\t\t\t\t\tvar percent = Math.abs(x) / this.offCanvasWidth;\n\t\t\t\t\tvar zoomOutScale = 1 - (1 - this.options.scale) * percent;\n\t\t\t\t\tvar zoomInScale = this.options.scale + (1 - this.options.scale) * percent;\n\t\t\t\t\tvar zoomOutOpacity = 1 - (1 - this.options.opacity) * percent;\n\t\t\t\t\tvar zoomInOpacity = this.options.opacity + (1 - this.options.opacity) * percent;\n\t\t\t\t\tif(this.offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransformOrigin = '-100%';\n\t\t\t\t\t\tthis.scroller.style.webkitTransformOrigin = 'left';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransformOrigin = '200%';\n\t\t\t\t\t\tthis.scroller.style.webkitTransformOrigin = 'right';\n\t\t\t\t\t}\n\t\t\t\t\tthis.offCanvas.style.opacity = zoomInOpacity;\n\t\t\t\t\tthis.offCanvas.style.webkitTransform = 'translate3d(0,0,0) scale(' + zoomInScale + ')';\n\t\t\t\t\tthis.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0) scale(' + zoomOutScale + ')';\n\t\t\t\t} else {\n\t\t\t\t\tif(this.slideIn) {\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\tgetTranslateX: function() {\n\t\t\tif(this.offCanvas) {\n\t\t\t\tvar scroller = this.slideIn ? this.offCanvas : this.scroller;\n\t\t\t\tvar result = $.parseTranslateMatrix($.getStyles(scroller, 'webkitTransform'));\n\t\t\t\treturn(result && result.x) || 0;\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\t\tisShown: function(direction) {\n\t\t\tvar shown = false;\n\t\t\tif(!this.slideIn) {\n\t\t\t\tvar x = this.getTranslateX();\n\t\t\t\tif(direction === 'right') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x < 0;\n\t\t\t\t} else if(direction === 'left') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x > 0;\n\t\t\t\t} else {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x !== 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(direction === 'left') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\n\t\t\t\t} else if(direction === 'right') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE);\n\t\t\t\t} else {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && (this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn shown;\n\t\t},\n\t\tclose: function() {\n\t\t\tthis._initOffCanvasVisible();\n\t\t\tthis.offCanvas = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\n\t\t\tthis.offCanvasWidth = this.offCanvas.offsetWidth;\n\t\t\tif(this.scroller) {\n\t\t\t\tthis.offCanvas.offsetHeight;\n\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.openPercentage(0);\n\t\t\t}\n\t\t},\n\t\tshow: function(direction) {\n\t\t\tthis._initOffCanvasVisible();\n\t\t\tif(this.isShown(direction)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(!direction) {\n\t\t\t\tdirection = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT) ? 'right' : 'left';\n\t\t\t}\n\t\t\tif(direction === 'right') {\n\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t} else {\n\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t}\n\t\t\tif(this.scroller) {\n\t\t\t\tthis.offCanvas.offsetHeight;\n\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.openPercentage(direction === 'left' ? 100 : -100);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\ttoggle: function(directionOrOffCanvas) {\n\t\t\tvar direction = directionOrOffCanvas;\n\t\t\tif(directionOrOffCanvas && directionOrOffCanvas.classList) {\n\t\t\t\tdirection = directionOrOffCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT) ? 'left' : 'right';\n\t\t\t\tthis.refresh(directionOrOffCanvas);\n\t\t\t}\n\t\t\tif(!this.show(direction)) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t});\n\n\t//hash to offcanvas\n\tvar findOffCanvasContainer = function(target) {\n\t\tparentNode = target.parentNode;\n\t\tif(parentNode) {\n\t\t\tif(parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n\t\t\t\treturn parentNode;\n\t\t\t} else {\n\t\t\t\tparentNode = parentNode.parentNode;\n\t\t\t\tif(parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n\t\t\t\t\treturn parentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tvar handle = function(event, target) {\n\t\tif(target.tagName === 'A' && target.hash) {\n\t\t\tvar offcanvas = document.getElementById(target.hash.replace('#', ''));\n\t\t\tif(offcanvas) {\n\t\t\t\tvar container = findOffCanvasContainer(offcanvas);\n\t\t\t\tif(container) {\n\t\t\t\t\t$.targets._container = container;\n\t\t\t\t\treturn offcanvas;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 60,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisReset: false,\n\t\tisContinue: true\n\t});\n\n\twindow.addEventListener('tap', function(e) {\n\t\tif(!$.targets.offcanvas) {\n\t\t\treturn;\n\t\t}\n\t\t//TODO 此处类型的代码后续考虑统一优化(target机制)，现在的实现费力不讨好\n\t\tvar target = e.target;\n\t\tfor(; target && target !== document; target = target.parentNode) {\n\t\t\tif(target.tagName === 'A' && target.hash && target.hash === ('#' + $.targets.offcanvas.id)) {\n\t\t\t\te.detail && e.detail.gesture && e.detail.gesture.preventDefault(); //fixed hashchange\n\t\t\t\t$($.targets._container).offCanvas().toggle($.targets.offcanvas);\n\t\t\t\t$.targets.offcanvas = $.targets._container = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\t$.fn.offCanvas = function(options) {\n\t\tvar offCanvasApis = [];\n\t\tthis.each(function() {\n\t\t\tvar offCanvasApi = null;\n\t\t\tvar self = this;\n\t\t\t//hack old version\n\t\t\tif(!self.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n\t\t\t\tself = findOffCanvasContainer(self);\n\t\t\t}\n\t\t\tvar id = self.getAttribute('data-offCanvas');\n\t\t\tif(!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\t$.data[id] = offCanvasApi = new OffCanvas(self, options);\n\t\t\t\tself.setAttribute('data-offCanvas', id);\n\t\t\t} else {\n\t\t\t\toffCanvasApi = $.data[id];\n\t\t\t}\n\t\t\tif(options === 'show' || options === 'close' || options === 'toggle') {\n\t\t\t\toffCanvasApi.toggle();\n\t\t\t}\n\t\t\toffCanvasApis.push(offCanvasApi);\n\t\t});\n\t\treturn offCanvasApis.length === 1 ? offCanvasApis[0] : offCanvasApis;\n\t};\n\t$.ready(function() {\n\t\t$('.mui-off-canvas-wrap').offCanvas();\n\t});\n})(mui, window, document, 'offcanvas');\n/**\n * actions\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar CLASS_ACTION = 'mui-action';\n\n\tvar handle = function(event, target) {\n\t\tvar className = target.className || '';\n\t\tif(typeof className !== 'string') { //svg className(SVGAnimatedString)\n\t\t\tclassName = '';\n\t\t}\n\t\tif(className && ~className.indexOf(CLASS_ACTION)) {\n\t\t\tif(target.classList.contains('mui-action-back')) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\treturn target;\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 50,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisContinue: true\n\t});\n\n})(mui, 'action');\n/**\n * Modals\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} name\n * @returns {undefined}\n */\n(function($, window, document, name) {\n\tvar CLASS_MODAL = 'mui-modal';\n\n\tvar handle = function(event, target) {\n\t\tif(target.tagName === 'A' && target.hash) {\n\t\t\tvar modal = document.getElementById(target.hash.replace('#', ''));\n\t\t\tif(modal && modal.classList.contains(CLASS_MODAL)) {\n\t\t\t\treturn modal;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 50,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisReset: false,\n\t\tisContinue: true\n\t});\n\n\twindow.addEventListener('tap', function(event) {\n\t\tif($.targets.modal) {\n\t\t\tevent.detail.gesture.preventDefault(); //fixed hashchange\n\t\t\t$.targets.modal.classList.toggle('mui-active');\n\t\t}\n\t});\n})(mui, window, document, 'modal');\n/**\n * Popovers\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} name\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, document, name) {\n\n\tvar CLASS_POPOVER = 'mui-popover';\n\tvar CLASS_POPOVER_ARROW = 'mui-popover-arrow';\n\tvar CLASS_ACTION_POPOVER = 'mui-popover-action';\n\tvar CLASS_BACKDROP = 'mui-backdrop';\n\tvar CLASS_BAR_POPOVER = 'mui-bar-popover';\n\tvar CLASS_BAR_BACKDROP = 'mui-bar-backdrop';\n\tvar CLASS_ACTION_BACKDROP = 'mui-backdrop-action';\n\tvar CLASS_ACTIVE = 'mui-active';\n\tvar CLASS_BOTTOM = 'mui-bottom';\n\n\tvar handle = function(event, target) {\n\t\tif(target.tagName === 'A' && target.hash) {\n\t\t\t$.targets._popover = document.getElementById(target.hash.replace('#', ''));\n\t\t\tif($.targets._popover && $.targets._popover.classList.contains(CLASS_POPOVER)) {\n\t\t\t\treturn target;\n\t\t\t} else {\n\t\t\t\t$.targets._popover = null;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 60,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisReset: false,\n\t\tisContinue: true\n\t});\n\n\tvar onPopoverShown = function(e) {\n\t\tthis.removeEventListener('webkitTransitionEnd', onPopoverShown);\n\t\tthis.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\t$.trigger(this, 'shown', this);\n\t}\n\tvar onPopoverHidden = function(e) {\n\t\tsetStyle(this, 'none');\n\t\tthis.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\tthis.removeEventListener($.EVENT_MOVE, $.preventDefault);\n\t\t$.trigger(this, 'hidden', this);\n\t};\n\n\tvar backdrop = (function() {\n\t\tvar element = document.createElement('div');\n\t\telement.classList.add(CLASS_BACKDROP);\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\telement.addEventListener('tap', function(e) {\n\t\t\tvar popover = $.targets._popover;\n\t\t\tif(popover) {\n\t\t\t\tpopover.addEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\t\t\tpopover.classList.remove(CLASS_ACTIVE);\n\t\t\t\tremoveBackdrop(popover);\n\t\t\t}\n\t\t});\n\n\t\treturn element;\n\t}());\n\tvar removeBackdropTimer;\n\tvar removeBackdrop = function(popover) {\n\t\tbackdrop.setAttribute('style', 'opacity:0');\n\t\t$.targets.popover = $.targets._popover = null; //reset\n\t\tremoveBackdropTimer = $.later(function() {\n\t\t\tif(!popover.classList.contains(CLASS_ACTIVE) && backdrop.parentNode && backdrop.parentNode === document.body) {\n\t\t\t\tdocument.body.removeChild(backdrop);\n\t\t\t}\n\t\t}, 350);\n\t};\n\twindow.addEventListener('tap', function(e) {\n\t\tif(!$.targets.popover) {\n\t\t\treturn;\n\t\t}\n\t\tvar toggle = false;\n\t\tvar target = e.target;\n\t\tfor(; target && target !== document; target = target.parentNode) {\n\t\t\tif(target === $.targets.popover) {\n\t\t\t\ttoggle = true;\n\t\t\t}\n\t\t}\n\t\tif(toggle) {\n\t\t\te.detail.gesture.preventDefault(); //fixed hashchange\n\t\t\ttogglePopover($.targets._popover, $.targets.popover);\n\t\t}\n\n\t});\n\n\tvar togglePopover = function(popover, anchor, state) {\n\t\tif((state === 'show' && popover.classList.contains(CLASS_ACTIVE)) || (state === 'hide' && !popover.classList.contains(CLASS_ACTIVE))) {\n\t\t\treturn;\n\t\t}\n\t\tremoveBackdropTimer && removeBackdropTimer.cancel(); //取消remove的timer\n\t\t//remove一遍，以免来回快速切换，导致webkitTransitionEnd不触发，无法remove\n\t\tpopover.removeEventListener('webkitTransitionEnd', onPopoverShown);\n\t\tpopover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\tbackdrop.classList.remove(CLASS_BAR_BACKDROP);\n\t\tbackdrop.classList.remove(CLASS_ACTION_BACKDROP);\n\t\tvar _popover = document.querySelector('.mui-popover.mui-active');\n\t\tif(_popover) {\n\t\t\t//\t\t\t_popover.setAttribute('style', '');\n\t\t\t_popover.addEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\t\t_popover.classList.remove(CLASS_ACTIVE);\n\t\t\t//\t\t\t_popover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\t\t//同一个弹出则直接返回，解决同一个popover的toggle\n\t\t\tif(popover === _popover) {\n\t\t\t\tremoveBackdrop(_popover);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tvar isActionSheet = false;\n\t\tif(popover.classList.contains(CLASS_BAR_POPOVER) || popover.classList.contains(CLASS_ACTION_POPOVER)) { //navBar\n\t\t\tif(popover.classList.contains(CLASS_ACTION_POPOVER)) { //action sheet popover\n\t\t\t\tisActionSheet = true;\n\t\t\t\tbackdrop.classList.add(CLASS_ACTION_BACKDROP);\n\t\t\t} else { //bar popover\n\t\t\t\tbackdrop.classList.add(CLASS_BAR_BACKDROP);\n\t\t\t\t//\t\t\t\tif (anchor) {\n\t\t\t\t//\t\t\t\t\tif (anchor.parentNode) {\n\t\t\t\t//\t\t\t\t\t\tvar offsetWidth = anchor.offsetWidth;\n\t\t\t\t//\t\t\t\t\t\tvar offsetLeft = anchor.offsetLeft;\n\t\t\t\t//\t\t\t\t\t\tvar innerWidth = window.innerWidth;\n\t\t\t\t//\t\t\t\t\t\tpopover.style.left = (Math.min(Math.max(offsetLeft, defaultPadding), innerWidth - offsetWidth - defaultPadding)) + \"px\";\n\t\t\t\t//\t\t\t\t\t} else {\n\t\t\t\t//\t\t\t\t\t\t//TODO anchor is position:{left,top,bottom,right}\n\t\t\t\t//\t\t\t\t\t}\n\t\t\t\t//\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsetStyle(popover, 'block'); //actionsheet transform\n\t\tpopover.offsetHeight;\n\t\tpopover.classList.add(CLASS_ACTIVE);\n\t\tbackdrop.setAttribute('style', '');\n\t\tdocument.body.appendChild(backdrop);\n\t\tcalPosition(popover, anchor, isActionSheet); //position\n\t\tbackdrop.classList.add(CLASS_ACTIVE);\n\t\tpopover.addEventListener('webkitTransitionEnd', onPopoverShown);\n\t};\n\tvar setStyle = function(popover, display, top, left) {\n\t\tvar style = popover.style;\n\t\tif(typeof display !== 'undefined')\n\t\t\tstyle.display = display;\n\t\tif(typeof top !== 'undefined')\n\t\t\tstyle.top = top + 'px';\n\t\tif(typeof left !== 'undefined')\n\t\t\tstyle.left = left + 'px';\n\t};\n\tvar calPosition = function(popover, anchor, isActionSheet) {\n\t\tif(!popover || !anchor) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(isActionSheet) { //actionsheet\n\t\t\tsetStyle(popover, 'block')\n\t\t\treturn;\n\t\t}\n\n\t\tvar wWidth = window.innerWidth;\n\t\tvar wHeight = window.innerHeight;\n\n\t\tvar pWidth = popover.offsetWidth;\n\t\tvar pHeight = popover.offsetHeight;\n\n\t\tvar aWidth = anchor.offsetWidth;\n\t\tvar aHeight = anchor.offsetHeight;\n\t\tvar offset = $.offset(anchor);\n\n\t\tvar arrow = popover.querySelector('.' + CLASS_POPOVER_ARROW);\n\t\tif(!arrow) {\n\t\t\tarrow = document.createElement('div');\n\t\t\tarrow.className = CLASS_POPOVER_ARROW;\n\t\t\tpopover.appendChild(arrow);\n\t\t}\n\t\tvar arrowSize = arrow && arrow.offsetWidth / 2 || 0;\n\n\t\tvar pTop = 0;\n\t\tvar pLeft = 0;\n\t\tvar diff = 0;\n\t\tvar arrowLeft = 0;\n\t\tvar defaultPadding = popover.classList.contains(CLASS_ACTION_POPOVER) ? 0 : 5;\n\n\t\tvar position = 'top';\n\t\tif((pHeight + arrowSize) < (offset.top - window.pageYOffset)) { //top\n\t\t\tpTop = offset.top - pHeight - arrowSize;\n\t\t} else if((pHeight + arrowSize) < (wHeight - (offset.top - window.pageYOffset) - aHeight)) { //bottom\n\t\t\tposition = 'bottom';\n\t\t\tpTop = offset.top + aHeight + arrowSize;\n\t\t} else { //middle\n\t\t\tposition = 'middle';\n\t\t\tpTop = Math.max((wHeight - pHeight) / 2 + window.pageYOffset, 0);\n\t\t\tpLeft = Math.max((wWidth - pWidth) / 2 + window.pageXOffset, 0);\n\t\t}\n\t\tif(position === 'top' || position === 'bottom') {\n\t\t\tpLeft = aWidth / 2 + offset.left - pWidth / 2;\n\t\t\tdiff = pLeft;\n\t\t\tif(pLeft < defaultPadding) pLeft = defaultPadding;\n\t\t\tif(pLeft + pWidth > wWidth) pLeft = wWidth - pWidth - defaultPadding;\n\n\t\t\tif(arrow) {\n\t\t\t\tif(position === 'top') {\n\t\t\t\t\tarrow.classList.add(CLASS_BOTTOM);\n\t\t\t\t} else {\n\t\t\t\t\tarrow.classList.remove(CLASS_BOTTOM);\n\t\t\t\t}\n\t\t\t\tdiff = diff - pLeft;\n\t\t\t\tarrowLeft = (pWidth / 2 - arrowSize / 2 + diff);\n\t\t\t\tarrowLeft = Math.max(Math.min(arrowLeft, pWidth - arrowSize * 2 - 6), 6);\n\t\t\t\tarrow.setAttribute('style', 'left:' + arrowLeft + 'px');\n\t\t\t}\n\t\t} else if(position === 'middle') {\n\t\t\tarrow.setAttribute('style', 'display:none');\n\t\t}\n\t\tsetStyle(popover, 'block', pTop, pLeft);\n\t};\n\n\t$.createMask = function(callback) {\n\t\tvar element = document.createElement('div');\n\t\telement.classList.add(CLASS_BACKDROP);\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\telement.addEventListener('tap', function() {\n\t\t\tmask.close();\n\t\t});\n\t\tvar mask = [element];\n\t\tmask._show = false;\n\t\tmask.show = function() {\n\t\t\tmask._show = true;\n\t\t\telement.setAttribute('style', 'opacity:1');\n\t\t\tdocument.body.appendChild(element);\n\t\t\treturn mask;\n\t\t};\n\t\tmask._remove = function() {\n\t\t\tif(mask._show) {\n\t\t\t\tmask._show = false;\n\t\t\t\telement.setAttribute('style', 'opacity:0');\n\t\t\t\t$.later(function() {\n\t\t\t\t\tvar body = document.body;\n\t\t\t\t\telement.parentNode === body && body.removeChild(element);\n\t\t\t\t}, 350);\n\t\t\t}\n\t\t\treturn mask;\n\t\t};\n\t\tmask.close = function() {\n\t\t\tif(callback) {\n\t\t\t\tif(callback() !== false) {\n\t\t\t\t\tmask._remove();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmask._remove();\n\t\t\t}\n\t\t};\n\t\treturn mask;\n\t};\n\t$.fn.popover = function() {\n\t\tvar args = arguments;\n\t\tthis.each(function() {\n\t\t\t$.targets._popover = this;\n\t\t\tif(args[0] === 'show' || args[0] === 'hide' || args[0] === 'toggle') {\n\t\t\t\ttogglePopover(this, args[1], args[0]);\n\t\t\t}\n\t\t});\n\t};\n\n})(mui, window, document, 'popover');\n/**\n * segmented-controllers\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, document, name, undefined) {\n\n\tvar CLASS_CONTROL_ITEM = 'mui-control-item';\n\tvar CLASS_SEGMENTED_CONTROL = 'mui-segmented-control';\n\tvar CLASS_SEGMENTED_CONTROL_VERTICAL = 'mui-segmented-control-vertical';\n\tvar CLASS_CONTROL_CONTENT = 'mui-control-content';\n\tvar CLASS_TAB_BAR = 'mui-bar-tab';\n\tvar CLASS_TAB_ITEM = 'mui-tab-item';\n\tvar CLASS_SLIDER_ITEM = 'mui-slider-item';\n\n\tvar handle = function(event, target) {\n\t\tif(target.classList && (target.classList.contains(CLASS_CONTROL_ITEM) || target.classList.contains(CLASS_TAB_ITEM))) {\n\t\t\tif(target.parentNode && target.parentNode.classList && target.parentNode.classList.contains(CLASS_SEGMENTED_CONTROL_VERTICAL)) {\n\t\t\t\t//vertical 如果preventDefault会导致无法滚动\n\t\t\t} else {\n\t\t\t\tevent.preventDefault(); //stop hash change\t\t\t\t\n\t\t\t}\n\t\t\t//\t\t\tif (target.hash) {\n\t\t\treturn target;\n\t\t\t//\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 80,\n\t\thandle: handle,\n\t\ttarget: false\n\t});\n\n\twindow.addEventListener('tap', function(e) {\n\n\t\tvar targetTab = $.targets.tab;\n\t\tif(!targetTab) {\n\t\t\treturn;\n\t\t}\n\t\tvar activeTab;\n\t\tvar activeBodies;\n\t\tvar targetBody;\n\t\tvar className = 'mui-active';\n\t\tvar classSelector = '.' + className;\n\t\tvar segmentedControl = targetTab.parentNode;\n\n\t\tfor(; segmentedControl && segmentedControl !== document; segmentedControl = segmentedControl.parentNode) {\n\t\t\tif(segmentedControl.classList.contains(CLASS_SEGMENTED_CONTROL)) {\n\t\t\t\tactiveTab = segmentedControl.querySelector(classSelector + '.' + CLASS_CONTROL_ITEM);\n\t\t\t\tbreak;\n\t\t\t} else if(segmentedControl.classList.contains(CLASS_TAB_BAR)) {\n\t\t\t\tactiveTab = segmentedControl.querySelector(classSelector + '.' + CLASS_TAB_ITEM);\n\t\t\t}\n\t\t}\n\n\t\tif(activeTab) {\n\t\t\tactiveTab.classList.remove(className);\n\t\t}\n\n\t\tvar isLastActive = targetTab === activeTab;\n\t\tif(targetTab) {\n\t\t\ttargetTab.classList.add(className);\n\t\t}\n\n\t\tif(!targetTab.hash) {\n\t\t\treturn;\n\t\t}\n\t\ttargetBody = document.getElementById(targetTab.hash.replace('#', ''));\n\n\t\tif(!targetBody) {\n\t\t\treturn;\n\t\t}\n\t\tif(!targetBody.classList.contains(CLASS_CONTROL_CONTENT)) { //tab bar popover\n\t\t\ttargetTab.classList[isLastActive ? 'remove' : 'add'](className);\n\t\t\treturn;\n\t\t}\n\t\tif(isLastActive) { //same\n\t\t\treturn;\n\t\t}\n\t\tvar parentNode = targetBody.parentNode;\n\t\tactiveBodies = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT + classSelector);\n\t\tfor(var i = 0; i < activeBodies.length; i++) {\n\t\t\tvar activeBody = activeBodies[i];\n\t\t\tactiveBody.parentNode === parentNode && activeBody.classList.remove(className);\n\t\t}\n\n\t\ttargetBody.classList.add(className);\n\n\t\tvar contents = [];\n\t\tvar _contents = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT);\n\t\tfor(var i = 0; i < _contents.length; i++) { //查找直属子节点\n\t\t\t_contents[i].parentNode === parentNode && (contents.push(_contents[i]));\n\t\t}\n\t\t$.trigger(targetBody, $.eventName('shown', name), {\n\t\t\ttabNumber: Array.prototype.indexOf.call(contents, targetBody)\n\t\t});\n\t\te.detail && e.detail.gesture.preventDefault(); //fixed hashchange\n\t});\n\n})(mui, window, document, 'tab');\n/**\n * Toggles switch\n * @param {type} $\n * @param {type} window\n * @param {type} name\n * @returns {undefined}\n */\n(function($, window, name) {\n\n\tvar CLASS_SWITCH = 'mui-switch';\n\tvar CLASS_SWITCH_HANDLE = 'mui-switch-handle';\n\tvar CLASS_ACTIVE = 'mui-active';\n\tvar CLASS_DRAGGING = 'mui-dragging';\n\n\tvar CLASS_DISABLED = 'mui-disabled';\n\n\tvar SELECTOR_SWITCH_HANDLE = '.' + CLASS_SWITCH_HANDLE;\n\n\tvar handle = function(event, target) {\n\t\tif(target.classList && target.classList.contains(CLASS_SWITCH)) {\n\t\t\treturn target;\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 100,\n\t\thandle: handle,\n\t\ttarget: false\n\t});\n\n\tvar Toggle = function(element) {\n\t\tthis.element = element;\n\t\tthis.classList = this.element.classList;\n\t\tthis.handle = this.element.querySelector(SELECTOR_SWITCH_HANDLE);\n\t\tthis.init();\n\t\tthis.initEvent();\n\t};\n\tToggle.prototype.init = function() {\n\t\tthis.toggleWidth = this.element.offsetWidth;\n\t\tthis.handleWidth = this.handle.offsetWidth;\n\t\tthis.handleX = this.toggleWidth - this.handleWidth - 3;\n\t};\n\tToggle.prototype.initEvent = function() {\n\t\tthis.element.addEventListener($.EVENT_START, this);\n\t\tthis.element.addEventListener('drag', this);\n\t\tthis.element.addEventListener('swiperight', this);\n\t\tthis.element.addEventListener($.EVENT_END, this);\n\t\tthis.element.addEventListener($.EVENT_CANCEL, this);\n\n\t};\n\tToggle.prototype.handleEvent = function(e) {\n\t\tif(this.classList.contains(CLASS_DISABLED)) {\n\t\t\treturn;\n\t\t}\n\t\tswitch(e.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tthis.start(e);\n\t\t\t\tbreak;\n\t\t\tcase 'drag':\n\t\t\t\tthis.drag(e);\n\t\t\t\tbreak;\n\t\t\tcase 'swiperight':\n\t\t\t\tthis.swiperight();\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tthis.end(e);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\tToggle.prototype.start = function(e) {\n\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\n\t\tthis.classList.add(CLASS_DRAGGING);\n\t\tif(this.toggleWidth === 0 || this.handleWidth === 0) { //当switch处于隐藏状态时，width为0，需要重新初始化\n\t\t\tthis.init();\n\t\t}\n\t};\n\tToggle.prototype.drag = function(e) {\n\t\tvar detail = e.detail;\n\t\tif(!this.isDragging) {\n\t\t\tif(detail.direction === 'left' || detail.direction === 'right') {\n\t\t\t\tthis.isDragging = true;\n\t\t\t\tthis.lastChanged = undefined;\n\t\t\t\tthis.initialState = this.classList.contains(CLASS_ACTIVE);\n\t\t\t}\n\t\t}\n\t\tif(this.isDragging) {\n\t\t\tthis.setTranslateX(detail.deltaX);\n\t\t\te.stopPropagation();\n\t\t\tdetail.gesture.preventDefault();\n\t\t}\n\t};\n\tToggle.prototype.swiperight = function(e) {\n\t\tif(this.isDragging) {\n\t\t\te.stopPropagation();\n\t\t}\n\t};\n\tToggle.prototype.end = function(e) {\n\t\tthis.classList.remove(CLASS_DRAGGING);\n\t\tif(this.isDragging) {\n\t\t\tthis.isDragging = false;\n\t\t\te.stopPropagation();\n\t\t\t$.trigger(this.element, 'toggle', {\n\t\t\t\tisActive: this.classList.contains(CLASS_ACTIVE)\n\t\t\t});\n\t\t} else {\n\t\t\tthis.toggle();\n\t\t}\n\t};\n\tToggle.prototype.toggle = function(animate) {\n\t\tvar classList = this.classList;\n\t\tif(animate === false) {\n\t\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '0s';\n\t\t} else {\n\t\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\n\t\t}\n\t\tif(classList.contains(CLASS_ACTIVE)) {\n\t\t\tclassList.remove(CLASS_ACTIVE);\n\t\t\tthis.handle.style.webkitTransform = 'translate(0,0)';\n\t\t} else {\n\t\t\tclassList.add(CLASS_ACTIVE);\n\t\t\tthis.handle.style.webkitTransform = 'translate(' + this.handleX + 'px,0)';\n\t\t}\n\t\t$.trigger(this.element, 'toggle', {\n\t\t\tisActive: this.classList.contains(CLASS_ACTIVE)\n\t\t});\n\t};\n\tToggle.prototype.setTranslateX = $.animationFrame(function(x) {\n\t\tif(!this.isDragging) {\n\t\t\treturn;\n\t\t}\n\t\tvar isChanged = false;\n\t\tif((this.initialState && -x > (this.handleX / 2)) || (!this.initialState && x > (this.handleX / 2))) {\n\t\t\tisChanged = true;\n\t\t}\n\t\tif(this.lastChanged !== isChanged) {\n\t\t\tif(isChanged) {\n\t\t\t\tthis.handle.style.webkitTransform = 'translate(' + (this.initialState ? 0 : this.handleX) + 'px,0)';\n\t\t\t\tthis.classList[this.initialState ? 'remove' : 'add'](CLASS_ACTIVE);\n\t\t\t} else {\n\t\t\t\tthis.handle.style.webkitTransform = 'translate(' + (this.initialState ? this.handleX : 0) + 'px,0)';\n\t\t\t\tthis.classList[this.initialState ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t}\n\t\t\tthis.lastChanged = isChanged;\n\t\t}\n\n\t});\n\n\t$.fn['switch'] = function(options) {\n\t\tvar switchApis = [];\n\t\tthis.each(function() {\n\t\t\tvar switchApi = null;\n\t\t\tvar id = this.getAttribute('data-switch');\n\t\t\tif(!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\t$.data[id] = new Toggle(this);\n\t\t\t\tthis.setAttribute('data-switch', id);\n\t\t\t} else {\n\t\t\t\tswitchApi = $.data[id];\n\t\t\t}\n\t\t\tswitchApis.push(switchApi);\n\t\t});\n\t\treturn switchApis.length > 1 ? switchApis : switchApis[0];\n\t};\n\t$.ready(function() {\n\t\t$('.' + CLASS_SWITCH)['switch']();\n\t});\n})(mui, window, 'toggle');\n/**\n * Tableviews\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n(function($, window, document) {\n\n\tvar CLASS_ACTIVE = 'mui-active';\n\tvar CLASS_SELECTED = 'mui-selected';\n\tvar CLASS_GRID_VIEW = 'mui-grid-view';\n\tvar CLASS_RADIO_VIEW = 'mui-table-view-radio';\n\tvar CLASS_TABLE_VIEW_CELL = 'mui-table-view-cell';\n\tvar CLASS_COLLAPSE_CONTENT = 'mui-collapse-content';\n\tvar CLASS_DISABLED = 'mui-disabled';\n\tvar CLASS_TOGGLE = 'mui-switch';\n\tvar CLASS_BTN = 'mui-btn';\n\n\tvar CLASS_SLIDER_HANDLE = 'mui-slider-handle';\n\tvar CLASS_SLIDER_LEFT = 'mui-slider-left';\n\tvar CLASS_SLIDER_RIGHT = 'mui-slider-right';\n\tvar CLASS_TRANSITIONING = 'mui-transitioning';\n\n\tvar SELECTOR_SLIDER_HANDLE = '.' + CLASS_SLIDER_HANDLE;\n\tvar SELECTOR_SLIDER_LEFT = '.' + CLASS_SLIDER_LEFT;\n\tvar SELECTOR_SLIDER_RIGHT = '.' + CLASS_SLIDER_RIGHT;\n\tvar SELECTOR_SELECTED = '.' + CLASS_SELECTED;\n\tvar SELECTOR_BUTTON = '.' + CLASS_BTN;\n\tvar overFactor = 0.8;\n\tvar cell, a;\n\n\tvar isMoved = isOpened = openedActions = progress = false;\n\tvar sliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\n\tvar timer = translateX = lastTranslateX = sliderActionLeftWidth = sliderActionRightWidth = 0;\n\n\tvar toggleActive = function(isActive) {\n\t\tif(isActive) {\n\t\t\tif(a) {\n\t\t\t\ta.classList.add(CLASS_ACTIVE);\n\t\t\t} else if(cell) {\n\t\t\t\tcell.classList.add(CLASS_ACTIVE);\n\t\t\t}\n\t\t} else {\n\t\t\ttimer && timer.cancel();\n\t\t\tif(a) {\n\t\t\t\ta.classList.remove(CLASS_ACTIVE);\n\t\t\t} else if(cell) {\n\t\t\t\tcell.classList.remove(CLASS_ACTIVE);\n\t\t\t}\n\t\t}\n\t};\n\n\tvar updateTranslate = function() {\n\t\tif(translateX !== lastTranslateX) {\n\t\t\tif(buttonsRight && buttonsRight.length > 0) {\n\t\t\t\tprogress = translateX / sliderActionRightWidth;\n\t\t\t\tif(translateX < -sliderActionRightWidth) {\n\t\t\t\t\ttranslateX = -sliderActionRightWidth - Math.pow(-translateX - sliderActionRightWidth, overFactor);\n\t\t\t\t}\n\t\t\t\tfor(var i = 0, len = buttonsRight.length; i < len; i++) {\n\t\t\t\t\tvar buttonRight = buttonsRight[i];\n\t\t\t\t\tif(typeof buttonRight._buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonRight._buttonOffset = buttonRight.offsetLeft;\n\t\t\t\t\t}\n\t\t\t\t\tbuttonOffset = buttonRight._buttonOffset;\n\t\t\t\t\tsetTranslate(buttonRight, (translateX - buttonOffset * (1 + Math.max(progress, -1))));\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(buttonsLeft && buttonsLeft.length > 0) {\n\t\t\t\tprogress = translateX / sliderActionLeftWidth;\n\t\t\t\tif(translateX > sliderActionLeftWidth) {\n\t\t\t\t\ttranslateX = sliderActionLeftWidth + Math.pow(translateX - sliderActionLeftWidth, overFactor);\n\t\t\t\t}\n\t\t\t\tfor(var i = 0, len = buttonsLeft.length; i < len; i++) {\n\t\t\t\t\tvar buttonLeft = buttonsLeft[i];\n\t\t\t\t\tif(typeof buttonLeft._buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\n\t\t\t\t\t}\n\t\t\t\t\tbuttonOffset = buttonLeft._buttonOffset;\n\t\t\t\t\tif(buttonsLeft.length > 1) {\n\t\t\t\t\t\tbuttonLeft.style.zIndex = buttonsLeft.length - i;\n\t\t\t\t\t}\n\t\t\t\t\tsetTranslate(buttonLeft, (translateX + buttonOffset * (1 - Math.min(progress, 1))));\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetTranslate(sliderHandle, translateX);\n\t\t\tlastTranslateX = translateX;\n\t\t}\n\t\tsliderRequestAnimationFrame = requestAnimationFrame(function() {\n\t\t\tupdateTranslate();\n\t\t});\n\t};\n\tvar setTranslate = function(element, x) {\n\t\tif(element) {\n\t\t\telement.style.webkitTransform = 'translate(' + x + 'px,0)';\n\t\t}\n\t};\n\n\twindow.addEventListener($.EVENT_START, function(event) {\n\t\tif(cell) {\n\t\t\ttoggleActive(false);\n\t\t}\n\t\tcell = a = false;\n\t\tisMoved = isOpened = openedActions = false;\n\t\tvar target = event.target;\n\t\tvar isDisabled = false;\n\t\tfor(; target && target !== document; target = target.parentNode) {\n\t\t\tif(target.classList) {\n\t\t\t\tvar classList = target.classList;\n\t\t\t\tif((target.tagName === 'INPUT' && target.type !== 'radio' && target.type !== 'checkbox') || target.tagName === 'BUTTON' || classList.contains(CLASS_TOGGLE) || classList.contains(CLASS_BTN) || classList.contains(CLASS_DISABLED)) {\n\t\t\t\t\tisDisabled = true;\n\t\t\t\t}\n\t\t\t\tif(classList.contains(CLASS_COLLAPSE_CONTENT)) { //collapse content\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif(classList.contains(CLASS_TABLE_VIEW_CELL)) {\n\t\t\t\t\tcell = target;\n\t\t\t\t\t//TODO swipe to delete close\n\t\t\t\t\tvar selected = cell.parentNode.querySelector(SELECTOR_SELECTED);\n\t\t\t\t\tif(!cell.parentNode.classList.contains(CLASS_RADIO_VIEW) && selected && selected !== cell) {\n\t\t\t\t\t\t$.swipeoutClose(selected);\n\t\t\t\t\t\tcell = isDisabled = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(!cell.parentNode.classList.contains(CLASS_GRID_VIEW)) {\n\t\t\t\t\t\tvar link = cell.querySelector('a');\n\t\t\t\t\t\tif(link && link.parentNode === cell) { //li>a\n\t\t\t\t\t\t\ta = link;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar handle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\n\t\t\t\t\tif(handle) {\n\t\t\t\t\t\ttoggleEvents(cell);\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t\tif(!isDisabled) {\n\t\t\t\t\t\tif(handle) {\n\t\t\t\t\t\t\tif(timer) {\n\t\t\t\t\t\t\t\ttimer.cancel();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttimer = $.later(function() {\n\t\t\t\t\t\t\t\ttoggleActive(true);\n\t\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttoggleActive(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\twindow.addEventListener($.EVENT_MOVE, function(event) {\n\t\ttoggleActive(false);\n\t});\n\n\tvar handleEvent = {\n\t\thandleEvent: function(event) {\n\t\t\tswitch(event.type) {\n\t\t\t\tcase 'drag':\n\t\t\t\t\tthis.drag(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis.dragend(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'flick':\n\t\t\t\t\tthis.flick(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'swiperight':\n\t\t\t\t\tthis.swiperight(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'swipeleft':\n\t\t\t\t\tthis.swipeleft(event);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tdrag: function(event) {\n\t\t\tif(!cell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!isMoved) { //init\n\t\t\t\tsliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\n\t\t\t\tsliderHandle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\n\t\t\t\tif(sliderHandle) {\n\t\t\t\t\tsliderActionLeft = cell.querySelector(SELECTOR_SLIDER_LEFT);\n\t\t\t\t\tsliderActionRight = cell.querySelector(SELECTOR_SLIDER_RIGHT);\n\t\t\t\t\tif(sliderActionLeft) {\n\t\t\t\t\t\tsliderActionLeftWidth = sliderActionLeft.offsetWidth;\n\t\t\t\t\t\tbuttonsLeft = sliderActionLeft.querySelectorAll(SELECTOR_BUTTON);\n\t\t\t\t\t}\n\t\t\t\t\tif(sliderActionRight) {\n\t\t\t\t\t\tsliderActionRightWidth = sliderActionRight.offsetWidth;\n\t\t\t\t\t\tbuttonsRight = sliderActionRight.querySelectorAll(SELECTOR_BUTTON);\n\t\t\t\t\t}\n\t\t\t\t\tcell.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t\tisOpened = cell.classList.contains(CLASS_SELECTED);\n\t\t\t\t\tif(isOpened) {\n\t\t\t\t\t\topenedActions = cell.querySelector(SELECTOR_SLIDER_LEFT + SELECTOR_SELECTED) ? 'left' : 'right';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar detail = event.detail;\n\t\t\tvar direction = detail.direction;\n\t\t\tvar angle = detail.angle;\n\t\t\tif(direction === 'left' && (angle > 150 || angle < -150)) {\n\t\t\t\tif(buttonsRight || (buttonsLeft && isOpened)) { //存在右侧按钮或存在左侧按钮且是已打开状态\n\t\t\t\t\tisMoved = true;\n\t\t\t\t}\n\t\t\t} else if(direction === 'right' && (angle > -30 && angle < 30)) {\n\t\t\t\tif(buttonsLeft || (buttonsRight && isOpened)) { //存在左侧按钮或存在右侧按钮且是已打开状态\n\t\t\t\t\tisMoved = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.detail.gesture.preventDefault();\n\t\t\t\tvar translate = event.detail.deltaX;\n\t\t\t\tif(isOpened) {\n\t\t\t\t\tif(openedActions === 'right') {\n\t\t\t\t\t\ttranslate = translate - sliderActionRightWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttranslate = translate + sliderActionLeftWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif((translate > 0 && !buttonsLeft) || (translate < 0 && !buttonsRight)) {\n\t\t\t\t\tif(!isOpened) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttranslate = 0;\n\t\t\t\t}\n\t\t\t\tif(translate < 0) {\n\t\t\t\t\tsliderDirection = 'toLeft';\n\t\t\t\t} else if(translate > 0) {\n\t\t\t\t\tsliderDirection = 'toRight';\n\t\t\t\t} else {\n\t\t\t\t\tif(!sliderDirection) {\n\t\t\t\t\t\tsliderDirection = 'toLeft';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!sliderRequestAnimationFrame) {\n\t\t\t\t\tupdateTranslate();\n\t\t\t\t}\n\t\t\t\ttranslateX = translate;\n\t\t\t}\n\t\t},\n\t\tflick: function(event) {\n\t\t\tif(isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tswipeleft: function(event) {\n\t\t\tif(isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tswiperight: function(event) {\n\t\t\tif(isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tdragend: function(event) {\n\t\t\tif(!isMoved) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.stopPropagation();\n\t\t\tif(sliderRequestAnimationFrame) {\n\t\t\t\tcancelAnimationFrame(sliderRequestAnimationFrame);\n\t\t\t\tsliderRequestAnimationFrame = null;\n\t\t\t}\n\t\t\tvar detail = event.detail;\n\t\t\tisMoved = false;\n\t\t\tvar action = 'close';\n\t\t\tvar actionsWidth = sliderDirection === 'toLeft' ? sliderActionRightWidth : sliderActionLeftWidth;\n\t\t\tvar isToggle = detail.swipe || (Math.abs(translateX) > actionsWidth / 2);\n\t\t\tif(isToggle) {\n\t\t\t\tif(!isOpened) {\n\t\t\t\t\taction = 'open';\n\t\t\t\t} else if(detail.direction === 'left' && openedActions === 'right') {\n\t\t\t\t\taction = 'open';\n\t\t\t\t} else if(detail.direction === 'right' && openedActions === 'left') {\n\t\t\t\t\taction = 'open';\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tcell.classList.add(CLASS_TRANSITIONING);\n\t\t\tvar buttons;\n\t\t\tif(action === 'open') {\n\t\t\t\tvar newTranslate = sliderDirection === 'toLeft' ? -actionsWidth : actionsWidth;\n\t\t\t\tsetTranslate(sliderHandle, newTranslate);\n\t\t\t\tbuttons = sliderDirection === 'toLeft' ? buttonsRight : buttonsLeft;\n\t\t\t\tif(typeof buttons !== 'undefined') {\n\t\t\t\t\tvar button = null;\n\t\t\t\t\tfor(var i = 0; i < buttons.length; i++) {\n\t\t\t\t\t\tbutton = buttons[i];\n\t\t\t\t\t\tsetTranslate(button, newTranslate);\n\t\t\t\t\t}\n\t\t\t\t\tbutton.parentNode.classList.add(CLASS_SELECTED);\n\t\t\t\t\tcell.classList.add(CLASS_SELECTED);\n\t\t\t\t\tif(!isOpened) {\n\t\t\t\t\t\t$.trigger(cell, sliderDirection === 'toLeft' ? 'slideleft' : 'slideright');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetTranslate(sliderHandle, 0);\n\t\t\t\tsliderActionLeft && sliderActionLeft.classList.remove(CLASS_SELECTED);\n\t\t\t\tsliderActionRight && sliderActionRight.classList.remove(CLASS_SELECTED);\n\t\t\t\tcell.classList.remove(CLASS_SELECTED);\n\t\t\t}\n\t\t\tvar buttonOffset;\n\t\t\tif(buttonsLeft && buttonsLeft.length > 0 && buttonsLeft !== buttons) {\n\t\t\t\tfor(var i = 0, len = buttonsLeft.length; i < len; i++) {\n\t\t\t\t\tvar buttonLeft = buttonsLeft[i];\n\t\t\t\t\tbuttonOffset = buttonLeft._buttonOffset;\n\t\t\t\t\tif(typeof buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\n\t\t\t\t\t}\n\t\t\t\t\tsetTranslate(buttonLeft, buttonOffset);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(buttonsRight && buttonsRight.length > 0 && buttonsRight !== buttons) {\n\t\t\t\tfor(var i = 0, len = buttonsRight.length; i < len; i++) {\n\t\t\t\t\tvar buttonRight = buttonsRight[i];\n\t\t\t\t\tbuttonOffset = buttonRight._buttonOffset;\n\t\t\t\t\tif(typeof buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonRight._buttonOffset = buttonRight.offsetLeft;\n\t\t\t\t\t}\n\t\t\t\t\tsetTranslate(buttonRight, -buttonOffset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction toggleEvents(element, isRemove) {\n\t\tvar method = !!isRemove ? 'removeEventListener' : 'addEventListener';\n\t\telement[method]('drag', handleEvent);\n\t\telement[method]('dragend', handleEvent);\n\t\telement[method]('swiperight', handleEvent);\n\t\telement[method]('swipeleft', handleEvent);\n\t\telement[method]('flick', handleEvent);\n\t};\n\t/**\n\t * 打开滑动菜单\n\t * @param {Object} el\n\t * @param {Object} direction\n\t */\n\t$.swipeoutOpen = function(el, direction) {\n\t\tif(!el) return;\n\t\tvar classList = el.classList;\n\t\tif(classList.contains(CLASS_SELECTED)) return;\n\t\tif(!direction) {\n\t\t\tif(el.querySelector(SELECTOR_SLIDER_RIGHT)) {\n\t\t\t\tdirection = 'right';\n\t\t\t} else {\n\t\t\t\tdirection = 'left';\n\t\t\t}\n\t\t}\n\t\tvar swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\n\t\tif(!swipeoutAction) return;\n\t\tswipeoutAction.classList.add(CLASS_SELECTED);\n\t\tclassList.add(CLASS_SELECTED);\n\t\tclassList.remove(CLASS_TRANSITIONING);\n\t\tvar buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\n\t\tvar swipeoutWidth = swipeoutAction.offsetWidth;\n\t\tvar translate = (direction === 'right') ? -swipeoutWidth : swipeoutWidth;\n\t\tvar length = buttons.length;\n\t\tvar button;\n\t\tfor(var i = 0; i < length; i++) {\n\t\t\tbutton = buttons[i];\n\t\t\tif(direction === 'right') {\n\t\t\t\tsetTranslate(button, -button.offsetLeft);\n\t\t\t} else {\n\t\t\t\tsetTranslate(button, (swipeoutWidth - button.offsetWidth - button.offsetLeft));\n\t\t\t}\n\t\t}\n\t\tclassList.add(CLASS_TRANSITIONING);\n\t\tfor(var i = 0; i < length; i++) {\n\t\t\tsetTranslate(buttons[i], translate);\n\t\t}\n\t\tsetTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), translate);\n\t};\n\t/**\n\t * 关闭滑动菜单\n\t * @param {Object} el\n\t */\n\t$.swipeoutClose = function(el) {\n\t\tif(!el) return;\n\t\tvar classList = el.classList;\n\t\tif(!classList.contains(CLASS_SELECTED)) return;\n\t\tvar direction = el.querySelector(SELECTOR_SLIDER_RIGHT + SELECTOR_SELECTED) ? 'right' : 'left';\n\t\tvar swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\n\t\tif(!swipeoutAction) return;\n\t\tswipeoutAction.classList.remove(CLASS_SELECTED);\n\t\tclassList.remove(CLASS_SELECTED);\n\t\tclassList.add(CLASS_TRANSITIONING);\n\t\tvar buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\n\t\tvar swipeoutWidth = swipeoutAction.offsetWidth;\n\t\tvar length = buttons.length;\n\t\tvar button;\n\t\tsetTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), 0);\n\t\tfor(var i = 0; i < length; i++) {\n\t\t\tbutton = buttons[i];\n\t\t\tif(direction === 'right') {\n\t\t\t\tsetTranslate(button, (-button.offsetLeft));\n\t\t\t} else {\n\t\t\t\tsetTranslate(button, (swipeoutWidth - button.offsetWidth - button.offsetLeft));\n\t\t\t}\n\t\t}\n\t};\n\n\twindow.addEventListener($.EVENT_END, function(event) { //使用touchend来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\n\t\tif(!cell) {\n\t\t\treturn;\n\t\t}\n\t\ttoggleActive(false);\n\t\tsliderHandle && toggleEvents(cell, true);\n\t});\n\twindow.addEventListener($.EVENT_CANCEL, function(event) { //使用touchcancel来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\n\t\tif(!cell) {\n\t\t\treturn;\n\t\t}\n\t\ttoggleActive(false);\n\t\tsliderHandle && toggleEvents(cell, true);\n\t});\n\tvar radioOrCheckboxClick = function(event) {\n\t\tvar type = event.target && event.target.type || '';\n\t\tif(type === 'radio' || type === 'checkbox') {\n\t\t\treturn;\n\t\t}\n\t\tvar classList = cell.classList;\n\t\tif(classList.contains('mui-radio')) {\n\t\t\tvar input = cell.querySelector('input[type=radio]');\n\t\t\tif(input) {\n\t\t\t\t//\t\t\t\tinput.click();\n\t\t\t\tif(!input.disabled && !input.readOnly) {\n\t\t\t\t\tinput.checked = !input.checked;\n\t\t\t\t\t$.trigger(input, 'change');\n\t\t\t\t}\n\t\t\t}\n\t\t} else if(classList.contains('mui-checkbox')) {\n\t\t\tvar input = cell.querySelector('input[type=checkbox]');\n\t\t\tif(input) {\n\t\t\t\t//\t\t\t\tinput.click();\n\t\t\t\tif(!input.disabled && !input.readOnly) {\n\t\t\t\t\tinput.checked = !input.checked;\n\t\t\t\t\t$.trigger(input, 'change');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t//fixed hashchange(android)\n\twindow.addEventListener($.EVENT_CLICK, function(e) {\n\t\tif(cell && cell.classList.contains('mui-collapse')) {\n\t\t\te.preventDefault();\n\t\t}\n\t});\n\twindow.addEventListener('doubletap', function(event) {\n\t\tif(cell) {\n\t\t\tradioOrCheckboxClick(event);\n\t\t}\n\t});\n\tvar preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\n\twindow.addEventListener('tap', function(event) {\n\t\tif(!cell) {\n\t\t\treturn;\n\t\t}\n\t\tvar isExpand = false;\n\t\tvar classList = cell.classList;\n\t\tvar ul = cell.parentNode;\n\t\tif(ul && ul.classList.contains(CLASS_RADIO_VIEW)) {\n\t\t\tif(classList.contains(CLASS_SELECTED)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar selected = ul.querySelector('li' + SELECTOR_SELECTED);\n\t\t\tif(selected) {\n\t\t\t\tselected.classList.remove(CLASS_SELECTED);\n\t\t\t}\n\t\t\tclassList.add(CLASS_SELECTED);\n\t\t\t$.trigger(cell, 'selected', {\n\t\t\t\tel: cell\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif(classList.contains('mui-collapse') && !cell.parentNode.classList.contains('mui-unfold')) {\n\t\t\tif(!preventDefaultException.test(event.target.tagName)) {\n\t\t\t\tevent.detail.gesture.preventDefault();\n\t\t\t}\n\n\t\t\tif(!classList.contains(CLASS_ACTIVE)) { //展开时,需要收缩其他同类\n\t\t\t\tvar collapse = cell.parentNode.querySelector('.mui-collapse.mui-active');\n\t\t\t\tif(collapse) {\n\t\t\t\t\tcollapse.classList.remove(CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t\tisExpand = true;\n\t\t\t}\n\t\t\tclassList.toggle(CLASS_ACTIVE);\n\t\t\tif(isExpand) {\n\t\t\t\t//触发展开事件\n\t\t\t\t$.trigger(cell, 'expand');\n\n\t\t\t\t//scroll\n\t\t\t\t//暂不滚动\n\t\t\t\t// var offsetTop = $.offset(cell).top;\n\t\t\t\t// var scrollTop = document.body.scrollTop;\n\t\t\t\t// var height = window.innerHeight;\n\t\t\t\t// var offsetHeight = cell.offsetHeight;\n\t\t\t\t// var cellHeight = (offsetTop - scrollTop + offsetHeight);\n\t\t\t\t// if (offsetHeight > height) {\n\t\t\t\t// \t$.scrollTo(offsetTop, 300);\n\t\t\t\t// } else if (cellHeight > height) {\n\t\t\t\t// \t$.scrollTo(cellHeight - height + scrollTop, 300);\n\t\t\t\t// }\n\t\t\t}\n\t\t} else {\n\t\t\tradioOrCheckboxClick(event);\n\t\t}\n\t});\n})(mui, window, document);\n(function($, window) {\n\t/**\n\t * 警告消息框\n\t */\n\t$.alert = function(message, title, btnValue, callback) {\n\t\tif($.os.plus) {\n\t\t\tif(typeof message === 'undefined') {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tif(typeof title === 'function') {\n\t\t\t\t\tcallback = title;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnValue = '确定';\n\t\t\t\t} else if(typeof btnValue === 'function') {\n\t\t\t\t\tcallback = btnValue;\n\t\t\t\t\tbtnValue = null;\n\t\t\t\t}\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tplus.nativeUI.alert(message, callback, title, btnValue);\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\t//TODO H5版本\n\t\t\twindow.alert(message);\n\t\t}\n\t};\n\n})(mui, window);\n(function($, window) {\n\t/**\n\t * 确认消息框\n\t */\n\t$.confirm = function(message, title, btnArray, callback) {\n\t\tif($.os.plus) {\n\t\t\tif(typeof message === 'undefined') {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tif(typeof title === 'function') {\n\t\t\t\t\tcallback = title;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t} else if(typeof btnArray === 'function') {\n\t\t\t\t\tcallback = btnArray;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t}\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tplus.nativeUI.confirm(message, callback, title, btnArray);\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\t//H5版本，0为确认，1为取消\n\t\t\tif(window.confirm(message)) {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 0\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 1\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n})(mui, window);\n(function($, window) {\n\t/**\n\t * 输入对话框\n\t */\n\t$.prompt = function(text, defaultText, title, btnArray, callback) {\n\t\tif($.os.plus) {\n\t\t\tif(typeof message === 'undefined') {\n\t\t\t\treturn;\n\t\t\t} else {\n\n\t\t\t\tif(typeof defaultText === 'function') {\n\t\t\t\t\tcallback = defaultText;\n\t\t\t\t\tdefaultText = null;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t} else if(typeof title === 'function') {\n\t\t\t\t\tcallback = title;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t} else if(typeof btnArray === 'function') {\n\t\t\t\t\tcallback = btnArray;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t}\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tplus.nativeUI.prompt(text, callback, title, defaultText, btnArray);\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\t//H5版本(确认index为0，取消index为1)\n\t\t\tvar result = window.prompt(text);\n\t\t\tif(result) {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tvalue: result\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tvalue: ''\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n})(mui, window);\n(function($, window) {\n\tvar CLASS_ACTIVE = 'mui-active';\n\t/**\n\t * 自动消失提示框\n\t */\n\t$.toast = function(message, options) {\n\t\tvar durations = {\n\t\t\t'long': 3500,\n\t\t\t'short': 2000\n\t\t};\n\n\t\t//计算显示时间\n\t\toptions = $.extend({\n\t\t\tduration: 'short'\n\t\t}, options || {});\n\n\t\tif($.os.plus && options.type !== 'div') {\n\t\t\t//默认显示在底部；\n\t\t\t$.plusReady(function() {\n\t\t\t\tplus.nativeUI.toast(message, {\n\t\t\t\t\tverticalAlign: 'bottom',\n\t\t\t\t\tduration: options.duration\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tif(typeof options.duration === 'number') {\n\t\t\t\tduration = options.duration > 0 ? options.duration : durations['short'];\n\t\t\t} else {\n\t\t\t\tduration = durations[options.duration];\n\t\t\t}\n\t\t\tif(!duration) {\n\t\t\t\tduration = durations['short'];\n\t\t\t}\n\t\t\tvar toast = document.createElement('div');\n\t\t\ttoast.classList.add('mui-toast-container');\n\t\t\ttoast.innerHTML = '<div class=\"' + 'mui-toast-message' + '\">' + message + '</div>';\n\t\t\ttoast.addEventListener('webkitTransitionEnd', function() {\n\t\t\t\tif(!toast.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\ttoast.parentNode.removeChild(toast);\n\t\t\t\t\ttoast = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\t//点击则自动消失\n\t\t\ttoast.addEventListener('click', function() {\n\t\t\t\ttoast.parentNode.removeChild(toast);\n\t\t\t\ttoast = null;\n\t\t\t});\n\t\t\tdocument.body.appendChild(toast);\n\t\t\ttoast.offsetHeight;\n\t\t\ttoast.classList.add(CLASS_ACTIVE);\n\t\t\tsetTimeout(function() {\n\t\t\t\ttoast && toast.classList.remove(CLASS_ACTIVE);\n\t\t\t}, duration);\n\n\t\t\treturn {\n\t\t\t\tisVisible: function() {\n\t\t\t\t\treturn !!toast;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n})(mui, window);\n/**\n * Popup(alert,confirm,prompt)  \n * @param {Object} $\n * @param {Object} window\n * @param {Object} document\n */\n(function($, window, document) {\n\tvar CLASS_POPUP = 'mui-popup';\n\tvar CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\n\tvar CLASS_POPUP_IN = 'mui-popup-in';\n\tvar CLASS_POPUP_OUT = 'mui-popup-out';\n\tvar CLASS_POPUP_INNER = 'mui-popup-inner';\n\tvar CLASS_POPUP_TITLE = 'mui-popup-title';\n\tvar CLASS_POPUP_TEXT = 'mui-popup-text';\n\tvar CLASS_POPUP_INPUT = 'mui-popup-input';\n\tvar CLASS_POPUP_BUTTONS = 'mui-popup-buttons';\n\tvar CLASS_POPUP_BUTTON = 'mui-popup-button';\n\tvar CLASS_POPUP_BUTTON_BOLD = 'mui-popup-button-bold';\n\tvar CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\tvar popupStack = [];\n\tvar backdrop = (function() {\n\t\tvar element = document.createElement('div');\n\t\telement.classList.add(CLASS_POPUP_BACKDROP);\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\telement.addEventListener('webkitTransitionEnd', function() {\n\t\t\tif(!this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\telement.parentNode && element.parentNode.removeChild(element);\n\t\t\t}\n\t\t});\n\t\treturn element;\n\t}());\n\n\tvar createInput = function(placeholder) {\n\t\treturn '<div class=\"' + CLASS_POPUP_INPUT + '\"><input type=\"text\" autofocus placeholder=\"' + (placeholder || '') + '\"/></div>';\n\t};\n\tvar createInner = function(message, title, extra) {\n\t\treturn '<div class=\"' + CLASS_POPUP_INNER + '\"><div class=\"' + CLASS_POPUP_TITLE + '\">' + title + '</div><div class=\"' + CLASS_POPUP_TEXT + '\">' + message.replace(/\\r\\n/g, \"<br/>\").replace(/\\n/g, \"<br/>\") + '</div>' + (extra || '') + '</div>';\n\t};\n\tvar createButtons = function(btnArray) {\n\t\tvar length = btnArray.length;\n\t\tvar btns = [];\n\t\tfor(var i = 0; i < length; i++) {\n\t\t\tbtns.push('<span class=\"' + CLASS_POPUP_BUTTON + (i === length - 1 ? (' ' + CLASS_POPUP_BUTTON_BOLD) : '') + '\">' + btnArray[i] + '</span>');\n\t\t}\n\t\treturn '<div class=\"' + CLASS_POPUP_BUTTONS + '\">' + btns.join('') + '</div>';\n\t};\n\n\tvar createPopup = function(html, callback) {\n\t\tvar popupElement = document.createElement('div');\n\t\tpopupElement.className = CLASS_POPUP;\n\t\tpopupElement.innerHTML = html;\n\t\tvar removePopupElement = function() {\n\t\t\tpopupElement.parentNode && popupElement.parentNode.removeChild(popupElement);\n\t\t\tpopupElement = null;\n\t\t};\n\t\tpopupElement.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\tpopupElement.addEventListener('webkitTransitionEnd', function(e) {\n\t\t\tif(popupElement && e.target === popupElement && popupElement.classList.contains(CLASS_POPUP_OUT)) {\n\t\t\t\tremovePopupElement();\n\t\t\t}\n\t\t});\n\t\tpopupElement.style.display = 'block';\n\t\tdocument.body.appendChild(popupElement);\n\t\tpopupElement.offsetHeight;\n\t\tpopupElement.classList.add(CLASS_POPUP_IN);\n\n\t\tif(!backdrop.classList.contains(CLASS_ACTIVE)) {\n\t\t\tbackdrop.style.display = 'block';\n\t\t\tdocument.body.appendChild(backdrop);\n\t\t\tbackdrop.offsetHeight;\n\t\t\tbackdrop.classList.add(CLASS_ACTIVE);\n\t\t}\n\t\tvar btns = $.qsa('.' + CLASS_POPUP_BUTTON, popupElement);\n\t\tvar input = popupElement.querySelector('.' + CLASS_POPUP_INPUT + ' input');\n\t\tvar popup = {\n\t\t\telement: popupElement,\n\t\t\tclose: function(index, animate) {\n\t\t\t\tif(popupElement) {\n\t\t\t\t\tvar result = callback && callback({\n\t\t\t\t\t\tindex: index || 0,\n\t\t\t\t\t\tvalue: input && input.value || ''\n\t\t\t\t\t});\n\t\t\t\t\tif(result === false) { //返回false则不关闭当前popup\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(animate !== false) {\n\t\t\t\t\t\tpopupElement.classList.remove(CLASS_POPUP_IN);\n\t\t\t\t\t\tpopupElement.classList.add(CLASS_POPUP_OUT);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tremovePopupElement();\n\t\t\t\t\t}\n\t\t\t\t\tpopupStack.pop();\n\t\t\t\t\t//如果还有其他popup，则不remove backdrop\n\t\t\t\t\tif(popupStack.length) {\n\t\t\t\t\t\tpopupStack[popupStack.length - 1]['show'](animate);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbackdrop.classList.remove(CLASS_ACTIVE);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tvar handleEvent = function(e) {\n\t\t\tpopup.close(btns.indexOf(e.target));\n\t\t};\n\t\t$(popupElement).on('tap', '.' + CLASS_POPUP_BUTTON, handleEvent);\n\t\tif(popupStack.length) {\n\t\t\tpopupStack[popupStack.length - 1]['hide']();\n\t\t}\n\t\tpopupStack.push({\n\t\t\tclose: popup.close,\n\t\t\tshow: function(animate) {\n\t\t\t\tpopupElement.style.display = 'block';\n\t\t\t\tpopupElement.offsetHeight;\n\t\t\t\tpopupElement.classList.add(CLASS_POPUP_IN);\n\t\t\t},\n\t\t\thide: function() {\n\t\t\t\tpopupElement.style.display = 'none';\n\t\t\t\tpopupElement.classList.remove(CLASS_POPUP_IN);\n\t\t\t}\n\t\t});\n\t\treturn popup;\n\t};\n\tvar createAlert = function(message, title, btnValue, callback, type) {\n\t\tif(typeof message === 'undefined') {\n\t\t\treturn;\n\t\t} else {\n\t\t\tif(typeof title === 'function') {\n\t\t\t\tcallback = title;\n\t\t\t\ttype = btnValue;\n\t\t\t\ttitle = null;\n\t\t\t\tbtnValue = null;\n\t\t\t} else if(typeof btnValue === 'function') {\n\t\t\t\ttype = callback;\n\t\t\t\tcallback = btnValue;\n\t\t\t\tbtnValue = null;\n\t\t\t}\n\t\t}\n\t\tif(!$.os.plus || type === 'div') {\n\t\t\treturn createPopup(createInner(message, title || '提示') + createButtons([btnValue || '确定']), callback);\n\t\t}\n\t\treturn plus.nativeUI.alert(message, callback, title || '提示', btnValue || '确定');\n\t};\n\tvar createConfirm = function(message, title, btnArray, callback, type) {\n\t\tif(typeof message === 'undefined') {\n\t\t\treturn;\n\t\t} else {\n\t\t\tif(typeof title === 'function') {\n\t\t\t\tcallback = title;\n\t\t\t\ttype = btnArray;\n\t\t\t\ttitle = null;\n\t\t\t\tbtnArray = null;\n\t\t\t} else if(typeof btnArray === 'function') {\n\t\t\t\ttype = callback;\n\t\t\t\tcallback = btnArray;\n\t\t\t\tbtnArray = null;\n\t\t\t}\n\t\t}\n\t\tif(!$.os.plus || type === 'div') {\n\t\t\treturn createPopup(createInner(message, title || '提示') + createButtons(btnArray || ['取消', '确认']), callback);\n\t\t}\n\t\treturn plus.nativeUI.confirm(message, callback, title, btnArray || ['取消', '确认']);\n\t};\n\tvar createPrompt = function(message, placeholder, title, btnArray, callback, type) {\n\t\tif(typeof message === 'undefined') {\n\t\t\treturn;\n\t\t} else {\n\t\t\tif(typeof placeholder === 'function') {\n\t\t\t\tcallback = placeholder;\n\t\t\t\ttype = title;\n\t\t\t\tplaceholder = null;\n\t\t\t\ttitle = null;\n\t\t\t\tbtnArray = null;\n\t\t\t} else if(typeof title === 'function') {\n\t\t\t\tcallback = title;\n\t\t\t\ttype = btnArray;\n\t\t\t\ttitle = null;\n\t\t\t\tbtnArray = null;\n\t\t\t} else if(typeof btnArray === 'function') {\n\t\t\t\ttype = callback;\n\t\t\t\tcallback = btnArray;\n\t\t\t\tbtnArray = null;\n\t\t\t}\n\t\t}\n\t\tif(!$.os.plus || type === 'div') {\n\t\t\treturn createPopup(createInner(message, title || '提示', createInput(placeholder)) + createButtons(btnArray || ['取消', '确认']), callback);\n\t\t}\n\t\treturn plus.nativeUI.prompt(message, callback, title || '提示', placeholder, btnArray || ['取消', '确认']);\n\t};\n\tvar closePopup = function() {\n\t\tif(popupStack.length) {\n\t\t\tpopupStack[popupStack.length - 1]['close']();\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\tvar closePopups = function() {\n\t\twhile(popupStack.length) {\n\t\t\tpopupStack[popupStack.length - 1]['close']();\n\t\t}\n\t};\n\n\t$.closePopup = closePopup;\n\t$.closePopups = closePopups;\n\t$.alert = createAlert;\n\t$.confirm = createConfirm;\n\t$.prompt = createPrompt;\n})(mui, window, document);\n(function($, document) {\n\tvar CLASS_PROGRESSBAR = 'mui-progressbar';\n\tvar CLASS_PROGRESSBAR_IN = 'mui-progressbar-in';\n\tvar CLASS_PROGRESSBAR_OUT = 'mui-progressbar-out';\n\tvar CLASS_PROGRESSBAR_INFINITE = 'mui-progressbar-infinite';\n\n\tvar SELECTOR_PROGRESSBAR = '.mui-progressbar';\n\n\tvar _findProgressbar = function(container) {\n\t\tcontainer = $(container || 'body');\n\t\tif(container.length === 0) return;\n\t\tcontainer = container[0];\n\t\tif(container.classList.contains(CLASS_PROGRESSBAR)) {\n\t\t\treturn container;\n\t\t}\n\t\tvar progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR);\n\t\tif(progressbars) {\n\t\t\tfor(var i = 0, len = progressbars.length; i < len; i++) {\n\t\t\t\tvar progressbar = progressbars[i];\n\t\t\t\tif(progressbar.parentNode === container) {\n\t\t\t\t\treturn progressbar;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t/**\n\t * 创建并显示进度条 \n\t * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\n\t * @param {Object} progress 可选，undefined表示循环，数字表示具体进度\n\t * @param {Object} color 可选，指定颜色样式(目前暂未提供实际样式，可暂时不暴露此参数)\n\t */\n\tvar showProgressbar = function(container, progress, color) {\n\t\tif(typeof container === 'number') {\n\t\t\tcolor = progress;\n\t\t\tprogress = container;\n\t\t\tcontainer = 'body';\n\t\t}\n\t\tcontainer = $(container || 'body');\n\t\tif(container.length === 0) return;\n\t\tcontainer = container[0];\n\t\tvar progressbar;\n\t\tif(container.classList.contains(CLASS_PROGRESSBAR)) {\n\t\t\tprogressbar = container;\n\t\t} else {\n\t\t\tvar progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR + ':not(.' + CLASS_PROGRESSBAR_OUT + ')');\n\t\t\tif(progressbars) {\n\t\t\t\tfor(var i = 0, len = progressbars.length; i < len; i++) {\n\t\t\t\t\tvar _progressbar = progressbars[i];\n\t\t\t\t\tif(_progressbar.parentNode === container) {\n\t\t\t\t\t\tprogressbar = _progressbar;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!progressbar) {\n\t\t\t\tprogressbar = document.createElement('span');\n\t\t\t\tprogressbar.className = CLASS_PROGRESSBAR + ' ' + CLASS_PROGRESSBAR_IN + (typeof progress !== 'undefined' ? '' : (' ' + CLASS_PROGRESSBAR_INFINITE)) + (color ? (' ' + CLASS_PROGRESSBAR + '-' + color) : '');\n\t\t\t\tif(typeof progress !== 'undefined') {\n\t\t\t\t\tprogressbar.innerHTML = '<span></span>';\n\t\t\t\t}\n\t\t\t\tcontainer.appendChild(progressbar);\n\t\t\t} else {\n\t\t\t\tprogressbar.classList.add(CLASS_PROGRESSBAR_IN);\n\t\t\t}\n\t\t}\n\t\tif(progress) setProgressbar(container, progress);\n\t\treturn progressbar;\n\t};\n\t/**\n\t * 关闭进度条 \n\t * @param {Object} container 可选，默认body，支持selector,DOM Node,mui wrapper\n\t */\n\tvar hideProgressbar = function(container) {\n\t\tvar progressbar = _findProgressbar(container);\n\t\tif(!progressbar) {\n\t\t\treturn;\n\t\t}\n\t\tvar classList = progressbar.classList;\n\t\tif(!classList.contains(CLASS_PROGRESSBAR_IN) || classList.contains(CLASS_PROGRESSBAR_OUT)) {\n\t\t\treturn;\n\t\t}\n\t\tclassList.remove(CLASS_PROGRESSBAR_IN);\n\t\tclassList.add(CLASS_PROGRESSBAR_OUT);\n\t\tprogressbar.addEventListener('webkitAnimationEnd', function() {\n\t\t\tprogressbar.parentNode && progressbar.parentNode.removeChild(progressbar);\n\t\t\tprogressbar = null;\n\t\t});\n\t\treturn;\n\t};\n\t/**\n\t * 设置指定进度条进度 \n\t * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\n\t * @param {Object} progress 可选，默认0 取值范围[0-100]\n\t * @param {Object} speed 进度条动画时间\n\t */\n\tvar setProgressbar = function(container, progress, speed) {\n\t\tif(typeof container === 'number') {\n\t\t\tspeed = progress;\n\t\t\tprogress = container;\n\t\t\tcontainer = false;\n\t\t}\n\t\tvar progressbar = _findProgressbar(container);\n\t\tif(!progressbar || progressbar.classList.contains(CLASS_PROGRESSBAR_INFINITE)) {\n\t\t\treturn;\n\t\t}\n\t\tif(progress) progress = Math.min(Math.max(progress, 0), 100);\n\t\tprogressbar.offsetHeight;\n\t\tvar span = progressbar.querySelector('span');\n\t\tif(span) {\n\t\t\tvar style = span.style;\n\t\t\tstyle.webkitTransform = 'translate3d(' + (-100 + progress) + '%,0,0)';\n\t\t\tif(typeof speed !== 'undefined') {\n\t\t\t\tstyle.webkitTransitionDuration = speed + 'ms';\n\t\t\t} else {\n\t\t\t\tstyle.webkitTransitionDuration = '';\n\t\t\t}\n\t\t}\n\t\treturn progressbar;\n\t};\n\t$.fn.progressbar = function(options) {\n\t\tvar progressbarApis = [];\n\t\toptions = options || {};\n\t\tthis.each(function() {\n\t\t\tvar self = this;\n\t\t\tvar progressbarApi = self.mui_plugin_progressbar;\n\t\t\tif(!progressbarApi) {\n\t\t\t\tself.mui_plugin_progressbar = progressbarApi = {\n\t\t\t\t\toptions: options,\n\t\t\t\t\tsetOptions: function(options) {\n\t\t\t\t\t\tthis.options = options;\n\t\t\t\t\t},\n\t\t\t\t\tshow: function() {\n\t\t\t\t\t\treturn showProgressbar(self, this.options.progress, this.options.color);\n\t\t\t\t\t},\n\t\t\t\t\tsetProgress: function(progress) {\n\t\t\t\t\t\treturn setProgressbar(self, progress);\n\t\t\t\t\t},\n\t\t\t\t\thide: function() {\n\t\t\t\t\t\treturn hideProgressbar(self);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else if(options) {\n\t\t\t\tprogressbarApi.setOptions(options);\n\t\t\t}\n\t\t\tprogressbarApis.push(progressbarApi);\n\t\t});\n\t\treturn progressbarApis.length === 1 ? progressbarApis[0] : progressbarApis;\n\t};\n\t//\t$.setProgressbar = setProgressbar;\n\t//\t$.showProgressbar = showProgressbar;\n\t//\t$.hideProgressbar = hideProgressbar;\n})(mui, document);\n/**\n * Input(TODO resize)\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n(function($, window, document) {\n\tvar CLASS_ICON = 'mui-icon';\n\tvar CLASS_ICON_CLEAR = 'mui-icon-clear';\n\tvar CLASS_ICON_SPEECH = 'mui-icon-speech';\n\tvar CLASS_ICON_SEARCH = 'mui-icon-search';\n\tvar CLASS_ICON_PASSWORD = 'mui-icon-eye';\n\tvar CLASS_INPUT_ROW = 'mui-input-row';\n\tvar CLASS_PLACEHOLDER = 'mui-placeholder';\n\tvar CLASS_TOOLTIP = 'mui-tooltip';\n\tvar CLASS_HIDDEN = 'mui-hidden';\n\tvar CLASS_FOCUSIN = 'mui-focusin';\n\tvar SELECTOR_ICON_CLOSE = '.' + CLASS_ICON_CLEAR;\n\tvar SELECTOR_ICON_SPEECH = '.' + CLASS_ICON_SPEECH;\n\tvar SELECTOR_ICON_PASSWORD = '.' + CLASS_ICON_PASSWORD;\n\tvar SELECTOR_PLACEHOLDER = '.' + CLASS_PLACEHOLDER;\n\tvar SELECTOR_TOOLTIP = '.' + CLASS_TOOLTIP;\n\n\tvar findRow = function(target) {\n\t\tfor(; target && target !== document; target = target.parentNode) {\n\t\t\tif(target.classList && target.classList.contains(CLASS_INPUT_ROW)) {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\tvar Input = function(element, options) {\n\t\tthis.element = element;\n\t\tthis.options = options || {\n\t\t\tactions: 'clear'\n\t\t};\n\t\tif(~this.options.actions.indexOf('slider')) { //slider\n\t\t\tthis.sliderActionClass = CLASS_TOOLTIP + ' ' + CLASS_HIDDEN;\n\t\t\tthis.sliderActionSelector = SELECTOR_TOOLTIP;\n\t\t} else { //clear,speech,search\n\t\t\tif(~this.options.actions.indexOf('clear')) {\n\t\t\t\tthis.clearActionClass = CLASS_ICON + ' ' + CLASS_ICON_CLEAR + ' ' + CLASS_HIDDEN;\n\t\t\t\tthis.clearActionSelector = SELECTOR_ICON_CLOSE;\n\t\t\t}\n\t\t\tif(~this.options.actions.indexOf('speech')) { //only for 5+\n\t\t\t\tthis.speechActionClass = CLASS_ICON + ' ' + CLASS_ICON_SPEECH;\n\t\t\t\tthis.speechActionSelector = SELECTOR_ICON_SPEECH;\n\t\t\t}\n\t\t\tif(~this.options.actions.indexOf('search')) {\n\t\t\t\tthis.searchActionClass = CLASS_PLACEHOLDER;\n\t\t\t\tthis.searchActionSelector = SELECTOR_PLACEHOLDER;\n\t\t\t}\n\t\t\tif(~this.options.actions.indexOf('password')) {\n\t\t\t\tthis.passwordActionClass = CLASS_ICON + ' ' + CLASS_ICON_PASSWORD;\n\t\t\t\tthis.passwordActionSelector = SELECTOR_ICON_PASSWORD;\n\t\t\t}\n\t\t}\n\t\tthis.init();\n\t};\n\tInput.prototype.init = function() {\n\t\tthis.initAction();\n\t\tthis.initElementEvent();\n\t};\n\tInput.prototype.initAction = function() {\n\t\tvar self = this;\n\n\t\tvar row = self.element.parentNode;\n\t\tif(row) {\n\t\t\tif(self.sliderActionClass) {\n\t\t\t\tself.sliderAction = self.createAction(row, self.sliderActionClass, self.sliderActionSelector);\n\t\t\t} else {\n\t\t\t\tif(self.searchActionClass) {\n\t\t\t\t\tself.searchAction = self.createAction(row, self.searchActionClass, self.searchActionSelector);\n\t\t\t\t\tself.searchAction.addEventListener('tap', function(e) {\n\t\t\t\t\t\t$.focus(self.element);\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif(self.speechActionClass) {\n\t\t\t\t\tself.speechAction = self.createAction(row, self.speechActionClass, self.speechActionSelector);\n\t\t\t\t\tself.speechAction.addEventListener('click', $.stopPropagation);\n\t\t\t\t\tself.speechAction.addEventListener('tap', function(event) {\n\t\t\t\t\t\tself.speechActionClick(event);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif(self.clearActionClass) {\n\t\t\t\t\tself.clearAction = self.createAction(row, self.clearActionClass, self.clearActionSelector);\n\t\t\t\t\tself.clearAction.addEventListener('tap', function(event) {\n\t\t\t\t\t\tself.clearActionClick(event);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif(self.passwordActionClass) {\n\t\t\t\t\tself.passwordAction = self.createAction(row, self.passwordActionClass, self.passwordActionSelector);\n\t\t\t\t\tself.passwordAction.addEventListener('tap', function(event) {\n\t\t\t\t\t\tself.passwordActionClick(event);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tInput.prototype.createAction = function(row, actionClass, actionSelector) {\n\t\tvar action = row.querySelector(actionSelector);\n\t\tif(!action) {\n\t\t\tvar action = document.createElement('span');\n\t\t\taction.className = actionClass;\n\t\t\tif(actionClass === this.searchActionClass) {\n\t\t\t\taction.innerHTML = '<span class=\"' + CLASS_ICON + ' ' + CLASS_ICON_SEARCH + '\"></span><span>' + this.element.getAttribute('placeholder') + '</span>';\n\t\t\t\tthis.element.setAttribute('placeholder', '');\n\t\t\t\tif(this.element.value.trim()) {\n\t\t\t\t\trow.classList.add('mui-active');\n\t\t\t\t}\n\t\t\t}\n\t\t\trow.insertBefore(action, this.element.nextSibling);\n\t\t}\n\t\treturn action;\n\t};\n\tInput.prototype.initElementEvent = function() {\n\t\tvar element = this.element;\n\n\t\tif(this.sliderActionClass) {\n\t\t\tvar tooltip = this.sliderAction;\n\t\t\tvar timer = null;\n\t\t\tvar showTip = function() { //每次重新计算是因为控件可能被隐藏，初始化时计算是不正确的\n\t\t\t\ttooltip.classList.remove(CLASS_HIDDEN);\n\t\t\t\tvar offsetLeft = element.offsetLeft;\n\t\t\t\tvar width = element.offsetWidth - 28;\n\t\t\t\tvar tooltipWidth = tooltip.offsetWidth;\n\t\t\t\tvar distince = Math.abs(element.max - element.min);\n\t\t\t\tvar scaleWidth = (width / distince) * Math.abs(element.value - element.min);\n\t\t\t\ttooltip.style.left = (14 + offsetLeft + scaleWidth - tooltipWidth / 2) + 'px';\n\t\t\t\ttooltip.innerText = element.value;\n\t\t\t\tif(timer) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\t\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\ttooltip.classList.add(CLASS_HIDDEN);\n\t\t\t\t}, 1000);\n\t\t\t};\n\t\t\telement.addEventListener('input', showTip);\n\t\t\telement.addEventListener('tap', showTip);\n\t\t\telement.addEventListener($.EVENT_MOVE, function(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t} else {\n\t\t\tif(this.clearActionClass) {\n\t\t\t\tvar action = this.clearAction;\n\t\t\t\tif(!action) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$.each(['keyup', 'change', 'input', 'focus', 'cut', 'paste'], function(index, type) {\n\t\t\t\t\t(function(type) {\n\t\t\t\t\t\telement.addEventListener(type, function() {\n\t\t\t\t\t\t\taction.classList[element.value.trim() ? 'remove' : 'add'](CLASS_HIDDEN);\n\t\t\t\t\t\t});\n\t\t\t\t\t})(type);\n\t\t\t\t});\n\t\t\t\telement.addEventListener('blur', function() {\n\t\t\t\t\taction.classList.add(CLASS_HIDDEN);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif(this.searchActionClass) {\n\t\t\t\telement.addEventListener('focus', function() {\n\t\t\t\t\telement.parentNode.classList.add('mui-active');\n\t\t\t\t});\n\t\t\t\telement.addEventListener('blur', function() {\n\t\t\t\t\tif(!element.value.trim()) {\n\t\t\t\t\t\telement.parentNode.classList.remove('mui-active');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\tInput.prototype.setPlaceholder = function(text) {\n\t\tif(this.searchActionClass) {\n\t\t\tvar placeholder = this.element.parentNode.querySelector(SELECTOR_PLACEHOLDER);\n\t\t\tplaceholder && (placeholder.getElementsByTagName('span')[1].innerText = text);\n\t\t} else {\n\t\t\tthis.element.setAttribute('placeholder', text);\n\t\t}\n\t};\n\tInput.prototype.passwordActionClick = function(event) {\n\t\tif(this.element.type === 'text') {\n\t\t\tthis.element.type = 'password';\n\t\t} else {\n\t\t\tthis.element.type = 'text';\n\t\t}\n\t\tthis.passwordAction.classList.toggle('mui-active');\n\t\tevent.preventDefault();\n\t};\n\tInput.prototype.clearActionClick = function(event) {\n\t\tvar self = this;\n\t\tself.element.value = '';\n\t\t$.focus(self.element);\n\t\tself.clearAction.classList.add(CLASS_HIDDEN);\n\t\tevent.preventDefault();\n\t};\n\tInput.prototype.speechActionClick = function(event) {\n\t\tif(window.plus) {\n\t\t\tvar self = this;\n\t\t\tvar oldValue = self.element.value;\n\t\t\tself.element.value = '';\n\t\t\tdocument.body.classList.add(CLASS_FOCUSIN);\n\t\t\tplus.speech.startRecognize({\n\t\t\t\tengine: 'iFly'\n\t\t\t}, function(s) {\n\t\t\t\tself.element.value += s;\n\t\t\t\t$.focus(self.element);\n\t\t\t\tplus.speech.stopRecognize();\n\t\t\t\t$.trigger(self.element, 'recognized', {\n\t\t\t\t\tvalue: self.element.value\n\t\t\t\t});\n\t\t\t\tif(oldValue !== self.element.value) {\n\t\t\t\t\t$.trigger(self.element, 'change');\n\t\t\t\t\t$.trigger(self.element, 'input');\n\t\t\t\t}\n\t\t\t\t// document.body.classList.remove(CLASS_FOCUSIN);\n\t\t\t}, function(e) {\n\t\t\t\tdocument.body.classList.remove(CLASS_FOCUSIN);\n\t\t\t});\n\t\t} else {\n\t\t\talert('only for 5+');\n\t\t}\n\t\tevent.preventDefault();\n\t};\n\t$.fn.input = function(options) {\n\t\tvar inputApis = [];\n\t\tthis.each(function() {\n\t\t\tvar inputApi = null;\n\t\t\tvar actions = [];\n\t\t\tvar row = findRow(this.parentNode);\n\t\t\tif(this.type === 'range' && row.classList.contains('mui-input-range')) {\n\t\t\t\tactions.push('slider');\n\t\t\t} else {\n\t\t\t\tvar classList = this.classList;\n\t\t\t\tif(classList.contains('mui-input-clear')) {\n\t\t\t\t\tactions.push('clear');\n\t\t\t\t}\n\t\t\t\tif(!($.os.android && $.os.stream) && classList.contains('mui-input-speech')) {\n\t\t\t\t\tactions.push('speech');\n\t\t\t\t}\n\t\t\t\tif(classList.contains('mui-input-password')) {\n\t\t\t\t\tactions.push('password');\n\t\t\t\t}\n\t\t\t\tif(this.type === 'search' && row.classList.contains('mui-search')) {\n\t\t\t\t\tactions.push('search');\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar id = this.getAttribute('data-input-' + actions[0]);\n\t\t\tif(!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\tinputApi = $.data[id] = new Input(this, {\n\t\t\t\t\tactions: actions.join(',')\n\t\t\t\t});\n\t\t\t\tfor(var i = 0, len = actions.length; i < len; i++) {\n\t\t\t\t\tthis.setAttribute('data-input-' + actions[i], id);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinputApi = $.data[id];\n\t\t\t}\n\t\t\tinputApis.push(inputApi);\n\t\t});\n\t\treturn inputApis.length === 1 ? inputApis[0] : inputApis;\n\t};\n\t$.ready(function() {\n\t\t$('.mui-input-row input').input();\n\t});\n})(mui, window, document);\n(function($, window) {\n\tvar CLASS_ACTIVE = 'mui-active';\n\tvar rgbaRegex = /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d*(?:\\.\\d+)?)\\)$/;\n\tvar getColor = function(colorStr) {\n\t\tvar matches = colorStr.match(rgbaRegex);\n\t\tif(matches && matches.length === 5) {\n\t\t\treturn [\n\t\t\t\tmatches[1],\n\t\t\t\tmatches[2],\n\t\t\t\tmatches[3],\n\t\t\t\tmatches[4]\n\t\t\t];\n\t\t}\n\t\treturn [];\n\t};\n\tvar Transparent = function(element, options) {\n\t\tthis.element = element;\n\t\tthis.options = $.extend({\n\t\t\ttop: 0, //距离顶部高度(到达该高度即触发)\n\t\t\toffset: 150, //滚动透明距离\n\t\t\tduration: 16, //过渡时间\n\t\t\tscrollby: window //监听滚动距离容器\n\t\t}, options || {});\n\n\t\tthis.scrollByElem = this.options.scrollby || window;\n\t\tif(!this.scrollByElem) {\n\t\t\tthrow new Error(\"监听滚动的元素不存在\");\n\t\t}\n\t\tthis.isNativeScroll = false;\n\t\tif(this.scrollByElem === window) {\n\t\t\tthis.isNativeScroll = true;\n\t\t} else if(!~this.scrollByElem.className.indexOf('mui-scroll-wrapper')) {\n\t\t\tthis.isNativeScroll = true;\n\t\t}\n\n\t\tthis._style = this.element.style;\n\t\tthis._bgColor = this._style.backgroundColor;\n\t\tvar color = getColor(mui.getStyles(this.element, 'backgroundColor'));\n\t\tif(color.length) {\n\t\t\tthis._R = color[0];\n\t\t\tthis._G = color[1];\n\t\t\tthis._B = color[2];\n\t\t\tthis._A = parseFloat(color[3]);\n\t\t\tthis.lastOpacity = this._A;\n\t\t\tthis._bufferFn = $.buffer(this.handleScroll, this.options.duration, this);\n\t\t\tthis.initEvent();\n\t\t} else {\n\t\t\tthrow new Error(\"元素背景颜色必须为RGBA\");\n\t\t}\n\t};\n\n\tTransparent.prototype.initEvent = function() {\n\t\tthis.scrollByElem.addEventListener('scroll', this._bufferFn);\n\t\tif(this.isNativeScroll) { //原生scroll\n\t\t\tthis.scrollByElem.addEventListener($.EVENT_MOVE, this._bufferFn);\n\t\t}\n\t}\n\tTransparent.prototype.handleScroll = function(e) {\n\t\tvar y = window.scrollY;\n\t\tif(!this.isNativeScroll && e && e.detail) {\n\t\t\ty = -e.detail.y;\n\t\t}\n\t\tvar opacity = (y - this.options.top) / this.options.offset + this._A;\n\t\topacity = Math.min(Math.max(this._A, opacity), 1);\n\t\tthis._style.backgroundColor = 'rgba(' + this._R + ',' + this._G + ',' + this._B + ',' + opacity + ')';\n\t\tif(opacity > this._A) {\n\t\t\tthis.element.classList.add(CLASS_ACTIVE);\n\t\t} else {\n\t\t\tthis.element.classList.remove(CLASS_ACTIVE);\n\t\t}\n\t\tif(this.lastOpacity !== opacity) {\n\t\t\t$.trigger(this.element, 'alpha', {\n\t\t\t\talpha: opacity\n\t\t\t});\n\t\t\tthis.lastOpacity = opacity;\n\t\t}\n\t};\n\tTransparent.prototype.destory = function() {\n\t\tthis.scrollByElem.removeEventListener('scroll', this._bufferFn);\n\t\tthis.scrollByElem.removeEventListener($.EVENT_MOVE, this._bufferFn);\n\t\tthis.element.style.backgroundColor = this._bgColor;\n\t\tthis.element.mui_plugin_transparent = null;\n\t};\n\t$.fn.transparent = function(options) {\n\t\toptions = options || {};\n\t\tvar transparentApis = [];\n\t\tthis.each(function() {\n\t\t\tvar transparentApi = this.mui_plugin_transparent;\n\t\t\tif(!transparentApi) {\n\t\t\t\tvar top = this.getAttribute('data-top');\n\t\t\t\tvar offset = this.getAttribute('data-offset');\n\t\t\t\tvar duration = this.getAttribute('data-duration');\n\t\t\t\tvar scrollby = this.getAttribute('data-scrollby');\n\t\t\t\tif(top !== null && typeof options.top === 'undefined') {\n\t\t\t\t\toptions.top = top;\n\t\t\t\t}\n\t\t\t\tif(offset !== null && typeof options.offset === 'undefined') {\n\t\t\t\t\toptions.offset = offset;\n\t\t\t\t}\n\t\t\t\tif(duration !== null && typeof options.duration === 'undefined') {\n\t\t\t\t\toptions.duration = duration;\n\t\t\t\t}\n\t\t\t\tif(scrollby !== null && typeof options.scrollby === 'undefined') {\n\t\t\t\t\toptions.scrollby = document.querySelector(scrollby) || window;\n\t\t\t\t}\n\t\t\t\ttransparentApi = this.mui_plugin_transparent = new Transparent(this, options);\n\t\t\t}\n\t\t\ttransparentApis.push(transparentApi);\n\t\t});\n\t\treturn transparentApis.length === 1 ? transparentApis[0] : transparentApis;\n\t};\n\t$.ready(function() {\n\t\t$('.mui-bar-transparent').transparent();\n\t});\n})(mui, window);\n/**\n * 数字输入框\n * varstion 1.0.1\n * by Houfeng\n * Houfeng@DCloud.io\n */\n\n(function($) {\n\n\tvar touchSupport = ('ontouchstart' in document);\n\tvar tapEventName = touchSupport ? 'tap' : 'click';\n\tvar changeEventName = 'change';\n\tvar holderClassName = 'mui-numbox';\n\tvar plusClassSelector = '.mui-btn-numbox-plus,.mui-numbox-btn-plus';\n\tvar minusClassSelector = '.mui-btn-numbox-minus,.mui-numbox-btn-minus';\n\tvar inputClassSelector = '.mui-input-numbox,.mui-numbox-input';\n\n\tvar Numbox = $.Numbox = $.Class.extend({\n\t\t/**\n\t\t * 构造函数\n\t\t **/\n\t\tinit: function(holder, options) {\n\t\t\tvar self = this;\n\t\t\tif(!holder) {\n\t\t\t\tthrow \"构造 numbox 时缺少容器元素\";\n\t\t\t}\n\t\t\tself.holder = holder;\n\t\t\toptions = options || {};\n\t\t\toptions.step = parseInt(options.step || 1);\n\t\t\tself.options = options;\n\t\t\tself.input = $.qsa(inputClassSelector, self.holder)[0];\n\t\t\tself.plus = $.qsa(plusClassSelector, self.holder)[0];\n\t\t\tself.minus = $.qsa(minusClassSelector, self.holder)[0];\n\t\t\tself.checkValue();\n\t\t\tself.initEvent();\n\t\t},\n\t\t/**\n\t\t * 初始化事件绑定\n\t\t **/\n\t\tinitEvent: function() {\n\t\t\tvar self = this;\n\t\t\tself.plus.addEventListener(tapEventName, function(event) {\n\t\t\t\tvar val = parseInt(self.input.value) + self.options.step;\n\t\t\t\tself.input.value = val.toString();\n\t\t\t\t$.trigger(self.input, changeEventName, null);\n\t\t\t});\n\t\t\tself.minus.addEventListener(tapEventName, function(event) {\n\t\t\t\tvar val = parseInt(self.input.value) - self.options.step;\n\t\t\t\tself.input.value = val.toString();\n\t\t\t\t$.trigger(self.input, changeEventName, null);\n\t\t\t});\n\t\t\tself.input.addEventListener(changeEventName, function(event) {\n\t\t\t\tself.checkValue();\n\t\t\t\tvar val = parseInt(self.input.value);\n\t\t\t\t//触发顶层容器\n\t\t\t\t$.trigger(self.holder, changeEventName, {\n\t\t\t\t\tvalue: val\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * 获取当前值\n\t\t **/\n\t\tgetValue: function() {\n\t\t\tvar self = this;\n\t\t\treturn parseInt(self.input.value);\n\t\t},\n\t\t/**\n\t\t * 验证当前值是法合法\n\t\t **/\n\t\tcheckValue: function() {\n\t\t\tvar self = this;\n\t\t\tvar val = self.input.value;\n\t\t\tif(val == null || val == '' || isNaN(val)) {\n\t\t\t\tself.input.value = self.options.min || 0;\n\t\t\t\tself.minus.disabled = self.options.min != null;\n\t\t\t} else {\n\t\t\t\tvar val = parseInt(val);\n\t\t\t\tif(self.options.max != null && !isNaN(self.options.max) && val >= parseInt(self.options.max)) {\n\t\t\t\t\tval = self.options.max;\n\t\t\t\t\tself.plus.disabled = true;\n\t\t\t\t} else {\n\t\t\t\t\tself.plus.disabled = false;\n\t\t\t\t}\n\t\t\t\tif(self.options.min != null && !isNaN(self.options.min) && val <= parseInt(self.options.min)) {\n\t\t\t\t\tval = self.options.min;\n\t\t\t\t\tself.minus.disabled = true;\n\t\t\t\t} else {\n\t\t\t\t\tself.minus.disabled = false;\n\t\t\t\t}\n\t\t\t\tself.input.value = val;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * 更新选项\n\t\t **/\n\t\tsetOption: function(name, value) {\n\t\t\tvar self = this;\n\t\t\tself.options[name] = value;\n\t\t},\n\t\t/**\n\t\t * 动态设置新值\n\t\t **/\n\t\tsetValue: function(value) {\n\t\t\tthis.input.value = value;\n\t\t\tthis.checkValue();\n\t\t}\n\t});\n\n\t$.fn.numbox = function(options) {\n\t\tvar instanceArray = [];\n\t\t//遍历选择的元素\n\t\tthis.each(function(i, element) {\n\t\t\tif(element.numbox) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(options) {\n\t\t\t\telement.numbox = new Numbox(element, options);\n\t\t\t} else {\n\t\t\t\tvar optionsText = element.getAttribute('data-numbox-options');\n\t\t\t\tvar options = optionsText ? JSON.parse(optionsText) : {};\n\t\t\t\toptions.step = element.getAttribute('data-numbox-step') || options.step;\n\t\t\t\toptions.min = element.getAttribute('data-numbox-min') || options.min;\n\t\t\t\toptions.max = element.getAttribute('data-numbox-max') || options.max;\n\t\t\t\telement.numbox = new Numbox(element, options);\n\t\t\t}\n\t\t});\n\t\treturn this[0] ? this[0].numbox : null;\n\t}\n\n\t//自动处理 class='mui-locker' 的 dom\n\t$.ready(function() {\n\t\t$('.' + holderClassName).numbox();\n\t});\n\n}(mui));\n/**\n * Button\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n(function($, window, document) {\n\tvar CLASS_ICON = 'mui-icon';\n\tvar CLASS_DISABLED = 'mui-disabled';\n\n\tvar STATE_RESET = 'reset';\n\tvar STATE_LOADING = 'loading';\n\n\tvar defaultOptions = {\n\t\tloadingText: 'Loading...', //文案\n\t\tloadingIcon: 'mui-spinner' + ' ' + 'mui-spinner-white', //图标，可为空\n\t\tloadingIconPosition: 'left' //图标所处位置，仅支持left|right\n\t};\n\n\tvar Button = function(element, options) {\n\t\tthis.element = element;\n\t\tthis.options = $.extend({}, defaultOptions, options);\n\t\tif(!this.options.loadingText) {\n\t\t\tthis.options.loadingText = defaultOptions.loadingText;\n\t\t}\n\t\tif(this.options.loadingIcon === null) {\n\t\t\tthis.options.loadingIcon = 'mui-spinner';\n\t\t\tif($.getStyles(this.element, 'color') === 'rgb(255, 255, 255)') {\n\t\t\t\tthis.options.loadingIcon += ' ' + 'mui-spinner-white';\n\t\t\t}\n\t\t}\n\t\tthis.isInput = this.element.tagName === 'INPUT';\n\t\tthis.resetHTML = this.isInput ? this.element.value : this.element.innerHTML;\n\t\tthis.state = '';\n\t};\n\tButton.prototype.loading = function() {\n\t\tthis.setState(STATE_LOADING);\n\t};\n\tButton.prototype.reset = function() {\n\t\tthis.setState(STATE_RESET);\n\t};\n\tButton.prototype.setState = function(state) {\n\t\tif(this.state === state) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.state = state;\n\t\tif(state === STATE_RESET) {\n\t\t\tthis.element.disabled = false;\n\t\t\tthis.element.classList.remove(CLASS_DISABLED);\n\t\t\tthis.setHtml(this.resetHTML);\n\t\t} else if(state === STATE_LOADING) {\n\t\t\tthis.element.disabled = true;\n\t\t\tthis.element.classList.add(CLASS_DISABLED);\n\t\t\tvar html = this.isInput ? this.options.loadingText : ('<span>' + this.options.loadingText + '</span>');\n\t\t\tif(this.options.loadingIcon && !this.isInput) {\n\t\t\t\tif(this.options.loadingIconPosition === 'right') {\n\t\t\t\t\thtml += '&nbsp;<span class=\"' + this.options.loadingIcon + '\"></span>';\n\t\t\t\t} else {\n\t\t\t\t\thtml = '<span class=\"' + this.options.loadingIcon + '\"></span>&nbsp;' + html;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setHtml(html);\n\t\t}\n\t};\n\tButton.prototype.setHtml = function(html) {\n\t\tif(this.isInput) {\n\t\t\tthis.element.value = html;\n\t\t} else {\n\t\t\tthis.element.innerHTML = html;\n\t\t}\n\t}\n\t$.fn.button = function(state) {\n\t\tvar buttonApis = [];\n\t\tthis.each(function() {\n\t\t\tvar buttonApi = this.mui_plugin_button;\n\t\t\tif(!buttonApi) {\n\t\t\t\tvar loadingText = this.getAttribute('data-loading-text');\n\t\t\t\tvar loadingIcon = this.getAttribute('data-loading-icon');\n\t\t\t\tvar loadingIconPosition = this.getAttribute('data-loading-icon-position');\n\t\t\t\tthis.mui_plugin_button = buttonApi = new Button(this, {\n\t\t\t\t\tloadingText: loadingText,\n\t\t\t\t\tloadingIcon: loadingIcon,\n\t\t\t\t\tloadingIconPosition: loadingIconPosition\n\t\t\t\t});\n\t\t\t}\n\t\t\tif(state === STATE_LOADING || state === STATE_RESET) {\n\t\t\t\tbuttonApi.setState(state);\n\t\t\t}\n\t\t\tbuttonApis.push(buttonApi);\n\t\t});\n\t\treturn buttonApis.length === 1 ? buttonApis[0] : buttonApis;\n\t};\n})(mui, window, document);"],"mappings":"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"},"metadata":{},"sourceType":"script"}